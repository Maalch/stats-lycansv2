import{g as _,u as U,a as q,r as k,j as e,d as le}from"./index-CbK5OAJs.js";import{g as F,a as $,u as w,D as M}from"./datasyncExport-iq67S-1e.js";import{i as ie,D,g as ne}from"./deathTypes-DnE41YQZ.js";import{b as X,m as J,a as ae,u as re}from"./api-BDEdefoq.js";import{F as H,B as E,C as K,X as C,Y as z,a as I,b as G}from"./FullscreenChart-CHPnmi2h.js";import{R as W,T as O}from"./CategoricalChart-BZ8XAvTs.js";import{u as se}from"./useJoueursData-CJPzXAdO.js";function Y(h){return h===D.SURVIVALIST_NOT_SAVED?D.BY_WOLF:h}function oe(h){const y=new Set;h.filter(S=>!S.LegacyData||S.LegacyData.deathInformationFilled===!0).forEach(S=>{S.PlayerStats.forEach(f=>{const i=F(f.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});y.add(i)})});const m=Array.from(y);return[...X.filter(S=>m.includes(S)),...m.filter(S=>!X.includes(S)).sort()]}function Q(h){return ne(h)}function ee(h){switch(h){case D.VOTED:return"Mort aux votes";case D.BY_WOLF:case D.SURVIVALIST_NOT_SAVED:return"Kill en Loup";case D.BY_ZOMBIE:return"Kill en Zombie";case D.BY_BEAST:return"Kill en BÃªte";case D.BY_AVATAR_CHAIN:return"Mort d'Avatar";case D.BULLET:return"Tir de Chasseur";case D.BULLET_HUMAN:return"Kill en Chasseur (sur humain)";case D.BULLET_HUMAN_ON_WOLF:return"Kill en Chasseur (loup non-transformÃ©)";case D.BULLET_HUMAN_ON_HUMAN:return"Kill en Chasseur (sur humain)";case D.BULLET_WOLF:return"Kill en Chasseur (sur loup)";case D.SHERIF_SUCCESS:return"Kill en ShÃ©rif";case D.OTHER_AGENT:return"Kill en Agent";case D.AVENGER:return"Kill en Vengeur";case D.SEER:return"Kill en Devin";case D.HANTED:return"Kill avec Potion hantÃ©e";case D.ASSASSIN:return"Kill avec Potion (Assassin)";case D.LOVER_DEATH:return"Kill d'amoureux";case D.BOMB:return"Explosion";case D.CRUSHED:return"Ã‰crasement";case D.STARVATION:return"Famine";case D.STARVATION_AS_BEAST:return"Tuerie bestiale";case D.FALL:return"Chute mortelle";case D.UNKNOWN:return"Kill inconnu";default:return""}}function ce(h){const y=new Set;h.forEach(a=>{a.PlayerStats.forEach(S=>{if(S.DeathType&&ie(S.DeathType)){let f=Y(S.DeathType);if(f===D.BULLET_HUMAN){const i=S.MainRoleInitial;i==="Loup"||i==="Amoureux Loup"?f=D.BULLET_HUMAN_ON_WOLF:f=D.BULLET_HUMAN_ON_HUMAN}f&&y.add(f)}})});const g=Array.from(y),m=[D.BY_WOLF,D.VOTED,D.BULLET,D.BULLET_HUMAN,D.BULLET_HUMAN_ON_WOLF,D.BULLET_HUMAN_ON_HUMAN,D.BULLET_WOLF,D.BY_ZOMBIE,D.ASSASSIN,D.AVENGER,D.LOVER_DEATH];return[...m.filter(a=>g.includes(a)),...g.filter(a=>!m.includes(a)).sort()]}function de(h,y){return h.PlayerStats.filter(g=>g.DeathType&&ie(g.DeathType)&&(g.DeathTiming||g.DeathType)).map(g=>{let m=null,a=null;if(g.KillerName){const f=h.PlayerStats.find(i=>i.Username===g.KillerName);if(f){a=_(f);const i=$(f.MainRoleInitial,f.MainRoleChanges||[]);m=F(i,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1}),i&&i!==f.MainRoleInitial&&(i==="Loup"?m="Loup":i==="Zombie"&&(m="Vaudou"))}}let S=Y(g.DeathType);if(S===D.BULLET_HUMAN){const f=g.MainRoleInitial;f==="Loup"||f==="Amoureux Loup"?S=D.BULLET_HUMAN_ON_WOLF:S=D.BULLET_HUMAN_ON_HUMAN}return{playerId:_(g),playerName:g.Username,deathType:S,killerId:a,killerName:g.KillerName,killerCamp:m}}).filter(g=>{if(!y||y==="Tous les camps")return!0;const m=h.PlayerStats.find(S=>S.Username===g.playerName);return m?F(m.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y:!1})}function he(h,y){const g=[];return h.PlayerStats.forEach(m=>{if(m.KillerName&&m.DeathType){if(m.DeathType===D.VOTED||m.DeathType===D.STARVATION||m.DeathType===D.FALL||m.DeathType===D.BY_AVATAR_CHAIN)return;const a=h.PlayerStats.find(j=>j.Username===m.KillerName);if(!a)return;let S=F(a.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});const f=$(a.MainRoleInitial,a.MainRoleChanges||[]);f&&f!==a.MainRoleInitial&&(f==="Loup"?S="Loup":f==="Zombie"&&(S="Vaudou"));let i=Y(m.DeathType);if(i===D.BULLET_HUMAN){const j=m.MainRoleInitial;j==="Loup"||j==="Amoureux Loup"?i=D.BULLET_HUMAN_ON_WOLF:i=D.BULLET_HUMAN_ON_HUMAN}g.push({killerId:_(a),killerName:a.Username,victimId:_(m),victimName:m.Username,deathType:i,killerCamp:S})}}),y&&y!=="Tous les camps"?g.filter(m=>m.killerCamp===y):g}function ge(h,y){if(h.length===0)return null;const g=h.filter(r=>!r.LegacyData||r.LegacyData.deathInformationFilled===!0);if(g.length===0)return null;const m=[],a={},S={};g.forEach(r=>{de(r,y).forEach(x=>{m.push({...x,gameId:r.Id})}),r.PlayerStats.forEach(x=>{const A=_(x),n=x.Username;S[A]=n,(!y||y==="Tous les camps"||F(x.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y)&&(a[A]=(a[A]||0)+1)})});const f=m.length,i=g.length,j=i>0?f/i:0,T={};m.forEach(r=>{T[r.deathType]=(T[r.deathType]||0)+1});const B=Object.entries(T).map(([r,o])=>({type:r,count:o||0,percentage:f>0?(o||0)/f*100:0})).sort((r,o)=>o.count-r.count),N={};g.forEach(r=>{he(r,y).forEach(x=>{S[x.killerId]=x.killerName,S[x.victimId]=x.victimName,N[x.killerId]||(N[x.killerId]={kills:0,victims:new Set,killsByDeathType:{}}),N[x.killerId].kills++,N[x.killerId].victims.add(x.victimId),N[x.killerId].killsByDeathType[x.deathType]=(N[x.killerId].killsByDeathType[x.deathType]||0)+1})});const R=Object.entries(N).map(([r,o])=>{const x=a[r]||0,A=x>0?o.kills/x:0;return{killerName:S[r]||r,kills:o.kills,victims:Array.from(o.victims).map(n=>S[n]||n),percentage:f>0?o.kills/f*100:0,gamesPlayed:x,averageKillsPerGame:A,killsByDeathType:o.killsByDeathType}}).sort((r,o)=>o.kills-r.kills),b={};m.forEach(r=>{b[r.playerId]||(b[r.playerId]={totalDeaths:0,deathsByType:{},killedById:{},deathDays:[]});const o=b[r.playerId];o.totalDeaths++,o.deathsByType[r.deathType]=(o.deathsByType[r.deathType]||0)+1,r.killerId&&(o.killedById[r.killerId]=(o.killedById[r.killerId]||0)+1)});const P=[];Object.entries(b).forEach(([r,o])=>{const x=S[r]||r,A={};Object.entries(o.killedById).forEach(([n,s])=>{const t=S[n]||n;A[t]=(A[t]||0)+s}),P.push({playerName:x,totalDeaths:o.totalDeaths,deathsByType:o.deathsByType,killedBy:A,deathRate:a[r]>0?o.totalDeaths/a[r]:0,gamesPlayed:a[r]||0})}),Object.entries(a).forEach(([r,o])=>{b[r]||P.push({playerName:S[r]||r,totalDeaths:0,deathsByType:{},killedBy:{},deathRate:0,gamesPlayed:o})});const l=P.sort((r,o)=>o.totalDeaths-r.totalDeaths),d=B.length>0?B[0].type:null,u=R.length>0?R[0].killerName:null;return{totalDeaths:f,totalGames:i,averageDeathsPerGame:j,deathsByType:B,killerStats:R,playerDeathStats:l,mostCommonDeathType:d,mostDeadlyKiller:u}}function me(h,y){const g=h.filter(B=>!B.LegacyData||B.LegacyData.deathInformationFilled===!0),m={},a={},S=g.length,f=[D.BULLET,D.BULLET_HUMAN,D.BULLET_WOLF];g.forEach(B=>{const N=new Set;B.PlayerStats.forEach(R=>{const b=R.MainRoleInitial,P=$(R.MainRoleInitial,R.MainRoleChanges||[]);if(b==="Chasseur"||P==="Chasseur"){const l=_(R);a[l]=R.Username,N.add(l),m[l]||(m[l]={kills:[],gamesPlayed:0,victimsCamps:[]}),m[l].gamesPlayed++}}),B.PlayerStats.forEach(R=>{const b=R.DeathType,P=R.KillerName,l=P?B.PlayerStats.find(u=>u.Username===P):null,d=l?_(l):null;if(d&&l&&(a[d]=l.Username),b&&f.includes(b)&&d&&N.has(d)){const u=F(R.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});m[d].kills.push(b),m[d].victimsCamps.push(u)}})});const i=Object.entries(m).map(([B,N])=>{const R=N.kills.length,b={};N.kills.forEach(o=>{b[o]=(b[o]||0)+1});const P={};N.victimsCamps.forEach(o=>{P[o]=(P[o]||0)+1});const l=N.victimsCamps.filter(o=>o!=="Villageois").length,d=N.victimsCamps.filter(o=>o==="Villageois").length,u=N.gamesPlayed>0?R/N.gamesPlayed:0,r=N.gamesPlayed>0?l/N.gamesPlayed:0;return{hunterName:a[B]||B,totalKills:R,nonVillageoisKills:l,villageoisKills:d,gamesPlayedAsHunter:N.gamesPlayed,averageKillsPerGame:u,averageNonVillageoisKillsPerGame:r,killsByDeathType:b,victimsByCamp:P}}).sort((B,N)=>N.totalKills-B.totalKills),j=i.length>0?i[0].hunterName:null,T=i.length>0?i.sort((B,N)=>N.averageNonVillageoisKillsPerGame-B.averageNonVillageoisKillsPerGame)[0].hunterName:null;return{totalHunters:i.length,totalGames:S,hunterStats:i,bestHunter:j,bestAverageHunter:T}}function ue(h){return w(y=>ge(y,h))}function ye(){return w(h=>oe(h))}function ve(h){return w(y=>me(y))}function te(h){if(!h||h.trim()==="")return null;const g=h.trim().slice(1),m=parseInt(g,10);return isNaN(m)||m<1?null:m}function pe(h,y){if(h.length===0)return null;const g=h.filter(i=>!i.LegacyData||i.LegacyData.deathInformationFilled===!0);if(g.length===0)return null;const m={},a={};g.forEach(i=>{let j=1;if(i.EndTiming){const T=te(i.EndTiming);T&&(j=T)}i.PlayerStats.forEach(T=>{if(y&&y!=="Tous les camps"&&F(T.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})!==y)return;const B=T.Username;m[B]||(m[B]={playerName:B,totalGames:0,survivalsByDay:{},survivalRatesByDay:{},gamesPlayedByDay:{}});const N=m[B];N.totalGames++;let R=null;T.DeathTiming&&(R=te(T.DeathTiming));for(let b=1;b<=j;b++)N.gamesPlayedByDay[b]||(N.gamesPlayedByDay[b]=0,N.survivalsByDay[b]=0),a[b]||(a[b]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),N.gamesPlayedByDay[b]++,a[b].playersOnDay++,(!R||R>b)&&(N.survivalsByDay[b]++,a[b].survivorsOnDay++)});for(let T=1;T<=j;T++)a[T]||(a[T]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),a[T].gamesReachingDay++}),Object.values(m).forEach(i=>{Object.keys(i.gamesPlayedByDay).forEach(j=>{const T=parseInt(j),B=i.gamesPlayedByDay[T],N=i.survivalsByDay[T];B>0?i.survivalRatesByDay[T]=N/B*100:i.survivalRatesByDay[T]=0})});const S=Object.values(m).filter(i=>i.totalGames>0).sort((i,j)=>j.totalGames-i.totalGames),f=Object.entries(a).map(([i,j])=>({dayNumber:parseInt(i),totalGamesReachingDay:j.gamesReachingDay,totalPlayersOnDay:j.playersOnDay,averageSurvivalRate:j.playersOnDay>0?j.survivorsOnDay/j.playersOnDay*100:0})).sort((i,j)=>i.dayNumber-j.dayNumber);return{totalGames:g.length,totalPlayersAnalyzed:S.length,playerSurvivalStats:S,dayStats:f}}function xe(h,y,g=10){return h.playerSurvivalStats.filter(m=>(m.gamesPlayedByDay[y]||0)>=g).map(m=>({playerName:m.playerName,survivalRate:m.survivalRatesByDay[y]||0,gamesPlayed:m.totalGames,timesReachedDay:m.gamesPlayedByDay[y]||0,timesSurvivedDay:m.survivalsByDay[y]||0})).sort((m,a)=>a.survivalRate-m.survivalRate).slice(0,15)}function fe(h,y,g=10){return h.playerSurvivalStats.filter(m=>(m.gamesPlayedByDay[y]||0)>=g).map(m=>({playerName:m.playerName,survivalRate:m.survivalRatesByDay[y]||0,gamesPlayed:m.totalGames,timesReachedDay:m.gamesPlayedByDay[y]||0,timesSurvivedDay:m.survivalsByDay[y]||0})).sort((m,a)=>m.survivalRate-a.survivalRate).slice(0,15)}function je(h){return w(y=>pe(y,h))}function Se({deathStats:h,selectedCamp:y,minGamesForAverage:g,onMinGamesChange:m,availableDeathTypes:a,deathTypeColors:S,totalEligibleForAverage:f}){const{navigateToGameDetails:i}=U(),{settings:j}=q(),{totalKillsData:T,averageKillsData:B,highlightedPlayerAddedToTotal:N,highlightedPlayerAddedToAverage:R}=k.useMemo(()=>{if(!h)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1};const l=h.killerStats.sort((t,v)=>v.kills-t.kills).slice(0,15),d=j.highlightedPlayer&&l.some(t=>t.killerName===j.highlightedPlayer),u=l.map(t=>{const v={name:t.killerName,value:t.kills,victims:t.victims.length,percentage:t.percentage,gamesPlayed:t.gamesPlayed,averageKillsPerGame:t.averageKillsPerGame,isHighlightedAddition:!1};return a.forEach(c=>{v[c]=t.killsByDeathType[c]||0}),v});let r=!1;if(j.highlightedPlayer&&!d){const t=h.killerStats.find(v=>v.killerName===j.highlightedPlayer);if(t){const v={name:t.killerName,value:t.kills,victims:t.victims.length,percentage:t.percentage,gamesPlayed:t.gamesPlayed,averageKillsPerGame:t.averageKillsPerGame,isHighlightedAddition:!0};a.forEach(c=>{v[c]=t.killsByDeathType[c]||0}),u.push(v),r=!0}}const x=h.killerStats.filter(t=>t.gamesPlayed>=g).sort((t,v)=>v.averageKillsPerGame-t.averageKillsPerGame).slice(0,15),A=j.highlightedPlayer&&x.some(t=>t.killerName===j.highlightedPlayer),n=x.map(t=>{const v={name:t.killerName,value:t.averageKillsPerGame,victims:t.victims.length,percentage:t.percentage,gamesPlayed:t.gamesPlayed,averageKillsPerGame:t.averageKillsPerGame,isHighlightedAddition:!1};return a.forEach(c=>{const p=t.killsByDeathType[c]||0;v[c]=t.gamesPlayed>0?p/t.gamesPlayed:0}),v});let s=!1;if(j.highlightedPlayer&&!A){const t=h.killerStats.find(v=>v.killerName===j.highlightedPlayer);if(t){const v={name:t.killerName,value:t.averageKillsPerGame,victims:t.victims.length,percentage:t.percentage,gamesPlayed:t.gamesPlayed,averageKillsPerGame:t.averageKillsPerGame,isHighlightedAddition:!0};a.forEach(c=>{const p=t.killsByDeathType[c]||0;v[c]=t.gamesPlayed>0?p/t.gamesPlayed:0}),n.push(v),s=!0}}return{totalKillsData:u,averageKillsData:n,highlightedPlayerAddedToTotal:r,highlightedPlayerAddedToAverage:s}},[h,j.highlightedPlayer,g,a]),b=({active:l,payload:d,label:u})=>{if(l&&d&&d.length){const r=d[0].payload,o=r.isHighlightedAddition,x=j.highlightedPlayer===r.name,A=a.reduce((n,s)=>n+(r[s]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:x?"var(--accent-primary)":"var(--text-primary)"},children:[u,o&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",A]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",r.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill:"}),a.map(n=>{const s=r[n]||0;return s===0?null:e.jsxs("p",{style:{color:S[n],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ee(n),":"]})," ",s]},n)})]}),o&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),x&&!o&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},P=({active:l,payload:d,label:u})=>{if(l&&d&&d.length){const r=d[0].payload,o=r.isHighlightedAddition,x=j.highlightedPlayer===r.name,A=r.gamesPlayed>=g,n=h?.killerStats.find(v=>v.killerName===r.name),s=a.reduce((v,c)=>v+(r[c]||0),0),t=n?n.kills:Math.round(s*r.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:x?"var(--accent-primary)":"var(--text-primary)"},children:[u,o&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",s.toFixed(2)," (",t," kills /",r.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",r.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill (moyenne):"}),a.map(v=>{const c=r[v]||0;if(c===0)return null;const p=n?n.killsByDeathType[v]||0:Math.round(c*r.gamesPlayed);return e.jsxs("p",{style:{color:S[v],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ee(v),":"]})," ",c.toFixed(2)," (",p," kills /",r.gamesPlayed," games)"]},v)})]}),o&&!A&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",g," parties)"]}),o&&A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),x&&!o&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:y==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${y} (Total)`}),N&&j.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',j.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:y==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${y} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:T,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:l,y:d,payload:u})=>e.jsx("text",{x:l,y:d,dy:10,fill:j.highlightedPlayer===u.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:j.highlightedPlayer===u.value?14:12,fontWeight:j.highlightedPlayer===u.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${l} ${d})`,children:u.value})}),e.jsx(z,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(b,{})}),a.map(l=>e.jsx(I,{dataKey:l,name:l,stackId:"kills",fill:S[l],onClick:d=>{const u={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(u.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),i(u)}},l))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,T.filter(l=>!l.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:y==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${y} (Moyenne par partie)`}),R&&j.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',j.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:g,onChange:l=>m(Number(l.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:J.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsx(H,{title:y==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${y} (Moyenne par partie)`,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:B,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:l,y:d,payload:u})=>e.jsx("text",{x:l,y:d,dy:10,fill:j.highlightedPlayer===u.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:j.highlightedPlayer===u.value?14:12,fontWeight:j.highlightedPlayer===u.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${l} ${d})`,children:u.value})}),e.jsx(z,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(P,{})}),a.map(l=>e.jsx(I,{dataKey:l,name:l,stackId:"averageKills",fill:S[l],onClick:d=>{const u={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(u.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),i(u)}},l))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,B.filter(l=>!l.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",f," ayant au moins ",g," partie",g>1?"s":"",")"]})]})]})}function Pe({deathStats:h,selectedCamp:y,minGamesForAverage:g,onMinGamesChange:m,availableDeathTypes:a,deathTypeColors:S}){const{navigateToGameDetails:f}=U(),{settings:i}=q(),{totalDeathsData:j,survivalRateData:T,highlightedPlayerAddedToDeaths:B,highlightedPlayerAddedToSurvival:N}=k.useMemo(()=>{if(!h)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const P=h.playerDeathStats.sort((s,t)=>t.totalDeaths-s.totalDeaths).slice(0,15),l=i.highlightedPlayer&&P.some(s=>s.playerName===i.highlightedPlayer),d=P.map(s=>{const t=s.gamesPlayed,v=t>0?(t-s.totalDeaths)/t*100:0,c={name:s.playerName,value:s.totalDeaths,totalDeaths:s.totalDeaths,gamesPlayed:t,deathRate:s.deathRate,survivalRate:v,isHighlightedAddition:!1};return a.forEach(p=>{c[p]=s.deathsByType[p]||0}),c});let u=!1;if(i.highlightedPlayer&&!l){const s=h.playerDeathStats.find(t=>t.playerName===i.highlightedPlayer);if(s){const t=s.gamesPlayed,v=t>0?(t-s.totalDeaths)/t*100:0,c={name:s.playerName,value:s.totalDeaths,totalDeaths:s.totalDeaths,gamesPlayed:t,deathRate:s.deathRate,survivalRate:v,isHighlightedAddition:!0};a.forEach(p=>{c[p]=s.deathsByType[p]||0}),d.push(c),u=!0}}const o=h.playerDeathStats.filter(s=>s.gamesPlayed>=g).map(s=>({...s,survivalRate:s.gamesPlayed>0?(s.gamesPlayed-s.totalDeaths)/s.gamesPlayed*100:0})).sort((s,t)=>t.survivalRate-s.survivalRate).slice(0,15),x=i.highlightedPlayer&&o.some(s=>s.playerName===i.highlightedPlayer),A=o.map(s=>{const t={name:s.playerName,value:s.survivalRate,totalDeaths:s.totalDeaths,gamesPlayed:s.gamesPlayed,deathRate:s.deathRate,survivalRate:s.survivalRate,isHighlightedAddition:!1};return a.forEach(v=>{const c=s.deathsByType[v]||0;t[v]=s.gamesPlayed>0?c/s.gamesPlayed*100:0}),t});let n=!1;if(i.highlightedPlayer&&!x){const s=h.playerDeathStats.find(t=>t.playerName===i.highlightedPlayer);if(s){const t=s.gamesPlayed>0?(s.gamesPlayed-s.totalDeaths)/s.gamesPlayed*100:0,v={name:s.playerName,value:t,totalDeaths:s.totalDeaths,gamesPlayed:s.gamesPlayed,deathRate:s.deathRate,survivalRate:t,isHighlightedAddition:!0};a.forEach(c=>{const p=s.deathsByType[c]||0;v[c]=s.gamesPlayed>0?p/s.gamesPlayed*100:0}),A.push(v),n=!0}}return{totalDeathsData:d,survivalRateData:A,highlightedPlayerAddedToDeaths:u,highlightedPlayerAddedToSurvival:n}},[h,i.highlightedPlayer,g,a]),R=({active:P,payload:l,label:d})=>{if(P&&l&&l.length){const u=l[0].payload,r=u.isHighlightedAddition,o=i.highlightedPlayer===u.name,x=a.reduce((A,n)=>A+(u[n]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:o?"var(--accent-primary)":"var(--text-primary)"},children:[d,r&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",x]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",u.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",u.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort:"}),a.map(A=>{const n=u[A]||0;return n===0?null:e.jsxs("p",{style:{color:S[A],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Q(A),":"]})," ",n]},A)})]}),r&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),o&&!r&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},b=({active:P,payload:l,label:d})=>{if(P&&l&&l.length){const u=l[0].payload,r=u.isHighlightedAddition,o=i.highlightedPlayer===u.name,x=u.gamesPlayed>=g;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:o?"var(--accent-primary)":"var(--text-primary)"},children:[d,r&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",u.survivalRate.toFixed(1),"% (",u.gamesPlayed-u.totalDeaths," survies / ",u.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",u.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",u.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort (taux %):"}),a.map(A=>{const n=u[A]||0;return n===0?null:e.jsxs("p",{style:{color:S[A],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Q(A),":"]})," ",n.toFixed(1),"%"]},A)})]}),r&&!x&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",g," parties)"]}),r&&x&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),o&&!r&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`}),B&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:j,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:P,y:l,payload:d})=>e.jsx("text",{x:P,y:l,dy:10,fill:i.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===d.value?14:12,fontWeight:i.highlightedPlayer===d.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${P} ${l})`,children:d.value})}),e.jsx(z,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(R,{})}),a.map(P=>e.jsx(I,{dataKey:P,name:P,stackId:"deaths",fill:S[P],onClick:l=>{const d={selectedPlayer:l?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(d.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),f(d)}},P))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(P=>!P.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",y==="Tous les camps"?"(Total)":` en ${y}`]}),N&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:g,onChange:P=>m(Number(P.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:J.map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsx(H,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:T,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:P,y:l,payload:d})=>e.jsx("text",{x:P,y:l,dy:10,fill:i.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===d.value?14:12,fontWeight:i.highlightedPlayer===d.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${P} ${l})`,children:d.value})}),e.jsx(z,{label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(b,{})}),a.map(P=>e.jsx(I,{dataKey:P,name:P,stackId:"survivalRate",fill:S[P],onClick:l=>{const d={selectedPlayer:l?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(d.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),f(d)}},P))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,T.filter(P=>!P.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",g," partie",g>1?"s":"",")"]})]})]})}function De({hunterStats:h,isLoading:y,error:g}){const{navigateToGameDetails:m}=U(),{settings:a}=q(),S=ae(),{joueursData:f}=se(),i=re(f),[j,T]=k.useState(null);if(y)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."});if(g)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",g]});if(!h||h.hunterStats.length===0)return e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]});const{finalBestHuntersData:B,highlightedPlayerAddedToBest:N,finalBadHuntersData:R,highlightedPlayerAddedToBad:b}=(()=>{const u=h.hunterStats.filter(c=>c.gamesPlayedAsHunter>=5).sort((c,p)=>p.averageNonVillageoisKillsPerGame-c.averageNonVillageoisKillsPerGame).slice(0,15),r=a.highlightedPlayer&&u.some(c=>c.hunterName===a.highlightedPlayer);let o=[...u],x=!1;if(a.highlightedPlayer&&!r){const c=h.hunterStats.find(p=>p.hunterName===a.highlightedPlayer);c&&(o.push({...c,isHighlightedAddition:!0}),x=!0)}const A=h.hunterStats.filter(c=>c.gamesPlayedAsHunter>=5).map(c=>({name:c.hunterName,averageVillageoisKills:Number((c.villageoisKills/c.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:c.villageoisKills,totalNonVillageoisKills:c.nonVillageoisKills,totalKills:c.totalKills,gamesPlayed:c.gamesPlayedAsHunter,victimsByCamp:c.victimsByCamp,hunterName:c.hunterName})),n=A.sort((c,p)=>p.averageVillageoisKills-c.averageVillageoisKills).slice(0,15),s=a.highlightedPlayer&&n.some(c=>c.hunterName===a.highlightedPlayer);let t=[...n],v=!1;if(a.highlightedPlayer&&!s){const c=A.find(p=>p.hunterName===a.highlightedPlayer);c&&(t.push({...c,isHighlightedAddition:!0}),v=!0)}return{finalBestHuntersData:o,highlightedPlayerAddedToBest:x,finalBadHuntersData:t,highlightedPlayerAddedToBad:v}})(),P=({active:d,payload:u,label:r})=>{if(d&&u&&u.length){const o=u[0].payload,x=o.isHighlightedAddition,A=a.highlightedPlayer===o.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:A?"var(--accent-primary)":"var(--text-primary)"},children:[r,x&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Kills non-Villageois/partie:"})," ",o.averageNonVillageoisKillsPerGame.toFixed(2)]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",o.nonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",o.gamesPlayedAsHunter]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",o.totalKills]}),o.victimsByCamp&&Object.keys(o.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(o.victimsByCamp).map(([n,s])=>e.jsxs("p",{style:{color:S[n]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[n,":"]})," ",s]},n))]}),x&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),A&&!x&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},l=({active:d,payload:u,label:r})=>{if(d&&u&&u.length){const o=u[0].payload,x=o.isHighlightedAddition,A=a.highlightedPlayer===o.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:A?"var(--accent-primary)":"var(--text-primary)"},children:[r,x&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Villageois tuÃ©s/partie:"})," ",o.averageVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total Villageois tuÃ©s:"})," ",o.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",o.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",o.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",o.totalKills]}),o.victimsByCamp&&Object.keys(o.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(o.victimsByCamp).map(([n,s])=>e.jsxs("p",{style:{color:S[n]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[n,":"]})," ",s]},n))]}),x&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),A&&!x&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Meilleurs Chasseurs"}),N&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',a.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:"Meilleurs Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:B,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:d,y:u,payload:r})=>e.jsx("text",{x:d,y:u,dy:10,fill:a.highlightedPlayer===r.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:a.highlightedPlayer===r.value?14:12,fontWeight:a.highlightedPlayer===r.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${d} ${u})`,children:r.value})}),e.jsx(z,{label:{value:"Moyenne kills non-Villageois/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(P,{})}),e.jsx(I,{dataKey:"averageNonVillageoisKillsPerGame",fill:"var(--chart-primary)",onClick:d=>{d?.hunterName&&m({selectedPlayer:d.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Meilleurs Chasseurs"})},onMouseEnter:d=>T(d?.hunterName||null),onMouseLeave:()=>T(null),style:{cursor:"pointer"},children:B.map((d,u)=>{const r=a.highlightedPlayer===d.hunterName,o=d.isHighlightedAddition;return e.jsx(G,{fill:i[d.hunterName]||S.Chasseur||"#8884d8",stroke:r?"var(--accent-primary)":j===d.hunterName?"var(--text-primary)":"none",strokeWidth:r?3:j===d.hunterName?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1},`cell-${u}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,B.filter(d=>!d.isHighlightedAddition).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs"}),b&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',a.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:R,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:d,y:u,payload:r})=>e.jsx("text",{x:d,y:u,dy:10,fill:a.highlightedPlayer===r.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:a.highlightedPlayer===r.value?14:12,fontWeight:a.highlightedPlayer===r.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${d} ${u})`,children:r.value})}),e.jsx(z,{label:{value:"Moyenne Villageois tuÃ©s/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(l,{})}),e.jsx(I,{dataKey:"averageVillageoisKills",fill:"var(--chart-primary)",onClick:d=>{d?.hunterName&&m({selectedPlayer:d.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Mauvais Chasseurs"})},onMouseEnter:d=>T(d?.hunterName||null),onMouseLeave:()=>T(null),style:{cursor:"pointer"},children:R.map((d,u)=>{const r=a.highlightedPlayer===d.hunterName,o=d.isHighlightedAddition;return e.jsx(G,{fill:i[d.hunterName]||S.Chasseur||"#8884d8",stroke:r?"var(--accent-primary)":j===d.hunterName?"var(--text-primary)":"none",strokeWidth:r?3:j===d.hunterName?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1},`cell-${u}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,R.filter(d=>!d.isHighlightedAddition).length)," des chasseurs ayant le plus tuÃ© de Villageois (minimum 5 parties en Chasseur)"]})]})]})}function Te({survivalStats:h,selectedCamp:y,minGamesForAverage:g,onMinGamesChange:m,isLoading:a,error:S}){const{navigateToGameDetails:f}=U(),{settings:i}=q(),{joueursData:j}=se(),T=re(j),[B,N]=k.useState(1),[R,b]=k.useState(null),P=k.useMemo(()=>h?h.dayStats.filter(s=>s.totalGamesReachingDay>0).map(s=>s.dayNumber).sort((s,t)=>s-t):[],[h]),l=k.useMemo(()=>P.includes(B)?B:P.length>0?P[0]:1,[B,P]),{highestSurvivalData:d,highlightedPlayerAddedToHighest:u}=k.useMemo(()=>{if(!h)return{highestSurvivalData:[],highlightedPlayerAddedToHighest:!1};const n=xe(h,l,g),s=i.highlightedPlayer&&n.some(c=>c.playerName===i.highlightedPlayer),t=n.map(c=>({name:c.playerName,value:c.survivalRate,gamesPlayed:c.gamesPlayed,timesReachedDay:c.timesReachedDay,timesSurvivedDay:c.timesSurvivedDay,isHighlightedAddition:!1}));let v=!1;if(i.highlightedPlayer&&!s){const c=h.playerSurvivalStats.find(p=>p.playerName===i.highlightedPlayer);if(c&&(c.gamesPlayedByDay[l]||0)>=1){const p=c.survivalRatesByDay[l]||0;t.push({name:i.highlightedPlayer,value:p,gamesPlayed:c.totalGames,timesReachedDay:c.gamesPlayedByDay[l]||0,timesSurvivedDay:c.survivalsByDay[l]||0,isHighlightedAddition:!0}),v=!0}}return{highestSurvivalData:t,highlightedPlayerAddedToHighest:v}},[h,l,g,i.highlightedPlayer]),{lowestSurvivalData:r,highlightedPlayerAddedToLowest:o}=k.useMemo(()=>{if(!h)return{lowestSurvivalData:[],highlightedPlayerAddedToLowest:!1};const n=fe(h,l,g),s=i.highlightedPlayer&&n.some(c=>c.playerName===i.highlightedPlayer),t=n.map(c=>({name:c.playerName,value:c.survivalRate,gamesPlayed:c.gamesPlayed,timesReachedDay:c.timesReachedDay,timesSurvivedDay:c.timesSurvivedDay,isHighlightedAddition:!1}));let v=!1;if(i.highlightedPlayer&&!s){const c=h.playerSurvivalStats.find(p=>p.playerName===i.highlightedPlayer);if(c&&(c.gamesPlayedByDay[l]||0)>=1){const p=c.survivalRatesByDay[l]||0;t.push({name:i.highlightedPlayer,value:p,gamesPlayed:c.totalGames,timesReachedDay:c.gamesPlayedByDay[l]||0,timesSurvivedDay:c.survivalsByDay[l]||0,isHighlightedAddition:!0}),v=!0}}return{lowestSurvivalData:t,highlightedPlayerAddedToLowest:v}},[h,l,g,i.highlightedPlayer]),x=n=>{f({selectedPlayer:n,fromComponent:"Statistiques de Survie"})},A=({active:n,payload:s,label:t})=>{if(n&&s&&s.length>0){const v=s[0].payload,c=v.isHighlightedAddition,p=i.highlightedPlayer===v.name,V=v.timesReachedDay>=g;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:t})}),e.jsx("div",{children:e.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Taux de survie Jour ",l,": ",v.value.toFixed(1),"%"]})}),e.jsxs("div",{children:["Parties atteignant le Jour ",l,": ",v.timesReachedDay]}),e.jsxs("div",{children:["Survies au Jour ",l,": ",v.timesSurvivedDay]}),e.jsxs("div",{children:["Total de parties: ",v.gamesPlayed]}),c&&!V&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",g," parties ce jour)"]}),c&&V&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),p&&!c&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return a?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de survie..."}):S?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",S]}):h?e.jsxs("div",{className:"lycans-survival-stats",children:[e.jsx("div",{className:"lycans-graphique-controles",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"day-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Jour :"}),e.jsx("select",{id:"day-select",value:l,onChange:n=>N(parseInt(n.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:P.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Min. parties :"}),e.jsx("select",{id:"min-games-select",value:g,onChange:n=>m(parseInt(n.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:J.map(n=>e.jsx("option",{value:n,children:n},n))})]})]})}),l&&h.dayStats.find(n=>n.dayNumber===l)&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Parties atteignant le Jour ",l]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:h.dayStats.find(n=>n.dayNumber===l)?.totalGamesReachingDay||0})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Taux de survie moyen Jour ",l]}),e.jsxs("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:[(h.dayStats.find(n=>n.dayNumber===l)?.averageSurvivalRate||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Joueurs Ã©ligibles (min. ",g," parties)"]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:h.playerSurvivalStats.filter(n=>(n.gamesPlayedByDay[l]||0)>=g).length})]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ",l]}),u&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:`ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ${l}`,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:d,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:n,y:s,payload:t})=>e.jsx("text",{x:n,y:s,dy:16,textAnchor:"end",transform:`rotate(-45, ${n}, ${s})`,fill:i.highlightedPlayer===t.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===t.value?14:12,fontWeight:i.highlightedPlayer===t.value?"bold":"normal",children:t.value})}),e.jsx(z,{tickFormatter:n=>`${n.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(A,{})}),e.jsx(I,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:d.map((n,s)=>{const t=i.highlightedPlayer===n.name,v=R===n.name,c=n.isHighlightedAddition;return e.jsx(G,{fill:T[n.name]||"var(--chart-primary)",stroke:t?"var(--accent-primary)":v?"var(--text-primary)":"none",strokeWidth:t?3:v?2:0,strokeDasharray:c?"5,5":"none",opacity:c?.8:1,onClick:()=>x(n.name),onMouseEnter:()=>b(n.name),onMouseLeave:()=>b(null),style:{cursor:"pointer"}},`cell-highest-${s}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["âš°ï¸ Plus Faibles Taux de Survie - Jour ",l]}),o&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(H,{title:`âš°ï¸ Plus Faibles Taux de Survie - Jour ${l}`,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(E,{data:r,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(C,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:n,y:s,payload:t})=>e.jsx("text",{x:n,y:s,dy:16,textAnchor:"end",transform:`rotate(-45, ${n}, ${s})`,fill:i.highlightedPlayer===t.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===t.value?14:12,fontWeight:i.highlightedPlayer===t.value?"bold":"normal",children:t.value})}),e.jsx(z,{tickFormatter:n=>`${n.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(O,{content:e.jsx(A,{})}),e.jsx(I,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:r.map((n,s)=>{const t=i.highlightedPlayer===n.name,v=R===n.name,c=n.isHighlightedAddition;return e.jsx(G,{fill:T[n.name]||"var(--chart-color-4)",stroke:t?"var(--accent-primary)":v?"var(--text-primary)":"none",strokeWidth:t?3:v?2:0,strokeDasharray:c?"5,5":"none",opacity:c?.8:1,onClick:()=>x(n.name),onMouseEnter:()=>b(n.name),onMouseLeave:()=>b(null),style:{cursor:"pointer"}},`cell-lowest-${s}`)})})]})})})})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note :"})," Les statistiques de survie montrent le pourcentage de fois qu'un joueur survit au Jour ",l," parmi toutes les parties qu'il a jouÃ©es et qui ont atteint ce jour. ",u||o?"Les joueurs mis en Ã©vidence apparaissent mÃªme s'ils ne sont pas dans le top 15.":""]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de survie disponible"})}function Me(){const{navigationState:h,updateNavigationState:y}=U(),[g,m]=k.useState(h.deathStatisticsState?.selectedCamp||h.deathStatsSelectedCamp||"Tous les camps"),[a,S]=k.useState(h.deathStatisticsState?.minGamesForAverage||25),[f,i]=k.useState(h.deathStatisticsState?.selectedView||"killers"),{data:j}=ye(),{data:T,isLoading:B,error:N}=ue(g),{data:R,isLoading:b,error:P}=ve(),{data:l,isLoading:d,error:u}=je(g),{data:r}=le(),o=ae();k.useEffect(()=>{(!h.deathStatisticsState||h.deathStatisticsState.selectedCamp!==g||h.deathStatisticsState.minGamesForAverage!==a||h.deathStatisticsState.selectedView!==f)&&y({deathStatisticsState:{selectedCamp:g,minGamesForAverage:a,selectedView:f,focusChart:h.deathStatisticsState?.focusChart}})},[g,a,f,h.deathStatisticsState,y]);const x=k.useMemo(()=>r?ce(r):[],[r]),A=k.useMemo(()=>{const p={};x.forEach(L=>{L===M.BY_WOLF?p[L]=o.Loup:L===M.VOTED?p[L]="var(--chart-color-1)":L===M.BULLET_HUMAN_ON_WOLF?p[L]="#FF8C42":L===M.BULLET_HUMAN_ON_HUMAN?p[L]="#95C623":L===M.BULLET||L===M.BULLET_HUMAN||L===M.BULLET_WOLF?p[L]=o.Chasseur:L===M.BY_ZOMBIE?p[L]=o.Vaudou:L===M.ASSASSIN?p[L]=o.Alchimiste:L===M.AVENGER?p[L]="var(--chart-color-2)":L===M.LOVER_DEATH?p[L]=o.Amoureux:L===M.BY_BEAST?p[L]="var(--chart-color-3)":L===M.SHERIF_SUCCESS&&(p[L]="var(--chart-color-4)")});const V=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let Z=0;return x.forEach(L=>{p[L]||(p[L]=V[Z%V.length],Z++)}),p},[x,o]),n=p=>{m(p),y({deathStatsSelectedCamp:p,deathStatisticsState:{selectedCamp:p,minGamesForAverage:a,selectedView:f,focusChart:h.deathStatisticsState?.focusChart}})},s=p=>{S(p),y({deathStatisticsState:{selectedCamp:g,minGamesForAverage:p,selectedView:f,focusChart:h.deathStatisticsState?.focusChart}})},t=p=>{i(p),y({deathStatisticsState:{selectedCamp:g,minGamesForAverage:a,selectedView:p,focusChart:h.deathStatisticsState?.focusChart}})},{gamesWithKillers:v,totalEligibleForAverage:c}=k.useMemo(()=>{if(!T)return{gamesWithKillers:0,totalEligibleForAverage:0};const p=T.killerStats.filter(V=>V.gamesPlayed>=a);return{gamesWithKillers:T.totalGames,totalEligibleForAverage:p.length}},[T,a]);return B?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."}):N?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]}):T?e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"ðŸ’€ Statistiques de Morts & Kills"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${f==="killers"?"active":""}`,onClick:()=>t("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${f==="deaths"?"active":""}`,onClick:()=>t("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${f==="survival"?"active":""}`,onClick:()=>t("survival"),children:"Survie"}),e.jsx("button",{className:`lycans-categorie-btn ${f==="hunter"?"active":""}`,onClick:()=>t("hunter"),children:"Chasseur"})]}),(f==="killers"||f==="deaths"||f==="survival")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:g,onChange:p=>n(p.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),j?.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),(f==="killers"||f==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:T.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:T.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrÃ©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:v})]})]}),f==="killers"&&e.jsx(Se,{deathStats:T,selectedCamp:g,minGamesForAverage:a,onMinGamesChange:s,availableDeathTypes:x,deathTypeColors:A,totalEligibleForAverage:c}),f==="deaths"&&e.jsx(Pe,{deathStats:T,selectedCamp:g,minGamesForAverage:a,onMinGamesChange:s,availableDeathTypes:x,deathTypeColors:A}),f==="hunter"&&e.jsx(De,{hunterStats:R,isLoading:b,error:P}),f==="survival"&&e.jsx(Te,{survivalStats:l,selectedCamp:g,minGamesForAverage:a,onMinGamesChange:s,isLoading:d,error:u}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"DonnÃ©es en cours de rÃ©cupÃ©ration (donnÃ©es partielles)."]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de mort disponible"})}export{Me as DeathStatisticsChart};
