import{u,j as e}from"./index-BHkrPGKf.js";import{F as x}from"./FullscreenChart-Day3klAh.js";import{R as l,p as v,T as c,B as j,C as g,X as y,Y as p,o as b}from"./BarChart-CjSu6RLh.js";import{P as f,a as R}from"./PieChart-D7Uw_h5s.js";import{L as d}from"./Legend-D_3Valbk.js";function N(){const{combinedData:r,isLoading:i,error:a}=u();return{harvestStats:r&&r.harvestStats?r.harvestStats:null,isLoading:i,errorMessage:a}}const h=["#d32f2f","#f57c00","#fbc02d","#388e3c","#1976d2"];function L(){const{harvestStats:r,isLoading:i,errorMessage:a}=N();if(i)return e.jsx("div",{className:"donnees-chargement",children:"Récupération des données de récolte..."});if(a)return e.jsxs("div",{className:"donnees-erreur",children:["Problème: ",a]});if(!r)return e.jsx("div",{className:"donnees-absentes",children:"Données de récolte non disponibles"});const o=[{nom:"0-25%",valeur:r.harvestDistribution["0-25%"]},{nom:"26-50%",valeur:r.harvestDistribution["26-50%"]},{nom:"51-75%",valeur:r.harvestDistribution["51-75%"]},{nom:"76-99%",valeur:r.harvestDistribution["76-99%"]},{nom:"100%",valeur:r.harvestDistribution["100%"]}],m=Object.entries(r.harvestByWinner).map(([n,s])=>({camp:n,moyenne:parseFloat(s.average)})).sort((n,s)=>s.moyenne-n.moyenne);return e.jsxs("div",{className:"lycans-recolte-stats",children:[e.jsx("h2",{children:"Statistiques de Récolte"}),e.jsxs("div",{className:"lycans-recolte-sommaire",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Moyenne de Récolte"}),e.jsxs("p",{className:"lycans-nombre-grand",children:[r.averageHarvestPercent,"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre total de parties"}),e.jsx("p",{className:"lycans-nombre-grand",children:r.gamesWithHarvest})]})]}),e.jsxs("div",{className:"lycans-graphiques-conteneur",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Distribution des Récoltes"}),e.jsx("div",{style:{height:300},children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(f,{children:[e.jsx(R,{data:o,cx:"50%",cy:"50%",labelLine:!0,label:({nom:n,percent:s})=>`${n}: ${((s??0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"valeur",nameKey:"nom",children:o.map((n,s)=>e.jsx(v,{fill:h[s%h.length]},`cellule-${s}`))}),e.jsx(c,{content:({active:n,payload:s})=>{if(n&&s&&s.length>0){const t=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:t.nom})}),e.jsxs("div",{children:["Nombre de parties : ",t.valeur]})]})}return null}}),e.jsx(d,{})]})})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Moyenne de Récolte au Moment de la Victoire"}),e.jsx(x,{title:"Moyenne de Récolte au Moment de la Victoire",children:e.jsx("div",{style:{height:300},children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(j,{data:m,margin:{top:20,right:30,left:20,bottom:70},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(p,{label:{value:"Moyenne de Récolte (%)",angle:-90,position:"insideLeft"}}),e.jsx(c,{content:({active:n,payload:s})=>{if(n&&s&&s.length>0){const t=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:t.camp}),e.jsxs("div",{children:["Moyenne de Récolte : ",t.moyenne,"%"]})]})}return null}}),e.jsx(d,{}),e.jsx(b,{dataKey:"moyenne",name:"Moyenne de Récolte",fill:"#388e3c"})]})})})})]})]})]})}export{L as HarvestProgressChart};
