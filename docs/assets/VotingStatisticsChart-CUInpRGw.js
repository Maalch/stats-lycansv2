import{r as f,a as E,u as q,j as e}from"./index-9DrA1pQo.js";import{u as O}from"./baseStatsHook-C4tTIrrj.js";import{c as _,a as G}from"./votingStatsUtils-DqZuB1us.js";import{u as $,C as b,a as X}from"./api-t3AbXwJt.js";import{F as T,C as A,X as N,Y as V}from"./FullscreenChart-B1kosZEB.js";import{u as K}from"./useJoueursData-D6q3VHv1.js";import{R as C,T as k,a as D}from"./CategoricalChart-C0nLmzhU.js";import{B as H,a as z}from"./BarChart-DUaW7chL.js";import"./datasyncExport-BirWLS1z.js";import"./deathTypes-gHH1w6_X.js";function J(){return O(u=>{if(!u||u.length===0)return null;const i=u.filter(v=>v.PlayerStats.some(m=>m.Votes&&m.Votes.length>0));if(i.length===0)return null;const P=_(i),j=G(i);return{...P,playerTimingStats:j}})}function L(u=5){const{data:i,isLoading:P,error:j}=J();return{data:f.useMemo(()=>i?{...i,playerBehaviorStats:i.playerBehaviorStats.filter(m=>m.totalMeetings>=u),playerAccuracyStats:i.playerAccuracyStats.filter(m=>m.totalMeetings>=u),playerTargetStats:i.playerTargetStats.filter(m=>m.totalTimesTargeted>=u),playerTimingStats:i.playerTimingStats.filter(m=>m.totalTimedVotes>=u)}:null,[i,u]),isLoading:P,error:j}}function Y({minMeetings:u}){const{settings:i}=E(),{navigateToGameDetails:P}=q(),{joueursData:j}=K(),v=$(j),[m,p]=f.useState(null),{data:d}=L(u),x=n=>{n&&n.playerName&&P({selectedPlayer:n.playerName,fromComponent:"Statistiques de Votes"})},{behaviorChartData:S,highlightedPlayerInBehavior:I}=f.useMemo(()=>{if(!d)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const n=[...d.playerBehaviorStats].sort((r,s)=>s.aggressivenessScore-r.aggressivenessScore).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerBehaviorStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{behaviorChartData:t,highlightedPlayerInBehavior:a}},[d,i.highlightedPlayer]),{accuracyChartData:M,highlightedPlayerInAccuracy:B}=f.useMemo(()=>{if(!d)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const n=[...d.playerAccuracyStats].sort((r,s)=>s.accuracyRate!==r.accuracyRate?s.accuracyRate-r.accuracyRate:s.totalVotes-r.totalVotes).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerAccuracyStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{accuracyChartData:t,highlightedPlayerInAccuracy:a}},[d,i.highlightedPlayer]),{targetChartData:w,highlightedPlayerInTargets:W}=f.useMemo(()=>{if(!d)return{targetChartData:[],highlightedPlayerInTargets:!1};const n=[...d.playerTargetStats].sort((r,s)=>s.survivalRate-r.survivalRate).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerTargetStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{targetChartData:t,highlightedPlayerInTargets:a}},[d,i.highlightedPlayer]);return d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ—³ï¸ Score d'AgressivitÃ©"}),I&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basÃ© sur le taux de vote, les abstentions et les "passÃ©s". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(T,{title:"Score d'AgressivitÃ©",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:S,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:"Score d'AgressivitÃ© (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes," (",t.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["PassÃ©s: ",t.totalSkips," (",t.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",t.totalAbstentions," (",t.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",t.aggressivenessScore.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||(o.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)");return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸŽ¯ PrÃ©cision des Votes - Taux de Votes Justes"}),B&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigÃ©s contre le camp adverse (et non contre son propre camp)."}),e.jsx(T,{title:"PrÃ©cision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:M,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:"Taux de PrÃ©cision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes justes: ",t.votesForEnemyCamp]}),e.jsxs("div",{children:["Votes incorrects: ",t.votesForOwnCamp]}),e.jsx("div",{children:e.jsxs("strong",{children:["PrÃ©cision: ",t.accuracyRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||"var(--chart-primary)";return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ”» Joueurs CiblÃ©s - Taux de Survie aux Votes"}),W&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois oÃ¹ le joueur a survÃ©cu aprÃ¨s avoir Ã©tÃ© ciblÃ© par au moins un vote."}),e.jsx(T,{title:"Joueurs CiblÃ©s - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:w,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Fois ciblÃ©: ",t.totalTimesTargeted]}),e.jsxs("div",{children:["CiblÃ© par camp adverse: ",t.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["CiblÃ© par son camp: ",t.timesTargetedByOwnCamp]}),e.jsxs("div",{children:["Ã‰liminations par vote: ",t.eliminationsByVote]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de survie: ",t.survivalRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||"var(--chart-secondary)";return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function U({minMeetings:u}){const{settings:i}=E(),{navigateToGameDetails:P}=q(),{joueursData:j}=K(),v=$(j),[m,p]=f.useState(null),{data:d}=L(u),x=n=>{n&&n.playerName&&P({selectedPlayer:n.playerName,fromComponent:"Statistiques de Votes"})},{voteRateChartData:S,highlightedPlayerInVoteRate:I}=f.useMemo(()=>{if(!d)return{voteRateChartData:[],highlightedPlayerInVoteRate:!1};const n=[...d.playerBehaviorStats].sort((r,s)=>s.votingRate-r.votingRate).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerBehaviorStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{voteRateChartData:t,highlightedPlayerInVoteRate:a}},[d,i.highlightedPlayer]),{skipRateChartData:M,highlightedPlayerInSkipRate:B}=f.useMemo(()=>{if(!d)return{skipRateChartData:[],highlightedPlayerInSkipRate:!1};const n=[...d.playerBehaviorStats].sort((r,s)=>s.skippingRate-r.skippingRate).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerBehaviorStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{skipRateChartData:t,highlightedPlayerInSkipRate:a}},[d,i.highlightedPlayer]),{abstentionRateChartData:w,highlightedPlayerInAbstentionRate:W}=f.useMemo(()=>{if(!d)return{abstentionRateChartData:[],highlightedPlayerInAbstentionRate:!1};const n=[...d.playerBehaviorStats].sort((r,s)=>s.abstentionRate-r.abstentionRate).slice(0,b.TOP_15),l=i.highlightedPlayer&&n.some(r=>r.playerName===i.highlightedPlayer);let t=[...n],a=!1;if(i.highlightedPlayer&&!l){const r=d.playerBehaviorStats.find(s=>s.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{abstentionRateChartData:t,highlightedPlayerInAbstentionRate:a}},[d,i.highlightedPlayer]);return d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ“Š Taux de Vote - Top 15"}),I&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur a votÃ© activement (hors non-votes)."}),e.jsx(T,{title:"Taux de Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:S,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:"Taux de Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de vote: ",t.votingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"votingRate",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||"var(--chart-primary)";return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:'â­ï¸ Taux de "PassÃ©" - Top 15'}),B&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings oÃ¹ le joueur a votÃ© "PassÃ©".'}),e.jsx(T,{title:'Taux de "PassÃ©" - Top 15',children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:M,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:'Taux de "PassÃ©" (%)',angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:['Votes "PassÃ©": ',t.totalSkips]}),e.jsx("div",{children:e.jsxs("strong",{children:['Taux de "PassÃ©": ',t.skippingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"skippingRate",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||"var(--chart-secondary)";return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸš« Taux de Non-Vote - Top 15"}),W&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur n'a pas votÃ© du tout."}),e.jsx(T,{title:"Taux de Non-Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:w,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:n,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:n,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${n} ${l})`,children:t.value})}}),e.jsx(V,{label:{value:"Taux de Non-Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(k,{content:({active:n,payload:l})=>{if(n&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Non-votes: ",t.totalAbstentions]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de non-vote: ",t.abstentionRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(z,{dataKey:"abstentionRate",style:{cursor:"pointer"},onClick:x,shape:n=>{const{x:l,y:t,width:a,height:r,payload:s}=n,o=s,h=i.highlightedPlayer===o.playerName,c=m===o.playerName,g=o.isHighlightedAddition,y=v[o.playerName]||"var(--chart-tertiary)";return e.jsx(D,{x:l,y:t,width:a,height:r,fill:y,stroke:h?"var(--accent-primary)":c?"var(--text-primary)":"transparent",strokeWidth:h?3:c?2:0,strokeDasharray:g?"5,5":"none",opacity:g?.8:1,onClick:()=>x(o),onMouseEnter:()=>p(o.playerName),onMouseLeave:()=>p(null),style:{cursor:"pointer"}})}})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function Q({minMeetings:u}){const{settings:i}=E(),{navigateToGameDetails:P}=q(),{joueursData:j}=K(),v=$(j),[m,p]=f.useState(null),{data:d}=L(u),x=t=>{t&&t.playerName&&P({selectedPlayer:t.playerName,fromComponent:"Statistiques de Votes"})},{earlyVotersChartData:S,highlightedPlayerInEarlyVoters:I}=f.useMemo(()=>{if(!d)return{earlyVotersChartData:[],highlightedPlayerInEarlyVoters:!1};const t=[...d.playerTimingStats].sort((o,h)=>o.averageVotePositionPercentile-h.averageVotePositionPercentile).slice(0,b.TOP_15),a=i.highlightedPlayer&&t.some(o=>o.playerName===i.highlightedPlayer);let r=[...t],s=!1;if(i.highlightedPlayer&&!a){const o=d.playerTimingStats.find(h=>h.playerName===i.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{earlyVotersChartData:r,highlightedPlayerInEarlyVoters:s}},[d,i.highlightedPlayer]),{lateVotersChartData:M,highlightedPlayerInLateVoters:B}=f.useMemo(()=>{if(!d)return{lateVotersChartData:[],highlightedPlayerInLateVoters:!1};const t=[...d.playerTimingStats].sort((o,h)=>h.averageVotePositionPercentile-o.averageVotePositionPercentile).slice(0,b.TOP_15),a=i.highlightedPlayer&&t.some(o=>o.playerName===i.highlightedPlayer);let r=[...t],s=!1;if(i.highlightedPlayer&&!a){const o=d.playerTimingStats.find(h=>h.playerName===i.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{lateVotersChartData:r,highlightedPlayerInLateVoters:s}},[d,i.highlightedPlayer]),{firstVoterChartData:w,highlightedPlayerInFirstVoter:W}=f.useMemo(()=>{if(!d)return{firstVoterChartData:[],highlightedPlayerInFirstVoter:!1};const t=d.playerTimingStats.map(h=>({...h,firstVoterPercentage:h.totalTimedVotes>0?h.timesFirstVoter/h.totalTimedVotes*100:0})),a=t.filter(h=>h.timesFirstVoter>0).sort((h,c)=>c.firstVoterPercentage-h.firstVoterPercentage).slice(0,b.TOP_15),r=i.highlightedPlayer&&a.some(h=>h.playerName===i.highlightedPlayer);let s=[...a],o=!1;if(i.highlightedPlayer&&!r){const h=t.find(c=>c.playerName===i.highlightedPlayer);h&&h.timesFirstVoter>0&&(s.push({...h,isHighlightedAddition:!0}),o=!0)}return{firstVoterChartData:s,highlightedPlayerInFirstVoter:o}},[d,i.highlightedPlayer]),{fastVotersChartData:n,highlightedPlayerInFastVoters:l}=f.useMemo(()=>{if(!d)return{fastVotersChartData:[],highlightedPlayerInFastVoters:!1};const t=[...d.playerTimingStats].sort((o,h)=>o.averageVoteDelaySeconds-h.averageVoteDelaySeconds).slice(0,b.TOP_15),a=i.highlightedPlayer&&t.some(o=>o.playerName===i.highlightedPlayer);let r=[...t],s=!1;if(i.highlightedPlayer&&!a){const o=d.playerTimingStats.find(h=>h.playerName===i.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{fastVotersChartData:r,highlightedPlayerInFastVoters:s}},[d,i.highlightedPlayer]);return!d||!d.playerTimingStats||d.playerTimingStats.length===0?e.jsxs("div",{className:"donnees-manquantes",children:[e.jsx("p",{children:"Aucune donnÃ©e de timing de vote disponible"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Les statistiques de timing nÃ©cessitent des parties en version 0.201+ avec le mode modÃ© activÃ©."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"â° Voteurs PrÃ©coces - Top 15"}),I&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Position moyenne de vote (0 = premier voteur, 100 = dernier voteur). Classement des joueurs qui votent le plus tÃ´t."}),e.jsx(T,{title:"Voteurs PrÃ©coces - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:S,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const s=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(V,{label:{value:"Position Moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(k,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,s=r.isHighlightedAddition,o=i.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:o?"2px solid var(--accent-primary)":s?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:o?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,o&&" ðŸŽ¯",s&&!o&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Premier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesFirstVoter," fois"]})]}),s&&!o&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(z,{dataKey:"averageVotePositionPercentile",style:{cursor:"pointer"},onClick:x,shape:t=>{const{x:a,y:r,width:s,height:o,payload:h}=t,c=h,g=i.highlightedPlayer===c.playerName,y=c.isHighlightedAddition,R=m===c.playerName,F=g?"var(--accent-primary)":y?"var(--accent-secondary)":R?"var(--accent-hover)":v[c.playerName]||"var(--chart-primary)";return e.jsx(D,{x:a,y:r,width:s,height:o,fill:F,stroke:g?"var(--accent-primary)":"none",strokeWidth:g?3:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1,onClick:()=>x(c),onMouseEnter:()=>p(c.playerName),onMouseLeave:()=>p(null)})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸŒ Voteurs Tardifs - Top 15"}),B&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Position moyenne de vote. Classement des joueurs qui votent le plus tard (proche de 100% = dernier voteur)."}),e.jsx(T,{title:"Voteurs Tardifs - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:M,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const s=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(V,{label:{value:"Position Moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(k,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,s=r.isHighlightedAddition,o=i.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:o?"2px solid var(--accent-primary)":s?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:o?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,o&&" ðŸŽ¯",s&&!o&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Dernier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesLastVoter," fois"]})]}),s&&!o&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(z,{dataKey:"averageVotePositionPercentile",style:{cursor:"pointer"},onClick:x,shape:t=>{const{x:a,y:r,width:s,height:o,payload:h}=t,c=h,g=i.highlightedPlayer===c.playerName,y=c.isHighlightedAddition,R=m===c.playerName,F=g?"var(--accent-primary)":y?"var(--accent-secondary)":R?"var(--accent-hover)":v[c.playerName]||"var(--chart-primary)";return e.jsx(D,{x:a,y:r,width:s,height:o,fill:F,stroke:g?"var(--accent-primary)":"none",strokeWidth:g?3:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1,onClick:()=>x(c),onMouseEnter:()=>p(c.playerName),onMouseLeave:()=>p(null)})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ¥‡ Champions du Premier Vote - Top 15"}),W&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois oÃ¹ le joueur a Ã©tÃ© le premier Ã  voter dans un meeting (votes actifs uniquement)."}),e.jsx(T,{title:"Champions du Premier Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:w,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const s=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(V,{label:{value:"Taux (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(k,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,s=r.isHighlightedAddition,o=i.highlightedPlayer===r.playerName,h=r.totalTimedVotes>0?(r.timesFirstVoter/r.totalTimedVotes*100).toFixed(1):"0";return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:o?"2px solid var(--accent-primary)":s?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:o?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,o&&" ðŸŽ¯",s&&!o&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Premier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesFirstVoter," fois"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Taux: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[h,"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),s&&!o&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(z,{dataKey:"firstVoterPercentage",style:{cursor:"pointer"},onClick:x,shape:t=>{const{x:a,y:r,width:s,height:o,payload:h}=t,c=h,g=i.highlightedPlayer===c.playerName,y=c.isHighlightedAddition,R=m===c.playerName,F=g?"var(--accent-primary)":y?"var(--accent-secondary)":R?"var(--accent-hover)":v[c.playerName]||"var(--chart-primary)";return e.jsx(D,{x:a,y:r,width:s,height:o,fill:F,stroke:g?"var(--accent-primary)":"none",strokeWidth:g?3:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1,onClick:()=>x(c),onMouseEnter:()=>p(c.playerName),onMouseLeave:()=>p(null)})}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"âš¡ Voteurs les Plus Rapides - Top 15"}),l&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"DÃ©lai moyen en secondes entre le premier vote et le vote du joueur. Plus c'est bas, plus le joueur vote rapidement."}),e.jsx(T,{title:"Voteurs les Plus Rapides - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(H,{data:n,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const s=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(V,{label:{value:"DÃ©lai Moyen (secondes)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(k,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,s=r.isHighlightedAddition,o=i.highlightedPlayer===r.playerName,h=Math.round(r.averageVoteDelaySeconds),c=Math.floor(h/60),g=h%60,y=`${c}m ${g}s`;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:o?"2px solid var(--accent-primary)":s?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:o?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,o&&" ðŸŽ¯",s&&!o&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["DÃ©lai moyen: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:y})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),s&&!o&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(z,{dataKey:"averageVoteDelaySeconds",style:{cursor:"pointer"},onClick:x,shape:t=>{const{x:a,y:r,width:s,height:o,payload:h}=t,c=h,g=i.highlightedPlayer===c.playerName,y=c.isHighlightedAddition,R=m===c.playerName,F=g?"var(--accent-primary)":y?"var(--accent-secondary)":R?"var(--accent-hover)":v[c.playerName]||"var(--chart-primary)";return e.jsx(D,{x:a,y:r,width:s,height:o,fill:F,stroke:g?"var(--accent-primary)":"none",strokeWidth:g?3:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1,onClick:()=>x(c),onMouseEnter:()=>p(c.playerName),onMouseLeave:()=>p(null)})}})]})})})})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"1rem",marginTop:"0rem",textAlign:"center"},children:[e.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-primary)"},children:["â„¹ï¸ ",e.jsx("strong",{children:"Note importante :"})," Ces statistiques analysent uniquement les ",e.jsx("strong",{children:"votes actifs"}),' (hors votes "PassÃ©").']}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:["DonnÃ©es disponibles : ",d.playerTimingStats.length," joueur",d.playerTimingStats.length>1?"s":""," avec au moins ",u," meeting",u>1?"s":""," â€¢ Parties en version 0.201+"]})]})]})}function he(){const{navigationState:u}=q(),[i,P]=f.useState(u.votingStatsState?.selectedCategory||"overview"),[j,v]=f.useState(X.MIN_MEETINGS),{data:m,isLoading:p,error:d}=J();if(p)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de votes..."});if(d)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",d]});if(!m)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"});const x=[5,15,25,50,100,200,400];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"ðŸ“Š Statistiques de Votes"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{type:"button",onClick:()=>{P("overview")},style:{background:i==="overview"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="overview"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="overview"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ“Š Vue d'Ensemble"}),e.jsx("button",{type:"button",onClick:()=>{P("behavior")},style:{background:i==="behavior"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="behavior"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="behavior"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ—³ï¸ Comportements de Vote"}),e.jsx("button",{type:"button",onClick:()=>{P("timing")},style:{background:i==="timing"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="timing"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="timing"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"â° Timing de Vote"})]}),e.jsx("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:j,onChange:S=>v(Number(S.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:x.map(S=>e.jsx("option",{value:S,children:S},S))})]})})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[i==="overview"&&e.jsx(Y,{minMeetings:j}),i==="behavior"&&e.jsx(U,{minMeetings:j}),i==="timing"&&e.jsx(Q,{minMeetings:j})]})]})}export{he as VotingStatisticsChart};
