import{r as p,a as B,u as M,j as e}from"./index-7DWI7K4Q.js";import{u as L}from"./baseStatsHook-BFyL3On7.js";import{c as J,a as O}from"./votingStatsUtils-DqVRFq6d.js";import{u as W,C as j,a as _}from"./api-Dq2pnxKc.js";import{F as P,C as S,X as b,Y as T,a as A}from"./FullscreenChart-nxYcBwhY.js";import{u as q}from"./useJoueursData-5glkH9kD.js";import{R as N,T as V}from"./CategoricalChart-Cgn_t0hD.js";import{B as D,a as C}from"./BarChart-CwubowAh.js";import"./datasyncExport-CjB7UYqV.js";import"./deathTypes-gHH1w6_X.js";function w(){return L(m=>{if(!m||m.length===0)return null;const i=m.filter(y=>y.PlayerStats.some(c=>c.Votes&&c.Votes.length>0));if(i.length===0)return null;const f=J(i),x=O(i);return{...f,playerTimingStats:x}})}function $(m=5){const{data:i,isLoading:f,error:x}=w();return{data:p.useMemo(()=>i?{...i,playerBehaviorStats:i.playerBehaviorStats.filter(c=>c.totalMeetings>=m),playerAccuracyStats:i.playerAccuracyStats.filter(c=>c.totalMeetings>=m),playerTargetStats:i.playerTargetStats.filter(c=>c.totalTimesTargeted>=m),playerTimingStats:i.playerTimingStats.filter(c=>c.totalTimedVotes>=m)}:null,[i,m]),isLoading:f,error:x}}function G({minMeetings:m}){const{settings:i}=B(),{navigateToGameDetails:f}=M(),{joueursData:x}=q(),y=W(x),[c,g]=p.useState(null),{data:h}=$(m),u=s=>{s&&s.playerName&&f({selectedPlayer:s.playerName,fromComponent:"Statistiques de Votes"})},{behaviorChartData:v,highlightedPlayerInBehavior:z}=p.useMemo(()=>{if(!h)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const s=[...h.playerBehaviorStats].sort((r,o)=>o.aggressivenessScore-r.aggressivenessScore).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerBehaviorStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{behaviorChartData:t,highlightedPlayerInBehavior:a}},[h,i.highlightedPlayer]),{accuracyChartData:k,highlightedPlayerInAccuracy:R}=p.useMemo(()=>{if(!h)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const s=[...h.playerAccuracyStats].sort((r,o)=>o.accuracyRate!==r.accuracyRate?o.accuracyRate-r.accuracyRate:o.totalVotes-r.totalVotes).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerAccuracyStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{accuracyChartData:t,highlightedPlayerInAccuracy:a}},[h,i.highlightedPlayer]),{targetChartData:H,highlightedPlayerInTargets:F}=p.useMemo(()=>{if(!h)return{targetChartData:[],highlightedPlayerInTargets:!1};const s=[...h.playerTargetStats].sort((r,o)=>o.survivalRate-r.survivalRate).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerTargetStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{targetChartData:t,highlightedPlayerInTargets:a}},[h,i.highlightedPlayer]);return h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ—³ï¸ Score d'AgressivitÃ©"}),z&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basÃ© sur le taux de vote, les abstentions et les "passÃ©s". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(P,{title:"Score d'AgressivitÃ©",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:v,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:"Score d'AgressivitÃ© (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes," (",t.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["PassÃ©s: ",t.totalSkips," (",t.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",t.totalAbstentions," (",t.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",t.aggressivenessScore.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:u,children:v.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||(s.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-behavior-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸŽ¯ PrÃ©cision des Votes - Taux de Votes Justes"}),R&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigÃ©s contre le camp adverse (et non contre son propre camp)."}),e.jsx(P,{title:"PrÃ©cision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:k,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:"Taux de PrÃ©cision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes justes: ",t.votesForEnemyCamp]}),e.jsxs("div",{children:["Votes incorrects: ",t.votesForOwnCamp]}),e.jsx("div",{children:e.jsxs("strong",{children:["PrÃ©cision: ",t.accuracyRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:u,children:k.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||"var(--chart-primary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-accuracy-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ”» Joueurs CiblÃ©s - Taux de Survie aux Votes"}),F&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois oÃ¹ le joueur a survÃ©cu aprÃ¨s avoir Ã©tÃ© ciblÃ© par au moins un vote."}),e.jsx(P,{title:"Joueurs CiblÃ©s - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:H,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Fois ciblÃ©: ",t.totalTimesTargeted]}),e.jsxs("div",{children:["CiblÃ© par camp adverse: ",t.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["CiblÃ© par son camp: ",t.timesTargetedByOwnCamp]}),e.jsxs("div",{children:["Ã‰liminations par vote: ",t.eliminationsByVote]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de survie: ",t.survivalRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:u,children:H.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||"var(--chart-secondary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-target-${l}`)})})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function X({minMeetings:m}){const{settings:i}=B(),{navigateToGameDetails:f}=M(),{joueursData:x}=q(),y=W(x),[c,g]=p.useState(null),{data:h}=$(m),u=s=>{s&&s.playerName&&f({selectedPlayer:s.playerName,fromComponent:"Statistiques de Votes"})},{voteRateChartData:v,highlightedPlayerInVoteRate:z}=p.useMemo(()=>{if(!h)return{voteRateChartData:[],highlightedPlayerInVoteRate:!1};const s=[...h.playerBehaviorStats].sort((r,o)=>o.votingRate-r.votingRate).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerBehaviorStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{voteRateChartData:t,highlightedPlayerInVoteRate:a}},[h,i.highlightedPlayer]),{skipRateChartData:k,highlightedPlayerInSkipRate:R}=p.useMemo(()=>{if(!h)return{skipRateChartData:[],highlightedPlayerInSkipRate:!1};const s=[...h.playerBehaviorStats].sort((r,o)=>o.skippingRate-r.skippingRate).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerBehaviorStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{skipRateChartData:t,highlightedPlayerInSkipRate:a}},[h,i.highlightedPlayer]),{abstentionRateChartData:H,highlightedPlayerInAbstentionRate:F}=p.useMemo(()=>{if(!h)return{abstentionRateChartData:[],highlightedPlayerInAbstentionRate:!1};const s=[...h.playerBehaviorStats].sort((r,o)=>o.abstentionRate-r.abstentionRate).slice(0,j.TOP_15),l=i.highlightedPlayer&&s.some(r=>r.playerName===i.highlightedPlayer);let t=[...s],a=!1;if(i.highlightedPlayer&&!l){const r=h.playerBehaviorStats.find(o=>o.playerName===i.highlightedPlayer);r&&(t.push({...r,isHighlightedAddition:!0}),a=!0)}return{abstentionRateChartData:t,highlightedPlayerInAbstentionRate:a}},[h,i.highlightedPlayer]);return h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ“Š Taux de Vote - Top 15"}),z&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur a votÃ© activement (hors non-votes)."}),e.jsx(P,{title:"Taux de Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:v,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:"Taux de Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de vote: ",t.votingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"votingRate",style:{cursor:"pointer"},onClick:u,children:v.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||"var(--chart-primary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-voterate-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:'â­ï¸ Taux de "PassÃ©" - Top 15'}),R&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings oÃ¹ le joueur a votÃ© "PassÃ©".'}),e.jsx(P,{title:'Taux de "PassÃ©" - Top 15',children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:k,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:'Taux de "PassÃ©" (%)',angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:['Votes "PassÃ©": ',t.totalSkips]}),e.jsx("div",{children:e.jsxs("strong",{children:['Taux de "PassÃ©": ',t.skippingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"skippingRate",style:{cursor:"pointer"},onClick:u,children:k.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||"var(--chart-secondary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-skiprate-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸš« Taux de Non-Vote - Top 15"}),F&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur n'a pas votÃ© du tout."}),e.jsx(P,{title:"Taux de Non-Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:H,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:s,y:l,payload:t})=>{const a=i.highlightedPlayer===t.value;return e.jsx("text",{x:s,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${s} ${l})`,children:t.value})}}),e.jsx(T,{label:{value:"Taux de Non-Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{content:({active:s,payload:l})=>{if(s&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,r=i.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Non-votes: ",t.totalAbstentions]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de non-vote: ",t.abstentionRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"abstentionRate",style:{cursor:"pointer"},onClick:u,children:H.map((s,l)=>{const t=i.highlightedPlayer===s.playerName,a=c===s.playerName,r=s.isHighlightedAddition;return e.jsx(A,{fill:y[s.playerName]||"var(--chart-tertiary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onMouseEnter:()=>g(s.playerName),onMouseLeave:()=>g(null),style:{cursor:"pointer"}},`cell-abstention-${l}`)})})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function Y({minMeetings:m}){const{settings:i}=B(),{navigateToGameDetails:f}=M(),{joueursData:x}=q(),y=W(x),[c,g]=p.useState(null),{data:h}=$(m),u=t=>{t&&t.playerName&&f({selectedPlayer:t.playerName,fromComponent:"Statistiques de Votes"})},{earlyVotersChartData:v,highlightedPlayerInEarlyVoters:z}=p.useMemo(()=>{if(!h)return{earlyVotersChartData:[],highlightedPlayerInEarlyVoters:!1};const t=[...h.playerTimingStats].sort((n,d)=>n.averageVotePositionPercentile-d.averageVotePositionPercentile).slice(0,j.TOP_15),a=i.highlightedPlayer&&t.some(n=>n.playerName===i.highlightedPlayer);let r=[...t],o=!1;if(i.highlightedPlayer&&!a){const n=h.playerTimingStats.find(d=>d.playerName===i.highlightedPlayer);n&&(r.push({...n,isHighlightedAddition:!0}),o=!0)}return{earlyVotersChartData:r,highlightedPlayerInEarlyVoters:o}},[h,i.highlightedPlayer]),{lateVotersChartData:k,highlightedPlayerInLateVoters:R}=p.useMemo(()=>{if(!h)return{lateVotersChartData:[],highlightedPlayerInLateVoters:!1};const t=[...h.playerTimingStats].sort((n,d)=>d.averageVotePositionPercentile-n.averageVotePositionPercentile).slice(0,j.TOP_15),a=i.highlightedPlayer&&t.some(n=>n.playerName===i.highlightedPlayer);let r=[...t],o=!1;if(i.highlightedPlayer&&!a){const n=h.playerTimingStats.find(d=>d.playerName===i.highlightedPlayer);n&&(r.push({...n,isHighlightedAddition:!0}),o=!0)}return{lateVotersChartData:r,highlightedPlayerInLateVoters:o}},[h,i.highlightedPlayer]),{firstVoterChartData:H,highlightedPlayerInFirstVoter:F}=p.useMemo(()=>{if(!h)return{firstVoterChartData:[],highlightedPlayerInFirstVoter:!1};const t=h.playerTimingStats.map(d=>({...d,firstVoterPercentage:d.totalTimedVotes>0?d.timesFirstVoter/d.totalTimedVotes*100:0})),a=t.filter(d=>d.timesFirstVoter>0).sort((d,I)=>I.firstVoterPercentage-d.firstVoterPercentage).slice(0,j.TOP_15),r=i.highlightedPlayer&&a.some(d=>d.playerName===i.highlightedPlayer);let o=[...a],n=!1;if(i.highlightedPlayer&&!r){const d=t.find(I=>I.playerName===i.highlightedPlayer);d&&d.timesFirstVoter>0&&(o.push({...d,isHighlightedAddition:!0}),n=!0)}return{firstVoterChartData:o,highlightedPlayerInFirstVoter:n}},[h,i.highlightedPlayer]),{fastVotersChartData:s,highlightedPlayerInFastVoters:l}=p.useMemo(()=>{if(!h)return{fastVotersChartData:[],highlightedPlayerInFastVoters:!1};const t=[...h.playerTimingStats].sort((n,d)=>n.averageVoteDelaySeconds-d.averageVoteDelaySeconds).slice(0,j.TOP_15),a=i.highlightedPlayer&&t.some(n=>n.playerName===i.highlightedPlayer);let r=[...t],o=!1;if(i.highlightedPlayer&&!a){const n=h.playerTimingStats.find(d=>d.playerName===i.highlightedPlayer);n&&(r.push({...n,isHighlightedAddition:!0}),o=!0)}return{fastVotersChartData:r,highlightedPlayerInFastVoters:o}},[h,i.highlightedPlayer]);return!h||!h.playerTimingStats||h.playerTimingStats.length===0?e.jsxs("div",{className:"donnees-manquantes",children:[e.jsx("p",{children:"Aucune donnÃ©e de timing de vote disponible"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Les statistiques de timing nÃ©cessitent des parties en version 0.201+ avec le mode modÃ© activÃ©."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"â° Voteurs PrÃ©coces - Top 15"}),z&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Position moyenne de vote (0 = premier voteur, 100 = dernier voteur). Classement des joueurs qui votent le plus tÃ´t."}),e.jsx(P,{title:"Voteurs PrÃ©coces - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:v,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const o=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:o?"var(--accent-primary)":"var(--text-secondary)",fontSize:o?14:13,fontWeight:o?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(T,{label:{value:"Position Moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,o=r.isHighlightedAddition,n=i.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:n?"2px solid var(--accent-primary)":o?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:n?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,n&&" ðŸŽ¯",o&&!n&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Premier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesFirstVoter," fois"]})]}),o&&!n&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(C,{dataKey:"averageVotePositionPercentile",style:{cursor:"pointer"},onClick:u,children:v.map((t,a)=>{const r=i.highlightedPlayer===t.playerName,o=t.isHighlightedAddition,n=c===t.playerName;let d;return r?d="var(--accent-primary)":o?d="var(--accent-secondary)":n?d="var(--accent-hover)":d=y[t.playerName]||"var(--chart-primary)",e.jsx(A,{fill:d,stroke:r?"var(--accent-primary)":"none",strokeWidth:r?3:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>g(t.playerName),onMouseLeave:()=>g(null)},`cell-${a}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸŒ Voteurs Tardifs - Top 15"}),R&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Position moyenne de vote. Classement des joueurs qui votent le plus tard (proche de 100% = dernier voteur)."}),e.jsx(P,{title:"Voteurs Tardifs - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:k,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const o=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:o?"var(--accent-primary)":"var(--text-secondary)",fontSize:o?14:13,fontWeight:o?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(T,{label:{value:"Position Moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,o=r.isHighlightedAddition,n=i.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:n?"2px solid var(--accent-primary)":o?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:n?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,n&&" ðŸŽ¯",o&&!n&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Dernier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesLastVoter," fois"]})]}),o&&!n&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(C,{dataKey:"averageVotePositionPercentile",style:{cursor:"pointer"},onClick:u,children:k.map((t,a)=>{const r=i.highlightedPlayer===t.playerName,o=t.isHighlightedAddition,n=c===t.playerName;let d;return r?d="var(--accent-primary)":o?d="var(--accent-secondary)":n?d="var(--accent-hover)":d=y[t.playerName]||"var(--chart-primary)",e.jsx(A,{fill:d,stroke:r?"var(--accent-primary)":"none",strokeWidth:r?3:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>g(t.playerName),onMouseLeave:()=>g(null)},`cell-${a}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ¥‡ Champions du Premier Vote - Top 15"}),F&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois oÃ¹ le joueur a Ã©tÃ© le premier Ã  voter dans un meeting (votes actifs uniquement)."}),e.jsx(P,{title:"Champions du Premier Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:H,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const o=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:o?"var(--accent-primary)":"var(--text-secondary)",fontSize:o?14:13,fontWeight:o?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(T,{label:{value:"Taux (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,o=r.isHighlightedAddition,n=i.highlightedPlayer===r.playerName,d=r.totalTimedVotes>0?(r.timesFirstVoter/r.totalTimedVotes*100).toFixed(1):"0";return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:n?"2px solid var(--accent-primary)":o?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:n?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,n&&" ðŸŽ¯",o&&!n&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Premier voteur: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.timesFirstVoter," fois"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Taux: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[d,"%"]})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),o&&!n&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(C,{dataKey:"firstVoterPercentage",style:{cursor:"pointer"},onClick:u,children:H.map((t,a)=>{const r=i.highlightedPlayer===t.playerName,o=t.isHighlightedAddition,n=c===t.playerName;let d;return r?d="var(--accent-primary)":o?d="var(--accent-secondary)":n?d="var(--accent-hover)":d=y[t.playerName]||"var(--chart-primary)",e.jsx(A,{fill:d,stroke:r?"var(--accent-primary)":"none",strokeWidth:r?3:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>g(t.playerName),onMouseLeave:()=>g(null)},`cell-${a}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"âš¡ Voteurs les Plus Rapides - Top 15"}),l&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary-text)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"DÃ©lai moyen en secondes entre le premier vote et le vote du joueur. Plus c'est bas, plus le joueur vote rapidement."}),e.jsx(P,{title:"Voteurs les Plus Rapides - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(D,{data:s,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:r})=>{const o=i.highlightedPlayer===r.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:o?"var(--accent-primary)":"var(--text-secondary)",fontSize:o?14:13,fontWeight:o?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:r.value})}}),e.jsx(T,{label:{value:"DÃ©lai Moyen (secondes)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,o=r.isHighlightedAddition,n=i.highlightedPlayer===r.playerName,d=Math.round(r.averageVoteDelaySeconds),I=Math.floor(d/60),E=d%60,K=`${I}m ${E}s`;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:n?"2px solid var(--accent-primary)":o?"2px dashed var(--accent-secondary)":"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"bold",color:n?"var(--accent-primary)":"var(--text-primary)",marginBottom:"8px"},children:[r.playerName,n&&" ðŸŽ¯",o&&!n&&" â­"]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["DÃ©lai moyen: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:K})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Votes analysÃ©s: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:r.totalTimedVotes})]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Position moyenne: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:[r.averageVotePositionPercentile.toFixed(1),"%"]})]}),o&&!n&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"var(--accent-secondary)",fontStyle:"italic"},children:"â­ Joueur ajoutÃ© (hors top 15)"})]})}return null}}),e.jsx(C,{dataKey:"averageVoteDelaySeconds",style:{cursor:"pointer"},onClick:u,children:s.map((t,a)=>{const r=i.highlightedPlayer===t.playerName,o=t.isHighlightedAddition,n=c===t.playerName;let d;return r?d="var(--accent-primary)":o?d="var(--accent-secondary)":n?d="var(--accent-hover)":d=y[t.playerName]||"var(--chart-primary)",e.jsx(A,{fill:d,stroke:r?"var(--accent-primary)":"none",strokeWidth:r?3:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>g(t.playerName),onMouseLeave:()=>g(null)},`cell-${a}`)})})]})})})})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"1rem",marginTop:"0rem",textAlign:"center"},children:[e.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-primary)"},children:["â„¹ï¸ ",e.jsx("strong",{children:"Note importante :"})," Ces statistiques analysent uniquement les ",e.jsx("strong",{children:"votes actifs"}),' (hors votes "PassÃ©").']}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:["DonnÃ©es disponibles : ",h.playerTimingStats.length," joueur",h.playerTimingStats.length>1?"s":""," avec au moins ",m," meeting",m>1?"s":""," â€¢ Parties en version 0.201+"]})]})]})}function le(){const{navigationState:m}=M(),[i,f]=p.useState(m.votingStatsState?.selectedCategory||"overview"),[x,y]=p.useState(_.MIN_MEETINGS),{data:c,isLoading:g,error:h}=w();if(g)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de votes..."});if(h)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",h]});if(!c)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"});const u=[5,15,25,50,100,200,400];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"ðŸ“Š Statistiques de Votes"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{type:"button",onClick:()=>{f("overview")},style:{background:i==="overview"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="overview"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="overview"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ“Š Vue d'Ensemble"}),e.jsx("button",{type:"button",onClick:()=>{f("behavior")},style:{background:i==="behavior"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="behavior"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="behavior"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ—³ï¸ Comportements de Vote"}),e.jsx("button",{type:"button",onClick:()=>{f("timing")},style:{background:i==="timing"?"var(--accent-primary)":"var(--bg-tertiary)",color:i==="timing"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:i==="timing"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"â° Timing de Vote"})]}),e.jsx("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:x,onChange:v=>y(Number(v.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:u.map(v=>e.jsx("option",{value:v,children:v},v))})]})})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[i==="overview"&&e.jsx(G,{minMeetings:x}),i==="behavior"&&e.jsx(X,{minMeetings:x}),i==="timing"&&e.jsx(Y,{minMeetings:x})]})]})}export{le as VotingStatisticsChart};
