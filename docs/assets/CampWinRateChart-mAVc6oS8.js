import{r as o,j as e}from"./index-CnTU5U0S.js";import{R as u,B as m,C as h,X as f,Y as p,T as x,L as g,a as j,b as v}from"./BarChart-BdkmPsts.js";function y(){const[s,c]=o.useState(null),[i,t]=o.useState(!0),[a,r]=o.useState(null);return o.useEffect(()=>{(async()=>{try{t(!0),r(null);const l=await fetch("https://script.google.com/macros/s/AKfycbw7amBQVger2k8MpFhueGGtAMUsYioIvdU2yVcixtFuk66a2DRWEpZ_c3xf2nncKjuHPg/exec?action=campWinStats");if(!l.ok)throw new Error(`Erreur réseau: ${l.status}`);const d=await l.json();if(d.error)throw new Error(d.error);c(d)}catch(n){console.error("Erreur lors du chargement des statistiques de victoire:",n),r(n instanceof Error?n.message:"Erreur inconnue")}finally{t(!1)}})()},[]),{campWinStats:s,isLoading:i,errorInfo:a}}const C={Villageois:"#4CAF50",Loups:"#ff1100ff",Amoureux:"#E91E63","Idiot du Village":"#fbff00ff",Cannibale:"#795548","La Bête":"#a00000ff",Espion:"#2196F3",Vaudou:"#673AB7","Chasseur de primes":"#FFC107"},E="#607D8B";function b(){const{campWinStats:s,isLoading:c,errorInfo:i}=y();return c?e.jsx("div",{className:"statistiques-chargement",children:"Chargement des statistiques de victoire..."}):i?e.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",i]}):!s||!s.campStats||s.campStats.length===0?e.jsx("div",{className:"statistiques-vide",children:"Aucune donnée de victoire disponible"}):e.jsxs("div",{className:"lycans-stats-container",children:[e.jsx("h2",{children:"Statistiques de Victoire par Camp"}),e.jsxs("p",{children:["Total des parties: ",s.totalGames]}),e.jsx("div",{className:"lycans-chart-wrapper",style:{height:400},children:e.jsx(u,{width:"100%",height:"100%",children:e.jsxs(m,{data:s.campStats,margin:{top:20,right:30,left:20,bottom:70},children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(p,{label:{value:"Taux de victoire (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(x,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:["Camp : ",r.camp]}),e.jsxs("div",{children:["Victoires : ",r.wins]}),e.jsxs("div",{children:["Taux de victoire : ",r.winRate,"%"]})]})}return null}}),e.jsx(g,{formatter:t=>t==="winRate"?"Taux de victoire":t}),e.jsx(j,{dataKey:"winRate",name:"winRate",fill:"#82ca9d",children:s.campStats.map((t,a)=>e.jsx(v,{fill:C[t.camp]||E},`cellule-${a}`))})]})})})]})}export{b as CampWinRateChart};
