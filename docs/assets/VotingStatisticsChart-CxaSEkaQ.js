import{r as y,a as V,u as z,j as e}from"./index-mVkbdXau.js";import{u as W}from"./baseStatsHook-DmPqT9H6.js";import{c as q}from"./votingStatsUtils-CqnOTB60.js";import{F as x,C as f,X as j,Y as S,a as P}from"./FullscreenChart-DURYIO7N.js";import{u as B}from"./useJoueursData-DvQxFOgh.js";import{u as F}from"./api-BfXzialC.js";import{R as b,T as A}from"./CategoricalChart-B4OHOSCd.js";import{B as N,a as T}from"./BarChart-Dspo8JTd.js";import"./datasyncExport-D6_8Fmuy.js";import"./deathTypes-CGUOTngO.js";function M(){return W(c=>{if(!c||c.length===0)return null;const r=c.filter(p=>p.PlayerStats.some(g=>g.Votes&&g.Votes.length>0));return r.length===0?null:q(r)})}function I(c=5){const{data:r,isLoading:p,error:g}=M();return{data:y.useMemo(()=>r?{...r,playerBehaviorStats:r.playerBehaviorStats.filter(d=>d.totalMeetings>=c),playerAccuracyStats:r.playerAccuracyStats.filter(d=>d.totalMeetings>=c),playerTargetStats:r.playerTargetStats.filter(d=>d.totalTimesTargeted>=c)}:null,[r,c]),isLoading:p,error:g}}function w({minMeetings:c}){const{settings:r}=V(),{navigateToGameDetails:p}=z(),{joueursData:g}=B(),u=F(g),[d,h]=y.useState(null),{data:n}=I(c),v=i=>{i&&i.playerName&&p({selectedPlayer:i.playerName,fromComponent:"Statistiques de Votes"})},{behaviorChartData:m,highlightedPlayerInBehavior:D}=y.useMemo(()=>{if(!n)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const i=[...n.playerBehaviorStats].sort((s,o)=>o.aggressivenessScore-s.aggressivenessScore).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerBehaviorStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{behaviorChartData:t,highlightedPlayerInBehavior:a}},[n,r.highlightedPlayer]),{accuracyChartData:k,highlightedPlayerInAccuracy:H}=y.useMemo(()=>{if(!n)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const i=[...n.playerAccuracyStats].sort((s,o)=>o.accuracyRate!==s.accuracyRate?o.accuracyRate-s.accuracyRate:o.totalVotes-s.totalVotes).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerAccuracyStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{accuracyChartData:t,highlightedPlayerInAccuracy:a}},[n,r.highlightedPlayer]),{targetChartData:C,highlightedPlayerInTargets:R}=y.useMemo(()=>{if(!n)return{targetChartData:[],highlightedPlayerInTargets:!1};const i=[...n.playerTargetStats].sort((s,o)=>o.survivalRate-s.survivalRate).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerTargetStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{targetChartData:t,highlightedPlayerInTargets:a}},[n,r.highlightedPlayer]);return n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ—³ï¸ Score d'AgressivitÃ©"}),D&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basÃ© sur le taux de vote, les abstentions et les "passÃ©s". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(x,{title:"Score d'AgressivitÃ©",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:m,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:"Score d'AgressivitÃ© (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes," (",t.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["PassÃ©s: ",t.totalSkips," (",t.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",t.totalAbstentions," (",t.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",t.aggressivenessScore.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:v,children:m.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||(i.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-behavior-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸŽ¯ PrÃ©cision des Votes - Taux de Votes Justes"}),H&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigÃ©s contre le camp adverse (et non contre son propre camp)."}),e.jsx(x,{title:"PrÃ©cision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:k,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:"Taux de PrÃ©cision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes justes: ",t.votesForEnemyCamp]}),e.jsxs("div",{children:["Votes incorrects: ",t.votesForOwnCamp]}),e.jsx("div",{children:e.jsxs("strong",{children:["PrÃ©cision: ",t.accuracyRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:v,children:k.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||"var(--chart-primary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-accuracy-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ”» Joueurs CiblÃ©s - Taux de Survie aux Votes"}),R&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois oÃ¹ le joueur a survÃ©cu aprÃ¨s avoir Ã©tÃ© ciblÃ© par au moins un vote."}),e.jsx(x,{title:"Joueurs CiblÃ©s - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:C,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Fois ciblÃ©: ",t.totalTimesTargeted]}),e.jsxs("div",{children:["CiblÃ© par camp adverse: ",t.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["CiblÃ© par son camp: ",t.timesTargetedByOwnCamp]}),e.jsxs("div",{children:["Ã‰liminations par vote: ",t.eliminationsByVote]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de survie: ",t.survivalRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:v,children:C.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||"var(--chart-secondary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-target-${l}`)})})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function $({minMeetings:c}){const{settings:r}=V(),{navigateToGameDetails:p}=z(),{joueursData:g}=B(),u=F(g),[d,h]=y.useState(null),{data:n}=I(c),v=i=>{i&&i.playerName&&p({selectedPlayer:i.playerName,fromComponent:"Statistiques de Votes"})},{voteRateChartData:m,highlightedPlayerInVoteRate:D}=y.useMemo(()=>{if(!n)return{voteRateChartData:[],highlightedPlayerInVoteRate:!1};const i=[...n.playerBehaviorStats].sort((s,o)=>o.votingRate-s.votingRate).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerBehaviorStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{voteRateChartData:t,highlightedPlayerInVoteRate:a}},[n,r.highlightedPlayer]),{skipRateChartData:k,highlightedPlayerInSkipRate:H}=y.useMemo(()=>{if(!n)return{skipRateChartData:[],highlightedPlayerInSkipRate:!1};const i=[...n.playerBehaviorStats].sort((s,o)=>o.skippingRate-s.skippingRate).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerBehaviorStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{skipRateChartData:t,highlightedPlayerInSkipRate:a}},[n,r.highlightedPlayer]),{abstentionRateChartData:C,highlightedPlayerInAbstentionRate:R}=y.useMemo(()=>{if(!n)return{abstentionRateChartData:[],highlightedPlayerInAbstentionRate:!1};const i=[...n.playerBehaviorStats].sort((s,o)=>o.abstentionRate-s.abstentionRate).slice(0,15),l=r.highlightedPlayer&&i.some(s=>s.playerName===r.highlightedPlayer);let t=[...i],a=!1;if(r.highlightedPlayer&&!l){const s=n.playerBehaviorStats.find(o=>o.playerName===r.highlightedPlayer);s&&(t.push({...s,isHighlightedAddition:!0}),a=!0)}return{abstentionRateChartData:t,highlightedPlayerInAbstentionRate:a}},[n,r.highlightedPlayer]);return n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸ“Š Taux de Vote - Top 15"}),D&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur a votÃ© activement (hors non-votes)."}),e.jsx(x,{title:"Taux de Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:m,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:"Taux de Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de vote: ",t.votingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"votingRate",style:{cursor:"pointer"},onClick:v,children:m.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||"var(--chart-primary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-voterate-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:'â­ï¸ Taux de "PassÃ©" - Top 15'}),H&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings oÃ¹ le joueur a votÃ© "PassÃ©".'}),e.jsx(x,{title:'Taux de "PassÃ©" - Top 15',children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:k,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:'Taux de "PassÃ©" (%)',angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:['Votes "PassÃ©": ',t.totalSkips]}),e.jsx("div",{children:e.jsxs("strong",{children:['Taux de "PassÃ©": ',t.skippingRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"skippingRate",style:{cursor:"pointer"},onClick:v,children:k.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||"var(--chart-secondary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-skiprate-${l}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"ðŸš« Taux de Non-Vote - Top 15"}),R&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings oÃ¹ le joueur n'a pas votÃ© du tout."}),e.jsx(x,{title:"Taux de Non-Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:C,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:l,payload:t})=>{const a=r.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:a?"var(--accent-primary)":"var(--text-secondary)",fontSize:a?14:13,fontWeight:a?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:t.value})}}),e.jsx(S,{label:{value:"Taux de Non-Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(A,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const t=l[0].payload,a=t.isHighlightedAddition,s=r.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Non-votes: ",t.totalAbstentions]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de non-vote: ",t.abstentionRate.toFixed(1),"%"]})}),a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),s&&!a&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"abstentionRate",style:{cursor:"pointer"},onClick:v,children:C.map((i,l)=>{const t=r.highlightedPlayer===i.playerName,a=d===i.playerName,s=i.isHighlightedAddition;return e.jsx(P,{fill:u[i.playerName]||"var(--chart-tertiary)",stroke:t?"var(--accent-primary)":a?"var(--text-primary)":"transparent",strokeWidth:t?3:a?2:0,strokeDasharray:s?"5,5":"none",opacity:s?.8:1,onMouseEnter:()=>h(i.playerName),onMouseLeave:()=>h(null),style:{cursor:"pointer"}},`cell-abstention-${l}`)})})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"})}function Z(){const{navigationState:c}=z(),[r,p]=y.useState(c.votingStatsState?.selectedCategory||"overview"),[g,u]=y.useState(25),{data:d,isLoading:h,error:n}=M();if(h)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de votes..."});if(n)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",n]});if(!d)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de vote disponible"});const v=[5,15,25,50,100,200,400];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"ðŸ“Š Statistiques de Votes"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>{p("overview")},style:{background:r==="overview"?"var(--accent-primary)":"var(--bg-tertiary)",color:r==="overview"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:r==="overview"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ“Š Vue d'Ensemble"}),e.jsx("button",{onClick:()=>{p("behavior")},style:{background:r==="behavior"?"var(--accent-primary)":"var(--bg-tertiary)",color:r==="behavior"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:r==="behavior"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"ðŸ—³ï¸ Comportements de Vote"})]}),e.jsx("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:g,onChange:m=>u(Number(m.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:v.map(m=>e.jsx("option",{value:m,children:m},m))})]})})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[r==="overview"&&e.jsx(w,{minMeetings:g}),r==="behavior"&&e.jsx($,{minMeetings:g})]})]})}export{Z as VotingStatisticsChart};
