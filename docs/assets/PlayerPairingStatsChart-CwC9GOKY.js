import{r as o,j as e}from"./index-BwHXvppZ.js";import{R as x,B as v,C as m,X as j,Y as g,T as y,a as f}from"./BarChart-DU5BJQWH.js";function A(){const[i,b]=o.useState(null),[d,t]=o.useState(!0),[h,l]=o.useState(null);return o.useEffect(()=>{(async()=>{try{t(!0),l(null);const c=await fetch("https://script.google.com/macros/s/AKfycbxrhG1mb7N6q7Mg88ogw0mirXgSihPpNPurZwiEOy9miG24Cc3AlGZCn2uoGnygNhck/exec?action=playerPairingStats");if(!c.ok)throw new Error(`Erreur API: ${c.status}`);const u=await c.json();b(u)}catch(n){console.error("Erreur lors de la récupération des statistiques de paires:",n),l(n instanceof Error?n.message:"Erreur inconnue")}finally{t(!1)}})()},[]),{data:i,isLoading:d,error:h}}function q(){const{data:i,isLoading:b,error:d}=A(),[t,h]=o.useState("wolves");if(b)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de paires..."});if(d)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",d]});if(!i)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de paires disponible"});const l=i.wolfPairs.pairs.filter(s=>s.appearances>=2).map(s=>({...s,winRateNum:parseFloat(s.winRate)})),p=i.loverPairs.pairs.filter(s=>s.appearances>=1).map(s=>({...s,winRateNum:parseFloat(s.winRate)})),n=l.sort((s,a)=>a.appearances-s.appearances).slice(0,10),c=l.filter(s=>s.appearances>=3).sort((s,a)=>a.winRateNum-s.winRateNum).slice(0,10),u=p.sort((s,a)=>a.appearances-s.appearances).slice(0,10),P=p.filter(s=>s.appearances>=2).sort((s,a)=>a.winRateNum-s.winRateNum).slice(0,10),N=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Parties avec Plusieurs Loups"}),e.jsx("div",{className:"lycans-valeur-principale",children:i.wolfPairs.totalGames}),e.jsx("p",{children:"parties analysées"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Paires Différentes"}),e.jsx("div",{className:"lycans-valeur-principale",children:i.wolfPairs.pairs.length}),e.jsx("p",{children:"combinaisons trouvées"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Paires Récurrentes"}),e.jsx("div",{className:"lycans-valeur-principale",children:l.length}),e.jsx("p",{children:"avec 2+ apparitions"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires de Loups les Plus Fréquentes"}),n.length>0?e.jsx("div",{style:{height:350},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(v,{data:n,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11}),e.jsx(g,{label:{value:"Apparitions",angle:-90,position:"insideLeft"}}),e.jsx(y,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.pair})}),e.jsxs("div",{children:["Apparitions: ",r.appearances]}),e.jsxs("div",{children:["Victoires: ",r.wins]}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]})]})}return null}}),e.jsx(f,{dataKey:"appearances",name:"Apparitions",fill:"var(--chart-color-1)"})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Aucune paire récurrente trouvée"})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires de Loups les Plus Performantes"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"(minimum 3 apparitions)"}),c.length>0?e.jsx("div",{style:{height:320},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(v,{data:c,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11}),e.jsx(g,{label:{value:"Taux de victoire (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(y,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.pair})}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]}),e.jsxs("div",{children:["Victoires: ",r.wins," / ",r.appearances]})]})}return null}}),e.jsx(f,{dataKey:"winRateNum",name:"Taux de victoire (%)",fill:"var(--chart-color-4)"})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Pas assez de données pour analyser la performance"})})]})]})]}),w=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Parties avec des Amoureux"}),e.jsx("div",{className:"lycans-valeur-principale",children:i.loverPairs.totalGames}),e.jsx("p",{children:"parties analysées"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Paires Différentes"}),e.jsx("div",{className:"lycans-valeur-principale",children:i.loverPairs.pairs.length}),e.jsx("p",{children:"combinaisons trouvées"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Paires Récurrentes"}),e.jsx("div",{className:"lycans-valeur-principale",children:p.length}),e.jsx("p",{children:"avec 2+ apparitions"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires d'Amoureux les Plus Fréquentes"}),u.length>0?e.jsx("div",{style:{height:350},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(v,{data:u,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11}),e.jsx(g,{label:{value:"Apparitions",angle:-90,position:"insideLeft"}}),e.jsx(y,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.pair})}),e.jsxs("div",{children:["Apparitions: ",r.appearances]}),e.jsxs("div",{children:["Victoires: ",r.wins]}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]})]})}return null}}),e.jsx(f,{dataKey:"appearances",name:"Apparitions",fill:"var(--chart-color-5)"})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Aucune paire d'amoureux trouvée"})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires d'Amoureux les Plus Performantes"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"(minimum 2 apparitions)"}),P.length>0?e.jsx("div",{style:{height:320},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(v,{data:P,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11}),e.jsx(g,{label:{value:"Taux de victoire (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(y,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.pair})}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]}),e.jsxs("div",{children:["Victoires: ",r.wins," / ",r.appearances]})]})}return null}}),e.jsx(f,{dataKey:"winRateNum",name:"Taux de victoire (%)",fill:"var(--chart-color-6)"})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Pas assez de données pour analyser la performance"})})]})]})]});return e.jsxs("div",{className:"lycans-players-pairing",children:[e.jsx("h2",{children:"Analyse des Paires de Joueurs"}),e.jsx("p",{className:"lycans-stats-info",children:"Fréquence et performance des joueurs lorsqu'ils jouent ensemble en tant que loups ou amoureux"}),e.jsxs("nav",{className:"lycans-submenu",children:[e.jsxs("button",{className:`lycans-submenu-btn${t==="wolves"?" active":""}`,onClick:()=>h("wolves"),type:"button",children:["Paires de Loups (",i.wolfPairs.pairs.length,")"]}),e.jsxs("button",{className:`lycans-submenu-btn${t==="lovers"?" active":""}`,onClick:()=>h("lovers"),type:"button",children:["Paires d'Amoureux (",i.loverPairs.pairs.length,")"]})]}),e.jsx("div",{className:"lycans-dashboard-content",children:t==="wolves"?N():w()})]})}export{q as PlayerPairingStatsChart};
