import{u as b,r as u,j as e}from"./index-_KzV5mQ9.js";import{u as N}from"./usePlayerCampPerformance-CxNvMtUi.js";import{l as d}from"./api-K__vudGA.js";import{R as h,p as m,T as x,B as R,C,X as w,Y as P,o as S}from"./BarChart-C-wLyW9P.js";import{P as j,a as v}from"./PieChart-BXqQHaDo.js";import{L as $}from"./Legend-C0wSB2hX.js";function A(){const{combinedData:i,isLoading:c,error:l}=b();return{campWinStats:i&&i.campWinStats?i.campWinStats:null,isLoading:c,errorInfo:l}}const L="#607D8B";function K(){const{campWinStats:i,isLoading:c,errorInfo:l}=A(),{playerCampPerformance:t,isLoading:g,error:y}=N(),n=u.useMemo(()=>t?.campAverages?t.campAverages.map(s=>({...s,winRateNum:parseFloat(s.winRate)})).sort((s,a)=>a.winRateNum-s.winRateNum):[],[t]),o=u.useMemo(()=>i?.campStats?.map(s=>({...s,winRateNum:typeof s.winRate=="string"?parseFloat(s.winRate):s.winRate}))||[],[i]),f=c||g,p=l||y;return f?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques des camps..."}):p?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",p]}):!i&&!t?e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de camp disponible"}):e.jsxs("div",{className:"lycans-camps-container",children:[e.jsx("h2",{children:"Statistiques des Camps"}),t&&e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Camps Analysés"}),e.jsx("div",{className:"lycans-valeur-principale",children:t.campAverages.length}),e.jsx("p",{children:"camps différents"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Joueurs Évalués"}),e.jsx("div",{className:"lycans-valeur-principale",children:t.playerPerformance.length}),e.jsx("p",{children:"joueurs analysés"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total Parties"}),e.jsx("div",{className:"lycans-valeur-principale",children:i?.totalGames||0}),e.jsx("p",{children:"parties analysées"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[i&&o.length>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Répartition des Victoires par Camp"}),e.jsxs("p",{className:"lycans-stats-info",children:["Distribution des victoires sur ",i.totalGames," parties"]}),e.jsx("div",{style:{height:450},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(j,{children:[e.jsx(v,{data:o,cx:"50%",cy:"50%",labelLine:!1,outerRadius:140,fill:"#8884d8",dataKey:"winRateNum",nameKey:"camp",label:({camp:s,winRate:a})=>`${s}: ${a}%`,children:o.map((s,a)=>e.jsx(m,{fill:d[s.camp]||L},`cellule-camp-${a}`))}),e.jsx(x,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:r.camp}),e.jsxs("div",{children:["Victoires: ",r.wins]}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]})]})}return null}}),e.jsx($,{})]})})})]})}),t&&n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Taux de Victoire Moyen par Camp"}),e.jsx("div",{style:{height:400},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(R,{data:n,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"camp",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11}),e.jsx(P,{label:{value:"Taux de victoire (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(x,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.camp})}),e.jsxs("div",{children:["Parties totales: ",r.totalGames]}),e.jsxs("div",{children:["Taux de victoire: ",r.winRate,"%"]})]})}return null}}),e.jsx(S,{dataKey:"winRateNum",children:n.map((s,a)=>e.jsx(m,{fill:d[s.camp]||`var(--chart-color-${a%6+1})`},`cell-${a}`))})]})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Distribution des Parties par Camp"}),e.jsx("div",{style:{height:400},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(j,{children:[e.jsx(v,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"totalGames",label:({camp:s,totalGames:a,percent:r})=>`${s}: ${a} (${((r!==void 0?r:0)*100).toFixed(1)}%)`,children:n.map((s,a)=>e.jsx(m,{fill:d[s.camp]||`var(--chart-color-${a%6+1})`},`cell-${a}`))}),e.jsx(x,{content:({active:s,payload:a})=>{if(s&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.camp})}),e.jsxs("div",{children:["Parties: ",r.totalGames]}),e.jsxs("div",{children:["Taux victoire: ",r.winRate,"%"]})]})}return null}})]})})})]})]})]})]})}export{K as CampsChart};
