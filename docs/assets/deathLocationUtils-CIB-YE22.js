import{r as s}from"./index-B-HbAl93.js";import{w as J,bv as le,bw as ce,aq as ue,H as V,u as K,at as Z,L as O,c as q,s as de,av as pe,aw as me,ax as L,bx as ve,by as E,bz as fe,bA as ye,aG as he,a as Q,a9 as xe,a7 as ee,a8 as te,bB as Ae,ac as ge,a4 as ae,O as be,ad as Pe,ae as Ee,a3 as Ie,V as re,U as Se,Y as D,W as N,aj as U,Z as Oe,_ as _e,bC as C,$ as we,au as De,a0 as Te,aE as je,q as ie,aW as Le,aX as Ce,B as Me,A as ze,bD as Ne,am as Ke,a5 as Re}from"./CategoricalChart-D6Lk4_Xd.js";import{c as Be,j as Ve,h as $,u as Fe,f as ke,a as We,G as Ze,S as Ue,d as $e,e as Ge,g as Xe,b as Ye}from"./FullscreenChart-p2aWmUSV.js";import{g as G}from"./datasyncExport-BirWLS1z.js";function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?X(Object(a),!0).forEach(function(r){F(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function F(e,t,a){return(t=He(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function He(e){var t=Je(e,"string");return typeof t=="symbol"?t:t+""}function Je(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(null,arguments)}var qe=(e,t,a,r,i,n,o)=>{var{x1:u,x2:p,y1:d,y2:v}=o;if(i==null||n==null)return null;var l=Be({x:i,y:n}),h={x:e?l.x.apply(u,{position:"start"}):l.x.rangeMin,y:a?l.y.apply(d,{position:"start"}):l.y.rangeMin},x={x:t?l.x.apply(p,{position:"end"}):l.x.rangeMax,y:r?l.y.apply(v,{position:"end"}):l.y.rangeMax};return o.ifOverflow==="discard"&&(!l.isInRange(h)||!l.isInRange(x))?null:Ve(h,x)},Qe=(e,t)=>{var a;return s.isValidElement(e)?a=s.cloneElement(e,t):typeof e=="function"?a=e(t):a=s.createElement(ve,R({},t,{className:"recharts-reference-area-rect"})),a};function et(e){var t=J();return s.useEffect(()=>(t(le(e)),()=>{t(ce(e))})),null}function tt(e){var{x1:t,x2:a,y1:r,y2:i,className:n,shape:o,xAxisId:u,yAxisId:p}=e,d=ue(),v=V(),l=K(P=>Z(P,"xAxis",u,v)),h=K(P=>Z(P,"yAxis",p,v));if(l==null||!h==null)return null;var x=L(t),b=L(a),f=L(r),m=L(i);if(!x&&!b&&!f&&!m&&!o)return null;var c=qe(x,b,f,m,l,h,e);if(!c&&!o)return null;var y=e.ifOverflow==="hidden",g=y?"url(#".concat(d,")"):void 0;return s.createElement(O,{className:q("recharts-reference-area",n)},Qe(o,Y(Y({clipPath:g},de(e)),c)),s.createElement(pe,c,s.createElement(me,{label:e.label}),e.children))}function at(e){return s.createElement(s.Fragment,null,s.createElement(et,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),s.createElement(tt,e))}class ne extends s.Component{render(){return s.createElement(at,this.props)}}F(ne,"displayName","ReferenceArea");F(ne,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});function se(e,t,a){return(t=rt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rt(e){var t=it(e,"string");return typeof t=="symbol"?t:t+""}function it(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nt(e){var t=J();return s.useEffect(()=>(t(fe(e)),()=>{t(ye(e))}),[e,t]),null}class k extends s.Component{render(){return s.createElement(nt,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:E.allowDuplicatedCategory,allowDataOverflow:E.allowDataOverflow,reversed:E.reversed,includeHidden:E.includeHidden})}}se(k,"displayName","ZAxis");se(k,"defaultProps",{zAxisId:0,range:E.range,scale:E.scale,type:E.type});var st=["option","isActive"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},T.apply(null,arguments)}function ot(e,t){if(e==null)return{};var a,r,i=lt(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function lt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function ct(e){var{option:t,isActive:a}=e,r=ot(e,st);return typeof t=="string"?s.createElement($,T({option:s.createElement(he,T({type:t},r)),isActive:a,shapeType:"symbols"},r)):s.createElement($,T({option:t,isActive:a,shapeType:"symbols"},r))}var ut=(e,t,a,r,i,n,o)=>ee(e,"xAxis",t,o),dt=(e,t,a,r,i,n,o)=>te(e,"xAxis",t,o),pt=(e,t,a,r,i,n,o)=>ee(e,"yAxis",a,o),mt=(e,t,a,r,i,n,o)=>te(e,"yAxis",a,o),vt=(e,t,a,r)=>Ae(e,"zAxis",r,!1),ft=(e,t,a,r,i)=>i,yt=(e,t,a,r,i,n)=>n,ht=(e,t,a,r,i,n,o)=>xe(e,t,a,o),xt=Q([ge,ft],(e,t)=>e.filter(a=>a.type==="scatter").find(a=>a.id===t)),At=Q([ht,ut,dt,pt,mt,vt,xt,yt],(e,t,a,r,i,n,o,u)=>{var{chartData:p,dataStartIndex:d,dataEndIndex:v}=e;if(o!=null){var l;if(o?.data!=null&&o.data.length>0?l=o.data:l=p?.slice(d,v+1),!(l==null||t==null||r==null||a==null||i==null||a?.length===0||i?.length===0))return Ct({displayedData:l,xAxis:t,yAxis:r,zAxis:n,scatterSettings:o,xAxisTicks:a,yAxisTicks:i,cells:u})}}),gt=["onMouseEnter","onClick","onMouseLeave"],bt=["id"],Pt=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function B(e,t){if(e==null)return{};var a,r,i=Et(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Et(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},I.apply(null,arguments)}function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?H(Object(a),!0).forEach(function(r){It(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function It(e,t,a){return(t=St(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function St(e){var t=Ot(e,"string");return typeof t=="symbol"?t:t+""}function Ot(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _t=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:n}=e;return[{inactive:n,dataKey:t,type:i,color:r,value:re(a,t),payload:e}]};function wt(e){var{points:t,props:a}=e,{line:r,lineType:i,lineJointType:n}=a;if(!r)return null;var o=ie(a),u=ze(r),p,d;if(i==="joint")p=t.map(m=>({x:m.cx,y:m.cy}));else if(i==="fitting"){var{xmin:v,xmax:l,a:h,b:x}=Ne(t),b=m=>h*m+x;p=[{x:v,y:b(v)},{x:l,y:b(l)}]}var f=A(A(A({},o),{},{fill:"none",stroke:o&&o.fill},u),{},{points:p});return s.isValidElement(r)?d=s.cloneElement(r,f):typeof r=="function"?d=r(f):d=s.createElement(Ke,I({},f,{type:n})),s.createElement(O,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function Dt(e){var{showLabels:t,points:a,children:r}=e,i=De(),n=s.useMemo(()=>a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,height:o.height};return A(A({},u),{},{value:void 0,payload:o.payload,viewBox:u,parentViewBox:i,fill:void 0})}),[i,a]);return s.createElement(Te,{value:t?n:null},r)}function Tt(e){var{points:t,allOtherScatterProps:a}=e,{shape:r,activeShape:i,dataKey:n}=a,o=K(je),{onMouseEnter:u,onClick:p,onMouseLeave:d}=a,v=B(a,gt),l=$e(u,a.dataKey),h=Ge(d),x=Xe(p,a.dataKey);if(t==null)return null;var{id:b}=a,f=B(a,bt),m=ie(f);return s.createElement(s.Fragment,null,s.createElement(wt,{points:t,props:f}),t.map((c,y)=>{var g=i&&o===String(y),P=g?i:r,S=A(A(A({key:"symbol-".concat(y)},m),c),{},{[Ce]:y,[Le]:String(n)});return s.createElement(O,I({key:"symbol-".concat(c?.cx,"-").concat(c?.cy,"-").concat(c?.size,"-").concat(y),className:"recharts-scatter-symbol"},Me(v,c,y),{onMouseEnter:l(c,y),onMouseLeave:h(c,y),onClick:x(c,y)}),s.createElement(ct,I({option:P,isActive:g},S)))}))}function jt(e){var{previousPointsRef:t,props:a}=e,{points:r,isAnimationActive:i,animationBegin:n,animationDuration:o,animationEasing:u}=a,p=t.current,d=Oe(a,"recharts-scatter-"),[v,l]=s.useState(!1),h=s.useCallback(()=>{l(!1)},[]),x=s.useCallback(()=>{l(!0)},[]),b=!v;return s.createElement(Dt,{showLabels:b,points:r},a.children,s.createElement(_e,{animationId:d,begin:n,duration:o,isActive:i,easing:u,onAnimationEnd:h,onAnimationStart:x,key:d},f=>{var m=f===1?r:r?.map((c,y)=>{var g=p&&p[y];if(g){var P=C(g.cx,c.cx),S=C(g.cy,c.cy),_=C(g.size,c.size);return A(A({},c),{},{cx:P(f),cy:S(f),size:_(f)})}var w=C(0,c.size);return A(A({},c),{},{size:w(f)})});return f>0&&(t.current=m),s.createElement(O,null,s.createElement(Tt,{points:m,allOtherScatterProps:a,showLabels:b}))}),s.createElement(we,{label:a.label}))}function Lt(e){var{dataKey:t,points:a,stroke:r,strokeWidth:i,fill:n,name:o,hide:u,tooltipType:p}=e;return{dataDefinedOnItem:a?.map(d=>d.tooltipPayload),positions:a?.map(d=>d.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:n,nameKey:void 0,dataKey:t,name:re(o,t),hide:u,type:p,color:n,unit:""}}}function Ct(e){var{displayedData:t,xAxis:a,yAxis:r,zAxis:i,scatterSettings:n,xAxisTicks:o,yAxisTicks:u,cells:p}=e,d=D(a.dataKey)?n.dataKey:a.dataKey,v=D(r.dataKey)?n.dataKey:r.dataKey,l=i&&i.dataKey,h=i?i.range:k.defaultProps.range,x=h&&h[0],b=a.scale.bandwidth?a.scale.bandwidth():0,f=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((m,c)=>{var y=N(m,d),g=N(m,v),P=!D(l)&&N(m,l)||"-",S=[{name:D(a.dataKey)?n.name:a.name||a.dataKey,unit:a.unit||"",value:y,payload:m,dataKey:d,type:n.tooltipType},{name:D(r.dataKey)?n.name:r.name||r.dataKey,unit:r.unit||"",value:g,payload:m,dataKey:v,type:n.tooltipType}];P!=="-"&&S.push({name:i.name||i.dataKey,unit:i.unit||"",value:P,payload:m,dataKey:l,type:n.tooltipType});var _=U({axis:a,ticks:o,bandSize:b,entry:m,index:c,dataKey:d}),w=U({axis:r,ticks:u,bandSize:f,entry:m,index:c,dataKey:v}),W=P!=="-"?i.scale(P):x,j=Math.sqrt(Math.max(W,0)/Math.PI);return A(A({},m),{},{cx:_,cy:w,x:_-j,y:w-j,width:2*j,height:2*j,size:W,node:{x:y,y:g,z:P},tooltipPayload:S,tooltipPosition:{x:_,y:w},payload:m},p&&p[c]&&p[c].props)})}var Mt=(e,t,a)=>({x:e.cx,y:e.cy,value:a==="x"?+e.node.x:+e.node.y,errorVal:N(e,t)});function zt(e){var{hide:t,points:a,className:r,needClip:i,xAxisId:n,yAxisId:o,id:u}=e,p=s.useRef(null);if(t)return null;var d=q("recharts-scatter",r),v=u;return s.createElement(O,{className:d,clipPath:i?"url(#clipPath-".concat(v,")"):null,id:u},i&&s.createElement("defs",null,s.createElement(Ze,{clipPathId:v,xAxisId:n,yAxisId:o})),s.createElement(Ue,{xAxisId:n,yAxisId:o,data:a,dataPointFormatter:Mt,errorBarOffset:0},s.createElement(O,{key:"recharts-scatter-symbols"},s.createElement(jt,{props:e,previousPointsRef:p}))))}var oe={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ie.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function Nt(e){var t=ae(e,oe),{animationBegin:a,animationDuration:r,animationEasing:i,hide:n,isAnimationActive:o,legendType:u,lineJointType:p,lineType:d,shape:v,xAxisId:l,yAxisId:h,zAxisId:x}=t,b=B(t,Pt),{needClip:f}=Fe(l,h),m=s.useMemo(()=>ke(e.children,We),[e.children]),c=V(),y=K(g=>At(g,l,h,x,e.id,m,c));return f==null||y==null?null:s.createElement(s.Fragment,null,s.createElement(Se,{fn:Lt,args:A(A({},e),{},{points:y})}),s.createElement(zt,I({},b,{xAxisId:l,yAxisId:h,zAxisId:x,lineType:d,lineJointType:p,legendType:u,shape:v,hide:n,isAnimationActive:o,animationBegin:a,animationDuration:r,animationEasing:i,points:y,needClip:f})))}function Kt(e){var t=ae(e,oe),a=V();return s.createElement(be,{id:t.id,type:"scatter"},r=>s.createElement(s.Fragment,null,s.createElement(Pe,{legendPayload:_t(t)}),s.createElement(Ee,{type:"scatter",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:a}),s.createElement(Nt,I({},t,{id:r}))))}var Rt=s.memo(Kt);Rt.displayName="Scatter";var Bt=["item"],Gt=s.forwardRef((e,t)=>s.createElement(Ye,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Bt,tooltipPayloadSearcher:Re,categoricalChartProps:e,ref:t}));function Xt(e,t){return e==="BY_WOLF"||e==="SURVIVALIST_NOT_SAVED"?t.Loup:e==="VOTED"?"var(--chart-color-1)":e==="BULLET"||e==="BULLET_HUMAN"||e==="BULLET_WOLF"?t.Chasseur:e==="BY_ZOMBIE"?t.Vaudou:e==="ASSASSIN"?t.Alchimiste:e==="AVENGER"?"var(--chart-color-2)":e==="LOVER_DEATH"?t.Amoureux:e==="BY_BEAST"?"var(--chart-color-3)":e==="SHERIF_SUCCESS"?"var(--chart-color-4)":e==="SMUGGLER_HUNT_KILL"?t.Contrebandier:"var(--accent-primary-text)"}const Vt={Village:{src:"/Village.webp",zMin:-820,zMax:820,xMin:-461,xMax:461},Château:{src:"/Château.webp",zMin:-820,zMax:820,xMin:-461,xMax:461}},M={x:166.35,z:176.22,multiplier:5.45},z={x:403.32,z:-121.11,multiplier:18.4};function Ft(e,t,a){let r=e,i=t;return a==="Village"?(r=(e-M.x)*M.multiplier,i=(t-M.z)*M.multiplier*-1):a==="Château"&&(r=(e-z.x)*z.multiplier,i=(t-z.z)*z.multiplier*-1),{x:r,z:i}}function Yt(e){return Vt[e]||null}function kt(e){return e?e==="SURVIVALIST_NOT_SAVED"?"BY_WOLF":e:"UNKNOWN"}function Ht(e,t){if(t===0)return e.map(r=>({centroidX:r.x,centroidZ:r.z,items:[r]}));const a=[];return e.forEach(r=>{let i=!1;for(const n of a)if(Math.sqrt(Math.pow(r.x-n.centroidX,2)+Math.pow(r.z-n.centroidZ,2))<=t){const u=n.items.length;n.centroidX=(n.centroidX*u+r.x)/(u+1),n.centroidZ=(n.centroidZ*u+r.z)/(u+1),n.items.push(r),i=!0;break}i||a.push({centroidX:r.x,centroidZ:r.z,items:[r]})}),a}function Jt(e){if(e.length===0)return null;const t=new Map;e.forEach(i=>{t.set(i.deathType,(t.get(i.deathType)||0)+1)});let a=e[0].deathType,r=0;return t.forEach((i,n)=>{i>r&&(r=i,a=n)}),a}function qt(e,t){const a=[];return e.forEach(r=>{r.PlayerStats.filter(i=>i.DeathPosition!==null).filter(i=>!t||t==="Tous les camps"?!0:G(i.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0})===t).forEach(i=>{if(i.DeathPosition){const n=G(i.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0}),o=Ft(i.DeathPosition.x,i.DeathPosition.z,r.MapName);a.push({x:o.x,z:o.z,playerName:i.Username,deathType:kt(i.DeathType),mapName:r.MapName,killerName:i.KillerName||null,camp:n,gameId:r.DisplayedId,displayedGameId:r.DisplayedId})}})}),a}function Qt(e){const t=new Set;return e.forEach(a=>{a.PlayerStats.some(i=>i.DeathPosition!==null)&&a.MapName&&t.add(a.MapName)}),Array.from(t).sort()}export{ne as R,Gt as S,Ht as a,Jt as b,qt as c,Yt as d,Rt as e,Xt as f,Qt as g,Ft as h};
