import{c as v,r as o,j as e}from"./index-Bod4Rfim.js";function b(){const{settings:s,updateSettings:l,resetSettings:g}=v(),[i,x]=o.useState(null);o.useEffect(()=>{(async()=>{try{const n=await(await fetch("/stats-lycansv2/data/rawGameData.json")).json();x(n.data||[])}catch(t){console.error("Error fetching raw game data:",t)}})()},[]);const p=o.useMemo(()=>{if(!i)return[];const a=new Set;return i.forEach(t=>{const n=t["Liste des joueurs"];n&&n.split(",").map(r=>r.trim()).filter(r=>r.length>0).forEach(r=>a.add(r))}),Array.from(a).sort()},[i]),m=a=>{l({filterMode:a})},d=a=>{l({gameFilter:a})},u=(a,t)=>{l({dateRange:{...s.dateRange,[a]:t||null}})},c=a=>{l({playerFilter:{...s.playerFilter,mode:a}})},j=a=>{const t=s.playerFilter.players;if(t.includes(a)){const h=t.filter(r=>r!==a);l({playerFilter:{...s.playerFilter,players:h}})}else l({playerFilter:{...s.playerFilter,players:[...t,a]}})},y=()=>{l({playerFilter:{...s.playerFilter,players:[...p]}})},f=()=>{l({playerFilter:{...s.playerFilter,players:[]}})};return e.jsxs("div",{className:"settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"Paramètres de Filtrage"}),e.jsx("button",{onClick:g,className:"settings-reset-btn",type:"button",children:"Réinitialiser"})]}),e.jsxs("div",{className:"settings-sections-container",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("div",{className:"settings-section-header",children:e.jsx("h3",{children:"Filtre Principal"})}),e.jsxs("div",{className:"settings-group",children:[e.jsx("h4",{children:"Mode de Filtrage"}),e.jsxs("div",{className:"settings-radio-group",style:{flexDirection:"row",gap:"2rem"},children:[e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"filterMode",value:"gameType",checked:s.filterMode==="gameType",onChange:()=>m("gameType")}),e.jsx("span",{className:"radio-mark"}),e.jsx("span",{className:"settings-radio-content",children:"Par type de partie"})]}),e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"filterMode",value:"dateRange",checked:s.filterMode==="dateRange",onChange:()=>m("dateRange")}),e.jsx("span",{className:"radio-mark"}),e.jsx("span",{className:"settings-radio-content",children:"Par plage de dates"})]})]})]}),s.filterMode==="gameType"&&e.jsxs("div",{className:"settings-group",children:[e.jsx("h4",{children:"Filtres de Parties"}),e.jsxs("div",{className:"settings-radio-group",children:[e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"gameFilter",value:"all",checked:s.gameFilter==="all",onChange:()=>d("all")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Toutes les parties",e.jsx("small",{children:"Affiche toutes les parties disponibles"})]})]}),e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"gameFilter",value:"modded",checked:s.gameFilter==="modded",onChange:()=>d("modded")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Parties moddées uniquement",e.jsx("small",{children:"Affiche uniquement les parties avec des rôles modifiés"})]})]}),e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"gameFilter",value:"non-modded",checked:s.gameFilter==="non-modded",onChange:()=>d("non-modded")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Parties non-moddées uniquement",e.jsx("small",{children:"Affiche uniquement les parties avec des rôles standards"})]})]})]})]}),s.filterMode==="dateRange"&&e.jsxs("div",{className:"settings-group",children:[e.jsx("h4",{children:"Plage de dates"}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontWeight:500},children:["Début",e.jsx("input",{type:"date",value:s.dateRange.start||"",onChange:a=>u("start",a.target.value),style:{marginTop:4,fontSize:"1rem",padding:"4px 8px",borderRadius:4,border:"1px solid #ccc"},max:s.dateRange.end||void 0})]}),e.jsx("span",{style:{fontWeight:600},children:"—"}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontWeight:500},children:["Fin",e.jsx("input",{type:"date",value:s.dateRange.end||"",onChange:a=>u("end",a.target.value),style:{marginTop:4,fontSize:"1rem",padding:"4px 8px",borderRadius:4,border:"1px solid #ccc"},min:s.dateRange.start||void 0})]})]}),e.jsx("small",{style:{color:"var(--text-secondary, #6c757d)",marginTop:8,display:"block"},children:"Affiche uniquement les parties comprises dans la plage de dates sélectionnée."})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("div",{className:"settings-section-header",children:e.jsx("h3",{children:"Filtre Additionnel par Joueurs"})}),e.jsxs("div",{className:"settings-group",children:[e.jsxs("div",{className:"settings-radio-group",children:[e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"playerFilterMode",value:"none",checked:s.playerFilter.mode==="none",onChange:()=>c("none")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Aucun filtre par joueur",e.jsx("small",{children:"Affiche toutes les parties sans restriction par joueur"})]})]}),e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"playerFilterMode",value:"include",checked:s.playerFilter.mode==="include",onChange:()=>c("include")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Inclure seulement les parties avec ces joueurs",e.jsx("small",{children:"Affiche uniquement les parties où au moins un des joueurs listés a participé"})]})]}),e.jsxs("label",{className:"settings-radio",children:[e.jsx("input",{type:"radio",name:"playerFilterMode",value:"exclude",checked:s.playerFilter.mode==="exclude",onChange:()=>c("exclude")}),e.jsx("span",{className:"radio-mark"}),e.jsxs("span",{className:"settings-radio-content",children:["Exclure les parties avec ces joueurs",e.jsx("small",{children:"Affiche uniquement les parties où aucun des joueurs listés n'a participé"})]})]})]}),(s.playerFilter.mode==="include"||s.playerFilter.mode==="exclude")&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("label",{style:{fontWeight:500},children:["Sélection des joueurs (",s.playerFilter.players.length," sélectionné",s.playerFilter.players.length!==1?"s":"",")"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:y,style:{padding:"4px 8px",fontSize:"0.8rem",border:"1px solid var(--border-color, #ccc)",borderRadius:"4px",background:"var(--bg-tertiary, #f0f0f0)",color:"var(--text-primary, #333)",cursor:"pointer"},children:"Tout sélectionner"}),e.jsx("button",{type:"button",onClick:f,style:{padding:"4px 8px",fontSize:"0.8rem",border:"1px solid var(--border-color, #ccc)",borderRadius:"4px",background:"var(--bg-tertiary, #f0f0f0)",color:"var(--text-primary, #333)",cursor:"pointer"},children:"Tout désélectionner"})]})]}),e.jsx("div",{className:"settings-player-grid",children:p.map(a=>e.jsxs("label",{className:"settings-player-checkbox",children:[e.jsx("input",{type:"checkbox",checked:s.playerFilter.players.includes(a),onChange:()=>j(a)}),e.jsx("span",{className:"settings-player-checkmark"}),e.jsx("span",{className:"settings-player-name",children:a})]},a))}),e.jsxs("small",{style:{color:"var(--text-secondary, #6c757d)",marginTop:8,display:"block"},children:["Sélectionnez les joueurs à ",s.playerFilter.mode==="include"?"inclure":"exclure"," dans le filtrage."]})]})]})]})]}),e.jsxs("div",{className:"settings-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fonctionnement des filtres:"})," Le filtre principal (Section 1) détermine la base des parties affichées. Le filtre par joueurs (Section 2) s'applique ensuite sur cette sélection pour affiner davantage les résultats."]}),e.jsxs("p",{style:{marginTop:8},children:[e.jsx("strong",{children:"Note:"})," Les changements de paramètres sont sauvegardés automatiquement et s'appliquent à toutes les statistiques affichées."]})]})]})}export{b as SettingsPanel};
