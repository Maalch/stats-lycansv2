import{g as O,u as z,a as T,r as P,j as s}from"./index-B7037bdH.js";import{b as k,a as M,u as R}from"./datasyncExport-CoTOMGxn.js";import{u as J}from"./useJoueursData-DNedLT7k.js";import{u as $}from"./api-DRBjINHQ.js";import{F as q,B as H,C as B,X as U,Y as K,a as X,b as Y}from"./FullscreenChart-D8qXamvT.js";import{R as _,T as Q}from"./CategoricalChart-Co8ln5AU.js";function Z(e){const c=new Map;return e.forEach(g=>{g.PlayerStats.forEach(t=>{const u=O(t),h=t.Username;c.set(u,h)})}),c}function ee(e){const c={};return e.forEach((g,t)=>{c[t]={currentVillageoisSeries:0,currentLoupsSeries:0,currentNoWolfSeries:0,longestVillageoisSeries:null,longestLoupsSeries:null,longestNoWolfSeries:null,currentWinSeries:0,longestWinSeries:null,currentWinCamps:[],currentLossSeries:0,longestLossSeries:null,currentLossCamps:[],currentNoWolfCamps:[],lastCamp:null,lastWon:!1,villageoisSeriesStart:null,loupsSeriesStart:null,noWolfSeriesStart:null,winSeriesStart:null,lossSeriesStart:null,currentVillageoisGameIds:[],currentLoupsGameIds:[],currentNoWolfGameIds:[],currentWinGameIds:[],currentLossGameIds:[]}}),c}function se(e,c,g,t,u){if(g==="Villageois"||g==="Loup"?(g==="Villageois"&&(e.lastCamp==="Villageois"?(e.currentVillageoisSeries++,e.currentVillageoisGameIds.push(t)):(e.currentVillageoisSeries=1,e.villageoisSeriesStart={game:t,date:u},e.currentVillageoisGameIds=[t]),(!e.longestVillageoisSeries||e.currentVillageoisSeries>=e.longestVillageoisSeries.seriesLength)&&(e.longestVillageoisSeries={player:c,camp:"Villageois",seriesLength:e.currentVillageoisSeries,startGame:e.villageoisSeriesStart?.game||t,endGame:t,startDate:e.villageoisSeriesStart?.date||u,endDate:u,isOngoing:!1,gameIds:[...e.currentVillageoisGameIds]}),e.currentLoupsSeries=0,e.loupsSeriesStart=null,e.currentLoupsGameIds=[]),g==="Loup"&&(e.lastCamp==="Loup"?(e.currentLoupsSeries++,e.currentLoupsGameIds.push(t)):(e.currentLoupsSeries=1,e.loupsSeriesStart={game:t,date:u},e.currentLoupsGameIds=[t]),(!e.longestLoupsSeries||e.currentLoupsSeries>=e.longestLoupsSeries.seriesLength)&&(e.longestLoupsSeries={player:c,camp:"Loups",seriesLength:e.currentLoupsSeries,startGame:e.loupsSeriesStart?.game||t,endGame:t,startDate:e.loupsSeriesStart?.date||u,endDate:u,isOngoing:!1,gameIds:[...e.currentLoupsGameIds]}),e.currentVillageoisSeries=0,e.villageoisSeriesStart=null,e.currentVillageoisGameIds=[],e.currentNoWolfSeries=0,e.noWolfSeriesStart=null,e.currentNoWolfGameIds=[],e.currentNoWolfCamps=[]),e.lastCamp=g):(e.currentVillageoisSeries=0,e.currentLoupsSeries=0,e.villageoisSeriesStart=null,e.loupsSeriesStart=null,e.currentVillageoisGameIds=[],e.currentLoupsGameIds=[],e.lastCamp="Autres"),g!=="Loup"){e.currentNoWolfSeries>0?(e.currentNoWolfSeries++,e.currentNoWolfGameIds.push(t),e.currentNoWolfCamps.push(g)):(e.currentNoWolfSeries=1,e.noWolfSeriesStart={game:t,date:u},e.currentNoWolfGameIds=[t],e.currentNoWolfCamps=[g]);const h={};e.currentNoWolfCamps.forEach(l=>{h[l]=(h[l]||0)+1}),(!e.longestNoWolfSeries||e.currentNoWolfSeries>=e.longestNoWolfSeries.seriesLength)&&(e.longestNoWolfSeries={player:c,camp:"Sans Loups",seriesLength:e.currentNoWolfSeries,startGame:e.noWolfSeriesStart?.game||t,endGame:t,startDate:e.noWolfSeriesStart?.date||u,endDate:u,campCounts:h,isOngoing:!1,gameIds:[...e.currentNoWolfGameIds]})}}function ie(e,c,g,t,u,h){if(g){if(e.lastWon?(e.currentWinSeries++,e.currentWinCamps.push(t),e.currentWinGameIds.push(u)):(e.currentWinSeries=1,e.currentWinCamps=[t],e.winSeriesStart={game:u,date:h},e.currentWinGameIds=[u]),!e.longestWinSeries||e.currentWinSeries>=e.longestWinSeries.seriesLength){const l={};e.currentWinCamps.forEach(n=>{l[n]=(l[n]||0)+1}),e.longestWinSeries={player:c,seriesLength:e.currentWinSeries,startGame:e.winSeriesStart?.game||u,endGame:u,startDate:e.winSeriesStart?.date||h,endDate:h,campCounts:l,isOngoing:!1,gameIds:[...e.currentWinGameIds]}}e.lastWon=!0}else e.currentWinSeries=0,e.currentWinCamps=[],e.winSeriesStart=null,e.currentWinGameIds=[],e.lastWon=!1}function re(e,c,g,t,u,h){if(g)e.currentLossSeries=0,e.currentLossCamps=[],e.lossSeriesStart=null,e.currentLossGameIds=[];else if(e.currentLossSeries>0?(e.currentLossSeries++,e.currentLossCamps.push(t),e.currentLossGameIds.push(u)):(e.currentLossSeries=1,e.currentLossCamps=[t],e.lossSeriesStart={game:u,date:h},e.currentLossGameIds=[u]),!e.longestLossSeries||e.currentLossSeries>=e.longestLossSeries.seriesLength){const l={};e.currentLossCamps.forEach(n=>{l[n]=(l[n]||0)+1}),e.longestLossSeries={player:c,seriesLength:e.currentLossSeries,startGame:e.lossSeriesStart?.game||u,endGame:u,startDate:e.lossSeriesStart?.date||h,endDate:h,campCounts:l,isOngoing:!1,gameIds:[...e.currentLossGameIds]}}}function ne(e){const c=[],g=[],t=[],u=[],h=[];return Object.values(e).forEach(l=>{l.longestVillageoisSeries&&c.push(l.longestVillageoisSeries),l.longestLoupsSeries&&g.push(l.longestLoupsSeries),l.longestNoWolfSeries&&t.push(l.longestNoWolfSeries),l.longestWinSeries&&u.push(l.longestWinSeries),l.longestLossSeries&&h.push(l.longestLossSeries)}),c.sort((l,n)=>n.seriesLength-l.seriesLength),g.sort((l,n)=>n.seriesLength-l.seriesLength),t.sort((l,n)=>n.seriesLength-l.seriesLength),u.sort((l,n)=>n.seriesLength-l.seriesLength),h.sort((l,n)=>n.seriesLength-l.seriesLength),{allVillageoisSeries:c,allLoupsSeries:g,allNoWolfSeries:t,allWinSeries:u,allLossSeries:h}}function oe(e,c){const g=[],t=[],u=[],h=[],l=[];Object.values(e).forEach(d=>{g.push(d.longestVillageoisSeries?.seriesLength||0),t.push(d.longestLoupsSeries?.seriesLength||0),u.push(d.longestNoWolfSeries?.seriesLength||0),h.push(d.longestWinSeries?.seriesLength||0),l.push(d.longestLossSeries?.seriesLength||0)});const n=c>0?g.reduce((d,S)=>d+S,0)/c:0,I=c>0?t.reduce((d,S)=>d+S,0)/c:0,f=c>0?u.reduce((d,S)=>d+S,0)/c:0,W=c>0?h.reduce((d,S)=>d+S,0)/c:0,C=c>0?l.reduce((d,S)=>d+S,0)/c:0,j=g.filter(d=>d>=5).length,N=t.filter(d=>d>=3).length,b=u.filter(d=>d>=5).length,G=h.filter(d=>d>=5).length,L=l.filter(d=>d>=5).length;return{averageVillageoisSeries:Math.round(n*10)/10,averageLoupsSeries:Math.round(I*10)/10,averageNoWolfSeries:Math.round(f*10)/10,averageWinSeries:Math.round(W*10)/10,averageLossSeries:Math.round(C*10)/10,eliteVillageoisCount:j,eliteLoupsCount:N,eliteNoWolfCount:b,eliteWinCount:G,eliteLossCount:L}}function le(e){if(e.length===0)return null;const c=[...e].sort((r,i)=>parseInt(r.DisplayedId)-parseInt(i.DisplayedId)),g=Z(c),t=ee(g);c.forEach(r=>{const i=r.DisplayedId,o=new Date(r.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});r.PlayerStats.forEach(a=>{const m=O(a),p=a.Username;g.set(m,p);const y=t[m];if(!y)return;const F=k(M(a.MainRoleInitial,a.MainRoleChanges||[])),E=a.Victorious;se(y,p,F,i,o),ie(y,p,E,F,i,o),re(y,p,E,F,i,o)})});const{allVillageoisSeries:u,allLoupsSeries:h,allNoWolfSeries:l,allWinSeries:n,allLossSeries:I}=ne(t);Object.values(t).forEach(r=>{r.longestVillageoisSeries&&r.currentVillageoisSeries===r.longestVillageoisSeries.seriesLength&&r.currentVillageoisSeries>0&&(r.longestVillageoisSeries.isOngoing=!0),r.longestLoupsSeries&&r.currentLoupsSeries===r.longestLoupsSeries.seriesLength&&r.currentLoupsSeries>0&&(r.longestLoupsSeries.isOngoing=!0),r.longestNoWolfSeries&&r.currentNoWolfSeries===r.longestNoWolfSeries.seriesLength&&r.currentNoWolfSeries>0&&(r.longestNoWolfSeries.isOngoing=!0),r.longestWinSeries&&r.currentWinSeries===r.longestWinSeries.seriesLength&&r.currentWinSeries>0&&(r.longestWinSeries.isOngoing=!0),r.longestLossSeries&&r.currentLossSeries===r.longestLossSeries.seriesLength&&r.currentLossSeries>0&&(r.longestLossSeries.isOngoing=!0)});const f=oe(t,g.size);let W=0,C=0,j=0,N=0,b=0,G=0,L=0,d=0,S=0,A=0;const v=[],x=[],V=[],w=[],D=[];return Object.entries(t).forEach(([r,i])=>{const o=i.longestVillageoisSeries?.player||i.longestLoupsSeries?.player||i.longestNoWolfSeries?.player||i.longestWinSeries?.player||i.longestLossSeries?.player||r;if(i.currentVillageoisSeries>0&&(W++,v.push({player:o,camp:"Villageois",seriesLength:i.currentVillageoisSeries,startGame:i.villageoisSeriesStart?.game||"",endGame:i.currentVillageoisGameIds[i.currentVillageoisGameIds.length-1]||"",startDate:i.villageoisSeriesStart?.date||"",endDate:c[c.length-1]?.EndDate||"",isOngoing:!0,gameIds:[...i.currentVillageoisGameIds]})),i.currentLoupsSeries>0&&(C++,x.push({player:o,camp:"Loups",seriesLength:i.currentLoupsSeries,startGame:i.loupsSeriesStart?.game||"",endGame:i.currentLoupsGameIds[i.currentLoupsGameIds.length-1]||"",startDate:i.loupsSeriesStart?.date||"",endDate:c[c.length-1]?.EndDate||"",isOngoing:!0,gameIds:[...i.currentLoupsGameIds]})),i.currentNoWolfSeries>0){j++;const a={};i.currentNoWolfCamps.forEach(m=>{a[m]=(a[m]||0)+1}),V.push({player:o,camp:"Sans Loups",seriesLength:i.currentNoWolfSeries,startGame:i.noWolfSeriesStart?.game||"",endGame:i.currentNoWolfGameIds[i.currentNoWolfGameIds.length-1]||"",startDate:i.noWolfSeriesStart?.date||"",endDate:c[c.length-1]?.EndDate||"",campCounts:a,isOngoing:!0,gameIds:[...i.currentNoWolfGameIds]})}if(i.currentWinSeries>0){N++;const a={};i.currentWinCamps.forEach(m=>{a[m]=(a[m]||0)+1}),w.push({player:o,seriesLength:i.currentWinSeries,startGame:i.winSeriesStart?.game||"",endGame:i.currentWinGameIds[i.currentWinGameIds.length-1]||"",startDate:i.winSeriesStart?.date||"",endDate:c[c.length-1]?.EndDate||"",campCounts:a,isOngoing:!0,gameIds:[...i.currentWinGameIds]})}if(i.currentLossSeries>0){b++;const a={};i.currentLossCamps.forEach(m=>{a[m]=(a[m]||0)+1}),D.push({player:o,seriesLength:i.currentLossSeries,startGame:i.lossSeriesStart?.game||"",endGame:i.currentLossGameIds[i.currentLossGameIds.length-1]||"",startDate:i.lossSeriesStart?.date||"",endDate:c[c.length-1]?.EndDate||"",campCounts:a,isOngoing:!0,gameIds:[...i.currentLossGameIds]})}i.longestVillageoisSeries?.isOngoing&&G++,i.longestLoupsSeries?.isOngoing&&L++,i.longestNoWolfSeries?.isOngoing&&d++,i.longestWinSeries?.isOngoing&&S++,i.longestLossSeries?.isOngoing&&A++}),v.sort((r,i)=>i.seriesLength-r.seriesLength),x.sort((r,i)=>i.seriesLength-r.seriesLength),V.sort((r,i)=>i.seriesLength-r.seriesLength),w.sort((r,i)=>i.seriesLength-r.seriesLength),D.sort((r,i)=>i.seriesLength-r.seriesLength),{allVillageoisSeries:u,allLoupsSeries:h,allNoWolfSeries:l,allWinSeries:n,allLossSeries:I,currentVillageoisSeries:v,currentLoupsSeries:x,currentNoWolfSeries:V,currentWinSeries:w,currentLossSeries:D,totalGamesAnalyzed:c.length,totalPlayersCount:g.size,activeVillageoisCount:W,activeLoupsCount:C,activeNoWolfCount:j,activeWinCount:N,activeLossCount:b,ongoingVillageoisCount:G,ongoingLoupsCount:L,ongoingNoWolfCount:d,ongoingWinCount:S,ongoingLossCount:A,...f}}function te(){const{data:e,isLoading:c,error:g}=R(t=>le(t));return{data:e,isLoading:c,error:g}}function me(){const{data:e,isLoading:c,error:g}=te(),{navigateToGameDetails:t,navigationState:u,updateNavigationState:h}=z(),{settings:l}=T(),[n,I]=P.useState(u.selectedSeriesType||"villageois"),[f,W]=P.useState(u.seriesViewMode||"best"),[C,j]=P.useState(null),N=P.useRef(null),{joueursData:b}=J(),G=$(b),L=r=>{I(r),h({selectedSeriesType:r})},d=r=>{W(r),h({seriesViewMode:r})},{currentData:S,highlightedPlayerAdded:A,fullDataset:v}=P.useMemo(()=>{if(!e)return{currentData:[],highlightedPlayerAdded:!1,fullDataset:[]};let r=[];if(f==="ongoing")switch(n){case"villageois":r=e.currentVillageoisSeries;break;case"loup":r=e.currentLoupsSeries;break;case"nowolf":r=e.currentNoWolfSeries;break;case"wins":r=e.currentWinSeries;break;case"losses":r=e.currentLossSeries;break;default:r=[]}else switch(n){case"villageois":r=e.allVillageoisSeries;break;case"loup":r=e.allLoupsSeries;break;case"nowolf":r=e.allNoWolfSeries;break;case"wins":r=e.allWinSeries;break;case"losses":r=e.allLossSeries;break;default:r=[]}const i=r.slice(0,20),o=l.highlightedPlayer&&i.some(p=>p.player===l.highlightedPlayer);let a=[...i],m=!1;if(l.highlightedPlayer&&!o){const p=r.find(y=>y.player===l.highlightedPlayer);p&&(a.push({...p,isHighlightedAddition:!0}),m=!0)}return{currentData:a,highlightedPlayerAdded:m,fullDataset:r}},[e,n,f,l.highlightedPlayer]);if(c)return s.jsx("div",{className:"donnees-attente",children:"R√©cup√©ration des s√©ries de joueurs..."});if(g)return s.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",g]});if(!e)return s.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e de s√©rie disponible"});const x=r=>Object.entries(r).map(([i,o])=>`${i} (${o})`).join(", "),V=()=>{switch(n){case"villageois":return f==="ongoing"?"S√©ries Villageois En Cours":"Plus Longues S√©ries Villageois Cons√©cutives";case"loup":return f==="ongoing"?"S√©ries Loups En Cours":"Plus Longues S√©ries Loups Cons√©cutives";case"nowolf":return f==="ongoing"?"S√©ries Sans R√¥le Loup En Cours":"Plus Longues S√©ries Sans R√¥le Loup";case"wins":return f==="ongoing"?"S√©ries de Victoires En Cours":"Plus Longues S√©ries de Victoires";case"losses":return f==="ongoing"?"S√©ries de D√©faites En Cours":"Plus Longues S√©ries de D√©faites";default:return""}},w=({active:r,payload:i})=>{if(!r||!i||i.length===0)return null;const o=i[0].payload,a=o.isHighlightedAddition,m=l.highlightedPlayer===o.player,p=f==="best"&&o.isOngoing;return n==="wins"?s.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:6,border:"1px solid var(--border-color)"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:o.player}),p&&s.jsx("span",{style:{marginLeft:"8px",fontSize:"1.2em"},children:"üî•"})]}),s.jsxs("div",{children:["S√©rie de victoires : ",o.seriesLength," parties ",p?"(En cours)":""]}),s.jsxs("div",{children:["Du ",o.startGame," au ",o.endGame]}),s.jsxs("div",{children:["Du ",o.startDate," au ",o.endDate]}),s.jsxs("div",{children:["Camps jou√©s : ",x(o.campCounts)]}),a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence (hors top 20)"}),m&&!a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence"}),p&&s.jsx("div",{style:{fontSize:"0.8rem",color:"#FF8C00",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"üî• S√©rie en cours - Aucun jeu depuis !"}),s.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]}):n==="losses"?s.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:6,border:"1px solid var(--border-color)"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:o.player}),p&&s.jsx("span",{style:{marginLeft:"8px",fontSize:"1.2em"},children:"üî•"})]}),s.jsxs("div",{children:["S√©rie de d√©faites : ",o.seriesLength," parties ",p?"(En cours)":""]}),s.jsxs("div",{children:["Du ",o.startGame," au ",o.endGame]}),s.jsxs("div",{children:["Du ",o.startDate," au ",o.endDate]}),s.jsxs("div",{children:["Camps jou√©s : ",x(o.campCounts)]}),a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence (hors top 20)"}),m&&!a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence"}),p&&s.jsx("div",{style:{fontSize:"0.8rem",color:"#FF8C00",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"üî• S√©rie en cours - Aucun jeu depuis !"}),s.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]}):s.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:6,border:"1px solid var(--border-color)"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:o.player}),p&&s.jsx("span",{style:{marginLeft:"8px",fontSize:"1.2em"},children:"üî•"})]}),s.jsxs("div",{children:["S√©rie ",o.camp," : ",o.seriesLength," parties cons√©cutives ",p?"(En cours)":""]}),s.jsxs("div",{children:["Du ",o.startGame," au ",o.endGame]}),s.jsxs("div",{children:["Du ",o.startDate," au ",o.endDate]}),o.campCounts&&s.jsxs("div",{children:["Camps jou√©s : ",x(o.campCounts)]}),a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence (hors top 20)"}),m&&!a&&s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"üéØ Joueur mis en √©vidence"}),p&&s.jsx("div",{style:{fontSize:"0.8rem",color:"#FF8C00",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"üî• S√©rie en cours - Aucun jeu depuis !"}),s.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})},D=r=>{if(n==="wins")t({selectedPlayer:r.player,selectedGameIds:r.gameIds,fromComponent:"S√©ries de Victoires"});else if(n==="losses")t({selectedPlayer:r.player,selectedGameIds:r.gameIds,fromComponent:"S√©ries de D√©faites"});else if(n==="nowolf")t({selectedPlayer:r.player,selectedGameIds:r.gameIds,fromComponent:"S√©ries Sans Loups"});else{const i=n==="villageois"?"Villageois":"Loup";t({selectedPlayer:r.player,selectedGameIds:r.gameIds,campFilter:{selectedCamp:i,campFilterMode:"all-assignments"},fromComponent:`S√©ries ${i}`})}};return s.jsxs("div",{className:"lycans-players-series",children:[s.jsx("h2",{children:"S√©ries des Joueurs"}),s.jsx("div",{className:"lycans-section-description",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Mode Meilleurs Records :"})," Affiche les meilleures s√©ries de tous les temps pour chaque joueur.",s.jsx("br",{}),s.jsx("strong",{children:"Mode S√©ries En Cours :"})," Affiche uniquement les s√©ries actuellement actives (tous les joueurs ayant une s√©rie en cours, pas seulement leur record personnel).",s.jsx("br",{}),s.jsx("br",{}),n==="villageois"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"S√©ries Villageois :"})," Parties cons√©cutives dans le camp Villageois. Jouer dans n'importe quel autre camp brise la s√©rie."]}),n==="loup"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"S√©ries Loups :"})," Parties cons√©cutives dans le camp Loups. Jouer dans n'importe quel autre camp brise la s√©rie."]}),n==="nowolf"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"S√©ries sans Loups :"})," Parties cons√©cutives o√π le joueur n'a PAS jou√© de r√¥le Loup. Jouer un r√¥le Loup brise la s√©rie."]}),n==="wins"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"S√©ries de victoires :"})," Victoires cons√©cutives dans n'importe quel camp. Une d√©faite brise la s√©rie."]}),n==="losses"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"S√©ries de d√©faites :"})," D√©faites cons√©cutives dans n'importe quel camp. Une victoire brise la s√©rie."]}),s.jsx("br",{}),s.jsx("strong",{children:"üî• S√©ries en cours :"})," ",f==="ongoing"?"Toutes les s√©ries affich√©es sont actuellement actives":"Les s√©ries avec l'effet de flamme sont encore actives"]})}),s.jsxs("div",{className:"lycans-categories-selection",style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{className:`lycans-categorie-btn ${n==="villageois"?"active":""}`,onClick:()=>L("villageois"),children:"S√©ries Villageois"}),s.jsx("button",{className:`lycans-categorie-btn ${n==="loup"?"active":""}`,onClick:()=>L("loup"),children:"S√©ries Loups"}),s.jsx("button",{className:`lycans-categorie-btn ${n==="nowolf"?"active":""}`,onClick:()=>L("nowolf"),children:"S√©ries Sans Loups"}),s.jsx("button",{className:`lycans-categorie-btn ${n==="wins"?"active":""}`,onClick:()=>L("wins"),children:"S√©ries de Victoires"}),s.jsx("button",{className:`lycans-categorie-btn ${n==="losses"?"active":""}`,onClick:()=>L("losses"),children:"S√©ries de D√©faites"})]}),s.jsx("button",{className:"lycans-categorie-btn",onClick:()=>d(f==="best"?"ongoing":"best"),style:{marginLeft:"auto",backgroundColor:f==="ongoing"?"#FF8C00":"var(--accent-primary)",color:"white",fontWeight:"bold"},children:f==="best"?"üî• Focus S√©ries En Cours":"üìä Voir les Records"})]}),s.jsxs("div",{className:"lycans-graphique-section",children:[s.jsxs("div",{children:[s.jsx("h3",{children:V()}),A&&l.highlightedPlayer&&s.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',l.highlightedPlayer,'" affich√© en plus du top 20']})]}),s.jsx(q,{title:V(),children:s.jsx("div",{ref:N,style:{height:500},children:s.jsx(_,{width:"100%",height:"100%",children:s.jsxs(H,{data:S,margin:{top:20,right:30,left:20,bottom:10},children:[s.jsx(B,{strokeDasharray:"3 3"}),s.jsx(U,{dataKey:"player",angle:-45,textAnchor:"end",height:120,interval:0,tick:({x:r,y:i,payload:o})=>s.jsx("text",{x:r,y:i,dy:16,textAnchor:"end",fill:l.highlightedPlayer===o.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===o.value?14:13,fontWeight:l.highlightedPlayer===o.value?"bold":"italic",transform:`rotate(-45 ${r} ${i})`,children:o.value})}),s.jsx(K,{allowDecimals:!1,label:{value:n==="wins"?"Victoires cons√©cutives":n==="losses"?"D√©faites cons√©cutives":n==="nowolf"?"Parties sans Loups cons√©cutives":"Parties cons√©cutives",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),s.jsx(Q,{content:w}),s.jsx(X,{dataKey:"seriesLength",name:n==="wins"?"Victoires cons√©cutives":n==="losses"?"D√©faites cons√©cutives":"Parties cons√©cutives",fill:n==="villageois"?"#82ca9d":n==="loup"?"#FF8042":n==="nowolf"?"#FFA500":n==="wins"?"#8884d8":"#dc3545",children:S.map((r,i)=>{const o=l.highlightedPlayer===r.player,a=C===r.player,m=r.isHighlightedAddition,p=G[r.player]||(n==="villageois"?"#82ca9d":n==="loup"?"#FF8042":n==="nowolf"?"#FFA500":n==="wins"?"#8884d8":"#dc3545");return s.jsx(Y,{fill:p,stroke:o?"var(--accent-primary)":a?"var(--text-primary)":"none",strokeWidth:o?3:a?2:0,strokeDasharray:m?"5,5":"none",opacity:m?.8:1,onClick:()=>D(r),onMouseEnter:()=>j(r.player),onMouseLeave:()=>j(null),style:{cursor:"pointer"},className:f==="best"&&r.isOngoing?"lycans-ongoing-series":""},`cell-${n}-${i}`)})})]})})})}),S.length>0&&(()=>{const r=S[0].seriesLength,i=S.filter(a=>a.seriesLength===r),o=i.some(a=>a.isOngoing);return s.jsxs("div",{className:"lycans-stats-grid",style:{marginTop:"0rem",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))"},children:[s.jsxs("div",{className:"lycans-stat-card",children:[s.jsx("h3",{children:f==="ongoing"?"üî• Plus Longue S√©rie Active":"üèÜ Record Absolu"}),s.jsxs("div",{className:"lycans-stat-value",children:[r,f==="ongoing"&&s.jsx("span",{style:{fontSize:"0.6em",marginLeft:"5px"},children:"üî•"}),f==="best"&&o&&s.jsx("span",{style:{fontSize:"0.6em",marginLeft:"5px"},children:"üî•"})]}),i.length===1?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["par ",s.jsx("strong",{children:i[0].player}),f==="best"&&i[0].isOngoing&&s.jsx("span",{style:{color:"#FF8C00",fontWeight:"bold"},children:" (En cours)"})]}),i[0].campCounts?s.jsxs("p",{className:"lycans-h2h-description",children:["Camps jou√©s : ",x(i[0].campCounts)]}):s.jsxs("p",{className:"lycans-h2h-description",children:["Camp : ",i[0].camp]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["par ",s.jsxs("strong",{children:[i.length," joueurs"]}),f==="best"&&o&&s.jsxs("span",{style:{color:"#FF8C00",fontWeight:"bold"},children:[" (dont s√©rie",i.filter(a=>a.isOngoing).length>1?"s":""," en cours)"]})]}),s.jsx("p",{className:"lycans-h2h-description",style:{fontSize:"0.9rem",lineHeight:"1.4"},children:i.map((a,m)=>s.jsxs("span",{children:[s.jsx("strong",{children:a.player}),f==="best"&&a.isOngoing&&s.jsx("span",{style:{fontSize:"0.9em"},children:"üî•"}),m<i.length-1&&", "]},a.player))})]})]}),f==="best"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"lycans-stat-card",children:[s.jsx("h3",{children:"üìä Meilleure s√©rie moyenne (tous les joueurs)"}),s.jsx("div",{className:"lycans-stat-value",children:n==="villageois"?e.averageVillageoisSeries:n==="loup"?e.averageLoupsSeries:n==="nowolf"?e.averageNoWolfSeries:n==="wins"?e.averageWinSeries:e.averageLossSeries}),s.jsx("p",{children:"parties en moyenne"}),s.jsxs("p",{className:"lycans-h2h-description",children:["Bas√© sur ",e.totalPlayersCount," joueurs"]})]}),s.jsxs("div",{className:"lycans-stat-card",children:[s.jsx("h3",{children:"üî• S√©ries En Cours"}),s.jsx("div",{className:"lycans-stat-value",children:n==="villageois"?e.activeVillageoisCount:n==="loup"?e.activeLoupsCount:n==="nowolf"?e.activeNoWolfCount:n==="wins"?e.activeWinCount:e.activeLossCount}),s.jsx("p",{children:"s√©ries encore actives"}),s.jsx("p",{className:"lycans-h2h-description",children:(n==="villageois"?e.activeVillageoisCount:n==="loup"?e.activeLoupsCount:n==="nowolf"?e.activeNoWolfCount:n==="wins"?e.activeWinCount:e.activeLossCount)>0?"Joueurs actuellement dans une s√©rie de ce type":"Aucune s√©rie active de ce type"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"lycans-stat-card",children:[s.jsx("h3",{children:"üìä S√©rie active moyenne"}),s.jsx("div",{className:"lycans-stat-value",children:v.length>0?(v.reduce((a,m)=>a+m.seriesLength,0)/v.length).toFixed(1):"0"}),s.jsx("p",{children:"parties en moyenne"}),s.jsxs("p",{className:"lycans-h2h-description",children:["Bas√© sur ",v.length," joueur",v.length>1?"s":""," en s√©rie active"]})]}),s.jsxs("div",{className:"lycans-stat-card",children:[s.jsx("h3",{children:"üë• Joueurs Actifs"}),s.jsx("div",{className:"lycans-stat-value",children:v.length}),s.jsxs("p",{children:["joueur",v.length>1?"s":""," en s√©rie active"]}),s.jsx("p",{className:"lycans-h2h-description",children:v.length>0?`Sur ${e.totalPlayersCount} joueurs au total`:"Aucun joueur en s√©rie active"})]})]})]})})(),S.length===0&&s.jsxs("div",{className:"lycans-empty-section",children:[s.jsx("h3",{children:"Aucune s√©rie trouv√©e"}),s.jsx("p",{children:"Aucune s√©rie n'a √©t√© trouv√©e pour ce type avec les filtres actuels."})]})]})]})}export{me as PlayerSeriesChart};
