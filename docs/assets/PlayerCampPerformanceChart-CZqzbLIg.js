import{r as u,u as ge,a as xe,j as c}from"./index-AACr94De.js";import{u as Pe}from"./baseStatsHook-CJVbrFTr.js";import{g as J,a as se}from"./datasyncExport-CI9vnVLX.js";import{a as be,u as Ae,m as Ce}from"./api-BA2qsLpb.js";import{S as V,u as je,b as ie,G as we,d as Re,e as Te,f as Se,g as Ee,h as Ie,F as q,B as Fe,C as Z,X as U,Y as X,a as Oe}from"./FullscreenChart-C-mFag89.js";import{m as O,u as Le,n as _e,o as Ne,S as Me,p as ne,q as De,t as oe,v as le,w as ze,x as We,y as ce,b as me,z as ke,A as Ke,B as Ge,C as pe,D as Be,d as ue,E as Je,G as $e,i as He,L as D,F as N,H as K,I as Y,J as Ve,K as qe,M as k,N as Ze,O as de,P as Ue,Q as Xe,U as Ye,V as Qe,h as ea,W as aa,X as ra,Y as ta,R as Q,T as ee}from"./CategoricalChart-IHHkgPMP.js";function fe(e,a,t){return(a=sa(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function sa(e){var a=ia(e,"string");return typeof a=="symbol"?a:a+""}function ia(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function na(e){var a=Le();return u.useEffect(()=>(a(_e(e)),()=>{a(Ne(e))}),[e,a]),null}class H extends u.Component{render(){return u.createElement(na,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:O.allowDuplicatedCategory,allowDataOverflow:O.allowDataOverflow,reversed:O.reversed,includeHidden:O.includeHidden})}}fe(H,"displayName","ZAxis");fe(H,"defaultProps",{zAxisId:0,range:O.range,scale:O.scale,type:O.type});var oa=["option","isActive"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},M.apply(null,arguments)}function la(e,a){if(e==null)return{};var t,r,o=ca(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function ca(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function ma(e){var{option:a,isActive:t}=e,r=la(e,oa);return typeof a=="string"?u.createElement(V,M({option:u.createElement(Me,M({type:a},r)),isActive:t,shapeType:"symbols"},r)):u.createElement(V,M({option:a,isActive:t,shapeType:"symbols"},r))}var pa=(e,a,t,r,o,n,s)=>oe(e,"xAxis",a,s),ua=(e,a,t,r,o,n,s)=>le(e,"xAxis",a,s),da=(e,a,t,r,o,n,s)=>oe(e,"yAxis",t,s),fa=(e,a,t,r,o,n,s)=>le(e,"yAxis",t,s),ya=(e,a,t,r)=>ze(e,"zAxis",r,!1),ha=(e,a,t,r,o)=>o,va=(e,a,t,r,o,n)=>n,ga=(e,a,t,r,o,n,s)=>De(e,a,t,s),xa=ne([We,ha],(e,a)=>e.filter(t=>t.type==="scatter").find(t=>t.id===a)),Pa=ne([ga,pa,ua,da,fa,ya,xa,va],(e,a,t,r,o,n,s,p)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:h}=e;if(s!=null){var x;if(s?.data!=null&&s.data.length>0?x=s.data:x=d?.slice(f,h+1),!(x==null||a==null||r==null||t==null||o==null||t?.length===0||o?.length===0))return La({displayedData:x,xAxis:a,yAxis:r,zAxis:n,scatterSettings:s,xAxisTicks:t,yAxisTicks:o,cells:p})}}),ba=["onMouseEnter","onClick","onMouseLeave"],Aa=["id"],Ca=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function $(e,a){if(e==null)return{};var t,r,o=ja(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function ja(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},L.apply(null,arguments)}function ae(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function w(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?ae(Object(t),!0).forEach(function(r){wa(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function wa(e,a,t){return(a=Ra(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Ra(e){var a=Ta(e,"string");return typeof a=="symbol"?a:a+""}function Ta(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Sa=e=>{var{dataKey:a,name:t,fill:r,legendType:o,hide:n}=e;return[{inactive:n,dataKey:a,type:o,color:r,value:pe(t,a),payload:e}]};function Ea(e){var{points:a,props:t}=e,{line:r,lineType:o,lineJointType:n}=t;if(!r)return null;var s=de(t),p=ea(r,!1),d,f;if(o==="joint")d=a.map(y=>({x:y.cx,y:y.cy}));else if(o==="fitting"){var{xmin:h,xmax:x,a:v,b:R}=aa(a),A=y=>v*y+R;d=[{x:h,y:A(h)},{x,y:A(x)}]}var C=w(w(w({},s),{},{fill:"none",stroke:s&&s.fill},p),{},{points:d});return u.isValidElement(r)?f=u.cloneElement(r,C):typeof r=="function"?f=r(C):f=u.createElement(ra,L({},C,{type:n})),u.createElement(D,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}function ye(e){var{points:a,showLabels:t,allOtherScatterProps:r}=e,{shape:o,activeShape:n,dataKey:s}=r,p=ue(Ze),{onMouseEnter:d,onClick:f,onMouseLeave:h}=r,x=$(r,ba),v=Te(d,r.dataKey),R=Se(h),A=Ee(f,r.dataKey);if(a==null)return null;var{id:C}=r,y=$(r,Aa),i=de(y);return u.createElement(u.Fragment,null,u.createElement(Ea,{points:a,props:y}),a.map((l,m)=>{var P=n&&p===String(m),S=P?n:o,T=w(w(w({key:"symbol-".concat(m)},i),l),{},{[Xe]:m,[Ue]:String(s)});return u.createElement(D,L({className:"recharts-scatter-symbol"},Ye(x,l,m),{onMouseEnter:v(l,m),onMouseLeave:R(l,m),onClick:A(l,m),key:"symbol-".concat(l?.cx,"-").concat(l?.cy,"-").concat(l?.size,"-").concat(m)}),u.createElement(ma,L({option:S,isActive:P},T)))}),t&&Qe.renderCallByParent(y,a))}function Ia(e){var{previousPointsRef:a,props:t}=e,{points:r,isAnimationActive:o,animationBegin:n,animationDuration:s,animationEasing:p}=t,d=a.current,f=Ve(t,"recharts-scatter-"),[h,x]=u.useState(!1),v=u.useCallback(()=>{x(!1)},[]),R=u.useCallback(()=>{x(!0)},[]);return u.createElement(qe,{begin:n,duration:s,isActive:o,easing:p,onAnimationEnd:v,onAnimationStart:R,key:f},A=>{var C=A===1?r:r.map((y,i)=>{var l=d&&d[i];if(l){var m=k(l.cx,y.cx),P=k(l.cy,y.cy),S=k(l.size,y.size);return w(w({},y),{},{cx:m(A),cy:P(A),size:S(A)})}var T=k(0,y.size);return w(w({},y),{},{size:T(A)})});return A>0&&(a.current=C),u.createElement(D,null,u.createElement(ye,{points:C,allOtherScatterProps:t,showLabels:!h}))})}function Fa(e){var{points:a,isAnimationActive:t}=e,r=u.useRef(null),o=r.current;return t&&a&&a.length&&(!o||o!==a)?u.createElement(Ia,{props:e,previousPointsRef:r}):u.createElement(ye,{points:a,allOtherScatterProps:e,showLabels:!0})}function Oa(e){var{dataKey:a,points:t,stroke:r,strokeWidth:o,fill:n,name:s,hide:p,tooltipType:d}=e;return{dataDefinedOnItem:t?.map(f=>f.tooltipPayload),positions:t?.map(f=>f.tooltipPosition),settings:{stroke:r,strokeWidth:o,fill:n,nameKey:void 0,dataKey:a,name:pe(s,a),hide:p,type:d,color:n,unit:""}}}function La(e){var{displayedData:a,xAxis:t,yAxis:r,zAxis:o,scatterSettings:n,xAxisTicks:s,yAxisTicks:p,cells:d}=e,f=N(t.dataKey)?n.dataKey:t.dataKey,h=N(r.dataKey)?n.dataKey:r.dataKey,x=o&&o.dataKey,v=o?o.range:H.defaultProps.range,R=v&&v[0],A=t.scale.bandwidth?t.scale.bandwidth():0,C=r.scale.bandwidth?r.scale.bandwidth():0;return a.map((y,i)=>{var l=K(y,f),m=K(y,h),P=!N(x)&&K(y,x)||"-",S=[{name:N(t.dataKey)?n.name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:y,dataKey:f,type:n.tooltipType},{name:N(r.dataKey)?n.name:r.name||r.dataKey,unit:r.unit||"",value:m,payload:y,dataKey:h,type:n.tooltipType}];P!=="-"&&S.push({name:o.name||o.dataKey,unit:o.unit||"",value:P,payload:y,dataKey:x,type:n.tooltipType});var T=Y({axis:t,ticks:s,bandSize:A,entry:y,index:i,dataKey:f}),E=Y({axis:r,ticks:p,bandSize:C,entry:y,index:i,dataKey:h}),z=P!=="-"?o.scale(P):R,I=Math.sqrt(Math.max(z,0)/Math.PI);return w(w({},y),{},{cx:T,cy:E,x:T-I,y:E-I,width:2*I,height:2*I,size:z,node:{x:l,y:m,z:P},tooltipPayload:S,tooltipPosition:{x:T,y:E},payload:y},d&&d[i]&&d[i].props)})}var _a=(e,a,t)=>({x:e.cx,y:e.cy,value:t==="x"?+e.node.x:+e.node.y,errorVal:K(e,a)});function Na(e){var{hide:a,points:t,className:r,needClip:o,xAxisId:n,yAxisId:s,id:p,children:d}=e;if(a)return null;var f=He("recharts-scatter",r),h=p;return u.createElement(D,{className:f,clipPath:o?"url(#clipPath-".concat(h,")"):null,id:p},o&&u.createElement("defs",null,u.createElement(we,{clipPathId:h,xAxisId:n,yAxisId:s})),u.createElement(Re,{xAxisId:n,yAxisId:s,data:t,dataPointFormatter:_a,errorBarOffset:0},d),u.createElement(D,{key:"recharts-scatter-symbols"},u.createElement(Fa,e)))}var he={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!$e.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function Ma(e){var a=ce(e,he),{animationBegin:t,animationDuration:r,animationEasing:o,hide:n,isAnimationActive:s,legendType:p,lineJointType:d,lineType:f,shape:h,xAxisId:x,yAxisId:v,zAxisId:R}=a,A=$(a,Ca),{needClip:C}=je(x,v),y=u.useMemo(()=>Be(e.children,ie),[e.children]),i=me(),l=ue(m=>Pa(m,x,v,R,e.id,y,i));return C==null?null:u.createElement(u.Fragment,null,u.createElement(Je,{fn:Oa,args:w(w({},e),{},{points:l})}),u.createElement(Na,L({},A,{xAxisId:x,yAxisId:v,zAxisId:R,lineType:f,lineJointType:d,legendType:p,shape:h,hide:n,isAnimationActive:s,animationBegin:t,animationDuration:r,animationEasing:o,points:l,needClip:C})))}function ve(e){var a=ce(e,he),t=me();return u.createElement(ke,{id:a.id,type:"scatter"},r=>u.createElement(u.Fragment,null,u.createElement(Ke,{legendPayload:Sa(a)}),u.createElement(Ge,{type:"scatter",id:r,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:a.zAxisId,dataKey:a.dataKey,hide:a.hide,name:a.name,tooltipType:a.tooltipType,isPanorama:t}),u.createElement(Ma,L({},a,{id:r}))))}ve.displayName="Scatter";var Da=["item"],za=u.forwardRef((e,a)=>u.createElement(Ie,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Da,tooltipPayloadSearcher:ta,categoricalChartProps:e,ref:a}));function re(e,a=!1){const t={};return e.forEach(r=>{const o=new Set;r.PlayerStats.forEach(s=>{const p=J(s.MainRoleFinal,{regroupWolfSubRoles:a});o.add(p)}),o.forEach(s=>{t[s]||(t[s]={totalGames:0,wins:0,winRate:0,players:{}}),t[s].totalGames++});const n=new Set;r.PlayerStats.forEach(s=>{if(s.Victorious){const p=J(s.MainRoleFinal,{regroupWolfSubRoles:a});n.add(p)}}),n.forEach(s=>{t[s]&&t[s].wins++})}),t}function te(e,a,t=!1){const r={};return e.forEach(o=>{o.PlayerStats.forEach(n=>{const s=n.Username.trim();if(!s)return;const p=J(n.MainRoleFinal,{regroupWolfSubRoles:t});a[p].players[s]||(a[p].players[s]={games:0,wins:0,winRate:0}),a[p].players[s].games++,n.Victorious&&a[p].players[s].wins++,r[s]||(r[s]={totalGames:0,camps:{}}),r[s].camps[p]||(r[s].camps[p]={games:0,wins:0,winRate:0,performance:0}),r[s].totalGames++,r[s].camps[p].games++,n.Victorious&&r[s].camps[p].wins++})}),r}function Wa(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(t=>{t.PlayerStats.forEach(r=>{se(r.MainRoleFinal)==="Autres"&&(a["Rôles spéciaux"].totalGames++,r.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function ka(e,a){const t={};return e.forEach(r=>{r.PlayerStats.forEach(o=>{const n=o.Username.trim();if(!n)return;if(se(o.MainRoleFinal)==="Autres"){const p="Rôles spéciaux";a[p].players[n]||(a[p].players[n]={games:0,wins:0,winRate:0}),a[p].players[n].games++,o.Victorious&&a[p].players[n].wins++,t[n]||(t[n]={totalGames:0,camps:{}}),t[n].camps[p]||(t[n].camps[p]={games:0,wins:0,winRate:0,performance:0}),t[n].totalGames++,t[n].camps[p].games++,o.Victorious&&t[n].camps[p].wins++}})}),t}function G(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(t=>{const r=e[a].players[t];r.games>0&&(r.winRate=parseFloat((r.wins/r.games*100).toFixed(2)))})})}function B(e,a){Object.keys(e).forEach(t=>{Object.keys(e[t].camps).forEach(r=>{const o=e[t].camps[r];o.games>0&&(o.winRate=parseFloat((o.wins/o.games*100).toFixed(2)),a[r]&&a[r].winRate&&(o.performance=parseFloat((o.winRate-a[r].winRate).toFixed(2))))})})}function Ka(e,a,t){const r=[];return Object.keys(e).forEach(n=>{const s=e[n],p=[];Object.keys(s.camps).forEach(d=>{const f=s.camps[d];f.games>=t&&p.push({camp:d,games:f.games,wins:f.wins,winRate:f.winRate.toFixed(2),campAvgWinRate:a[d].winRate.toFixed(2),performance:f.performance.toFixed(2)})}),p.sort((d,f)=>parseFloat(f.performance)-parseFloat(d.performance)),p.length>0&&r.push({player:n,totalGames:s.totalGames,campPerformance:p})}),r.sort((n,s)=>s.totalGames-n.totalGames),{campAverages:Object.keys(a).map(n=>({camp:n,totalGames:a[n].totalGames,wins:a[n].wins,winRate:a[n].winRate.toFixed(2)})),playerPerformanceArray:r}}function Ga(e){if(e.length===0)return null;const a=re(e,!1),t=re(e,!0),r=Wa(e),o=te(e,a,!1),n=te(e,t,!0),s=ka(e,r);G(a),G(t),G(r),B(o,a),B(n,t),B(s,r);const p={...a},d={...o};t.Loup&&(p["Camp Loup"]=t.Loup,Object.keys(n).forEach(v=>{d[v]||(d[v]=n[v]),n[v].camps.Loup&&(d[v].camps["Camp Loup"]=n[v].camps.Loup)})),r["Rôles spéciaux"]&&(p["Rôles spéciaux"]=r["Rôles spéciaux"],Object.keys(s).forEach(v=>{d[v]||(d[v]=s[v]),s[v].camps["Rôles spéciaux"]&&(d[v].camps["Rôles spéciaux"]=s[v].camps["Rôles spéciaux"])}));const f=3,{campAverages:h,playerPerformanceArray:x}=Ka(d,p,f);return{campAverages:h,playerPerformance:x,minGamesRequired:f}}function Ba(){const{data:e,isLoading:a,error:t}=Pe(Ga);return{playerCampPerformance:e,isLoading:a,error:t}}function Ua(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:t}=ge(),{settings:r}=xe(),o=be(),n=Ae(),[s,p]=u.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Villageois"),[d,f]=u.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:h,isLoading:x,error:v}=Ba();u.useEffect(()=>{a.campPerformanceState||t({campPerformanceState:{selectedCampPerformanceCamp:s,selectedCampPerformanceMinGames:d}})},[s,d,a.campPerformanceState,t]);const R=u.useMemo(()=>{if(!h?.campAverages)return["Tous les camps"];const i=h.campAverages.map(E=>E.camp),l=["Tous les camps"];i.includes("Villageois")&&l.push("Villageois"),i.includes("Camp Loup")&&l.push("Camp Loup"),i.includes("Loup")&&l.push("Loup"),i.includes("Traître")&&l.push("Traître"),i.includes("Louveteau")&&l.push("Louveteau"),i.includes("Rôles spéciaux")&&l.push("Rôles spéciaux");const m=["Camp Loup","Rôles spéciaux"],S=[...["Villageois","Camp Loup","Traître","Louveteau"],...m],T=i.filter(E=>!S.includes(E)).sort();return[...l,...T]},[h]),{campPlayerData:A,topPerformersData:C}=u.useMemo(()=>{if(!h?.playerPerformance)return{campPlayerData:[],topPerformersData:[]};const{playerPerformance:i}=h,l=[],m=[];for(const j of i)for(const g of j.campPerformance)if(g.games>=d){const F={player:j.player,camp:g.camp,games:g.games,wins:g.wins,winRate:g.winRate,performance:g.performance,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1};m.push(F),s!=="Tous les camps"&&g.camp===s&&l.push({player:j.player,...g,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1})}const P=(j,g)=>{if(!r.highlightedPlayer||j.some(b=>b.player===r.highlightedPlayer&&(!g||b.camp===g)))return j;const W=i.find(b=>b.player===r.highlightedPlayer);if(!W)return j;const _=[];for(const b of W.campPerformance)(!g||b.camp===g)&&b.games>=1&&_.push({player:W.player,camp:b.camp,games:b.games,wins:b.wins,winRate:b.winRate,performance:b.performance,winRateNum:parseFloat(b.winRate),performanceNum:parseFloat(b.performance),campAvgWinRateNum:parseFloat(b.campAvgWinRate),isHighlightedAddition:!0});return[...j,..._]},S=s!=="Tous les camps"?P(l,s):[],T=P(m),E=S.sort((j,g)=>g.performanceNum-j.performanceNum),z=T.sort((j,g)=>g.performanceNum-j.performanceNum),I=(j,g)=>{const F=j.slice(0,g);if(F.some(b=>b.player===r.highlightedPlayer)||!r.highlightedPlayer)return F;const _=j.find(b=>b.player===r.highlightedPlayer);if(_){const b={..._,isHighlightedAddition:!0};return[...F,b]}return F};return{campPlayerData:I(E,15),topPerformersData:I(z,15)}},[h,s,d,r.highlightedPlayer]),y=i=>{i&&i.player&&(s!=="Tous les camps"?e(s==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${s}`}:s==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Performance des Joueurs - ${s}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:s,campFilterMode:"wins-only",excludeWolfSubRoles:s==="Traître"||s==="Louveteau"},fromComponent:`Performance des Joueurs - ${s}`}):i.camp==="Camp"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return x?c.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):v?c.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",v]}):h?c.jsxs("div",{className:"lycans-player-camp-performance",children:[c.jsx("h2",{children:"Meilleurs Performances par Camp"}),c.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),c.jsx("select",{id:"camp-select",value:s,onChange:i=>{const l=i.target.value;p(l),t({campPerformanceState:{selectedCampPerformanceCamp:l,selectedCampPerformanceMinGames:d}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:R.map(i=>{let l=i,m=!1,P=!1;return i==="Tous les camps"?l="📊 Tous les camps":i==="Villageois"?(l="   Villageois",m=!0):i==="Camp Loup"?(l="   🐺 Camp Loup",m=!0,P=!0):i==="Loup"?(l="     Loup",m=!0):i==="Traître"?(l="     Traître",m=!0):i==="Louveteau"?(l="     Louveteau",m=!0):i==="Rôles spéciaux"?(l="   ⭐ Rôles spéciaux",m=!0,P=!0):(l=`     ${i}`,m=!0),c.jsx("option",{value:i,style:{fontFamily:"monospace",fontSize:m?"0.85rem":"0.9rem",fontWeight:P?"bold":"normal",color:P?"var(--accent-primary)":"inherit"},children:l},i)})})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),c.jsx("select",{id:"min-games-select",value:d,onChange:i=>{const l=Number(i.target.value);f(l),t({campPerformanceState:{selectedCampPerformanceCamp:s,selectedCampPerformanceMinGames:l}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Ce.map(i=>c.jsx("option",{value:i,children:i},i))})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:c.jsx("span",{children:"📊 = Tous les camps • 🐺 = Loups groupés • ⭐ = Rôles spéciaux groupés"})}),c.jsxs("div",{className:"lycans-resume-conteneur",children:[c.jsxs("div",{className:"lycans-stat-carte",children:[c.jsx("h3",{children:"Camps Analysés"}),c.jsx("div",{className:"lycans-valeur-principale",children:h.campAverages.length}),c.jsx("p",{children:"camps différents"})]}),c.jsxs("div",{className:"lycans-stat-carte",children:[c.jsx("h3",{children:"Joueurs Évalués"}),c.jsx("div",{className:"lycans-valeur-principale",children:h.playerPerformance.length}),c.jsx("p",{children:"joueurs analysés"})]})]}),c.jsxs("div",{className:"lycans-graphiques-groupe",children:[c.jsxs("div",{className:"lycans-graphique-section",children:[c.jsx("h3",{children:s==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${s}`}),c.jsx(q,{title:s==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${s}`,children:c.jsx("div",{style:{height:s==="Tous les camps"?600:500},children:c.jsx(Q,{width:"100%",height:"100%",children:c.jsxs(Fe,{data:s==="Tous les camps"?C:A,margin:{top:20,right:30,left:20,bottom:s==="Tous les camps"?20:0},children:[c.jsx(Z,{strokeDasharray:"3 3"}),c.jsx(U,{dataKey:"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:i,y:l,payload:m})=>c.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:r.highlightedPlayer===m.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===m.value?14:13,fontWeight:r.highlightedPlayer===m.value?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:m.value})}),c.jsx(X,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),c.jsx(ee,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const m=l[0].payload;return c.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[c.jsx("div",{children:c.jsx("strong",{children:m.player})}),s==="Tous les camps"&&c.jsxs("div",{children:["Camp: ",m.camp]}),c.jsxs("div",{children:["Parties: ",m.games]}),c.jsxs("div",{children:["Victoires: ",m.wins]}),c.jsxs("div",{children:["Taux personnel: ",m.winRate,"%"]}),s!=="Tous les camps"&&c.jsxs("div",{children:["Moyenne camp: ",m.campAvgWinRate,"%"]}),c.jsxs("div",{children:["Performance: ",m.performance>0?"+":"",m.performance]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),c.jsx(Oe,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:y,children:(s==="Tous les camps"?C:A).map((i,l)=>{const m=r.highlightedPlayer===i.player,P=i.isHighlightedAddition;return c.jsx(ie,{fill:s==="Tous les camps"?o[i.camp]||`var(--chart-color-${l%6+1})`:n[i.player]||(i.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:m?"var(--accent-primary)":"transparent",strokeWidth:m?3:0,strokeDasharray:P?"5,5":"none",opacity:P?.8:1},`cell-${l}`)})})]})})})})]}),c.jsxs("div",{className:"lycans-graphique-section",children:[c.jsx("h3",{children:s==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${s} sur nombre de parties jouées`}),c.jsx(q,{title:s==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${s}`,children:c.jsx("div",{style:{height:400},children:c.jsx(Q,{width:"100%",height:"100%",children:c.jsxs(za,{data:s==="Tous les camps"?C:A,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(Z,{strokeDasharray:"3 3"}),c.jsx(U,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),c.jsx(X,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),c.jsx(ee,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const m=l[0].payload;return c.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[c.jsx("div",{children:c.jsx("strong",{children:m.player})}),s==="Tous les camps"&&c.jsxs("div",{children:["Camp: ",m.camp]}),c.jsxs("div",{children:["Parties: ",m.games]}),c.jsxs("div",{children:["Performance: ",m.performance>0?"+":"",m.performance]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),c.jsx(ve,{dataKey:"performanceNum",name:"Performance",onClick:i=>{i&&i.player&&(s==="Tous les camps"?i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(s==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${s}`}:s==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Relation Parties Jouées vs Performance - ${s}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:s,campFilterMode:"wins-only",excludeWolfSubRoles:s==="Traître"||s==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${s}`}))},shape:i=>{const l=r.highlightedPlayer===i.payload?.player,m=i.payload?.isHighlightedAddition;return c.jsxs("g",{style:{cursor:"pointer"},children:[c.jsx("circle",{cx:i.cx,cy:i.cy,r:l?15:12,fill:s==="Tous les camps"?o[i.payload?.camp]||"var(--accent-primary)":n[i.payload?.player]||"var(--accent-primary)",stroke:l?"var(--accent-primary)":"#222",strokeWidth:l?3:1,strokeDasharray:m?"5,5":"none",opacity:m?.8:1}),c.jsx("text",{x:i.cx,y:i.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:l?"12":"10",fontWeight:"bold",pointerEvents:"none",children:i.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):c.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{Ua as PlayerCampPerformanceChart};
