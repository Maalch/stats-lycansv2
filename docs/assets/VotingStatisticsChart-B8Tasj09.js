import{r as P,a as Q,u as Z,j as e}from"./index-Be-Z58f9.js";import{F,B as z,C as H,X as w,Y as E,a as W,b as I}from"./FullscreenChart-4Hlu9Zp-.js";import{g as K,a as L,u as _}from"./datasyncExport-CrJRgTQS.js";import{u as ee}from"./useJoueursData-C1M_XEdH.js";import{u as te}from"./api-CbBFCe5o.js";import{R as O,T as $}from"./CategoricalChart-CEI_SxiP.js";function re(a,p){if(!a.DeathTiming)return!0;const y=a.DeathTiming.toUpperCase();if(y.startsWith("M")){const c=parseInt(y.substring(1));return p<c}if(y.startsWith("N")||y.startsWith("J")){const c=parseInt(y.substring(1));return p<=c}return!0}function ie(a,p){return a.PlayerStats.filter(y=>re(y,p))}function G(a,p,y){const c=a.PlayerStats.find(x=>x.Username===y);return c?c.DeathType==="VOTED"&&c.DeathTiming===`M${p}`:!1}function ae(a){const p=[],y=new Map,c=new Map,x=new Map;a.PlayerStats.forEach(g=>{y.set(g.Username,{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0}),c.set(g.Username,{totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0}),x.set(g.Username,{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0})});const S=Math.max(...a.PlayerStats.flatMap(g=>g.Votes.map(d=>d.MeetingNr)),0);for(let g=1;g<=S;g++){const d=ie(a,g),v=a.PlayerStats.flatMap(h=>h.Votes.filter(T=>T.MeetingNr===g).map(T=>({voter:h.Username,vote:T,voterRole:h.MainRoleInitial}))),C=v.filter(h=>h.vote.Target!=="Passé").length,R=v.filter(h=>h.vote.Target==="Passé").length,j=d.length-v.length,t=new Map;v.filter(h=>h.vote.Target!=="Passé").forEach(h=>{const T=t.get(h.vote.Target)||0;t.set(h.vote.Target,T+1)});let l=null,A=0;for(const[h,T]of t.entries())T>A&&(l=h,A=T);let f=null;l&&A>0&&G(a,g,l)&&(f=l),p.push({meetingNumber:g,totalParticipants:d.length,totalVotes:C,totalSkips:R,totalAbstentions:j,participationRate:d.length>0?(C+R)/d.length*100:0,mostTargetedPlayer:l,mostTargetedCount:A,eliminatedPlayer:f}),d.forEach(h=>{const T=y.get(h.Username);T.totalMeetings++;const M=v.find(N=>N.voter===h.Username);if(M)if(M.vote.Target==="Passé")T.totalSkips++;else{T.totalVotes++;const N=c.get(h.Username);N.totalVotes++;const q=K(L(h.MainRoleInitial,h.MainRoleChanges||[])),B=a.PlayerStats.find(D=>D.Username===M.vote.Target);if(B){const D=K(L(B.MainRoleInitial,B.MainRoleChanges||[]));q===D?N.votesForOwnCamp++:N.votesForEnemyCamp++;const V=x.get(M.vote.Target);V.totalTimesTargeted++,q===D?V.timesTargetedByOwnCamp++:V.timesTargetedByEnemyCamp++;const U=L(B.MainRoleInitial,B.MainRoleChanges||[]),J=K(U);J==="Villageois"?V.timesTargetedAsVillager++:J==="Loup"?V.timesTargetedAsWolf++:V.timesTargetedAsSpecial++,G(a,g,M.vote.Target)&&V.eliminationsByVote++}}else T.totalAbstentions++})}const m=[],b=[],k=[];return a.PlayerStats.forEach(g=>{const d=y.get(g.Username),v=d.totalMeetings>0?d.totalVotes/d.totalMeetings*100:0,C=d.totalMeetings>0?d.totalSkips/d.totalMeetings*100:0,R=d.totalMeetings>0?d.totalAbstentions/d.totalMeetings*100:0,j=v-C*.5-R*.7;m.push({playerName:g.Username,totalMeetings:d.totalMeetings,totalVotes:d.totalVotes,totalSkips:d.totalSkips,totalAbstentions:d.totalAbstentions,votingRate:v,skippingRate:C,abstentionRate:R,aggressivenessScore:j});const t=c.get(g.Username),l=t.totalVotes>0?t.votesForEnemyCamp/t.totalVotes*100:0,A=t.totalVotes>0?t.votesForOwnCamp/t.totalVotes*100:0;b.push({playerName:g.Username,totalMeetings:d.totalMeetings,totalVotes:t.totalVotes,votesForEnemyCamp:t.votesForEnemyCamp,votesForOwnCamp:t.votesForOwnCamp,accuracyRate:l,friendlyFireRate:A});const f=x.get(g.Username),h=f.totalTimesTargeted>0?(f.totalTimesTargeted-f.eliminationsByVote)/f.totalTimesTargeted*100:100;k.push({playerName:g.Username,totalTimesTargeted:f.totalTimesTargeted,timesTargetedByEnemyCamp:f.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:f.timesTargetedByOwnCamp,timesTargetedAsVillager:f.timesTargetedAsVillager,timesTargetedAsWolf:f.timesTargetedAsWolf,timesTargetedAsSpecial:f.timesTargetedAsSpecial,eliminationsByVote:f.eliminationsByVote,survivalRate:h})}),{gameId:a.Id,totalMeetings:S,meetingAnalytics:p,playerBehaviors:m,playerAccuracies:b,playerTargetStats:k}}function se(a){const p=a.map(ae),y=new Map,c=new Map,x=new Map;let S=0,m=0,b=0,k=0,g=0,d=0;p.forEach(j=>{S+=j.totalMeetings,j.meetingAnalytics.forEach(t=>{m+=t.participationRate,b++,k+=t.totalVotes,g+=t.totalSkips,d+=t.totalAbstentions}),j.playerBehaviors.forEach(t=>{const l=y.get(t.playerName)||{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0};y.set(t.playerName,{totalMeetings:l.totalMeetings+t.totalMeetings,totalVotes:l.totalVotes+t.totalVotes,totalSkips:l.totalSkips+t.totalSkips,totalAbstentions:l.totalAbstentions+t.totalAbstentions})}),j.playerAccuracies.forEach(t=>{const l=c.get(t.playerName)||{totalMeetings:0,totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0};c.set(t.playerName,{totalMeetings:l.totalMeetings+t.totalMeetings,totalVotes:l.totalVotes+t.totalVotes,votesForEnemyCamp:l.votesForEnemyCamp+t.votesForEnemyCamp,votesForOwnCamp:l.votesForOwnCamp+t.votesForOwnCamp})}),j.playerTargetStats.forEach(t=>{const l=x.get(t.playerName)||{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0};x.set(t.playerName,{totalTimesTargeted:l.totalTimesTargeted+t.totalTimesTargeted,timesTargetedByEnemyCamp:l.timesTargetedByEnemyCamp+t.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:l.timesTargetedByOwnCamp+t.timesTargetedByOwnCamp,timesTargetedAsVillager:l.timesTargetedAsVillager+t.timesTargetedAsVillager,timesTargetedAsWolf:l.timesTargetedAsWolf+t.timesTargetedAsWolf,timesTargetedAsSpecial:l.timesTargetedAsSpecial+t.timesTargetedAsSpecial,eliminationsByVote:l.eliminationsByVote+t.eliminationsByVote})})});const v=Array.from(y.entries()).map(([j,t])=>{const l=t.totalMeetings>0?t.totalVotes/t.totalMeetings*100:0,A=t.totalMeetings>0?t.totalSkips/t.totalMeetings*100:0,f=t.totalMeetings>0?t.totalAbstentions/t.totalMeetings*100:0,h=l-A*.5-f*.7;return{playerName:j,totalMeetings:t.totalMeetings,totalVotes:t.totalVotes,totalSkips:t.totalSkips,totalAbstentions:t.totalAbstentions,votingRate:l,skippingRate:A,abstentionRate:f,aggressivenessScore:h}}),C=Array.from(c.entries()).map(([j,t])=>{const l=t.totalVotes>0?t.votesForEnemyCamp/t.totalVotes*100:0,A=t.totalVotes>0?t.votesForOwnCamp/t.totalVotes*100:0;return{playerName:j,totalMeetings:t.totalMeetings,totalVotes:t.totalVotes,votesForEnemyCamp:t.votesForEnemyCamp,votesForOwnCamp:t.votesForOwnCamp,accuracyRate:l,friendlyFireRate:A}}),R=Array.from(x.entries()).map(([j,t])=>{const l=t.totalTimesTargeted>0?(t.totalTimesTargeted-t.eliminationsByVote)/t.totalTimesTargeted*100:100;return{playerName:j,totalTimesTargeted:t.totalTimesTargeted,timesTargetedByEnemyCamp:t.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:t.timesTargetedByOwnCamp,timesTargetedAsVillager:t.timesTargetedAsVillager,timesTargetedAsWolf:t.timesTargetedAsWolf,timesTargetedAsSpecial:t.timesTargetedAsSpecial,eliminationsByVote:t.eliminationsByVote,survivalRate:l}});return{playerBehaviorStats:v,playerAccuracyStats:C,playerTargetStats:R,overallMeetingStats:{totalMeetings:S,averageParticipationRate:b>0?m/b:0,totalVotes:k,totalSkips:g,totalAbstentions:d}}}function X(){return _(a=>{if(!a||a.length===0)return null;const p=a.filter(y=>y.PlayerStats.some(c=>c.Votes&&c.Votes.length>0));return p.length===0?null:se(p)})}function oe(a=5){const{data:p,isLoading:y,error:c}=X();return{data:P.useMemo(()=>p?{...p,playerBehaviorStats:p.playerBehaviorStats.filter(S=>S.totalMeetings>=a),playerAccuracyStats:p.playerAccuracyStats.filter(S=>S.totalVotes>=Math.ceil(a*.6)),playerTargetStats:p.playerTargetStats.filter(S=>S.totalTimesTargeted>=Math.ceil(a*.3))}:null,[p,a]),isLoading:y,error:c}}function me(){const{settings:a}=Q(),{navigateToGameDetails:p}=Z(),{joueursData:y}=ee(),c=te(y),[x,S]=P.useState("overview"),[m,b]=P.useState("behavior"),[k,g]=P.useState(25),[d,v]=P.useState(null),{data:C,isLoading:R,error:j}=X(),{data:t}=oe(k),l=i=>{i&&i.playerName&&p({selectedPlayer:i.playerName,fromComponent:"Statistiques de Vote"})},{behaviorChartData:A,highlightedPlayerInBehavior:f}=P.useMemo(()=>{if(!t)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const i=[...t.playerBehaviorStats].sort((o,u)=>u.aggressivenessScore-o.aggressivenessScore).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{behaviorChartData:r,highlightedPlayerInBehavior:s}},[t,a.highlightedPlayer]),{accuracyChartData:h,highlightedPlayerInAccuracy:T}=P.useMemo(()=>{if(!t)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const i=[...t.playerAccuracyStats].sort((o,u)=>u.accuracyRate-o.accuracyRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerAccuracyStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{accuracyChartData:r,highlightedPlayerInAccuracy:s}},[t,a.highlightedPlayer]),{targetChartData:M,highlightedPlayerInTargets:N}=P.useMemo(()=>{if(!t)return{targetChartData:[],highlightedPlayerInTargets:!1};const i=[...t.playerTargetStats].sort((o,u)=>u.survivalRate-o.survivalRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerTargetStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{targetChartData:r,highlightedPlayerInTargets:s}},[t,a.highlightedPlayer]),{voteRateChartData:q,highlightedPlayerInVoteRate:B}=P.useMemo(()=>{if(!t)return{voteRateChartData:[],highlightedPlayerInVoteRate:!1};const i=[...t.playerBehaviorStats].sort((o,u)=>u.votingRate-o.votingRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{voteRateChartData:r,highlightedPlayerInVoteRate:s}},[t,a.highlightedPlayer]),{skipRateChartData:D,highlightedPlayerInSkipRate:V}=P.useMemo(()=>{if(!t)return{skipRateChartData:[],highlightedPlayerInSkipRate:!1};const i=[...t.playerBehaviorStats].sort((o,u)=>u.skippingRate-o.skippingRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{skipRateChartData:r,highlightedPlayerInSkipRate:s}},[t,a.highlightedPlayer]),{abstentionRateChartData:U,highlightedPlayerInAbstentionRate:J}=P.useMemo(()=>{if(!t)return{abstentionRateChartData:[],highlightedPlayerInAbstentionRate:!1};const i=[...t.playerBehaviorStats].sort((o,u)=>u.abstentionRate-o.abstentionRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let r=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=t.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(r.push({...o,isHighlightedAddition:!0}),s=!0)}return{abstentionRateChartData:r,highlightedPlayerInAbstentionRate:s}},[t,a.highlightedPlayer]);if(R)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de vote..."});if(j)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",j]});if(!C||!t)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de vote disponible"});const Y=[5,15,25,50,100,200,400];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"📊 Statistiques de Vote"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>{S("overview"),b("behavior")},style:{background:x==="overview"?"var(--accent-primary)":"var(--bg-tertiary)",color:x==="overview"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:x==="overview"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"📊 Vue d'Ensemble"}),e.jsx("button",{onClick:()=>{S("behavior"),b("voteRate")},style:{background:x==="behavior"?"var(--accent-primary)":"var(--bg-tertiary)",color:x==="behavior"?"var(--bg-primary)":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:x==="behavior"?"bold":"normal",cursor:"pointer",transition:"all 0.2s ease"},children:"🗳️ Comportements de Vote"})]}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap",alignItems:"center"},children:[x==="overview"&&e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsx("button",{onClick:()=>b("behavior"),style:{background:m==="behavior"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="behavior"?"bold":"normal"},children:"Score d'Agressivité"}),e.jsx("button",{onClick:()=>b("accuracy"),style:{background:m==="accuracy"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="accuracy"?"bold":"normal"},children:"Précision des Votes"}),e.jsx("button",{onClick:()=>b("targets"),style:{background:m==="targets"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="targets"?"bold":"normal"},children:"Joueurs Ciblés"})]}),x==="behavior"&&e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsx("button",{onClick:()=>b("voteRate"),style:{background:m==="voteRate"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="voteRate"?"bold":"normal"},children:"Taux de Vote"}),e.jsx("button",{onClick:()=>b("skipRate"),style:{background:m==="skipRate"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="skipRate"?"bold":"normal"},children:'Taux de "Passé"'}),e.jsx("button",{onClick:()=>b("abstentionRate"),style:{background:m==="abstentionRate"?"var(--accent-secondary)":"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:m==="abstentionRate"?"bold":"normal"},children:"Taux d'Abstention"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--bg-secondary)"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:k,onChange:i=>g(Number(i.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Y.map(i=>e.jsx("option",{value:i,children:i},i))})]})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[m==="behavior"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🗳️ Score d'Agressivité"}),f&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basé sur le taux de vote, les abstentions et les "passés". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(F,{title:"Score d'Agressivité",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:A,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:"Score d'Agressivité (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Meetings: ",r.totalMeetings]}),e.jsxs("div",{children:["Votes: ",r.totalVotes," (",r.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Passés: ",r.totalSkips," (",r.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",r.totalAbstentions," (",r.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",r.aggressivenessScore.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:l,children:A.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||(i.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-behavior-${n}`)})})]})})})})]}),m==="accuracy"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🎯 Précision des Votes - Taux de Votes Justes"}),T&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigés contre le camp adverse (et non contre son propre camp)."}),e.jsx(F,{title:"Précision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:h,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:"Taux de Précision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Nombre de meetings: ",r.totalMeetings]}),e.jsxs("div",{children:["Total de votes: ",r.totalVotes]}),e.jsxs("div",{children:["Votes justes: ",r.votesForEnemyCamp," (",r.accuracyRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Feu ami: ",r.votesForOwnCamp," (",r.friendlyFireRate.toFixed(1),"%)"]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:l,children:h.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||(i.accuracyRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-accuracy-${n}`)})})]})})})})]}),m==="targets"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🔻 Joueurs Ciblés - Taux de Survie aux Votes"}),N&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois où le joueur a survécu après avoir été ciblé par au moins un vote."}),e.jsx(F,{title:"Joueurs Ciblés - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:M,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Fois ciblé: ",r.totalTimesTargeted]}),e.jsxs("div",{children:["Éliminé par vote: ",r.eliminationsByVote]}),e.jsxs("div",{children:["Taux de survie: ",r.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{children:["Par camp ennemi: ",r.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["Par propre camp: ",r.timesTargetedByOwnCamp]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:l,children:M.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||(i.survivalRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-targets-${n}`)})})]})})})})]}),m==="voteRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"📊 Taux de Vote - Top 15"}),B&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings où le joueur a voté activement (hors "Passé").'}),e.jsx(F,{title:"Taux de Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:q,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:"Taux de Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Total meetings: ",r.totalMeetings]}),e.jsxs("div",{children:["Votes: ",r.totalVotes]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de vote: ",r.votingRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"votingRate",style:{cursor:"pointer"},onClick:l,children:q.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||"var(--accent-tertiary)",stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-voterate-${n}`)})})]})})})})]}),m==="skipRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:'⏭️ Taux de "Passé" - Top 15'}),V&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings où le joueur a voté "Passé".'}),e.jsx(F,{title:'Taux de "Passé" - Top 15',children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:D,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:'Taux de "Passé" (%)',angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Total meetings: ",r.totalMeetings]}),e.jsxs("div",{children:['Votes "Passé": ',r.totalSkips]}),e.jsx("div",{children:e.jsxs("strong",{children:['Taux de "Passé": ',r.skippingRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"skippingRate",style:{cursor:"pointer"},onClick:l,children:D.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||"var(--accent-warning)",stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-skiprate-${n}`)})})]})})})})]}),m==="abstentionRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🚫 Taux d'Abstention - Top 15"}),J&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings où le joueur n'a pas voté du tout."}),e.jsx(F,{title:"Taux d'Abstention - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(z,{data:U,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:r})=>{const s=a.highlightedPlayer===r.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:r.value})}}),e.jsx(E,{label:{value:"Taux d'Abstention (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const r=n[0].payload,s=r.isHighlightedAddition,o=a.highlightedPlayer===r.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.playerName})}),e.jsxs("div",{children:["Total meetings: ",r.totalMeetings]}),e.jsxs("div",{children:["Abstentions: ",r.totalAbstentions]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux d'abstention: ",r.abstentionRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(W,{dataKey:"abstentionRate",style:{cursor:"pointer"},onClick:l,children:U.map((i,n)=>{const r=a.highlightedPlayer===i.playerName,s=d===i.playerName,o=i.isHighlightedAddition;return e.jsx(I,{fill:c[i.playerName]||"var(--accent-danger)",stroke:r?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:r?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>v(i.playerName),onMouseLeave:()=>v(null),style:{cursor:"pointer"}},`cell-abstentionrate-${n}`)})})]})})})})]})]})]})}export{me as VotingStatisticsChart};
