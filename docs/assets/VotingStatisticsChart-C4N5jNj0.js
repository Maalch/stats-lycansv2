import{r as P,a as I,u as K,j as e}from"./index-7cCMETEQ.js";import{F as C,B as N,C as R,X as B,Y as w,a as k,b as O}from"./FullscreenChart-BJ-2tsoZ.js";import{g as W,a as D,u as J}from"./datasyncExport-DuH2xIOG.js";import{u as L}from"./useJoueursData-CZsH4JKv.js";import{u as G,a as X}from"./api-DMIE3QVE.js";import{R as b,T as M}from"./CategoricalChart-CnHJtyve.js";import{P as Y,a as Q}from"./PieChart-kl6L3fzO.js";import"./PolarChart-BW1QfeoV.js";function Z(r,g){if(!r.DeathTiming)return!0;const m=r.DeathTiming.toUpperCase();if(m.startsWith("M")){const d=parseInt(m.substring(1));return g<d}if(m.startsWith("N")||m.startsWith("J")){const d=parseInt(m.substring(1));return g<=d}return!0}function _(r,g){return r.PlayerStats.filter(m=>Z(m,g))}function H(r,g,m){const d=r.PlayerStats.find(u=>u.Username===m);return d?d.DeathType==="VOTED"&&d.DeathTiming===`M${g}`:!1}function ee(r){const g=[],m=new Map,d=new Map,u=new Map;r.PlayerStats.forEach(n=>{m.set(n.Username,{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0}),d.set(n.Username,{totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0,votesForSelf:0}),u.set(n.Username,{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0})});const v=Math.max(...r.PlayerStats.flatMap(n=>n.Votes.map(c=>c.MeetingNr)),0);for(let n=1;n<=v;n++){const c=_(r,n),y=r.PlayerStats.flatMap(a=>a.Votes.filter(i=>i.MeetingNr===n).map(i=>({voter:a.Username,vote:i,voterRole:a.MainRoleInitial}))),h=y.filter(a=>a.vote.Target!=="Passé").length,f=y.filter(a=>a.vote.Target==="Passé").length,p=c.length-y.length,s=new Map;y.filter(a=>a.vote.Target!=="Passé").forEach(a=>{const i=s.get(a.vote.Target)||0;s.set(a.vote.Target,i+1)});let o=null,x=0;for(const[a,i]of s.entries())i>x&&(o=a,x=i);let t=null;o&&x>0&&H(r,n,o)&&(t=o),g.push({meetingNumber:n,totalParticipants:c.length,totalVotes:h,totalSkips:f,totalAbstentions:p,participationRate:c.length>0?(h+f)/c.length*100:0,mostTargetedPlayer:o,mostTargetedCount:x,eliminatedPlayer:t}),c.forEach(a=>{const i=m.get(a.Username);i.totalMeetings++;const l=y.find(V=>V.voter===a.Username);if(l)if(l.vote.Target==="Passé")i.totalSkips++;else{i.totalVotes++;const V=d.get(a.Username);V.totalVotes++;const z=W(D(a.MainRoleInitial,a.MainRoleChanges||[])),F=r.PlayerStats.find(E=>E.Username===l.vote.Target);if(F){const E=W(D(F.MainRoleInitial,F.MainRoleChanges||[]));l.vote.Target===a.Username?V.votesForSelf++:z===E?V.votesForOwnCamp++:V.votesForEnemyCamp++;const A=u.get(l.vote.Target);A.totalTimesTargeted++,z===E?A.timesTargetedByOwnCamp++:A.timesTargetedByEnemyCamp++;const $=D(F.MainRoleInitial,F.MainRoleChanges||[]),U=W($);U==="Villageois"?A.timesTargetedAsVillager++:U==="Loup"?A.timesTargetedAsWolf++:A.timesTargetedAsSpecial++,H(r,n,l.vote.Target)&&A.eliminationsByVote++}}else i.totalAbstentions++})}const T=[],j=[],S=[];return r.PlayerStats.forEach(n=>{const c=m.get(n.Username),y=c.totalMeetings>0?c.totalVotes/c.totalMeetings*100:0,h=c.totalMeetings>0?c.totalSkips/c.totalMeetings*100:0,f=c.totalMeetings>0?c.totalAbstentions/c.totalMeetings*100:0,p=y-h*.5-f*.7;T.push({playerName:n.Username,totalMeetings:c.totalMeetings,totalVotes:c.totalVotes,totalSkips:c.totalSkips,totalAbstentions:c.totalAbstentions,votingRate:y,skippingRate:h,abstentionRate:f,aggressivenessScore:p});const s=d.get(n.Username),o=s.totalVotes>0?s.votesForEnemyCamp/s.totalVotes*100:0,x=s.totalVotes>0?s.votesForOwnCamp/s.totalVotes*100:0;j.push({playerName:n.Username,totalVotes:s.totalVotes,votesForEnemyCamp:s.votesForEnemyCamp,votesForOwnCamp:s.votesForOwnCamp,votesForSelf:s.votesForSelf,accuracyRate:o,friendlyFireRate:x});const t=u.get(n.Username),a=t.totalTimesTargeted>0?(t.totalTimesTargeted-t.eliminationsByVote)/t.totalTimesTargeted*100:100;S.push({playerName:n.Username,totalTimesTargeted:t.totalTimesTargeted,timesTargetedByEnemyCamp:t.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:t.timesTargetedByOwnCamp,timesTargetedAsVillager:t.timesTargetedAsVillager,timesTargetedAsWolf:t.timesTargetedAsWolf,timesTargetedAsSpecial:t.timesTargetedAsSpecial,eliminationsByVote:t.eliminationsByVote,survivalRate:a})}),{gameId:r.Id,totalMeetings:v,meetingAnalytics:g,playerBehaviors:T,playerAccuracies:j,playerTargetStats:S}}function te(r){const g=r.map(ee),m=new Map,d=new Map,u=new Map;let v=0,T=0,j=0,S=0,n=0,c=0;g.forEach(p=>{v+=p.totalMeetings,p.meetingAnalytics.forEach(s=>{T+=s.participationRate,j++,S+=s.totalVotes,n+=s.totalSkips,c+=s.totalAbstentions}),p.playerBehaviors.forEach(s=>{const o=m.get(s.playerName)||{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0};m.set(s.playerName,{totalMeetings:o.totalMeetings+s.totalMeetings,totalVotes:o.totalVotes+s.totalVotes,totalSkips:o.totalSkips+s.totalSkips,totalAbstentions:o.totalAbstentions+s.totalAbstentions})}),p.playerAccuracies.forEach(s=>{const o=d.get(s.playerName)||{totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0,votesForSelf:0};d.set(s.playerName,{totalVotes:o.totalVotes+s.totalVotes,votesForEnemyCamp:o.votesForEnemyCamp+s.votesForEnemyCamp,votesForOwnCamp:o.votesForOwnCamp+s.votesForOwnCamp,votesForSelf:o.votesForSelf+s.votesForSelf})}),p.playerTargetStats.forEach(s=>{const o=u.get(s.playerName)||{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0};u.set(s.playerName,{totalTimesTargeted:o.totalTimesTargeted+s.totalTimesTargeted,timesTargetedByEnemyCamp:o.timesTargetedByEnemyCamp+s.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:o.timesTargetedByOwnCamp+s.timesTargetedByOwnCamp,timesTargetedAsVillager:o.timesTargetedAsVillager+s.timesTargetedAsVillager,timesTargetedAsWolf:o.timesTargetedAsWolf+s.timesTargetedAsWolf,timesTargetedAsSpecial:o.timesTargetedAsSpecial+s.timesTargetedAsSpecial,eliminationsByVote:o.eliminationsByVote+s.eliminationsByVote})})});const y=Array.from(m.entries()).map(([p,s])=>{const o=s.totalMeetings>0?s.totalVotes/s.totalMeetings*100:0,x=s.totalMeetings>0?s.totalSkips/s.totalMeetings*100:0,t=s.totalMeetings>0?s.totalAbstentions/s.totalMeetings*100:0,a=o-x*.5-t*.7;return{playerName:p,totalMeetings:s.totalMeetings,totalVotes:s.totalVotes,totalSkips:s.totalSkips,totalAbstentions:s.totalAbstentions,votingRate:o,skippingRate:x,abstentionRate:t,aggressivenessScore:a}}),h=Array.from(d.entries()).map(([p,s])=>{const o=s.totalVotes>0?s.votesForEnemyCamp/s.totalVotes*100:0,x=s.totalVotes>0?s.votesForOwnCamp/s.totalVotes*100:0;return{playerName:p,totalVotes:s.totalVotes,votesForEnemyCamp:s.votesForEnemyCamp,votesForOwnCamp:s.votesForOwnCamp,votesForSelf:s.votesForSelf,accuracyRate:o,friendlyFireRate:x}}),f=Array.from(u.entries()).map(([p,s])=>{const o=s.totalTimesTargeted>0?(s.totalTimesTargeted-s.eliminationsByVote)/s.totalTimesTargeted*100:100;return{playerName:p,totalTimesTargeted:s.totalTimesTargeted,timesTargetedByEnemyCamp:s.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:s.timesTargetedByOwnCamp,timesTargetedAsVillager:s.timesTargetedAsVillager,timesTargetedAsWolf:s.timesTargetedAsWolf,timesTargetedAsSpecial:s.timesTargetedAsSpecial,eliminationsByVote:s.eliminationsByVote,survivalRate:o}});return{playerBehaviorStats:y,playerAccuracyStats:h,playerTargetStats:f,overallMeetingStats:{totalMeetings:v,averageParticipationRate:j>0?T/j:0,totalVotes:S,totalSkips:n,totalAbstentions:c}}}function q(){return J(r=>{if(!r||r.length===0)return null;const g=r.filter(m=>m.PlayerStats.some(d=>d.Votes&&d.Votes.length>0));return g.length===0?null:te(g)})}function se(r=5){const{data:g,isLoading:m,error:d}=q();return{data:P.useMemo(()=>g?{...g,playerBehaviorStats:g.playerBehaviorStats.filter(v=>v.totalMeetings>=r),playerAccuracyStats:g.playerAccuracyStats.filter(v=>v.totalVotes>=Math.ceil(r*.6)),playerTargetStats:g.playerTargetStats.filter(v=>v.totalTimesTargeted>=Math.ceil(r*.3))}:null,[g,r]),isLoading:m,error:d}}function ge(){const{settings:r}=I(),{navigateToGameDetails:g}=K(),{joueursData:m}=L(),d=G(m),u=X(),[v,T]=P.useState("overview"),[j,S]=P.useState(25),{data:n,isLoading:c,error:y}=q(),{data:h}=se(j),f=t=>{t&&t.playerName&&g({selectedPlayer:t.playerName,fromComponent:"Statistiques de Vote"})},p=P.useMemo(()=>h?h.playerBehaviorStats.map(t=>({...t,isHighlightedAddition:r.highlightedPlayer===t.playerName&&!h.playerBehaviorStats.slice(0,15).some(a=>a.playerName===t.playerName)})).sort((t,a)=>a.aggressivenessScore-t.aggressivenessScore).slice(0,r.highlightedPlayer?16:15):[],[h,r.highlightedPlayer]),s=P.useMemo(()=>h?h.playerAccuracyStats.map(t=>({...t,isHighlightedAddition:r.highlightedPlayer===t.playerName&&!h.playerAccuracyStats.slice(0,15).some(a=>a.playerName===t.playerName)})).sort((t,a)=>a.accuracyRate-t.accuracyRate).slice(0,r.highlightedPlayer?16:15):[],[h,r.highlightedPlayer]),o=P.useMemo(()=>h?h.playerTargetStats.map(t=>({...t,isHighlightedAddition:r.highlightedPlayer===t.playerName&&!h.playerTargetStats.slice(0,15).some(a=>a.playerName===t.playerName)})).sort((t,a)=>a.survivalRate-t.survivalRate).slice(0,r.highlightedPlayer?16:15):[],[h,r.highlightedPlayer]);if(c)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de vote..."});if(y)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",y]});if(!n||!h)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de vote disponible"});const x=[5,10,25,50,100,200];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"📊 Statistiques de Vote"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"view-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Vue:"}),e.jsxs("select",{id:"view-select",value:v,onChange:t=>T(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"180px"},children:[e.jsx("option",{value:"overview",children:"📊 Vue d'ensemble"}),e.jsx("option",{value:"behavior",children:"🗳️ Comportements de vote"}),e.jsx("option",{value:"accuracy",children:"🎯 Précision des votes"}),e.jsx("option",{value:"targets",children:"🔻 Joueurs ciblés"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. conseils:"}),e.jsx("select",{id:"min-meetings-select",value:j,onChange:t=>S(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:x.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),v==="overview"&&e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total Réunions"}),e.jsx("div",{className:"lycans-valeur-principale",children:n.overallMeetingStats.totalMeetings}),e.jsx("p",{children:"réunions de vote"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Participation Moyenne"}),e.jsxs("div",{className:"lycans-valeur-principale",children:[n.overallMeetingStats.averageParticipationRate.toFixed(1),"%"]}),e.jsx("p",{children:"des joueurs participent"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total Votes"}),e.jsx("div",{className:"lycans-valeur-principale",children:n.overallMeetingStats.totalVotes}),e.jsx("p",{children:"votes effectifs"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Abstentions"}),e.jsx("div",{className:"lycans-valeur-principale",children:n.overallMeetingStats.totalSkips+n.overallMeetingStats.totalAbstentions}),e.jsx("p",{children:"passés + absents"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[v==="behavior"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"🗳️ Comportements de Vote - Score d'Agressivité"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basé sur le taux de vote, les abstentions et les "passés". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(C,{title:"Comportements de Vote - Score d'Agressivité",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:p,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:i})=>{const l=r.highlightedPlayer===i.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:l?"var(--accent-primary)":"var(--text-secondary)",fontSize:l?14:13,fontWeight:l?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:i.value})}}),e.jsx(w,{label:{value:"Score d'Agressivité (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(M,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const i=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:i.playerName})}),e.jsxs("div",{children:["Réunions: ",i.totalMeetings]}),e.jsxs("div",{children:["Votes: ",i.totalVotes," (",i.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Passés: ",i.totalSkips," (",i.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",i.totalAbstentions," (",i.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",i.aggressivenessScore.toFixed(1),"%"]})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(k,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:f,children:p.map((t,a)=>{const i=r.highlightedPlayer===t.playerName,l=t.isHighlightedAddition;return e.jsx(O,{fill:d[t.playerName]||(t.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:i?"var(--accent-primary)":"transparent",strokeWidth:i?3:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1},`cell-${a}`)})})]})})})})]}),v==="accuracy"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"🎯 Précision des Votes - Taux de Votes Justes"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigés contre le camp adverse (et non contre son propre camp)."}),e.jsx(C,{title:"Précision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:s,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:i})=>{const l=r.highlightedPlayer===i.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:l?"var(--accent-primary)":"var(--text-secondary)",fontSize:l?14:13,fontWeight:l?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:i.value})}}),e.jsx(w,{label:{value:"Taux de Précision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(M,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const i=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:i.playerName})}),e.jsxs("div",{children:["Total votes: ",i.totalVotes]}),e.jsxs("div",{children:["Votes justes: ",i.votesForEnemyCamp," (",i.accuracyRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Feu ami: ",i.votesForOwnCamp," (",i.friendlyFireRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Auto-votes: ",i.votesForSelf]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(k,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:f,children:s.map((t,a)=>{const i=r.highlightedPlayer===t.playerName,l=t.isHighlightedAddition;return e.jsx(O,{fill:d[t.playerName]||(t.accuracyRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:i?"var(--accent-primary)":"transparent",strokeWidth:i?3:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1},`cell-${a}`)})})]})})})})]}),v==="targets"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"🔻 Joueurs Ciblés - Taux de Survie aux Votes"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois où le joueur a survécu après avoir été ciblé par des votes."}),e.jsx(C,{title:"Joueurs Ciblés - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:o,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:t,y:a,payload:i})=>{const l=r.highlightedPlayer===i.value;return e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",fill:l?"var(--accent-primary)":"var(--text-secondary)",fontSize:l?14:13,fontWeight:l?"bold":"italic",transform:`rotate(-45 ${t} ${a})`,children:i.value})}}),e.jsx(w,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(M,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const i=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:i.playerName})}),e.jsxs("div",{children:["Fois ciblé: ",i.totalTimesTargeted]}),e.jsxs("div",{children:["Éliminé par vote: ",i.eliminationsByVote]}),e.jsxs("div",{children:["Taux de survie: ",i.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{children:["Par camp ennemi: ",i.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["Par propre camp: ",i.timesTargetedByOwnCamp]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(k,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:f,children:o.map((t,a)=>{const i=r.highlightedPlayer===t.playerName,l=t.isHighlightedAddition;return e.jsx(O,{fill:d[t.playerName]||(t.survivalRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:i?"var(--accent-primary)":"transparent",strokeWidth:i?3:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1},`cell-${a}`)})})]})})})})]}),v==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"📊 Répartition des Actions de Vote"}),e.jsx(C,{title:"Répartition des Actions de Vote",children:e.jsx("div",{style:{height:400},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(Y,{children:[e.jsx(Q,{dataKey:"value",data:[{name:"Votes Effectifs",value:n.overallMeetingStats.totalVotes,fill:u.Villageois},{name:"Passés",value:n.overallMeetingStats.totalSkips,fill:u.Loup},{name:"Abstentions",value:n.overallMeetingStats.totalAbstentions,fill:"var(--accent-danger)"}],cx:"50%",cy:"50%",outerRadius:120,label:({name:t,percent:a})=>`${t} (${((a||0)*100).toFixed(1)}%)`}),e.jsx(M,{formatter:t=>[t.toLocaleString(),""]})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"🔥 Voteurs les Plus Agressifs"}),e.jsx(C,{title:"Voteurs les Plus Agressifs (Top 10)",children:e.jsx("div",{style:{height:400},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:p.slice(0,10),margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"playerName",angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12}),e.jsx(w,{}),e.jsx(M,{formatter:t=>[`${t.toFixed(1)}%`,"Score d'Agressivité"]}),e.jsx(k,{dataKey:"aggressivenessScore",fill:"var(--accent-tertiary)"})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"🎯 Voteurs les Plus Précis"}),e.jsx(C,{title:"Voteurs les Plus Précis (Top 10)",children:e.jsx("div",{style:{height:400},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(N,{data:s.slice(0,10),margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"playerName",angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12}),e.jsx(w,{}),e.jsx(M,{formatter:t=>[`${t.toFixed(1)}%`,"Taux de Précision"]}),e.jsx(k,{dataKey:"accuracyRate",fill:"var(--accent-secondary)"})]})})})})]})]})]})]})}export{ge as VotingStatisticsChart};
