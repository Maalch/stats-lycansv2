import{r as c,j as e}from"./index-BFcVbxiC.js";import{l as u}from"./api-BWHeASPZ.js";import{R as h,C as p,T as f}from"./CategoricalChart-jlol99yu.js";import{P as x,a as g}from"./PieChart-CF3TfqGk.js";import{L as y}from"./Legend-CH8tJW-h.js";function j(){const[r,l]=c.useState(null),[i,a]=c.useState(!0),[t,s]=c.useState(null);return c.useEffect(()=>{(async()=>{try{a(!0),s(null);const d=await fetch("https://script.google.com/macros/s/AKfycbxrhG1mb7N6q7Mg88ogw0mirXgSihPpNPurZwiEOy9miG24Cc3AlGZCn2uoGnygNhck/exec?action=campWinStats");if(!d.ok)throw new Error(`Erreur réseau: ${d.status}`);const m=await d.json();if(m.error)throw new Error(m.error);l(m)}catch(o){console.error("Erreur lors du chargement des statistiques de victoire:",o),s(o instanceof Error?o.message:"Erreur inconnue")}finally{a(!1)}})()},[]),{campWinStats:r,isLoading:i,errorInfo:t}}const v="#607D8B";function b(){const{campWinStats:r,isLoading:l,errorInfo:i}=j();if(l)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de victoire..."});if(i)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",i]});if(!r||!r.campStats||r.campStats.length===0)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de victoire disponible"});const a=r?.campStats?.map(t=>({...t,winRateNum:typeof t.winRate=="string"?parseFloat(t.winRate):t.winRate}))||[];return e.jsxs("div",{className:"lycans-stats-container",children:[e.jsx("h2",{children:"Statistiques de Victoire par Camp"}),e.jsxs("p",{className:"lycans-stats-info",children:["Total des parties: ",r.totalGames]}),e.jsx("div",{className:"lycans-chart-wrapper",style:{height:450},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(x,{children:[e.jsx(g,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:140,fill:"#8884d8",dataKey:"winRateNum",nameKey:"camp",label:({camp:t,winRate:s})=>`${t}: ${s}%`,children:a.map((t,s)=>e.jsx(p,{fill:u[t.camp]||v},`cellule-camp-${s}`))}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const n=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:n.camp}),e.jsxs("div",{children:["Victoires: ",n.wins]}),e.jsxs("div",{children:["Total parties: ",n.totalGames]}),e.jsxs("div",{children:["Taux de victoire: ",n.winRate,"%"]})]})}return null}}),e.jsx(y,{})]})})})]})}export{b as CampsAndRolesRateChart};
