import{r as f,u as Ce,a as Ae,j as l}from"./index-rdXssrtA.js";import{g as J,a as W,b as oe,u as be}from"./datasyncExport-FqlRT2XD.js";import{u as je}from"./useJoueursData-CEj2A91_.js";import{a as Re,u as we,m as Te}from"./api-DMb08rj4.js";import{S as U,u as Ee,b as le,G as Ie,d as Se,e as Fe,f as Oe,g as Le,h as Me,F as X,B as _e,C as Y,X as Q,Y as ee,a as Ne}from"./FullscreenChart-BntvSBjp.js";import{m as M,u as De,n as ze,o as We,S as ke,p as ce,q as Ke,t as me,v as pe,w as Ge,x as Ve,y as ue,b as de,z as $e,A as Je,B as Be,C as fe,D as He,d as he,E as qe,G as Ze,i as Ue,L as k,F as D,H as G,I as ae,J as Xe,K as Ye,M as K,N as Qe,O as ye,P as ea,Q as aa,U as ra,V as sa,h as ta,W as ia,X as na,Y as oa,R as re,T as se}from"./CategoricalChart-iqtZro9J.js";function ve(e,a,r){return(a=la(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function la(e){var a=ca(e,"string");return typeof a=="symbol"?a:a+""}function ca(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function ma(e){var a=De();return f.useEffect(()=>(a(ze(e)),()=>{a(We(e))}),[e,a]),null}class H extends f.Component{render(){return f.createElement(ma,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:M.allowDuplicatedCategory,allowDataOverflow:M.allowDataOverflow,reversed:M.reversed,includeHidden:M.includeHidden})}}ve(H,"displayName","ZAxis");ve(H,"defaultProps",{zAxisId:0,range:M.range,scale:M.scale,type:M.type});var pa=["option","isActive"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z.apply(null,arguments)}function ua(e,a){if(e==null)return{};var r,s,n=da(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function da(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function fa(e){var{option:a,isActive:r}=e,s=ua(e,pa);return typeof a=="string"?f.createElement(U,z({option:f.createElement(ke,z({type:a},s)),isActive:r,shapeType:"symbols"},s)):f.createElement(U,z({option:a,isActive:r,shapeType:"symbols"},s))}var ha=(e,a,r,s,n,o,m)=>me(e,"xAxis",a,m),ya=(e,a,r,s,n,o,m)=>pe(e,"xAxis",a,m),va=(e,a,r,s,n,o,m)=>me(e,"yAxis",r,m),ga=(e,a,r,s,n,o,m)=>pe(e,"yAxis",r,m),xa=(e,a,r,s)=>Ge(e,"zAxis",s,!1),Pa=(e,a,r,s,n)=>n,Ca=(e,a,r,s,n,o)=>o,Aa=(e,a,r,s,n,o,m)=>Ke(e,a,r,m),ba=ce([Ve,Pa],(e,a)=>e.filter(r=>r.type==="scatter").find(r=>r.id===a)),ja=ce([Aa,ha,ya,va,ga,xa,ba,Ca],(e,a,r,s,n,o,m,i)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:x}=e;if(m!=null){var v;if(m?.data!=null&&m.data.length>0?v=m.data:v=u?.slice(d,x+1),!(v==null||a==null||s==null||r==null||n==null||r?.length===0||n?.length===0))return Da({displayedData:v,xAxis:a,yAxis:s,zAxis:o,scatterSettings:m,xAxisTicks:r,yAxisTicks:n,cells:i})}}),Ra=["onMouseEnter","onClick","onMouseLeave"],wa=["id"],Ta=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function B(e,a){if(e==null)return{};var r,s,n=Ea(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ea(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_.apply(null,arguments)}function te(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function w(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?te(Object(r),!0).forEach(function(s){Ia(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ia(e,a,r){return(a=Sa(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Sa(e){var a=Fa(e,"string");return typeof a=="symbol"?a:a+""}function Fa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Oa=e=>{var{dataKey:a,name:r,fill:s,legendType:n,hide:o}=e;return[{inactive:o,dataKey:a,type:n,color:s,value:fe(r,a),payload:e}]};function La(e){var{points:a,props:r}=e,{line:s,lineType:n,lineJointType:o}=r;if(!s)return null;var m=ye(r),i=ta(s,!1),u,d;if(n==="joint")u=a.map(y=>({x:y.cx,y:y.cy}));else if(n==="fitting"){var{xmin:x,xmax:v,a:h,b:T}=ia(a),A=y=>h*y+T;u=[{x,y:A(x)},{x:v,y:A(v)}]}var b=w(w(w({},m),{},{fill:"none",stroke:m&&m.fill},i),{},{points:u});return f.isValidElement(s)?d=f.cloneElement(s,b):typeof s=="function"?d=s(b):d=f.createElement(na,_({},b,{type:o})),f.createElement(k,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function ge(e){var{points:a,showLabels:r,allOtherScatterProps:s}=e,{shape:n,activeShape:o,dataKey:m}=s,i=he(Qe),{onMouseEnter:u,onClick:d,onMouseLeave:x}=s,v=B(s,Ra),h=Fe(u,s.dataKey),T=Oe(x),A=Le(d,s.dataKey);if(a==null)return null;var{id:b}=s,y=B(s,wa),E=ye(y);return f.createElement(f.Fragment,null,f.createElement(La,{points:a,props:y}),a.map((t,c)=>{var p=o&&i===String(c),C=p?o:n,R=w(w(w({key:"symbol-".concat(c)},E),t),{},{[aa]:c,[ea]:String(m)});return f.createElement(k,_({className:"recharts-scatter-symbol"},ra(v,t,c),{onMouseEnter:h(t,c),onMouseLeave:T(t,c),onClick:A(t,c),key:"symbol-".concat(t?.cx,"-").concat(t?.cy,"-").concat(t?.size,"-").concat(c)}),f.createElement(fa,_({option:C,isActive:p},R)))}),r&&sa.renderCallByParent(y,a))}function Ma(e){var{previousPointsRef:a,props:r}=e,{points:s,isAnimationActive:n,animationBegin:o,animationDuration:m,animationEasing:i}=r,u=a.current,d=Xe(r,"recharts-scatter-"),[x,v]=f.useState(!1),h=f.useCallback(()=>{v(!1)},[]),T=f.useCallback(()=>{v(!0)},[]);return f.createElement(Ye,{begin:o,duration:m,isActive:n,easing:i,onAnimationEnd:h,onAnimationStart:T,key:d},A=>{var b=A===1?s:s.map((y,E)=>{var t=u&&u[E];if(t){var c=K(t.cx,y.cx),p=K(t.cy,y.cy),C=K(t.size,y.size);return w(w({},y),{},{cx:c(A),cy:p(A),size:C(A)})}var R=K(0,y.size);return w(w({},y),{},{size:R(A)})});return A>0&&(a.current=b),f.createElement(k,null,f.createElement(ge,{points:b,allOtherScatterProps:r,showLabels:!x}))})}function _a(e){var{points:a,isAnimationActive:r}=e,s=f.useRef(null),n=s.current;return r&&a&&a.length&&(!n||n!==a)?f.createElement(Ma,{props:e,previousPointsRef:s}):f.createElement(ge,{points:a,allOtherScatterProps:e,showLabels:!0})}function Na(e){var{dataKey:a,points:r,stroke:s,strokeWidth:n,fill:o,name:m,hide:i,tooltipType:u}=e;return{dataDefinedOnItem:r?.map(d=>d.tooltipPayload),positions:r?.map(d=>d.tooltipPosition),settings:{stroke:s,strokeWidth:n,fill:o,nameKey:void 0,dataKey:a,name:fe(m,a),hide:i,type:u,color:o,unit:""}}}function Da(e){var{displayedData:a,xAxis:r,yAxis:s,zAxis:n,scatterSettings:o,xAxisTicks:m,yAxisTicks:i,cells:u}=e,d=D(r.dataKey)?o.dataKey:r.dataKey,x=D(s.dataKey)?o.dataKey:s.dataKey,v=n&&n.dataKey,h=n?n.range:H.defaultProps.range,T=h&&h[0],A=r.scale.bandwidth?r.scale.bandwidth():0,b=s.scale.bandwidth?s.scale.bandwidth():0;return a.map((y,E)=>{var t=G(y,d),c=G(y,x),p=!D(v)&&G(y,v)||"-",C=[{name:D(r.dataKey)?o.name:r.name||r.dataKey,unit:r.unit||"",value:t,payload:y,dataKey:d,type:o.tooltipType},{name:D(s.dataKey)?o.name:s.name||s.dataKey,unit:s.unit||"",value:c,payload:y,dataKey:x,type:o.tooltipType}];p!=="-"&&C.push({name:n.name||n.dataKey,unit:n.unit||"",value:p,payload:y,dataKey:v,type:o.tooltipType});var R=ae({axis:r,ticks:m,bandSize:A,entry:y,index:E,dataKey:d}),I=ae({axis:s,ticks:i,bandSize:b,entry:y,index:E,dataKey:x}),S=p!=="-"?n.scale(p):T,F=Math.sqrt(Math.max(S,0)/Math.PI);return w(w({},y),{},{cx:R,cy:I,x:R-F,y:I-F,width:2*F,height:2*F,size:S,node:{x:t,y:c,z:p},tooltipPayload:C,tooltipPosition:{x:R,y:I},payload:y},u&&u[E]&&u[E].props)})}var za=(e,a,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:G(e,a)});function Wa(e){var{hide:a,points:r,className:s,needClip:n,xAxisId:o,yAxisId:m,id:i,children:u}=e;if(a)return null;var d=Ue("recharts-scatter",s),x=i;return f.createElement(k,{className:d,clipPath:n?"url(#clipPath-".concat(x,")"):null,id:i},n&&f.createElement("defs",null,f.createElement(Ie,{clipPathId:x,xAxisId:o,yAxisId:m})),f.createElement(Se,{xAxisId:o,yAxisId:m,data:r,dataPointFormatter:za,errorBarOffset:0},u),f.createElement(k,{key:"recharts-scatter-symbols"},f.createElement(_a,e)))}var xe={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ze.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function ka(e){var a=ue(e,xe),{animationBegin:r,animationDuration:s,animationEasing:n,hide:o,isAnimationActive:m,legendType:i,lineJointType:u,lineType:d,shape:x,xAxisId:v,yAxisId:h,zAxisId:T}=a,A=B(a,Ta),{needClip:b}=Ee(v,h),y=f.useMemo(()=>He(e.children,le),[e.children]),E=de(),t=he(c=>ja(c,v,h,T,e.id,y,E));return b==null?null:f.createElement(f.Fragment,null,f.createElement(qe,{fn:Na,args:w(w({},e),{},{points:t})}),f.createElement(Wa,_({},A,{xAxisId:v,yAxisId:h,zAxisId:T,lineType:d,lineJointType:u,legendType:i,shape:x,hide:o,isAnimationActive:m,animationBegin:r,animationDuration:s,animationEasing:n,points:t,needClip:b})))}function Pe(e){var a=ue(e,xe),r=de();return f.createElement($e,{id:a.id,type:"scatter"},s=>f.createElement(f.Fragment,null,f.createElement(Je,{legendPayload:Oa(a)}),f.createElement(Be,{type:"scatter",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:a.zAxisId,dataKey:a.dataKey,hide:a.hide,name:a.name,tooltipType:a.tooltipType,isPanorama:r}),f.createElement(ka,_({},a,{id:s}))))}Pe.displayName="Scatter";var Ka=["item"],Ga=f.forwardRef((e,a)=>f.createElement(Me,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ka,tooltipPayloadSearcher:oa,categoricalChartProps:e,ref:a}));function ie(e,a=!1,r=!1){const s={};return e.forEach(n=>{const o=new Set;n.PlayerStats.forEach(i=>{const u=J(W(i.MainRoleInitial,i.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});o.add(u)}),o.forEach(i=>{s[i]||(s[i]={totalGames:0,wins:0,winRate:0,players:{}}),s[i].totalGames++});const m=new Set;n.PlayerStats.forEach(i=>{if(i.Victorious){const u=J(W(i.MainRoleInitial,i.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});m.add(u)}}),m.forEach(i=>{s[i]&&s[i].wins++})}),s}function ne(e,a,r=!1,s=!1){const n={};return e.forEach(o=>{o.PlayerStats.forEach(m=>{const i=m.Username.trim();if(!i)return;const u=J(W(m.MainRoleInitial,m.MainRoleChanges||[]),{regroupWolfSubRoles:r,regroupVillagers:s}),d=u==="Autres"?"Rôles spéciaux":u;a[d].players[i]||(a[d].players[i]={games:0,wins:0,winRate:0}),a[d].players[i].games++,m.Victorious&&a[d].players[i].wins++,n[i]||(n[i]={totalGames:0,camps:{}}),n[i].camps[d]||(n[i].camps[d]={games:0,wins:0,winRate:0,performance:0}),n[i].totalGames++,n[i].camps[d].games++,m.Victorious&&n[i].camps[d].wins++})}),n}function Va(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(s=>{oe(W(s.MainRoleInitial,s.MainRoleChanges||[]))==="Autres"&&(a["Rôles spéciaux"].totalGames++,s.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function $a(e,a){const r={};return e.forEach(s=>{s.PlayerStats.forEach(n=>{const o=n.Username.trim();if(!o)return;if(oe(W(n.MainRoleInitial,n.MainRoleChanges||[]))==="Autres"){const i="Rôles spéciaux";a[i].players[o]||(a[i].players[o]={games:0,wins:0,winRate:0}),a[i].players[o].games++,n.Victorious&&a[i].players[o].wins++,r[o]||(r[o]={totalGames:0,camps:{}}),r[o].camps[i]||(r[o].camps[i]={games:0,wins:0,winRate:0,performance:0}),r[o].totalGames++,r[o].camps[i].games++,n.Victorious&&r[o].camps[i].wins++}})}),r}function V(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(r=>{const s=e[a].players[r];s.games>0&&(s.winRate=parseFloat((s.wins/s.games*100).toFixed(2)))})})}function $(e,a){Object.keys(e).forEach(r=>{Object.keys(e[r].camps).forEach(s=>{const n=e[r].camps[s];n.games>0&&(n.winRate=parseFloat((n.wins/n.games*100).toFixed(2)),a[s]&&a[s].winRate!==void 0?n.performance=parseFloat((n.winRate-a[s].winRate).toFixed(2)):n.performance=0)})})}function Ja(e,a,r){const s=[];return Object.keys(e).forEach(o=>{const m=e[o],i=[];Object.keys(m.camps).forEach(u=>{const d=m.camps[u];if(d.games>=r){const x=a[u]&&a[u].winRate!==void 0?a[u].winRate.toFixed(2):"0.00";i.push({camp:u,games:d.games,wins:d.wins,winRate:d.winRate.toFixed(2),campAvgWinRate:x,performance:d.performance.toFixed(2)})}}),i.sort((u,d)=>parseFloat(d.performance)-parseFloat(u.performance)),i.length>0&&s.push({player:o,totalGames:m.totalGames,campPerformance:i})}),s.sort((o,m)=>m.totalGames-o.totalGames),{campAverages:Object.keys(a).map(o=>({camp:o,totalGames:a[o].totalGames,wins:a[o].wins,winRate:a[o].winRate.toFixed(2)})),playerPerformanceArray:s}}function Ba(e){if(e.length===0)return null;const a=ie(e,!1,!1),r=ie(e,!0,!0),s=Va(e),n=ne(e,a,!1,!1),o=ne(e,r,!0,!0),m=$a(e,s);V(a),V(r),V(s),$(n,a),$(o,r),$(m,s);const i={...a},u={...n};r.Loup&&(i["Camp Loup"]=r.Loup,Object.keys(o).forEach(h=>{u[h]||(u[h]=o[h]),o[h].camps.Loup&&(u[h].camps["Camp Loup"]=o[h].camps.Loup)})),r.Villageois&&(i["Camp Villageois"]=r.Villageois,Object.keys(o).forEach(h=>{u[h]||(u[h]=o[h]),o[h].camps.Villageois&&(u[h].camps["Camp Villageois"]=o[h].camps.Villageois)})),s["Rôles spéciaux"]&&(i["Rôles spéciaux"]=s["Rôles spéciaux"],Object.keys(m).forEach(h=>{u[h]||(u[h]=m[h]),m[h].camps["Rôles spéciaux"]&&(u[h].camps["Rôles spéciaux"]=m[h].camps["Rôles spéciaux"])}));const d=3,{campAverages:x,playerPerformanceArray:v}=Ja(u,i,d);return{campAverages:x,playerPerformance:v,minGamesRequired:d}}function Ha(){const{data:e,isLoading:a,error:r}=be(Ba);return{playerCampPerformance:e,isLoading:a,error:r}}function er(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:r}=Ce(),{settings:s}=Ae(),n=Re(),{joueursData:o}=je(),m=we(o),[i,u]=f.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[d,x]=f.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:v,isLoading:h,error:T}=Ha();f.useEffect(()=>{a.campPerformanceState||r({campPerformanceState:{selectedCampPerformanceCamp:i,selectedCampPerformanceMinGames:d}})},[i,d,a.campPerformanceState,r]);const A=f.useMemo(()=>{if(!v?.campAverages)return["Tous les camps"];const t=v.campAverages.map(S=>S.camp),c=["Tous les camps"];t.includes("Camp Villageois")&&c.push("Camp Villageois"),t.includes("Chasseur")&&c.push("Chasseur"),t.includes("Alchimiste")&&c.push("Alchimiste"),t.includes("Villageois")&&c.push("Villageois"),t.includes("Camp Loup")&&c.push("Camp Loup"),t.includes("Loup")&&c.push("Loup"),t.includes("Traître")&&c.push("Traître"),t.includes("Louveteau")&&c.push("Louveteau"),t.includes("Rôles spéciaux")&&c.push("Rôles spéciaux");const p=["Camp Villageois","Camp Loup","Rôles spéciaux"],R=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Traître","Louveteau"],...p],I=t.filter(S=>!R.includes(S)).sort();return[...c,...I]},[v]),{campPlayerData:b,topPerformersData:y}=f.useMemo(()=>{if(!v?.playerPerformance)return{campPlayerData:[],topPerformersData:[]};const{playerPerformance:t}=v,c=[],p=[];for(const j of t)for(const g of j.campPerformance)if(g.games>=d){const O=`${j.player}-${g.camp}`,L={player:j.player,camp:g.camp,games:g.games,wins:g.wins,winRate:g.winRate,performance:g.performance,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:O,playerCamp:O};p.push(L),i!=="Tous les camps"&&g.camp===i&&c.push({player:j.player,...g,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:O,playerCamp:O})}const C=(j,g)=>{if(!s.highlightedPlayer||j.some(P=>P.player===s.highlightedPlayer&&(!g||P.camp===g)))return j;const L=t.find(P=>P.player===s.highlightedPlayer);if(!L)return j;const N=[];for(const P of L.campPerformance)if((!g||P.camp===g)&&P.games>=1){const Z=`${L.player}-${P.camp}`;N.push({player:L.player,camp:P.camp,games:P.games,wins:P.wins,winRate:P.winRate,performance:P.performance,winRateNum:parseFloat(P.winRate),performanceNum:parseFloat(P.performance),campAvgWinRateNum:parseFloat(P.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:Z,playerCamp:Z})}return[...j,...N]},R=i!=="Tous les camps"?C(c,i):[],I=C(p),S=R.sort((j,g)=>g.performanceNum-j.performanceNum),F=I.sort((j,g)=>g.performanceNum-j.performanceNum),q=(j,g)=>{const O=j.slice(0,g);if(O.some(P=>P.player===s.highlightedPlayer)||!s.highlightedPlayer)return O;const N=j.find(P=>P.player===s.highlightedPlayer);if(N){const P={...N,isHighlightedAddition:!0};return[...O,P]}return O};return{campPlayerData:q(S,15),topPerformersData:q(F,15)}},[v,i,d,s.highlightedPlayer]),E=t=>{t&&t.player&&(i!=="Tous les camps"?e(i==="Camp Loup"?{selectedPlayer:t.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${i}`}:i==="Camp Villageois"?{selectedPlayer:t.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${i}`}:i==="Rôles spéciaux"?{selectedPlayer:t.player,fromComponent:`Performance des Joueurs - ${i}`}:{selectedPlayer:t.player,campFilter:{selectedCamp:i,campFilterMode:"wins-only",excludeWolfSubRoles:i==="Traître"||i==="Louveteau",excludeVillagers:i==="Chasseur"||i==="Alchimiste"},fromComponent:`Performance des Joueurs - ${i}`}):t.camp==="Camp Loup"?e({selectedPlayer:t.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):t.camp==="Camp Villageois"?e({selectedPlayer:t.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):t.camp==="Rôles spéciaux"?e({selectedPlayer:t.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:t.player,campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only",excludeWolfSubRoles:t.camp==="Traître"||t.camp==="Louveteau",excludeVillagers:t.camp==="Chasseur"||t.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return h?l.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):T?l.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",T]}):v?l.jsxs("div",{className:"lycans-player-camp-performance",children:[l.jsx("h2",{children:"Meilleurs Performances par Camp"}),l.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),l.jsx("select",{id:"camp-select",value:i,onChange:t=>{const c=t.target.value;u(c),r({campPerformanceState:{selectedCampPerformanceCamp:c,selectedCampPerformanceMinGames:d}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:A.map(t=>{let c=t,p=!1,C=!1,R=!1;return t==="Tous les camps"?(c="📊 Hall of Fame",R=!0):t==="Camp Villageois"?(c="   🏘️ Camp Villageois",p=!0,C=!0):t==="Villageois"?(c="   Villageois",p=!0):t==="Chasseur"?(c="     Chasseur",p=!0):t==="Alchimiste"?(c="     Alchimiste",p=!0):t==="Camp Loup"?(c="   🐺 Camp Loup",p=!0,C=!0):t==="Loup"?(c="     Loup",p=!0):t==="Traître"?(c="     Traître",p=!0):t==="Louveteau"?(c="     Louveteau",p=!0):t==="Rôles spéciaux"?(c="   ⭐ Rôles spéciaux",p=!0,C=!0):(c=`     ${t}`,p=!0),l.jsx("option",{value:t,style:{fontFamily:"monospace",fontSize:p?"0.85rem":"0.9rem",fontWeight:C?"bold":"normal",color:C?"var(--accent-primary)":R?"var(--accent-secondary)":"inherit"},children:c},t)})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),l.jsx("select",{id:"min-games-select",value:d,onChange:t=>{const c=Number(t.target.value);x(c),r({campPerformanceState:{selectedCampPerformanceCamp:i,selectedCampPerformanceMinGames:c}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Te.map(t=>l.jsx("option",{value:t,children:t},t))})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:l.jsx("span",{children:"📊 = Tous les camps • 🏘️ = Villageois groupés • 🐺 = Loups groupés • ⭐ = Rôles spéciaux groupés"})}),l.jsxs("div",{className:"lycans-resume-conteneur",children:[l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Camps Analysés"}),l.jsx("div",{className:"lycans-valeur-principale",children:v.campAverages.length}),l.jsx("p",{children:"camps différents"})]}),l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Joueurs Évalués"}),l.jsx("div",{className:"lycans-valeur-principale",children:v.playerPerformance.length}),l.jsx("p",{children:"joueurs analysés"})]})]}),l.jsxs("div",{className:"lycans-graphiques-groupe",children:[l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:i==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${i}`}),l.jsx(X,{title:i==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${i}`,children:l.jsx("div",{style:{height:i==="Tous les camps"?600:500},children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs(_e,{data:i==="Tous les camps"?y:b,margin:{top:20,right:30,left:20,bottom:i==="Tous les camps"?20:0},children:[l.jsx(Y,{strokeDasharray:"3 3"}),l.jsx(Q,{dataKey:i==="Tous les camps"?"uniqueKey":"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:t,y:c,payload:p,index:C})=>{const I=(i==="Tous les camps"?y:b)[C],S=I?.player||p.value,F=s.highlightedPlayer===(I?.player||p.value);return l.jsx("text",{x:t,y:c,dy:16,textAnchor:"end",fill:F?"var(--accent-primary)":"var(--text-secondary)",fontSize:F?14:13,fontWeight:F?"bold":"italic",transform:`rotate(-45 ${t} ${c})`,children:S})}}),l.jsx(ee,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(se,{content:({active:t,payload:c})=>{if(t&&c&&c.length>0){const p=c[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:i==="Tous les camps"?`${p.player} - ${p.camp}`:p.player})}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Victoires: ",p.wins]}),l.jsxs("div",{children:["Taux personnel: ",p.winRate,"%"]}),i!=="Tous les camps"&&l.jsxs("div",{children:["Moyenne camp: ",p.campAvgWinRate,"%"]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(Ne,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:E,children:(i==="Tous les camps"?y:b).map((t,c)=>{const p=s.highlightedPlayer===t.player,C=t.isHighlightedAddition;return l.jsx(le,{fill:i==="Tous les camps"?n[t.camp]||`var(--chart-color-${c%6+1})`:m[t.player]||(t.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:p?"var(--accent-primary)":"transparent",strokeWidth:p?3:0,strokeDasharray:C?"5,5":"none",opacity:C?.8:1},`cell-${c}`)})})]})})})})]}),l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:i==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${i} sur nombre de parties jouées`}),l.jsx(X,{title:i==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${i}`,children:l.jsx("div",{style:{height:400},children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs(Ga,{data:i==="Tous les camps"?y:b,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(Y,{strokeDasharray:"3 3"}),l.jsx(Q,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),l.jsx(ee,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(se,{content:({active:t,payload:c})=>{if(t&&c&&c.length>0){const p=c[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:p.player})}),i==="Tous les camps"&&l.jsxs("div",{children:["Camp: ",p.camp]}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(Pe,{dataKey:"performanceNum",name:"Performance",onClick:t=>{t&&t.player&&(i==="Tous les camps"?t.camp==="Camp Loup"?e({selectedPlayer:t.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):t.camp==="Rôles spéciaux"?e({selectedPlayer:t.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:t.player,campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only",excludeWolfSubRoles:t.camp==="Traître"||t.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(i==="Camp Loup"?{selectedPlayer:t.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${i}`}:i==="Rôles spéciaux"?{selectedPlayer:t.player,fromComponent:`Relation Parties Jouées vs Performance - ${i}`}:{selectedPlayer:t.player,campFilter:{selectedCamp:i,campFilterMode:"wins-only",excludeWolfSubRoles:i==="Traître"||i==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${i}`}))},shape:t=>{const c=s.highlightedPlayer===t.payload?.player,p=t.payload?.isHighlightedAddition;return l.jsxs("g",{style:{cursor:"pointer"},children:[l.jsx("circle",{cx:t.cx,cy:t.cy,r:c?15:12,fill:i==="Tous les camps"?n[t.payload?.camp]||"var(--accent-primary)":m[t.payload?.player]||"var(--accent-primary)",stroke:c?"var(--accent-primary)":"#222",strokeWidth:c?3:1,strokeDasharray:p?"5,5":"none",opacity:p?.8:1}),l.jsx("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:c?"12":"10",fontWeight:"bold",pointerEvents:"none",children:t.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):l.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{er as PlayerCampPerformanceChart};
