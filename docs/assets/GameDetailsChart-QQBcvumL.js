import{r as b,j as e,u as J}from"./index-DvEOLD2O.js";import{b as z}from"./baseStatsHook-he3HxI9w.js";import{b as v,a as k,g as U}from"./gameUtils-BuNbDi0M.js";import{a as $,f as q}from"./api-B8CxKOdf.js";function Y(a,n){if(!a)return null;try{const s=new URL(a);let t="",r=0;if(s.hostname==="youtu.be"){t=s.pathname.slice(1);const i=s.searchParams.get("t");i&&(r=parseInt(i,10)||0)}else if(s.hostname==="www.youtube.com"||s.hostname==="youtube.com"){t=s.searchParams.get("v")||"";const i=s.searchParams.get("t");i&&(r=parseInt(i,10)||0)}if(!t)return null;const l=`https://www.youtube.com/embed/${t}?start=${r}`;if(n)try{const i=new URL(n);let c=0;if(i.hostname==="youtu.be"){const m=i.searchParams.get("t");m&&(c=parseInt(m,10)||0)}else if(i.hostname==="www.youtube.com"||i.hostname==="youtube.com"){const m=i.searchParams.get("t");m&&(c=parseInt(m,10)||0)}if(c>r)return`${l}&end=${c}`}catch(i){console.warn("Failed to parse end URL:",n,i)}return l}catch(s){return console.warn("Failed to create YouTube embed URL:",a,s),null}}function _(a,n){if(!a||!n)return null;try{const s=new Date(a),t=new Date(n);if(isNaN(s.getTime())||isNaN(t.getTime()))return console.warn("Invalid date format:",a,n),null;const r=t.getTime()-s.getTime();return r>0?Math.round(r/1e3):null}catch(s){return console.warn("Failed to calculate game duration:",a,n,s),null}}function B(a,n,s=!1){const t=n.PlayerStats.find(l=>l.Username.toLowerCase()===a.toLowerCase());if(!t)return"Villageois";const r=v(t.MainRoleInitial);return r==="TraÃ®tre"?s?"TraÃ®tre":"Loup":r}function K(a,n,s){const t=a.toLowerCase(),r=s.PlayerStats.find(i=>i.Username.toLowerCase()===t);return r?v(r.MainRoleInitial)===n:!1}function Q(a,n,s){const t=a.filter(r=>r.PlayerStats.some(l=>l.Username.toLowerCase()===n.toLowerCase()));return!s||s==="all-assignments"?t:s==="wins-only"?t.filter(r=>r.PlayerStats.some(l=>l.Username.toLowerCase()===n.toLowerCase()&&l.Victorious)):t}function X(a,n){return a.filter(s=>s.DisplayedId===n)}function Z(a,n){return a.filter(s=>n.includes(s.DisplayedId))}function ee(a,n){return a.filter(s=>{const r=new Date(s.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});if(n.includes("/")&&n.split("/").length===2){const[l,i]=n.split("/"),c=r.split("/");if(c.length===3){const[,m,d]=c;return m===l&&d===i}}else return r===n;return!1})}function ae(a,n){return a.filter(s=>{const t=s.HarvestGoal,r=s.HarvestDone;if(t==null||r===null||r===void 0||t===0)return!1;const l=r/t*100;switch(n){case"0-25%":return l>=0&&l<=25;case"26-50%":return l>25&&l<=50;case"51-75%":return l>50&&l<=75;case"76-99%":return l>75&&l<=99;case"100%":return l>=100;default:return!0}})}function se(a,n){return a.filter(s=>{if(!s.EndTiming)return!1;const t=s.EndTiming.match(/(?:Nuit|Jour)\s+(\d+)/);return t?parseInt(t[1],10)===n:!1})}function te(a,n,s){const{selectedCamp:t,campFilterMode:r,_smallCamps:l,excludeTraitor:i}=n;return a.filter(c=>{if(s){if(t==="Autres"&&l)return l.some(h=>K(s,h,c))?r==="wins-only"?c.PlayerStats.find(N=>N.Username.toLowerCase()===s.toLowerCase())?.Victorious===!0:!0:!1;const m=B(s,c,i);let d=!1;return t==="Loup"&&i?d=m==="Loup"&&!c.PlayerStats.some(u=>u.Username.toLowerCase()===s.toLowerCase()&&u.MainRoleInitial==="TraÃ®tre"):d=m===t,d?r==="wins-only"?c.PlayerStats.find(h=>h.Username.toLowerCase()===s.toLowerCase())?.Victorious===!0:!0:!1}else if(r==="wins-only"){const m=k(c);return t==="Autres"&&l?l.includes(m):m===t}else return t==="Autres"&&l?l.some(m=>c.PlayerStats.some(d=>v(d.MainRoleInitial)===m)):c.PlayerStats.some(m=>v(m.MainRoleInitial)===t)})}function ne(a,n,s){const{selectedPlayers:t,playersFilterMode:r,winnerPlayer:l}=n;return a.filter(i=>{const c=i.PlayerStats.map(u=>u.Username.toLowerCase());if(!t.every(u=>c.includes(u.toLowerCase())))return!1;const d=t.map(u=>B(u,i));switch(r){case"all-common-games":return l?i.PlayerStats.find(p=>p.Username.toLowerCase()===l.toLowerCase())?.Victorious===!0:!0;case"opposing-camps":const u=d.map(f=>f==="TraÃ®tre"?"Loup":f);if(!([...new Set(u)].length>1))return!1;if(l){const f=t.findIndex(p=>p.toLowerCase()===l.toLowerCase());if(f!==-1){const p=u[f],D=k(i),j=D==="TraÃ®tre"?"Loup":D;return p==="Agent"&&j==="Agent"?i.PlayerStats.find(R=>R.Username.toLowerCase()===l.toLowerCase())?.Victorious===!0:p===j}}return!0;case"same-camp":const P=d.map(f=>f==="TraÃ®tre"?"Loup":f);if(!([...new Set(P)].length===1))return!1;const F=P[0];if(s&&s.selectedCamp){const f=s.selectedCamp;if(f==="Loup"&&s.excludeTraitor&&(!t.every(j=>d[t.indexOf(j)]==="Loup")||t.some(j=>{const C=i.PlayerStats.find(R=>R.Username.toLowerCase()===j.toLowerCase());return v(C?.MainRoleInitial)==="TraÃ®tre"}))||F!==f)return!1}if(l){const f=k(i),p=f==="TraÃ®tre"?"Loup":f;return F==="Agent"&&p==="Agent"?t.every(D=>i.PlayerStats.find(C=>C.Username.toLowerCase()===D.toLowerCase())?.Victorious===!0):F===p}return!0;default:return!0}})}function re(a,n){const{selectedPlayerPair:s,selectedPairRole:t}=n;return s.length!==2?a:a.filter(r=>{const l=r.PlayerStats.map(c=>c.Username.toLowerCase());if(!s.every(c=>l.includes(c.toLowerCase())))return!1;switch(t){case"wolves":return s.every(c=>{const m=r.PlayerStats.find(d=>d.Username.toLowerCase()===c.toLowerCase());return v(m?.MainRoleInitial)==="Loup"});case"lovers":return s.every(c=>{const m=r.PlayerStats.find(d=>d.Username.toLowerCase()===c.toLowerCase());return v(m?.MainRoleInitial)==="Amoureux"});default:return!0}})}function le(a,n){if(!n)return a;let s=[...a];return n.selectedPlayer&&(s=Q(s,n.selectedPlayer,n.selectedPlayerWinMode)),n.selectedGame&&(s=X(s,n.selectedGame)),n.selectedGameIds&&(s=Z(s,n.selectedGameIds)),n.campFilter&&(s=te(s,n.campFilter,n.selectedPlayer)),n.selectedDate&&(s=ee(s,n.selectedDate)),n.selectedHarvestRange&&(s=ae(s,n.selectedHarvestRange)),n.selectedGameDuration&&(s=se(s,n.selectedGameDuration)),n.multiPlayerFilter&&(s=ne(s,n.multiPlayerFilter,n.campFilter)),n.playerPairFilter&&(s=re(s,n.playerPairFilter)),s}function ie(a,n){return a.length===0?null:le(a,n).map(t=>{const r=t.PlayerStats.length,l=t.PlayerStats.filter(p=>v(p.MainRoleInitial)==="Loup"),i=t.PlayerStats.filter(p=>v(p.MainRoleInitial)==="TraÃ®tre"),c=t.PlayerStats.filter(p=>v(p.MainRoleInitial)==="Amoureux"),m=t.PlayerStats.filter(p=>p.Victorious),d=l.length+i.length,u=k(t),h=["Loup","Villageois","Amoureux"],N=t.PlayerStats.filter(p=>!h.includes(v(p.MainRoleInitial))),P=N.length>0?N.map(p=>v(p.MainRoleInitial)).join(", "):null,I=new Date(t.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});let F=0;if(t.EndTiming){const p=t.EndTiming.match(/(?:Nuit|Jour)\s+(\d+)/);p&&(F=parseInt(p[1],10))}let f=null;return t.HarvestGoal&&t.HarvestGoal>0&&(f=t.HarvestDone/t.HarvestGoal),{gameId:t.DisplayedId,date:I,isModded:t.Modded||!1,playerCount:r,wolfCount:d,hasTraitor:i.length>0,hasLovers:c.length>0,soloRoles:P,winningCamp:u,dayCount:F,winners:m.map(p=>p.Username).join(", "),harvest:t.HarvestDone,totalHarvest:t.HarvestGoal,harvestPercentage:f,playersList:t.PlayerStats.map(p=>p.Username).join(", "),versions:t.Version||null,map:t.MapName,youtubeEmbedUrl:Y(t.LegacyData?.VODLink||null,t.LegacyData?.VODLinkEnd||null),gameDuration:_(t.StartDate,t.EndDate),playerData:t.PlayerStats}})}function oe(a){const{data:n,isLoading:s,error:t}=z(r=>ie(r,a));return{data:n||[],isLoading:s,error:t}}const ce=({playerData:a})=>{const n=a.reduce((r,l)=>{const i=U(l.MainRoleInitial);return r[i]||(r[i]=[]),r[i].push(l),r},{}),s=["Villageois","Loup","Amoureux"],t=Object.entries(n).sort(([r,l],[i,c])=>{const m=s.includes(r),d=s.includes(i);return m&&!d?-1:!m&&d?1:c.length-l.length});return e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"Composition des Camps"}),e.jsx("div",{className:"camps-grid",children:t.map(([r,l])=>{const i=l,c=$[r]||"#666",d=i.filter(u=>u.Victorious).length>0;return e.jsxs("div",{className:`camp-group ${d?"winning-camp":""}`,style:{borderColor:c,backgroundColor:`${c}15`,boxShadow:d?`0 0 10px ${c}40`:"none"},children:[e.jsx("div",{className:"camp-header",style:{backgroundColor:`${c}25`},children:e.jsxs("h5",{style:{color:c},children:[r," (",i.length,")",d&&e.jsx("span",{className:"victory-crown",children:"ğŸ‘‘"})]})}),e.jsx("div",{className:"camp-players",children:i.sort((u,h)=>u.Username.localeCompare(h.Username)).map(u=>{let h=c;return u.Color&&q[u.Color]&&(h=q[u.Color]),e.jsxs("div",{className:`player-badge ${u.Victorious?"winner":""} ${u.DeathTiming?"dead":"alive"}`,style:{borderColor:h},title:`${u.Username} - ${v(u.MainRoleInitial)}${u.DeathTiming?` (Mort ${u.DeathTiming})`:""}`,children:[e.jsx("span",{className:"player-name",children:u.Username}),u.DeathTiming&&e.jsx("span",{className:"death-indicator",children:"ğŸ’€"}),u.Victorious&&e.jsx("span",{className:"victory-indicator",children:"â­"})]},u.Username)})})]},r)})})]})};function ue(a){if(a===null||a<=0)return"N/A";const n=Math.floor(a/60),s=a%60;return n===0?`${s}s`:s===0?`${n}m`:`${n}m ${s}s`}function de({game:a}){const[n,s]=b.useState(!1);return e.jsx("div",{className:"lycans-game-detail-view",children:e.jsxs("div",{className:"lycans-game-detail-grid",children:[e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"Informations GÃ©nÃ©rales"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Nombre de joueurs:"}),e.jsx("span",{className:"value",children:a.playerCount})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Nombre de loups:"}),e.jsx("span",{className:"value",children:a.wolfCount})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"TraÃ®tre:"}),e.jsx("span",{className:"value",children:a.hasTraitor?"Oui":"Non"})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Amoureux:"}),e.jsx("span",{className:"value",children:a.hasLovers?"Oui":"Non"})]}),a.soloRoles&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"RÃ´les solo:"}),e.jsx("span",{className:"value",children:a.soloRoles})]})]})]}),e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"Informations SupplÃ©mentaires"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Jours de jeu:"}),e.jsx("span",{className:"value",children:a.dayCount})]}),a.gameDuration!==null&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"DurÃ©e de la partie:"}),e.jsx("span",{className:"value",children:ue(a.gameDuration)})]}),a.versions&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Version:"}),e.jsxs("span",{className:"value",children:[a.versions,a.isModded?" (moddÃ©e)":""]})]}),a.map&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Map:"}),e.jsx("span",{className:"value",children:a.map})]})]})]}),a.harvest!==null&&e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"RÃ©colte"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"RÃ©colte:"}),e.jsx("span",{className:"value",children:a.harvest})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Total possible:"}),e.jsx("span",{className:"value",children:a.totalHarvest})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Pourcentage:"}),e.jsx("span",{className:"value",children:typeof a.harvestPercentage=="number"?(a.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),e.jsx(ce,{playerData:a.playerData}),e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"RÃ´les des Joueurs"}),e.jsx("div",{className:"lycans-player-roles-grid",children:a.playerData.sort((t,r)=>{const l=U(t.MainRoleInitial),i=U(r.MainRoleInitial),c=["Villageois","Loup","TraÃ®tre","Amoureux"],m=c.indexOf(l),d=c.indexOf(i);return m!==-1&&d!==-1?m-d:m!==-1?-1:d!==-1?1:l!==i?l.localeCompare(i):t.Username.localeCompare(r.Username)}).map(t=>{const r=v(t.MainRoleInitial),l=U(t.MainRoleInitial),i=t.MainRoleInitial,c=t.Power,m=t.SecondaryRole;let d=l;r!==l&&(d+=` (${r})`),i&&i!==r&&(d+=` - ${i}`),c&&c.trim()&&(d+=` - ${c}`),m&&m.trim()&&(d+=` + ${m}`);let u=$[t.MainRoleInitial]||"#666";u==="#666"&&(u=$[l]||"#666");const h=$[r]||"#666",N=t.DeathTiming,P=t.Victorious;return e.jsxs("div",{className:`lycans-player-role-item ${P?"victorious":""}`,style:{borderColor:h},children:[e.jsxs("div",{className:"lycans-player-name",style:{color:u,textAlign:"left"},children:[t.Username,N&&e.jsx("span",{className:"death-skull",children:"ğŸ’€"})]}),e.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:d})]},t.Username)})})]}),a.youtubeEmbedUrl&&e.jsx("div",{className:"lycans-game-detail-section full-width",children:e.jsx("button",{onClick:()=>s(!n),className:"lycans-video-toggle-btn",children:n?"ğŸ“¹ Masquer la vidÃ©o":"ğŸ¥ Voir la vidÃ©o"})}),a.youtubeEmbedUrl&&n&&e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"VidÃ©o de la Partie"}),e.jsx("div",{className:"lycans-youtube-container",children:e.jsx("iframe",{src:a.youtubeEmbedUrl,title:`Partie Lycans #${a.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}function ge(){const{navigationFilters:a,navigateBack:n}=J(),{data:s,isLoading:t,error:r}=oe(a),[l,i]=b.useState("date"),[c,m]=b.useState("desc"),[d,u]=b.useState(null),[h,N]=b.useState(1),[P,V]=b.useState(25),I=b.useRef(!1),f=a.selectedPlayer?[a.selectedPlayer]:a.playerPairFilter?.selectedPlayerPair?a.playerPairFilter.selectedPlayerPair:a.multiPlayerFilter?.selectedPlayers?a.multiPlayerFilter.selectedPlayers:[],p=f.length>0,D=o=>p?(o.winners?o.winners.split(",").map(x=>x.trim()):[]).filter(x=>f.some(w=>w.toLowerCase()===x.toLowerCase())).join(", "):"",j=b.useMemo(()=>s?[...s].sort((o,g)=>{let y,x;switch(l){case"date":y=new Date(o.date.split("/").reverse().join("-")).getTime(),x=new Date(g.date.split("/").reverse().join("-")).getTime();break;case"gameId":y=parseInt(o.gameId,10),x=parseInt(g.gameId,10);break;case"playerCount":y=o.playerCount,x=g.playerCount;break;case"gameDuration":y=o.gameDuration||0,x=g.gameDuration||0;break;case"winningCamp":y=o.winningCamp,x=g.winningCamp;break;case"winner":y=D(o),x=D(g);break;default:return 0}let w;if(c==="asc"?w=y>x?1:y<x?-1:0:w=y<x?1:y>x?-1:0,w===0){const L=parseInt(o.gameId,10),M=parseInt(g.gameId,10);return c==="asc"?L-M:M-L}return w}):[],[s,l,c]),C=Math.ceil(j.length/P),R=(h-1)*P,A=R+P,H=j.slice(R,A);b.useEffect(()=>{if(I.current){I.current=!1;return}N(1),u(null)},[s]),b.useEffect(()=>{N(1),u(null)},[l,c]);const S=o=>{I.current=!0,N(o),u(null)},O=o=>{I.current=!0,V(o),N(1),u(null)},W=o=>{I.current=!0,u(d===o?null:o)},G=o=>{l===o?m(c==="asc"?"desc":"asc"):(i(o),m("desc"))},T=o=>l!==o?"â†•ï¸":c==="asc"?"â†—ï¸":"â†˜ï¸",E=()=>{const o=[];if(a.selectedPlayer&&a.campFilter){const g=a.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",y=a.campFilter.excludeTraitor&&a.campFilter.selectedCamp==="Loup"?"Loups sans TraÃ®tre":a.campFilter.selectedCamp;o.push(`${a.selectedPlayer} jouant ${y}${g}`)}else{if(a.selectedPlayer){const g=a.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":a.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";o.push(`Joueur: ${a.selectedPlayer}${g}`)}if(a.campFilter){const{selectedCamp:g,campFilterMode:y,excludeTraitor:x}=a.campFilter,L=`Camp: ${x&&g==="Loup"?"Loups sans TraÃ®tre":g}`,M=y==="wins-only"?" (victoires uniquement)":y==="all-assignments"?" (toutes assignations)":"";o.push(L+M)}}if(a.playerPairFilter){const{selectedPlayerPair:g,selectedPairRole:y}=a.playerPairFilter,x=g.join(" & "),w=y==="wolves"?"loups":"amoureux";o.push(`Paire ${w}: ${x}`)}if(a.multiPlayerFilter){const{selectedPlayers:g,playersFilterMode:y,winnerPlayer:x}=a.multiPlayerFilter,w=g.join(" & ");let L="";y==="all-common-games"?L="toutes les parties communes":y==="opposing-camps"?L="affrontements uniquement":y==="same-camp"&&(L="parties en Ã©quipe (mÃªme camp)");const M=x?` (victoires de ${x})`:"";o.push(`${w} (${L}${M})`)}return a.selectedHarvestRange&&o.push(`RÃ©colte: ${a.selectedHarvestRange}`),a.selectedGameDuration&&o.push(`DurÃ©e: ${a.selectedGameDuration} jour${a.selectedGameDuration>1?"s":""}`),a.selectedGame&&o.push(`Partie ${a.selectedGame}`),a.selectedDate&&(a.selectedDate.includes("/")&&a.selectedDate.split("/").length===2?o.push(`Mois: ${a.selectedDate}`):o.push(`Date: ${a.selectedDate}`)),a.selectedGameIds&&a.selectedGameIds.length>0&&o.push(`${a.selectedGameIds.length} parties sÃ©lectionnÃ©e${a.selectedGameIds.length>1?"s":""}`),o};return t?e.jsx("div",{className:"statistiques-chargement",children:"Chargement des dÃ©tails des parties..."}):r?e.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",r]}):!s||s.length===0?e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h2",{children:"Aucune partie trouvÃ©e"}),e.jsx("p",{children:"Aucune partie ne correspond aux critÃ¨res sÃ©lectionnÃ©s."}),a.fromComponent&&e.jsxs("button",{onClick:n,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["â† Retour Ã  ",a.fromComponent]})]}):e.jsxs("div",{className:"lycans-game-details",children:[e.jsxs("div",{className:"lycans-game-details-header",children:[e.jsxs("div",{className:"lycans-game-details-navigation",children:[a.fromComponent&&e.jsxs("button",{onClick:n,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["â† Retour Ã  ",a.fromComponent]}),e.jsxs("h2",{children:["DÃ©tails des Parties (",s.length," partie",s.length>1?"s":"",")"]})]}),E().length>0&&e.jsxs("div",{className:"lycans-active-filters",children:[e.jsx("strong",{children:"Filtres actifs:"})," ",E().join(", ")]})]}),C>1&&e.jsxs("div",{className:"lycans-pagination-container",children:[e.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",R+1," Ã  ",Math.min(A,j.length)," sur ",j.length," parties"]}),e.jsxs("div",{className:"lycans-pagination-controls",children:[e.jsxs("select",{value:P,onChange:o=>O(Number(o.target.value)),className:"lycans-pagination-select",children:[e.jsx("option",{value:10,children:"10 par page"}),e.jsx("option",{value:25,children:"25 par page"}),e.jsx("option",{value:50,children:"50 par page"}),e.jsx("option",{value:100,children:"100 par page"})]}),e.jsxs("div",{className:"lycans-pagination-buttons",children:[e.jsx("button",{onClick:()=>S(1),disabled:h===1,className:"lycans-pagination-btn",children:"Â«Â«"}),e.jsx("button",{onClick:()=>S(h-1),disabled:h===1,className:"lycans-pagination-btn",children:"â€¹"}),e.jsxs("span",{className:"lycans-pagination-current",children:["Page ",h," sur ",C]}),e.jsx("button",{onClick:()=>S(h+1),disabled:h===C,className:"lycans-pagination-btn",children:"â€º"}),e.jsx("button",{onClick:()=>S(C),disabled:h===C,className:"lycans-pagination-btn",children:"Â»Â»"})]})]})]}),e.jsx("div",{className:"lycans-games-table-container",children:e.jsxs("table",{className:"lycans-games-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>G("gameId"),className:"sortable",children:["Partie ",T("gameId")]}),e.jsxs("th",{onClick:()=>G("date"),className:"sortable",children:["Date ",T("date")]}),e.jsxs("th",{onClick:()=>G("playerCount"),className:"sortable",children:["Joueurs ",T("playerCount")]}),e.jsxs("th",{onClick:()=>G("gameDuration"),className:"sortable",children:["DurÃ©e ",T("gameDuration")]}),e.jsxs("th",{onClick:()=>G("winningCamp"),className:"sortable",children:["Camp Vainqueur ",T("winningCamp")]}),p&&e.jsxs("th",{onClick:()=>G("winner"),className:"sortable",children:["Vainqueur ",T("winner")]}),e.jsx("th",{children:"DÃ©tails"})]})}),e.jsx("tbody",{children:H.map(o=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`${d===o.gameId?"selected":""} clickable-row`,onClick:()=>W(o.gameId),style:{cursor:"pointer"},children:[e.jsxs("td",{children:["#",o.gameId]}),e.jsx("td",{children:o.date}),e.jsx("td",{children:o.playerCount}),e.jsx("td",{children:me(o.gameDuration)}),e.jsx("td",{style:{color:$[o.winningCamp]||"#fff"},children:o.winningCamp}),p&&e.jsx("td",{children:D(o)}),e.jsx("td",{children:e.jsx("button",{onClick:g=>{g.stopPropagation(),W(o.gameId)},className:"lycans-details-btn",children:d===o.gameId?"Masquer":"Voir"})})]},o.gameId),d===o.gameId&&e.jsx("tr",{className:"game-details-row",children:e.jsx("td",{colSpan:p?8:7,children:e.jsx(de,{game:o})})},`${o.gameId}-details`)]}))})]})}),C>1&&e.jsxs("div",{className:"lycans-pagination-container",children:[e.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",R+1," Ã  ",Math.min(A,j.length)," sur ",j.length," parties"]}),e.jsx("div",{className:"lycans-pagination-controls",children:e.jsxs("div",{className:"lycans-pagination-buttons",children:[e.jsx("button",{onClick:()=>S(1),disabled:h===1,className:"lycans-pagination-btn",children:"Â«Â«"}),e.jsx("button",{onClick:()=>S(h-1),disabled:h===1,className:"lycans-pagination-btn",children:"â€¹"}),e.jsxs("span",{className:"lycans-pagination-current",children:["Page ",h," sur ",C]}),e.jsx("button",{onClick:()=>S(h+1),disabled:h===C,className:"lycans-pagination-btn",children:"â€º"}),e.jsx("button",{onClick:()=>S(C),disabled:h===C,className:"lycans-pagination-btn",children:"Â»Â»"})]})})]})]})}function me(a){if(a===null||a<=0)return"N/A";const n=Math.floor(a/60),s=a%60;return n===0?`${s}s`:s===0?`${n}m`:`${n}m ${s}s`}export{ge as GameDetailsChart};
