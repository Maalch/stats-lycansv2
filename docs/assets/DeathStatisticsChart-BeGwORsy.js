import{u as ee,a as te,r as E,j as e,e as ue}from"./index-CRlcrpYc.js";import{g as ne,a as ve,c as oe,u as xe,b as je,d as be,e as Se}from"./useDeathStatisticsFromRaw-DW7n6E-E.js";import{u as Pe}from"./baseStatsHook-D1OhdYKq.js";import{g as De,D as K}from"./datasyncExport-D6_8Fmuy.js";import{m as ae,u as se,a as ye}from"./api-Ccku3syR.js";import{D as w,g as Y}from"./deathTypes-CGUOTngO.js";import{F,B as U,C as V,X as I,Y as q,a as J,b as Q}from"./FullscreenChart-BBpUaFbI.js";import{a6 as Me,R as $,T as G,a7 as pe,a8 as ce,a9 as Ae,aa as de}from"./CategoricalChart-D4I4Pcs-.js";import{u as le}from"./useJoueursData-ByO44USo.js";import{S as Te,a as Ne}from"./ScatterChart-CxVYgKSm.js";const Be=ze(ke);function ze(t){return function(d,c,n=c){if(!((c=+c)>=0))throw new RangeError("invalid rx");if(!((n=+n)>=0))throw new RangeError("invalid ry");let{data:i,width:u,height:b}=d;if(!((u=Math.floor(u))>=0))throw new RangeError("invalid width");if(!((b=Math.floor(b!==void 0?b:i.length/u))>=0))throw new RangeError("invalid height");if(!u||!b||!c&&!n)return d;const m=c&&t(c),y=n&&t(n),l=i.slice();return m&&y?(Z(m,l,i,u,b),Z(m,i,l,u,b),Z(m,l,i,u,b),_(y,i,l,u,b),_(y,l,i,u,b),_(y,i,l,u,b)):m?(Z(m,i,l,u,b),Z(m,l,i,u,b),Z(m,i,l,u,b)):y&&(_(y,i,l,u,b),_(y,l,i,u,b),_(y,i,l,u,b)),d}}function Z(t,d,c,n,i){for(let u=0,b=n*i;u<b;)t(d,c,u,u+=n,1)}function _(t,d,c,n,i){for(let u=0,b=n*i;u<n;++u)t(d,c,u,u+b,n)}function ke(t){const d=Math.floor(t);if(d===t)return Ce(t);const c=t-d,n=2*t+1;return(i,u,b,m,y)=>{if(!((m-=y)>=b))return;let l=d*u[b];const x=y*d,A=x+y;for(let M=b,N=b+x;M<N;M+=y)l+=u[Math.min(m,M)];for(let M=b,N=m;M<=N;M+=y)l+=u[Math.min(m,M+x)],i[M]=(l+c*(u[Math.max(b,M-A)]+u[Math.min(m,M+A)]))/n,l-=u[Math.max(b,M-x)]}}function Ce(t){const d=2*t+1;return(c,n,i,u,b)=>{if(!((u-=b)>=i))return;let m=t*n[i];const y=b*t;for(let l=i,x=i+y;l<x;l+=b)m+=n[Math.min(u,l)];for(let l=i,x=u;l<=x;l+=b)m+=n[Math.min(u,l+y)],c[l]=m/d,m-=n[Math.max(i,l-y)]}}function Re(t,d){let c=0;for(let n of t)n!=null&&(n=+n)>=n&&++c;return c}function He(t,d){let c,n;if(d===void 0)for(const i of t)i!=null&&(c===void 0?i>=i&&(c=n=i):(c>i&&(c=i),n<i&&(n=i)));else{let i=-1;for(let u of t)(u=d(u,++i,t))!=null&&(c===void 0?u>=u&&(c=n=u):(c>u&&(c=u),n<u&&(n=u)))}return[c,n]}function Ee(t,d,c){let n;for(;;){const i=Me(t,d,c);if(i===n||i===0||!isFinite(i))return[t,d];i>0?(t=Math.floor(t/i)*i,d=Math.ceil(d/i)*i):i<0&&(t=Math.ceil(t*i)/i,d=Math.floor(d*i)/i),n=i}}function Le(t){return Math.max(1,Math.ceil(Math.log(Re(t))/Math.LN2)+1)}function he(t){if(!t||t.trim()==="")return null;const c=t.trim().slice(1),n=parseInt(c,10);return isNaN(n)||n<1?null:n}function we(t,d){if(t.length===0)return null;const c=t.filter(m=>!m.LegacyData||m.LegacyData.deathInformationFilled===!0);if(c.length===0)return null;const n={},i={};c.forEach(m=>{let y=1;if(m.EndTiming){const l=he(m.EndTiming);l&&(y=l)}m.PlayerStats.forEach(l=>{if(d&&d!=="Tous les camps"&&De(l.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})!==d)return;const x=l.Username;n[x]||(n[x]={playerName:x,totalGames:0,survivalsByDay:{},survivalRatesByDay:{},gamesPlayedByDay:{}});const A=n[x];A.totalGames++;let M=null;l.DeathTiming&&(M=he(l.DeathTiming));for(let N=1;N<=y;N++)A.gamesPlayedByDay[N]||(A.gamesPlayedByDay[N]=0,A.survivalsByDay[N]=0),i[N]||(i[N]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),A.gamesPlayedByDay[N]++,i[N].playersOnDay++,(!M||M>N)&&(A.survivalsByDay[N]++,i[N].survivorsOnDay++)});for(let l=1;l<=y;l++)i[l]||(i[l]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),i[l].gamesReachingDay++}),Object.values(n).forEach(m=>{Object.keys(m.gamesPlayedByDay).forEach(y=>{const l=parseInt(y),x=m.gamesPlayedByDay[l],A=m.survivalsByDay[l];x>0?m.survivalRatesByDay[l]=A/x*100:m.survivalRatesByDay[l]=0})});const u=Object.values(n).filter(m=>m.totalGames>0).sort((m,y)=>y.totalGames-m.totalGames),b=Object.entries(i).map(([m,y])=>({dayNumber:parseInt(m),totalGamesReachingDay:y.gamesReachingDay,totalPlayersOnDay:y.playersOnDay,averageSurvivalRate:y.playersOnDay>0?y.survivorsOnDay/y.playersOnDay*100:0})).sort((m,y)=>m.dayNumber-y.dayNumber);return{totalGames:c.length,totalPlayersAnalyzed:u.length,playerSurvivalStats:u,dayStats:b}}function Ke(t,d,c=10){return t.playerSurvivalStats.filter(n=>n.totalGames>=c&&(n.gamesPlayedByDay[d]||0)>0).map(n=>({playerName:n.playerName,survivalRate:n.survivalRatesByDay[d]||0,gamesPlayed:n.totalGames,timesReachedDay:n.gamesPlayedByDay[d]||0,timesSurvivedDay:n.survivalsByDay[d]||0})).sort((n,i)=>i.survivalRate-n.survivalRate).slice(0,15)}function We(t,d,c=10){return t.playerSurvivalStats.filter(n=>n.totalGames>=c&&(n.gamesPlayedByDay[d]||0)>0).map(n=>({playerName:n.playerName,survivalRate:n.survivalRatesByDay[d]||0,gamesPlayed:n.totalGames,timesReachedDay:n.gamesPlayedByDay[d]||0,timesSurvivedDay:n.survivalsByDay[d]||0})).sort((n,i)=>n.survivalRate-i.survivalRate).slice(0,15)}function Fe(t){return Pe(d=>we(d,t))}function Ve({deathStats:t,selectedCamp:d,victimCampFilter:c,minGamesForAverage:n,onMinGamesChange:i,availableDeathTypes:u,deathTypeColors:b,totalEligibleForAverage:m}){const{navigateToGameDetails:y}=ee(),{settings:l}=te(),x=h=>{if(c==="Tous les camps"){const s=h.filter(v=>v!==w.BULLET_HUMAN&&v!==w.BULLET_WOLF);return(h.includes(w.BULLET_HUMAN)||h.includes(w.BULLET_WOLF))&&!s.includes(w.BULLET)&&s.push(w.BULLET),s}return h},A=E.useMemo(()=>x(u),[u,c]),M=E.useMemo(()=>{const h={...b};if(c==="Tous les camps"&&!h[w.BULLET]){const s=b[w.BULLET_HUMAN]||b[w.BULLET_WOLF];s&&(h[w.BULLET]=s)}return h},[b,c]),N=h=>{if(c==="Tous les camps"){const s=h.killsByDeathType[w.BULLET_HUMAN]||0,v=h.killsByDeathType[w.BULLET_WOLF]||0,S=h.killsByDeathType[w.BULLET]||0,T={...h.killsByDeathType};return T[w.BULLET]=s+v+S,delete T[w.BULLET_HUMAN],delete T[w.BULLET_WOLF],{...h,killsByDeathType:T}}return h},k=h=>{let s="Top Tueurs";return d!=="Tous les camps"&&(s+=` en ${d}`),c!=="Tous les camps"&&(c==="Roles solo"?s+=" (victimes: Roles solo)":s+=` (victimes: ${c})`),h==="total"?s+=" (Total)":s+=" (Moyenne par Partie)",s},{totalKillsData:B,averageKillsData:j,highlightedPlayerAddedToTotal:g,highlightedPlayerAddedToAverage:a}=E.useMemo(()=>{if(!t)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1};const h=t.killerStats.sort((D,z)=>z.kills-D.kills).slice(0,15),s=l.highlightedPlayer&&h.some(D=>D.killerName===l.highlightedPlayer),v=h.map(D=>{const z=N(D),H={name:z.killerName,value:z.kills,victims:z.victims.length,percentage:z.percentage,gamesPlayed:z.gamesPlayed,averageKillsPerGame:z.averageKillsPerGame,isHighlightedAddition:!1};return A.forEach(R=>{H[R]=z.killsByDeathType[R]||0}),H});let S=!1;if(l.highlightedPlayer&&!s){const D=t.killerStats.find(z=>z.killerName===l.highlightedPlayer);if(D){const z=N(D),H={name:z.killerName,value:z.kills,victims:z.victims.length,percentage:z.percentage,gamesPlayed:z.gamesPlayed,averageKillsPerGame:z.averageKillsPerGame,isHighlightedAddition:!0};A.forEach(R=>{H[R]=z.killsByDeathType[R]||0}),v.push(H),S=!0}}const r=t.killerStats.filter(D=>D.gamesPlayed>=n).sort((D,z)=>z.averageKillsPerGame-D.averageKillsPerGame).slice(0,15),o=l.highlightedPlayer&&r.some(D=>D.killerName===l.highlightedPlayer),p=r.map(D=>{const z=N(D),H={name:z.killerName,value:z.averageKillsPerGame,victims:z.victims.length,percentage:z.percentage,gamesPlayed:z.gamesPlayed,averageKillsPerGame:z.averageKillsPerGame,isHighlightedAddition:!1};return A.forEach(R=>{const L=z.killsByDeathType[R]||0;H[R]=z.gamesPlayed>0?L/z.gamesPlayed:0}),H});let C=!1;if(l.highlightedPlayer&&!o){const D=t.killerStats.find(z=>z.killerName===l.highlightedPlayer);if(D){const z=N(D),H={name:z.killerName,value:z.averageKillsPerGame,victims:z.victims.length,percentage:z.percentage,gamesPlayed:z.gamesPlayed,averageKillsPerGame:z.averageKillsPerGame,isHighlightedAddition:!0};A.forEach(R=>{const L=z.killsByDeathType[R]||0;H[R]=z.gamesPlayed>0?L/z.gamesPlayed:0}),p.push(H),C=!0}}return{totalKillsData:v,averageKillsData:p,highlightedPlayerAddedToTotal:S,highlightedPlayerAddedToAverage:C}},[t,l.highlightedPlayer,n,A,c]),f=({active:h,payload:s,label:v})=>{if(h&&s&&s.length){const S=s[0].payload,T=S.isHighlightedAddition,r=l.highlightedPlayer===S.name,o=A.reduce((p,C)=>p+(S[C]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:r?"var(--accent-primary)":"var(--text-primary)"},children:[v,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",o]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",S.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill:"}),A.map(p=>({deathType:p,count:S[p]||0})).filter(p=>p.count>0).sort((p,C)=>C.count-p.count).map(({deathType:p,count:C})=>e.jsxs("p",{style:{color:M[p],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ne(p),":"]})," ",C]},p))]}),T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},P=({active:h,payload:s,label:v})=>{if(h&&s&&s.length){const S=s[0].payload,T=S.isHighlightedAddition,r=l.highlightedPlayer===S.name,o=S.gamesPlayed>=n,p=t?.killerStats.find(H=>H.killerName===S.name),C=p?N(p):null,D=A.reduce((H,R)=>H+(S[R]||0),0),z=C?C.kills:Math.round(D*S.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:r?"var(--accent-primary)":"var(--text-primary)"},children:[v,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",D.toFixed(2)," (",z," kills /",S.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",S.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill (moyenne):"}),A.map(H=>({deathType:H,avgCount:S[H]||0,totalKillsForDeathType:C?C.killsByDeathType[H]||0:Math.round((S[H]||0)*S.gamesPlayed)})).filter(H=>H.avgCount>0).sort((H,R)=>R.avgCount-H.avgCount).map(({deathType:H,avgCount:R,totalKillsForDeathType:L})=>e.jsxs("p",{style:{color:M[H],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ne(H),":"]})," ",R.toFixed(2)," (",L," kills /",S.gamesPlayed," games)"]},H))]}),T&&!o&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",n," parties)"]}),T&&o&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),r&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:k("total")}),g&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:k("total"),children:e.jsx("div",{style:{height:440},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:B,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:s,payload:v})=>e.jsx("text",{x:h,y:s,dy:10,fill:l.highlightedPlayer===v.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===v.value?14:12,fontWeight:l.highlightedPlayer===v.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${s})`,children:v.value})}),e.jsx(q,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(f,{})}),A.map(h=>e.jsx(J,{dataKey:h,name:h,stackId:"kills",fill:M[h],onClick:s=>{const v={selectedPlayer:s?.name,fromComponent:"Statistiques de Mort"};d!=="Tous les camps"&&(v.campFilter={selectedCamp:d,campFilterMode:"all-assignments"}),y(v)}},h))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,B.filter(h=>!h.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:k("average")}),a&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:n,onChange:h=>i(Number(h.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ae.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsx(F,{title:k("average"),children:e.jsx("div",{style:{height:400},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:j,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:s,payload:v})=>e.jsx("text",{x:h,y:s,dy:10,fill:l.highlightedPlayer===v.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===v.value?14:12,fontWeight:l.highlightedPlayer===v.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${s})`,children:v.value})}),e.jsx(q,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(P,{})}),A.map(h=>e.jsx(J,{dataKey:h,name:h,stackId:"averageKills",fill:M[h],onClick:s=>{const v={selectedPlayer:s?.name,fromComponent:"Statistiques de Mort"};d!=="Tous les camps"&&(v.campFilter={selectedCamp:d,campFilterMode:"all-assignments"}),y(v)}},h))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(h=>!h.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",m," ayant au moins ",n," partie",n>1?"s":"",")"]})]})]})}function Ie({deathStats:t,selectedCamp:d,minGamesForAverage:c,onMinGamesChange:n,availableDeathTypes:i,deathTypeColors:u}){const{navigateToGameDetails:b}=ee(),{settings:m}=te(),{joueursData:y}=le(),l=se(y),[x,A]=E.useState(null),{totalDeathsData:M,survivalRateData:N,highlightedPlayerAddedToDeaths:k,highlightedPlayerAddedToSurvival:B}=E.useMemo(()=>{if(!t)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const a=t.playerDeathStats.sort((o,p)=>p.totalDeaths-o.totalDeaths).slice(0,15),f=m.highlightedPlayer&&a.some(o=>o.playerName===m.highlightedPlayer),P=a.map(o=>{const p=o.gamesPlayed,C=p>0?(p-o.totalDeaths)/p*100:0,D={name:o.playerName,value:o.totalDeaths,totalDeaths:o.totalDeaths,gamesPlayed:p,deathRate:o.deathRate,survivalRate:C,isHighlightedAddition:!1};return i.forEach(z=>{D[z]=o.deathsByType[z]||0}),D});let h=!1;if(m.highlightedPlayer&&!f){const o=t.playerDeathStats.find(p=>p.playerName===m.highlightedPlayer);if(o){const p=o.gamesPlayed,C=p>0?(p-o.totalDeaths)/p*100:0,D={name:o.playerName,value:o.totalDeaths,totalDeaths:o.totalDeaths,gamesPlayed:p,deathRate:o.deathRate,survivalRate:C,isHighlightedAddition:!0};i.forEach(z=>{D[z]=o.deathsByType[z]||0}),P.push(D),h=!0}}const v=t.playerDeathStats.filter(o=>o.gamesPlayed>=c).map(o=>({...o,survivalRate:o.gamesPlayed>0?(o.gamesPlayed-o.totalDeaths)/o.gamesPlayed*100:0})).sort((o,p)=>p.survivalRate-o.survivalRate).slice(0,15),S=m.highlightedPlayer&&v.some(o=>o.playerName===m.highlightedPlayer),T=v.map(o=>{const p={name:o.playerName,value:o.survivalRate,totalDeaths:o.totalDeaths,gamesPlayed:o.gamesPlayed,deathRate:o.deathRate,survivalRate:o.survivalRate,isHighlightedAddition:!1};return i.forEach(C=>{p[C]=o.deathsByType[C]||0}),p});let r=!1;if(m.highlightedPlayer&&!S){const o=t.playerDeathStats.find(p=>p.playerName===m.highlightedPlayer);if(o){const p=o.gamesPlayed>0?(o.gamesPlayed-o.totalDeaths)/o.gamesPlayed*100:0,C={name:o.playerName,value:p,totalDeaths:o.totalDeaths,gamesPlayed:o.gamesPlayed,deathRate:o.deathRate,survivalRate:p,isHighlightedAddition:!0};i.forEach(D=>{C[D]=o.deathsByType[D]||0}),T.push(C),r=!0}}return{totalDeathsData:P,survivalRateData:T,highlightedPlayerAddedToDeaths:h,highlightedPlayerAddedToSurvival:r}},[t,m.highlightedPlayer,c,i]),j=({active:a,payload:f,label:P})=>{if(a&&f&&f.length){const h=f[0].payload,s=h.isHighlightedAddition,v=m.highlightedPlayer===h.name,S=i.reduce((T,r)=>T+(h[r]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:v?"var(--accent-primary)":"var(--text-primary)"},children:[P,s&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",S]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",h.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",h.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort:"}),i.map(T=>{const r=h[T]||0;return r===0?null:e.jsxs("p",{style:{color:u[T],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Y(T),":"]})," ",r]},T)})]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),v&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},g=({active:a,payload:f,label:P})=>{if(a&&f&&f.length){const h=f[0].payload,s=h.isHighlightedAddition,v=m.highlightedPlayer===h.name,S=h.gamesPlayed>=c;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:v?"var(--accent-primary)":"var(--text-primary)"},children:[P,s&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",h.survivalRate.toFixed(1),"% (",h.gamesPlayed-h.totalDeaths," survies / ",h.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",h.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",h.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort:"}),i.map(T=>{const r=h[T]||0;return r===0?null:e.jsxs("p",{style:{color:u[T],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Y(T),":"]})," ",r]},T)})]}),s&&!S&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",c," parties)"]}),s&&S&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),v&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:d==="Tous les camps"?"Morts (Total)":`Morts en ${d} (Total)`}),k&&m.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',m.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:d==="Tous les camps"?"Morts (Total)":`Morts en ${d} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:M,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:a,y:f,payload:P})=>e.jsx("text",{x:a,y:f,dy:10,fill:m.highlightedPlayer===P.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:m.highlightedPlayer===P.value?14:12,fontWeight:m.highlightedPlayer===P.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${a} ${f})`,children:P.value})}),e.jsx(q,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(j,{})}),i.map(a=>e.jsx(J,{dataKey:a,name:a,stackId:"deaths",fill:u[a],onClick:f=>{const P={selectedPlayer:f?.name,fromComponent:"Statistiques de Mort"};d!=="Tous les camps"&&(P.campFilter={selectedCamp:d,campFilterMode:"all-assignments"}),b(P)}},a))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,M.filter(a=>!a.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",d==="Tous les camps"?"(Total)":` en ${d}`]}),B&&m.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',m.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:c,onChange:a=>n(Number(a.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ae.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsx(F,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:N,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:a,y:f,payload:P})=>e.jsx("text",{x:a,y:f,dy:10,fill:m.highlightedPlayer===P.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:m.highlightedPlayer===P.value?14:12,fontWeight:m.highlightedPlayer===P.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${a} ${f})`,children:P.value})}),e.jsx(q,{label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(g,{})}),e.jsx(J,{dataKey:"value",onClick:a=>{const f={selectedPlayer:a?.name,fromComponent:"Statistiques de Mort"};d!=="Tous les camps"&&(f.campFilter={selectedCamp:d,campFilterMode:"all-assignments"}),b(f)},onMouseEnter:a=>A(a?.name||null),onMouseLeave:()=>A(null),style:{cursor:"pointer"},children:N.map((a,f)=>{const P=m.highlightedPlayer===a.name,h=a.isHighlightedAddition;return e.jsx(Q,{fill:l[a.name]||"var(--chart-primary)",stroke:P?"var(--accent-primary)":x===a.name?"var(--text-primary)":"none",strokeWidth:P?3:x===a.name?2:0,strokeDasharray:h?"5,5":"none",opacity:h?.8:1},`cell-${f}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,N.filter(a=>!a.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",c," partie",c>1?"s":"",")"]})]})]})}function qe({hunterStats:t,isLoading:d,error:c}){const{navigateToGameDetails:n}=ee(),{settings:i}=te(),u=ye(),{joueursData:b}=le(),m=se(b),[y,l]=E.useState(null);if(d)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."});if(c)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",c]});if(!t||t.hunterStats.length===0)return e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]});const{finalBestHuntersData:x,highlightedPlayerAddedToBest:A,finalBadHuntersData:M,highlightedPlayerAddedToBad:N}=(()=>{const g=t.hunterStats.filter(r=>r.gamesPlayedAsHunter>=5).sort((r,o)=>o.averageNonVillageoisKillsPerGame-r.averageNonVillageoisKillsPerGame).slice(0,15),a=i.highlightedPlayer&&g.some(r=>r.hunterName===i.highlightedPlayer);let f=[...g],P=!1;if(i.highlightedPlayer&&!a){const r=t.hunterStats.find(o=>o.hunterName===i.highlightedPlayer);r&&(f.push({...r,isHighlightedAddition:!0}),P=!0)}const h=t.hunterStats.filter(r=>r.gamesPlayedAsHunter>=5).map(r=>({name:r.hunterName,averageVillageoisKills:Number((r.villageoisKills/r.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:r.villageoisKills,totalNonVillageoisKills:r.nonVillageoisKills,totalKills:r.totalKills,gamesPlayed:r.gamesPlayedAsHunter,victimsByCamp:r.victimsByCamp,goodVictimsByCamp:r.goodVictimsByCamp,badVictimsByCamp:r.badVictimsByCamp,hunterName:r.hunterName})),s=h.sort((r,o)=>o.averageVillageoisKills-r.averageVillageoisKills).slice(0,15),v=i.highlightedPlayer&&s.some(r=>r.hunterName===i.highlightedPlayer);let S=[...s],T=!1;if(i.highlightedPlayer&&!v){const r=h.find(o=>o.hunterName===i.highlightedPlayer);r&&(S.push({...r,isHighlightedAddition:!0}),T=!0)}return{finalBestHuntersData:f,highlightedPlayerAddedToBest:P,finalBadHuntersData:S,highlightedPlayerAddedToBad:T}})(),k=({active:j,payload:g,label:a})=>{if(j&&g&&g.length){const f=g[0].payload,P=f.isHighlightedAddition,h=i.highlightedPlayer===f.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:h?"var(--accent-primary)":"var(--text-primary)"},children:[a,P&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Kills non-Villageois/partie:"})," ",f.averageNonVillageoisKillsPerGame.toFixed(2)]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",f.nonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",f.gamesPlayedAsHunter]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",f.totalKills]}),f.goodVictimsByCamp&&Object.keys(f.goodVictimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Bonnes victimes:"}),Object.entries(f.goodVictimsByCamp).map(([s,v])=>e.jsxs("p",{style:{color:u[s]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[s,":"]})," ",v]},s))]}),P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),h&&!P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},B=({active:j,payload:g,label:a})=>{if(j&&g&&g.length){const f=g[0].payload,P=f.isHighlightedAddition,h=i.highlightedPlayer===f.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:h?"var(--accent-primary)":"var(--text-primary)"},children:[a,P&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Villageois tuÃ©s/partie:"})," ",f.averageVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total Villageois tuÃ©s:"})," ",f.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",f.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",f.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",f.totalKills]}),f.badVictimsByCamp&&Object.keys(f.badVictimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Mauvaises victimes:"}),Object.entries(f.badVictimsByCamp).map(([s,v])=>e.jsxs("p",{style:{color:u[s]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[s,":"]})," ",v]},s))]}),P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),h&&!P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Bons Chasseurs"}),A&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:"Bons Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:x,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:j,y:g,payload:a})=>e.jsx("text",{x:j,y:g,dy:10,fill:i.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===a.value?14:12,fontWeight:i.highlightedPlayer===a.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${j} ${g})`,children:a.value})}),e.jsx(q,{label:{value:"Moyenne kills non-Villageois/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(k,{})}),e.jsx(J,{dataKey:"averageNonVillageoisKillsPerGame",fill:"var(--chart-primary)",onClick:j=>{j?.hunterName&&n({selectedPlayer:j.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Bons Chasseurs"})},onMouseEnter:j=>l(j?.hunterName||null),onMouseLeave:()=>l(null),style:{cursor:"pointer"},children:x.map((j,g)=>{const a=i.highlightedPlayer===j.hunterName,f=j.isHighlightedAddition;return e.jsx(Q,{fill:m[j.hunterName]||u.Chasseur||"#8884d8",stroke:a?"var(--accent-primary)":y===j.hunterName?"var(--text-primary)":"none",strokeWidth:a?3:y===j.hunterName?2:0,strokeDasharray:f?"5,5":"none",opacity:f?.8:1},`cell-${g}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,x.filter(j=>!j.isHighlightedAddition).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs"}),N&&i.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',i.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:M,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:j,y:g,payload:a})=>e.jsx("text",{x:j,y:g,dy:10,fill:i.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:i.highlightedPlayer===a.value?14:12,fontWeight:i.highlightedPlayer===a.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${j} ${g})`,children:a.value})}),e.jsx(q,{label:{value:"Moyenne Villageois tuÃ©s/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(B,{})}),e.jsx(J,{dataKey:"averageVillageoisKills",fill:"var(--chart-primary)",onClick:j=>{j?.hunterName&&n({selectedPlayer:j.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Mauvais Chasseurs"})},onMouseEnter:j=>l(j?.hunterName||null),onMouseLeave:()=>l(null),style:{cursor:"pointer"},children:M.map((j,g)=>{const a=i.highlightedPlayer===j.hunterName,f=j.isHighlightedAddition;return e.jsx(Q,{fill:m[j.hunterName]||u.Chasseur||"#8884d8",stroke:a?"var(--accent-primary)":y===j.hunterName?"var(--text-primary)":"none",strokeWidth:a?3:y===j.hunterName?2:0,strokeDasharray:f?"5,5":"none",opacity:f?.8:1},`cell-${g}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,M.filter(j=>!j.isHighlightedAddition).length)," des chasseurs ayant le plus tuÃ© de Villageois (minimum 5 parties en Chasseur)"]})]})]})}function $e({survivalStats:t,selectedCamp:d,minGamesForAverage:c,onMinGamesChange:n,isLoading:i,error:u}){const{navigateToGameDetails:b}=ee(),{settings:m}=te(),{joueursData:y}=le(),l=se(y),[x,A]=E.useState(1),[M,N]=E.useState(null),k=E.useMemo(()=>t?t.dayStats.filter(v=>v.totalGamesReachingDay>0).map(v=>v.dayNumber).sort((v,S)=>v-S):[],[t]),B=E.useMemo(()=>k.includes(x)?x:k.length>0?k[0]:1,[x,k]),{highestSurvivalData:j,highlightedPlayerAddedToHighest:g}=E.useMemo(()=>{if(!t)return{highestSurvivalData:[],highlightedPlayerAddedToHighest:!1};const s=Ke(t,B,c),v=m.highlightedPlayer&&s.some(r=>r.playerName===m.highlightedPlayer),S=s.map(r=>({name:r.playerName,value:r.survivalRate,gamesPlayed:r.gamesPlayed,timesReachedDay:r.timesReachedDay,timesSurvivedDay:r.timesSurvivedDay,isHighlightedAddition:!1}));let T=!1;if(m.highlightedPlayer&&!v){const r=t.playerSurvivalStats.find(o=>o.playerName===m.highlightedPlayer);if(r&&r.totalGames>=c&&(r.gamesPlayedByDay[B]||0)>0){const o=r.survivalRatesByDay[B]||0;S.push({name:m.highlightedPlayer,value:o,gamesPlayed:r.totalGames,timesReachedDay:r.gamesPlayedByDay[B]||0,timesSurvivedDay:r.survivalsByDay[B]||0,isHighlightedAddition:!0}),T=!0}}return{highestSurvivalData:S,highlightedPlayerAddedToHighest:T}},[t,B,c,m.highlightedPlayer]),{lowestSurvivalData:a,highlightedPlayerAddedToLowest:f}=E.useMemo(()=>{if(!t)return{lowestSurvivalData:[],highlightedPlayerAddedToLowest:!1};const s=We(t,B,c),v=m.highlightedPlayer&&s.some(r=>r.playerName===m.highlightedPlayer),S=s.map(r=>({name:r.playerName,value:r.survivalRate,gamesPlayed:r.gamesPlayed,timesReachedDay:r.timesReachedDay,timesSurvivedDay:r.timesSurvivedDay,isHighlightedAddition:!1}));let T=!1;if(m.highlightedPlayer&&!v){const r=t.playerSurvivalStats.find(o=>o.playerName===m.highlightedPlayer);if(r&&r.totalGames>=c&&(r.gamesPlayedByDay[B]||0)>0){const o=r.survivalRatesByDay[B]||0;S.push({name:m.highlightedPlayer,value:o,gamesPlayed:r.totalGames,timesReachedDay:r.gamesPlayedByDay[B]||0,timesSurvivedDay:r.survivalsByDay[B]||0,isHighlightedAddition:!0}),T=!0}}return{lowestSurvivalData:S,highlightedPlayerAddedToLowest:T}},[t,B,c,m.highlightedPlayer]),P=s=>{b({selectedPlayer:s,fromComponent:"Statistiques de Survie"})},h=({active:s,payload:v,label:S})=>{if(s&&v&&v.length>0){const T=v[0].payload,r=T.isHighlightedAddition,o=m.highlightedPlayer===T.name,p=T.gamesPlayed>=c,C=T.timesReachedDay-T.timesSurvivedDay;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:S})}),e.jsx("div",{children:e.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Taux de survie Jour ",B,": ",T.value.toFixed(1),"%"]})}),e.jsxs("div",{children:["Parties atteignant le Jour ",B,": ",T.timesReachedDay]}),e.jsxs("div",{children:["A survÃ©cu au Jour ",B,": ",T.timesSurvivedDay]}),e.jsxs("div",{children:["N'a pas survÃ©cu au Jour ",B,": ",C]}),e.jsxs("div",{children:["Total de parties: ",T.gamesPlayed]}),r&&!p&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",c," parties au total)"]}),r&&p&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),o&&!r&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return i?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de survie..."}):u?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",u]}):t?e.jsxs("div",{className:"lycans-survival-stats",children:[e.jsxs("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:[e.jsx("p",{children:`Un "Jour" reprÃ©sente un cycle complet composÃ© d'une phase de jour, d'une phase de nuit, et d'une rÃ©union. Par exemple, le Jour 2 signifie que le joueur a survÃ©cu au deuxiÃ¨me cycle jour/nuit/rÃ©union.`}),e.jsxs("p",{children:["Les statistiques de survie montrent le pourcentage de fois qu'un joueur survit au Jour ",B," parmi toutes les parties qu'il a jouÃ©es et qui ont atteint ce jour. ",g||f?"Les joueurs mis en Ã©vidence apparaissent mÃªme s'ils ne sont pas dans le top 15.":""]})]}),e.jsx("div",{className:"lycans-graphique-controles",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"day-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Jour :"}),e.jsx("select",{id:"day-select",value:B,onChange:s=>A(parseInt(s.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:k.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Min. parties :"}),e.jsx("select",{id:"min-games-select",value:c,onChange:s=>n(parseInt(s.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:ae.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})}),B&&t.dayStats.find(s=>s.dayNumber===B)&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:B===1?"Total des parties enregistrÃ©es":`Parties atteignant le Jour ${B}`}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:t.dayStats.find(s=>s.dayNumber===B)?.totalGamesReachingDay||0})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Taux de survie moyen Jour ",B]}),e.jsxs("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:[(t.dayStats.find(s=>s.dayNumber===B)?.averageSurvivalRate||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Joueurs Ã©ligibles (min. ",c," parties)"]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:t.playerSurvivalStats.filter(s=>s.totalGames>=c&&(s.gamesPlayedByDay[B]||0)>0).length})]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ",B]}),g&&m.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',m.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:`ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ${B}`,children:e.jsx("div",{style:{height:400},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:j,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:s,y:v,payload:S})=>e.jsx("text",{x:s,y:v,dy:16,textAnchor:"end",transform:`rotate(-45, ${s}, ${v})`,fill:m.highlightedPlayer===S.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:m.highlightedPlayer===S.value?14:12,fontWeight:m.highlightedPlayer===S.value?"bold":"normal",children:S.value})}),e.jsx(q,{tickFormatter:s=>`${s.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(h,{})}),e.jsx(J,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:j.map((s,v)=>{const S=m.highlightedPlayer===s.name,T=M===s.name,r=s.isHighlightedAddition;return e.jsx(Q,{fill:l[s.name]||"var(--chart-primary)",stroke:S?"var(--accent-primary)":T?"var(--text-primary)":"none",strokeWidth:S?3:T?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onClick:()=>P(s.name),onMouseEnter:()=>N(s.name),onMouseLeave:()=>N(null),style:{cursor:"pointer"}},`cell-highest-${v}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["âš°ï¸ Plus Faibles Taux de Survie - Jour ",B]}),f&&m.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',m.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(F,{title:`âš°ï¸ Plus Faibles Taux de Survie - Jour ${B}`,children:e.jsx("div",{style:{height:400},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:a,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:s,y:v,payload:S})=>e.jsx("text",{x:s,y:v,dy:16,textAnchor:"end",transform:`rotate(-45, ${s}, ${v})`,fill:m.highlightedPlayer===S.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:m.highlightedPlayer===S.value?14:12,fontWeight:m.highlightedPlayer===S.value?"bold":"normal",children:S.value})}),e.jsx(q,{tickFormatter:s=>`${s.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(G,{content:e.jsx(h,{})}),e.jsx(J,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:a.map((s,v)=>{const S=m.highlightedPlayer===s.name,T=M===s.name,r=s.isHighlightedAddition;return e.jsx(Q,{fill:l[s.name]||"var(--chart-color-4)",stroke:S?"var(--accent-primary)":T?"var(--text-primary)":"none",strokeWidth:S?3:T?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1,onClick:()=>P(s.name),onMouseEnter:()=>N(s.name),onMouseLeave:()=>N(null),style:{cursor:"pointer"}},`cell-lowest-${v}`)})})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de survie disponible"})}var Ge=Array.prototype,fe=Ge.slice;function Oe(t,d){return t-d}function Ue(t){for(var d=0,c=t.length,n=t[c-1][1]*t[0][0]-t[c-1][0]*t[0][1];++d<c;)n+=t[d-1][1]*t[d][0]-t[d-1][0]*t[d][1];return n}const O=t=>()=>t;function Je(t,d){for(var c=-1,n=d.length,i;++c<n;)if(i=Xe(t,d[c]))return i;return 0}function Xe(t,d){for(var c=d[0],n=d[1],i=-1,u=0,b=t.length,m=b-1;u<b;m=u++){var y=t[u],l=y[0],x=y[1],A=t[m],M=A[0],N=A[1];if(Ye(y,A,d))return 0;x>n!=N>n&&c<(M-l)*(n-x)/(N-x)+l&&(i=-i)}return i}function Ye(t,d,c){var n;return Ze(t,d,c)&&_e(t[n=+(t[0]===d[0])],c[n],d[n])}function Ze(t,d,c){return(d[0]-t[0])*(c[1]-t[1])===(c[0]-t[0])*(d[1]-t[1])}function _e(t,d,c){return t<=d&&d<=c||c<=d&&d<=t}function Qe(){}var W=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function me(){var t=1,d=1,c=Le,n=y;function i(l){var x=c(l);if(Array.isArray(x))x=x.slice().sort(Oe);else{const A=He(l,et);for(x=pe(...Ee(A[0],A[1],x),x);x[x.length-1]>=A[1];)x.pop();for(;x[1]<A[0];)x.shift()}return x.map(A=>u(l,A))}function u(l,x){const A=x==null?NaN:+x;if(isNaN(A))throw new Error(`invalid value: ${x}`);var M=[],N=[];return b(l,A,function(k){n(k,l,A),Ue(k)>0?M.push([k]):N.push(k)}),N.forEach(function(k){for(var B=0,j=M.length,g;B<j;++B)if(Je((g=M[B])[0],k)!==-1){g.push(k);return}}),{type:"MultiPolygon",value:x,coordinates:M}}function b(l,x,A){var M=new Array,N=new Array,k,B,j,g,a,f;for(k=B=-1,g=X(l[0],x),W[g<<1].forEach(P);++k<t-1;)j=g,g=X(l[k+1],x),W[j|g<<1].forEach(P);for(W[g<<0].forEach(P);++B<d-1;){for(k=-1,g=X(l[B*t+t],x),a=X(l[B*t],x),W[g<<1|a<<2].forEach(P);++k<t-1;)j=g,g=X(l[B*t+t+k+1],x),f=a,a=X(l[B*t+k+1],x),W[j|g<<1|a<<2|f<<3].forEach(P);W[g|a<<3].forEach(P)}for(k=-1,a=l[B*t]>=x,W[a<<2].forEach(P);++k<t-1;)f=a,a=X(l[B*t+k+1],x),W[a<<2|f<<3].forEach(P);W[a<<3].forEach(P);function P(h){var s=[h[0][0]+k,h[0][1]+B],v=[h[1][0]+k,h[1][1]+B],S=m(s),T=m(v),r,o;(r=N[S])?(o=M[T])?(delete N[r.end],delete M[o.start],r===o?(r.ring.push(v),A(r.ring)):M[r.start]=N[o.end]={start:r.start,end:o.end,ring:r.ring.concat(o.ring)}):(delete N[r.end],r.ring.push(v),N[r.end=T]=r):(r=M[T])?(o=N[S])?(delete M[r.start],delete N[o.end],r===o?(r.ring.push(v),A(r.ring)):M[o.start]=N[r.end]={start:o.start,end:r.end,ring:o.ring.concat(r.ring)}):(delete M[r.start],r.ring.unshift(s),M[r.start=S]=r):M[S]=N[T]={start:S,end:T,ring:[s,v]}}}function m(l){return l[0]*2+l[1]*(t+1)*4}function y(l,x,A){l.forEach(function(M){var N=M[0],k=M[1],B=N|0,j=k|0,g=ie(x[j*t+B]);N>0&&N<t&&B===N&&(M[0]=ge(N,ie(x[j*t+B-1]),g,A)),k>0&&k<d&&j===k&&(M[1]=ge(k,ie(x[(j-1)*t+B]),g,A))})}return i.contour=u,i.size=function(l){if(!arguments.length)return[t,d];var x=Math.floor(l[0]),A=Math.floor(l[1]);if(!(x>=0&&A>=0))throw new Error("invalid size");return t=x,d=A,i},i.thresholds=function(l){return arguments.length?(c=typeof l=="function"?l:Array.isArray(l)?O(fe.call(l)):O(l),i):c},i.smooth=function(l){return arguments.length?(n=l?y:Qe,i):n===y},i}function et(t){return isFinite(t)?t:NaN}function X(t,d){return t==null?!1:+t>=d}function ie(t){return t==null||isNaN(t=+t)?-1/0:t}function ge(t,d,c,n){const i=n-d,u=c-d,b=isFinite(i)||isFinite(u)?i/u:Math.sign(i)/Math.sign(u);return isNaN(b)?t:t+b-.5}function tt(t){return t[0]}function rt(t){return t[1]}function it(){return 1}function at(){var t=tt,d=rt,c=it,n=960,i=500,u=20,b=2,m=u*3,y=n+m*2>>b,l=i+m*2>>b,x=O(20);function A(a){var f=new Float32Array(y*l),P=Math.pow(2,-b),h=-1;for(const C of a){var s=(t(C,++h,a)+m)*P,v=(d(C,h,a)+m)*P,S=+c(C,h,a);if(S&&s>=0&&s<y&&v>=0&&v<l){var T=Math.floor(s),r=Math.floor(v),o=s-T-.5,p=v-r-.5;f[T+r*y]+=(1-o)*(1-p)*S,f[T+1+r*y]+=o*(1-p)*S,f[T+1+(r+1)*y]+=o*p*S,f[T+(r+1)*y]+=(1-o)*p*S}}return Be({data:f,width:y,height:l},u*P),f}function M(a){var f=A(a),P=x(f),h=Math.pow(2,2*b);return Array.isArray(P)||(P=pe(Number.MIN_VALUE,ce(f)/h,P)),me().size([y,l]).thresholds(P.map(s=>s*h))(f).map((s,v)=>(s.value=+P[v],N(s)))}M.contours=function(a){var f=A(a),P=me().size([y,l]),h=Math.pow(2,2*b),s=v=>{v=+v;var S=N(P.contour(f,v*h));return S.value=v,S};return Object.defineProperty(s,"max",{get:()=>ce(f)/h}),s};function N(a){return a.coordinates.forEach(k),a}function k(a){a.forEach(B)}function B(a){a.forEach(j)}function j(a){a[0]=a[0]*Math.pow(2,b)-m,a[1]=a[1]*Math.pow(2,b)-m}function g(){return m=u*3,y=n+m*2>>b,l=i+m*2>>b,M}return M.x=function(a){return arguments.length?(t=typeof a=="function"?a:O(+a),M):t},M.y=function(a){return arguments.length?(d=typeof a=="function"?a:O(+a),M):d},M.weight=function(a){return arguments.length?(c=typeof a=="function"?a:O(+a),M):c},M.size=function(a){if(!arguments.length)return[n,i];var f=+a[0],P=+a[1];if(!(f>=0&&P>=0))throw new Error("invalid size");return n=f,i=P,g()},M.cellSize=function(a){if(!arguments.length)return 1<<b;if(!((a=+a)>=1))throw new Error("invalid cell size");return b=Math.floor(Math.log(a)/Math.LN2),g()},M.thresholds=function(a){return arguments.length?(x=typeof a=="function"?a:Array.isArray(a)?O(fe.call(a)):O(a),M):x},M.bandwidth=function(a){if(!arguments.length)return Math.sqrt(u*(u+1));if(!((a=+a)>=0))throw new Error("invalid bandwidth");return u=(Math.sqrt(4*a*a+1)-1)/2,g()},M}function st(t){for(var d=t.length/6|0,c=new Array(d),n=0;n<d;)c[n]="#"+t.slice(n*6,++n*6);return c}const lt=t=>Ae(t[t.length-1]);var nt=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(st);const ot=lt(nt);function ct({deathLocations:t,xDomain:d,zDomain:c,width:n=800,height:i=600,bandwidth:u=25,onRegionClick:b}){const m=E.useRef(null),y=E.useRef(null),l=E.useRef(null),x=E.useMemo(()=>de().domain(d).range([0,n]),[d,n]),A=E.useMemo(()=>de().domain(c).range([i,0]),[c,i]),M=E.useMemo(()=>t.length===0?[]:at().x(g=>x(g.x)).y(g=>A(g.z)).size([n,i]).bandwidth(u).thresholds(15)(t),[t,x,A,n,i,u]),N=E.useMemo(()=>{const j=M.length>0?Math.max(...M.map(g=>g.value)):1;return g=>{const a=g/j;return ot(a)}},[M]);E.useEffect(()=>{const j=m.current;if(!j||M.length===0)return;const g=j.getContext("2d");g&&(g.clearRect(0,0,n,i),M.forEach(a=>{g.fillStyle=N(a.value),g.globalAlpha=.6,a.coordinates.forEach(f=>{f.forEach(P=>{g.beginPath(),P.forEach((h,s)=>{s===0?g.moveTo(h[0],h[1]):g.lineTo(h[0],h[1])}),g.closePath(),g.fill()})})}),g.globalAlpha=1)},[M,n,i,N]),E.useEffect(()=>{const j=y.current;if(!j||t.length===0)return;const g=j.getContext("2d");g&&(g.clearRect(0,0,n,i),t.forEach(a=>{const f=x(a.x),P=A(a.z);g.beginPath(),g.arc(f,P,2,0,2*Math.PI),g.fillStyle="rgba(0, 0, 0, 0.3)",g.fill(),g.strokeStyle="rgba(255, 255, 255, 0.5)",g.lineWidth=.5,g.stroke()}))},[t,x,A,n,i]);const k=j=>{if(!b||!l.current)return;const g=l.current.getBoundingClientRect(),a=j.clientX-g.left,f=j.clientY-g.top,P=30,h=t.filter(s=>{const v=x(s.x),S=A(s.z);return Math.sqrt(Math.pow(v-a,2)+Math.pow(S-f,2))<=P});h.length>0&&b(h)},B=j=>{if(!l.current)return;const g=l.current.getBoundingClientRect(),a=j.clientX-g.left,f=j.clientY-g.top,P=20,h=t.filter(s=>{const v=x(s.x),S=A(s.z);return Math.sqrt(Math.pow(v-a,2)+Math.pow(S-f,2))<=P});l.current&&(l.current.style.cursor=h.length>0?"pointer":"default")};return e.jsxs("div",{ref:l,style:{position:"relative",width:`${n}px`,height:`${i}px`,margin:"0 auto"},onClick:k,onMouseMove:B,children:[e.jsx("canvas",{ref:m,width:n,height:i,style:{position:"absolute",top:0,left:0,border:"1px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)"}}),e.jsx("canvas",{ref:y,width:n,height:i,style:{position:"absolute",top:0,left:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30px",left:"50%",transform:"translateX(-50%)",color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Position X"}),e.jsx("div",{style:{position:"absolute",left:"-50px",top:"50%",transform:"translateY(-50%) rotate(-90deg)",color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Position Z"}),e.jsxs("svg",{width:n,height:i,style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[[0,.25,.5,.75,1].map(j=>{const g=n*j,a=d[0]+(d[1]-d[0])*j;return e.jsxs("g",{children:[e.jsx("line",{x1:g,y1:i,x2:g,y2:i-5,stroke:"var(--text-secondary)",strokeWidth:1}),e.jsx("text",{x:g,y:i-10,textAnchor:"middle",fill:"var(--text-secondary)",fontSize:"0.75rem",children:Math.round(a)})]},`x-${j}`)}),[0,.25,.5,.75,1].map(j=>{const g=i*(1-j),a=c[0]+(c[1]-c[0])*j;return e.jsxs("g",{children:[e.jsx("line",{x1:0,y1:g,x2:5,y2:g,stroke:"var(--text-secondary)",strokeWidth:1}),e.jsx("text",{x:10,y:g,dominantBaseline:"middle",fill:"var(--text-secondary)",fontSize:"0.75rem",children:Math.round(a)})]},`z-${j}`)})]})]})}function dt({selectedCamp:t,availableDeathTypes:d,deathTypeColors:c}){const{navigateToGameDetails:n}=ee(),{settings:i}=te(),{data:u,isLoading:b,error:m}=ue(),[y,l]=E.useState(""),[x,A]=E.useState("all"),[M,N]=E.useState(null),[k,B]=E.useState("scatter"),j=E.useMemo(()=>{if(!u)return[];const r=ve(u),o=oe(u,t),p=new Map;return o.forEach(C=>{p.set(C.mapName,(p.get(C.mapName)||0)+1)}),r.sort((C,D)=>{const z=p.get(C)||0;return(p.get(D)||0)-z})},[u,t]),g=j.length>0?j[0]:"";y===""&&g!==""&&l(g);const a=E.useMemo(()=>{if(!u)return[];let r=oe(u,t);return y&&(r=r.filter(o=>o.mapName===y)),x!=="all"&&(r=r.filter(o=>o.deathType===x)),r},[u,t,y,x]),f=E.useMemo(()=>{const r=new Map;return a.forEach(o=>{const p=`${Math.round(o.x)}_${Math.round(o.z)}`;r.has(p)||r.set(p,[]),r.get(p).push(o)}),r},[a]),P=E.useMemo(()=>Array.from(f.entries()).map(([r,o])=>({...o[0],deathCount:o.length,allDeaths:o,locationKey:r})),[f]),h=({active:r,payload:o})=>{if(!r||!o||o.length===0)return null;const p=o[0].payload,C=`${Math.round(p.x)}_${Math.round(p.z)}`,D=f.get(C)||[p];if(D.length>1){const H=new Map,R=new Set;return D.forEach(L=>{const re=L.deathType?Y(L.deathType):"Inconnu";H.set(re,(H.get(re)||0)+1),R.add(L.gameId)}),e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",maxWidth:"300px"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"1rem",color:"var(--accent-primary)"},children:[D.length," morts Ã  cet endroit"]}),e.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Position:"})," (",Math.round(p.x),", ",Math.round(p.z),")"]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Types de mort:"}),e.jsx("ul",{style:{margin:"4px 0 0 0",paddingLeft:"20px"},children:Array.from(H.entries()).map(([L,re])=>e.jsxs("li",{children:[L," (",re,")"]},L))})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Parties:"})," ",Array.from(R).filter(L=>L).map(L=>`#${L}`).join(", ")]})]}),e.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border-color)",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Cliquez pour voir une des parties"})]})}return e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",maxWidth:"300px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"1rem",color:"var(--accent-primary)"},children:p.playerName}),e.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Camp:"})," ",p.camp]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type de mort:"})," ",p.deathType?Y(p.deathType):"Inconnu"]}),p.killerName&&e.jsxs("div",{children:[e.jsx("strong",{children:"TuÃ© par:"})," ",p.killerName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Carte:"})," ",p.mapName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Partie:"})," #",p.gameId]}),e.jsxs("div",{style:{marginTop:"4px",fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Position: (",Math.round(p.x),", ",Math.round(p.z),")"]})]}),e.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border-color)",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Cliquez pour voir les dÃ©tails de la partie"})]})},s=r=>{if(!r)return;const o=r.allDeaths||[r];if(o.length===1)n({selectedGame:o[0].gameId,fromComponent:"Death Location View"});else{const p=o.map(C=>C.gameId).filter(C=>C);n({selectedGameIds:p,fromComponent:"Death Location View"})}},v=r=>r&&c[r]||"var(--text-secondary)",{xDomain:S,zDomain:T}=E.useMemo(()=>{if(P.length===0)return{xDomain:[0,100],zDomain:[0,100]};const r=P.map(L=>L.x),o=P.map(L=>L.z),p=Math.min(...r),C=Math.max(...r),D=Math.min(...o),z=Math.max(...o),H=(C-p)*.1||10,R=(z-D)*.1||10;return{xDomain:[p-H,C+H],zDomain:[D-R,z+R]}},[P]);return b?e.jsx("div",{className:"donnees-attente",children:"Chargement des localisations de mort..."}):m?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",m]}):u?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Mode :"}),e.jsxs("div",{style:{display:"flex",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",border:"1px solid var(--border-color)",overflow:"hidden"},children:[e.jsx("button",{onClick:()=>B("scatter"),style:{background:k==="scatter"?"var(--accent-primary)":"transparent",color:k==="scatter"?"white":"var(--text-primary)",border:"none",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:k==="scatter"?"bold":"normal",transition:"all 0.2s"},children:"Points"}),e.jsx("button",{onClick:()=>B("heatmap"),style:{background:k==="heatmap"?"var(--accent-primary)":"transparent",color:k==="heatmap"?"white":"var(--text-primary)",border:"none",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:k==="heatmap"?"bold":"normal",transition:"all 0.2s"},children:"Carte de chaleur"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"map-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Carte :"}),e.jsx("select",{id:"map-select",value:y,onChange:r=>l(r.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:j.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"death-type-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Type de mort :"}),e.jsxs("select",{id:"death-type-select",value:x,onChange:r=>A(r.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"180px"},children:[e.jsx("option",{value:"all",children:"Tous les types"}),d.map(r=>e.jsx("option",{value:r,children:Y(r)},r))]})]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Morts localisÃ©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:a.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Camp filtrÃ©"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)",fontSize:"1.2rem"},children:t})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Type de mort"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-2)",fontSize:"1.2rem"},children:x==="all"?"Tous":Y(x)})]})]}),a.length>0?e.jsx(F,{title:k==="scatter"?"Carte des Morts":"Carte de Chaleur des Morts",children:k==="scatter"?e.jsx("div",{style:{height:600},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(Te,{margin:{top:20,right:30,left:60,bottom:60},children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(I,{dataKey:"x",type:"number",name:"Position X",label:{value:"Position X",position:"bottom",offset:10,style:{fill:"var(--text-secondary)"}},domain:S,stroke:"var(--text-secondary)",tick:{fill:"var(--text-secondary)"},tickFormatter:r=>Math.round(r).toString()}),e.jsx(q,{dataKey:"z",type:"number",name:"Position Z",label:{value:"Position Z",angle:-90,position:"left",offset:20,style:{fill:"var(--text-secondary)"}},domain:T,stroke:"var(--text-secondary)",tick:{fill:"var(--text-secondary)"},tickFormatter:r=>Math.round(r).toString()}),e.jsx(G,{content:e.jsx(h,{}),cursor:{strokeDasharray:"3 3"}}),e.jsx(Ne,{data:P,onClick:r=>s(r),onMouseEnter:r=>N(r),onMouseLeave:()=>N(null),style:{cursor:"pointer"},children:P.map((r,o)=>{const p=i.highlightedPlayer===r.playerName,C=M?.playerName===r.playerName&&M?.gameId===r.gameId,D=r.deathCount>1?7:5,z=D+2;return e.jsx(Q,{fill:p?"var(--accent-primary)":v(r.deathType),stroke:p||C?"white":r.deathCount>1?"var(--accent-secondary)":"none",strokeWidth:p?3:C?2:r.deathCount>1?1:0,opacity:p?1:.7,r:p?z:C?D+1:D},`cell-${o}`)})})]})})}):e.jsx("div",{style:{padding:"2rem 0",display:"flex",justifyContent:"center"},children:e.jsx(ct,{deathLocations:a,xDomain:S,zDomain:T,width:800,height:600,bandwidth:25,onRegionClick:r=>{if(r.length===1)n({selectedGame:r[0].gameId,fromComponent:"Death Location View (Heatmap)"});else{const o=r.map(p=>p.gameId).filter(p=>p);n({selectedGameIds:o,fromComponent:"Death Location View (Heatmap)"})}}})})}):e.jsxs("div",{className:"donnees-manquantes",style:{padding:"2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Aucune localisation de mort disponible pour les filtres sÃ©lectionnÃ©s"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Les donnÃ©es de position ne sont disponibles que pour les parties rÃ©centes (non-legacy)."})]}),a.length>0&&e.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("h3",{style:{marginBottom:"1rem",color:"var(--text-primary)"},children:"LÃ©gende des types de mort"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem"},children:d.map(r=>{const o=a.filter(p=>p.deathType===r).length;return o===0?null:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:c[r],flexShrink:0}}),e.jsxs("span",{style:{color:"var(--text-primary)"},children:[Y(r)," (",o,")"]})]},r)})})]}),e.jsxs("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:[e.jsx("p",{children:e.jsx("strong",{children:"Ã€ propos de cette visualisation :"})}),e.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"Les positions sont basÃ©es sur les coordonnÃ©es X et Z (vue 2D de la carte)"}),k==="scatter"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Chaque point reprÃ©sente la mort d'un joueur Ã  un endroit prÃ©cis"}),e.jsx("li",{children:"La couleur indique le type de mort (voir lÃ©gende ci-dessus)"}),e.jsxs("li",{children:["Les joueurs en surbrillance sont affichÃ©s en "," ",e.jsx("span",{style:{color:"var(--accent-primary)",fontWeight:"bold"},children:"couleur primaire"})]}),e.jsx("li",{children:"Cliquez sur un point pour voir les dÃ©tails de la partie"}),e.jsx("li",{children:"Survolez un point pour voir les informations dÃ©taillÃ©es"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"La carte de chaleur montre les zones de forte densitÃ© de morts (du jaune au rouge)"}),e.jsx("li",{children:"Les points noirs indiquent l'emplacement exact de chaque mort"}),e.jsx("li",{children:"Les zones rouges indiquent une concentration Ã©levÃ©e de morts"}),e.jsx("li",{children:"Cliquez sur une zone pour voir les dÃ©tails des parties associÃ©es"}),e.jsx("li",{children:'Utilisez le mode "Points" pour voir les dÃ©tails individuels par type de mort'})]})]}),e.jsx("p",{style:{marginTop:"0.5rem",fontStyle:"italic",color:"var(--text-secondary)"},children:"Note : Seules les parties rÃ©centes contiennent des donnÃ©es de position. Les parties legacy sont exclues."})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e disponible"})}function bt(){const{navigationState:t,updateNavigationState:d}=ee(),[c,n]=E.useState(t.deathStatisticsState?.selectedCamp||t.deathStatsSelectedCamp||"Tous les camps"),[i,u]=E.useState(t.deathStatisticsState?.victimCampFilter||"Tous les camps"),[b,m]=E.useState(t.deathStatisticsState?.minGamesForAverage||25),[y,l]=E.useState(t.deathStatisticsState?.selectedView||"killers"),{data:x}=xe(),{data:A,isLoading:M,error:N}=je(c,i),{data:k,isLoading:B,error:j}=be(),{data:g,isLoading:a,error:f}=Fe(c),{data:P}=ue(),h=ye();E.useEffect(()=>{(!t.deathStatisticsState||t.deathStatisticsState.selectedCamp!==c||t.deathStatisticsState.victimCampFilter!==i||t.deathStatisticsState.minGamesForAverage!==b||t.deathStatisticsState.selectedView!==y)&&d({deathStatisticsState:{selectedCamp:c,victimCampFilter:i,minGamesForAverage:b,selectedView:y,focusChart:t.deathStatisticsState?.focusChart}})},[c,i,b,y,t.deathStatisticsState,d]);const s=E.useMemo(()=>P?Se(P):[],[P]),v=E.useMemo(()=>{const D={};s.forEach(R=>{R===K.BY_WOLF?D[R]=h.Loup:R===K.VOTED?D[R]="var(--chart-color-1)":R===K.BULLET||R===K.BULLET_HUMAN||R===K.BULLET_WOLF?D[R]=h.Chasseur:R===K.BY_ZOMBIE?D[R]=h.Vaudou:R===K.ASSASSIN?D[R]=h.Alchimiste:R===K.AVENGER?D[R]="var(--chart-color-2)":R===K.LOVER_DEATH?D[R]=h.Amoureux:R===K.BY_BEAST?D[R]="var(--chart-color-3)":R===K.SHERIF_SUCCESS&&(D[R]="var(--chart-color-4)")});const z=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let H=0;return s.forEach(R=>{D[R]||(D[R]=z[H%z.length],H++)}),D},[s,h]),S=D=>{n(D),d({deathStatsSelectedCamp:D,deathStatisticsState:{selectedCamp:D,victimCampFilter:i,minGamesForAverage:b,selectedView:y,focusChart:t.deathStatisticsState?.focusChart}})},T=D=>{u(D),d({deathStatisticsState:{selectedCamp:c,victimCampFilter:D,minGamesForAverage:b,selectedView:y,focusChart:t.deathStatisticsState?.focusChart}})},r=D=>{m(D),d({deathStatisticsState:{selectedCamp:c,victimCampFilter:i,minGamesForAverage:D,selectedView:y,focusChart:t.deathStatisticsState?.focusChart}})},o=D=>{l(D),d({deathStatisticsState:{selectedCamp:c,victimCampFilter:i,minGamesForAverage:b,selectedView:D,focusChart:t.deathStatisticsState?.focusChart}})},{gamesWithKillers:p,totalEligibleForAverage:C}=E.useMemo(()=>{if(!A)return{gamesWithKillers:0,totalEligibleForAverage:0};const D=A.killerStats.filter(z=>z.gamesPlayed>=b);return{gamesWithKillers:A.totalGames,totalEligibleForAverage:D.length}},[A,b]);return M?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."}):N?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]}):A?e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"ðŸ’€ Statistiques de Morts & Kills"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${y==="killers"?"active":""}`,onClick:()=>o("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${y==="deaths"?"active":""}`,onClick:()=>o("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${y==="survival"?"active":""}`,onClick:()=>o("survival"),children:"Survie par Jour"}),e.jsx("button",{className:`lycans-categorie-btn ${y==="hunter"?"active":""}`,onClick:()=>o("hunter"),children:"Chasseur"})]}),(y==="killers"||y==="deaths"||y==="survival"||y==="location")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:c,onChange:D=>S(D.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),x?.map(D=>e.jsx("option",{value:D,children:D},D))]})]}),y==="killers"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"victim-camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp de la victime :"}),e.jsxs("select",{id:"victim-camp-select",value:i,onChange:D=>T(D.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),e.jsx("option",{value:"Villageois",children:"Villageois"}),e.jsx("option",{value:"Loup",children:"Loup"}),e.jsx("option",{value:"Roles solo",children:"Roles solo"})]})]})]}),(y==="killers"||y==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:A.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:A.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrÃ©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:p})]})]}),y==="killers"&&e.jsx(Ve,{deathStats:A,selectedCamp:c,victimCampFilter:i,minGamesForAverage:b,onMinGamesChange:r,availableDeathTypes:s,deathTypeColors:v,totalEligibleForAverage:C}),y==="deaths"&&e.jsx(Ie,{deathStats:A,selectedCamp:c,minGamesForAverage:b,onMinGamesChange:r,availableDeathTypes:s,deathTypeColors:v}),y==="hunter"&&e.jsx(qe,{hunterStats:k,isLoading:B,error:j}),y==="survival"&&e.jsx($e,{survivalStats:g,selectedCamp:c,minGamesForAverage:b,onMinGamesChange:r,isLoading:a,error:f}),y==="location"&&e.jsx(dt,{selectedCamp:c,availableDeathTypes:s,deathTypeColors:v}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"DonnÃ©es en cours de rÃ©cupÃ©ration (donnÃ©es partielles)."]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de mort disponible"})}export{bt as DeathStatisticsChart};
