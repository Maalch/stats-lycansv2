import{s as d,a as O,u as F,r as L,j as s}from"./index-AvrdAuLa.js";import{b as Y}from"./baseStatsHook-B8TsJuYU.js";import{a as M}from"./api-beq3FXpM.js";function z(e,t){if(!e)return null;try{const n=new URL(e);let i="",r=0;if(n.hostname==="youtu.be"){i=n.pathname.slice(1);const u=n.searchParams.get("t");u&&(r=parseInt(u,10)||0)}else if(n.hostname==="www.youtube.com"||n.hostname==="youtube.com"){i=n.searchParams.get("v")||"";const u=n.searchParams.get("t");u&&(r=parseInt(u,10)||0)}if(!i)return null;const l=`https://www.youtube.com/embed/${i}?start=${r}`;if(t)try{const u=new URL(t);let m=0;if(u.hostname==="youtu.be"){const p=u.searchParams.get("t");p&&(m=parseInt(p,10)||0)}else if(u.hostname==="www.youtube.com"||u.hostname==="youtube.com"){const p=u.searchParams.get("t");p&&(m=parseInt(p,10)||0)}if(m>r)return`${l}&end=${m}`}catch(u){console.warn("Failed to parse end URL:",t,u)}return l}catch(n){return console.warn("Failed to create YouTube embed URL:",e,n),null}}function K(e,t){if(!e||!t)return null;try{const n=new Date(e),i=new Date(t);if(isNaN(n.getTime())||isNaN(i.getTime()))return console.warn("Invalid date format:",e,t),null;const r=i.getTime()-n.getTime();return r>0?Math.round(r/1e3):null}catch(n){return console.warn("Failed to calculate game duration:",e,t,n),null}}function G(e,t,n=!1){const i=e.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(i)?"Loups":t.Traître&&t.Traître.toLowerCase().includes(i)?n?"Traître":"Loups":t["Idiot du Village"]&&t["Idiot du Village"].toLowerCase().includes(i)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(i)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(i)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(i)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(i)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(i)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(i)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(i)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(i)?"Vaudou":"Villageois"}function _(e,t,n,i){const r=e.toLowerCase();switch(t){case"Traître":return!!(n.Traître&&n.Traître.toLowerCase().includes(r));case"Idiot du Village":return!!(n["Idiot du Village"]&&n["Idiot du Village"].toLowerCase().includes(r));case"Cannibale":return!!(n.Cannibale&&n.Cannibale.toLowerCase().includes(r));case"Agent":return!!(n.Agent&&n.Agent.toLowerCase().includes(r));case"Espion":return!!(n.Espion&&n.Espion.toLowerCase().includes(r));case"Scientifique":return!!(n.Scientifique&&n.Scientifique.toLowerCase().includes(r));case"Amoureux":return!!(n.Amoureux&&n.Amoureux.toLowerCase().includes(r));case"La Bête":return!!(n["La Bête"]&&n["La Bête"].toLowerCase().includes(r));case"Chasseur de primes":return!!(n["Chasseur de primes"]&&n["Chasseur de primes"].toLowerCase().includes(r));case"Vaudou":return!!(n.Vaudou&&n.Vaudou.toLowerCase().includes(r));case"Villageois":const l=i["Liste des joueurs"].toLowerCase().includes(r),u=[...n.Loups?d(n.Loups):[],...n.Traître?[n.Traître.trim()]:[],...n["Idiot du Village"]?[n["Idiot du Village"].trim()]:[],...n.Cannibale?[n.Cannibale.trim()]:[],...n.Agent?d(n.Agent):[],...n.Espion?[n.Espion.trim()]:[],...n.Scientifique?[n.Scientifique.trim()]:[],...n.Amoureux?d(n.Amoureux):[],...n["La Bête"]?[n["La Bête"].trim()]:[],...n["Chasseur de primes"]?[n["Chasseur de primes"].trim()]:[],...n.Vaudou?[n.Vaudou.trim()]:[]].map(m=>m.toLowerCase());return l&&!u.includes(r);default:return!1}}function Q(e,t,n){const i=e.filter(r=>r["Liste des joueurs"].toLowerCase().includes(t.toLowerCase()));return!n||n==="all-assignments"?i:n==="wins-only"?i.filter(r=>O(t,r["Liste des gagnants"])):i}function X(e,t){return e.filter(n=>n.Game===t)}function Z(e,t){return e.filter(n=>t.includes(n.Game))}function D(e,t){return e.filter(n=>n["Type de victoire"]===t)}function ee(e,t){return e.filter(n=>{const i=n.Date;if(t.includes("/")&&t.split("/").length===2){const[r,l]=t.split("/"),u=i.split("/");if(u.length===3){const[,m,p]=u;return m===r&&p===l}}else return i===t;return!1})}function se(e,t){return e.filter(n=>{const i=n["Pourcentage de récolte"];if(i==null)return!1;const r=i*100;switch(t){case"0-25%":return r>=0&&r<=25;case"26-50%":return r>25&&r<=50;case"51-75%":return r>50&&r<=75;case"76-99%":return r>75&&r<=99;case"100%":return r>=100;default:return!0}})}function ne(e,t){return e.filter(n=>n["Nombre de journées"]===t)}function te(e,t,n,i){const{selectedCamp:r,campFilterMode:l,_smallCamps:u,excludeTraitor:m}=n;return e.filter(p=>{const a=t.find(h=>h.Game===p.Game);if(!a)return!1;if(i){if(r==="Autres"&&u)return u.some(o=>_(i,o,a,p));const h=G(i,a,m);return r==="Loups"&&m?h==="Loups"&&!(a.Traître&&a.Traître.toLowerCase().includes(i.toLowerCase())):h==="Agent"&&r==="Agent"&&p["Camp victorieux"]==="Agent"?d(p["Liste des gagnants"]?.toString()||"").some(x=>x.toLowerCase()===i.toLowerCase()):h===r}else{if(l==="wins-only")return r==="Autres"&&u?u.includes(p["Camp victorieux"]):p["Camp victorieux"]===r;if(r==="Autres"&&u)return u.some(h=>{switch(h){case"Traître":return!!(a.Traître&&a.Traître.trim());case"Idiot du Village":return!!(a["Idiot du Village"]&&a["Idiot du Village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());case"Villageois":return d(p["Liste des joueurs"]).length>0;default:return!1}});switch(r){case"Loups":return!!(a.Loups&&a.Loups.trim());case"Traître":return!!(a.Traître&&a.Traître.trim());case"Villageois":const h=d(p["Liste des joueurs"]),o=[...d(a.Loups||""),...a.Traître?[a.Traître.trim()]:[],...a["Idiot du Village"]?[a["Idiot du Village"].trim()]:[],...a.Cannibale?[a.Cannibale.trim()]:[],...a.Agent?d(a.Agent):[],...a.Espion?[a.Espion.trim()]:[],...a.Scientifique?[a.Scientifique.trim()]:[],...d(a.Amoureux||""),...a["La Bête"]?[a["La Bête"].trim()]:[],...a["Chasseur de primes"]?[a["Chasseur de primes"].trim()]:[],...a.Vaudou?[a.Vaudou.trim()]:[]];return h.some(x=>!o.includes(x));case"Idiot du Village":return!!(a["Idiot du Village"]&&a["Idiot du Village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());default:return p["Camp victorieux"]===r}}})}function ie(e,t,n,i){const{selectedPlayers:r,playersFilterMode:l,winnerPlayer:u}=n;return e.filter(m=>{const p=d(m["Liste des joueurs"]);if(!r.every(x=>p.some(I=>I.toLowerCase()===x.toLowerCase())))return!1;const h=t.find(x=>x.Game===m.Game);if(!h)return!1;const o=r.map(x=>G(x,h));switch(l){case"all-common-games":return u?d(m["Liste des gagnants"]?.toString()||"").some(g=>g.toLowerCase()===u.toLowerCase()):!0;case"opposing-camps":const x=o.map(C=>C==="Traître"?"Loups":C);if(!([...new Set(x)].length>1))return!1;if(u){const C=r.findIndex(g=>g.toLowerCase()===u.toLowerCase());if(C!==-1){const g=x[C],j=m["Camp victorieux"]==="Traître"?"Loups":m["Camp victorieux"];return g==="Agent"&&j==="Agent"?d(m["Liste des gagnants"]?.toString()||"").some(A=>A.toLowerCase()===u.toLowerCase()):g===j}}return!0;case"same-camp":const b=o.map(C=>C==="Traître"?"Loups":C);if(!([...new Set(b)].length===1))return!1;const P=b[0];if(i&&i.selectedCamp){const C=i.selectedCamp;if(C==="Loups"&&i.excludeTraitor&&(!r.every(N=>o[r.indexOf(N)]==="Loups")||r.some(N=>d(h.Traître||"").some(B=>B.toLowerCase()===N.toLowerCase())))||P!==C)return!1}if(u){const C=m["Camp victorieux"]==="Traître"?"Loups":m["Camp victorieux"];if(P==="Agent"&&C==="Agent"){const g=d(m["Liste des gagnants"]?.toString()||"");return r.every(j=>g.some(N=>N.toLowerCase()===j.toLowerCase()))}return P===C}return!0;default:return!0}})}function ae(e,t,n){const{selectedPlayerPair:i,selectedPairRole:r}=n;return i.length!==2?e:e.filter(l=>{const u=d(l["Liste des joueurs"]);if(!i.every(a=>u.some(h=>h.toLowerCase()===a.toLowerCase())))return!1;const p=t.find(a=>a.Game===l.Game);if(!p)return!1;switch(r){case"wolves":const a=d(p.Loups||"");return i.every(o=>a.some(x=>x.toLowerCase()===o.toLowerCase()));case"lovers":const h=d(p.Amoureux||"");return i.every(o=>h.some(x=>x.toLowerCase()===o.toLowerCase()));default:return!0}})}function re(e,t,n){if(!n)return e;let i=[...e];return n.selectedPlayer&&(i=Q(i,n.selectedPlayer,n.selectedPlayerWinMode)),n.selectedGame&&(i=X(i,n.selectedGame)),n.selectedGameIds&&(i=Z(i,n.selectedGameIds)),n.campFilter&&(i=te(i,t,n.campFilter,n.selectedPlayer)),n.selectedVictoryType&&(i=D(i,n.selectedVictoryType)),n.selectedDate&&(i=ee(i,n.selectedDate)),n.selectedHarvestRange&&(i=se(i,n.selectedHarvestRange)),n.selectedGameDuration&&(i=ne(i,n.selectedGameDuration)),n.multiPlayerFilter&&(i=ie(i,t,n.multiPlayerFilter,n.campFilter)),n.playerPairFilter&&(i=ae(i,t,n.playerPairFilter)),i}function le(e){const t={};return e&&(e.Loups&&(t.wolves=d(e.Loups)),e.Traître&&(t.traitor=e.Traître),e["Idiot du Village"]&&(t.villageIdiot=e["Idiot du Village"]),e.Cannibale&&(t.cannibal=e.Cannibale),e.Agent&&(t.agent=d(e.Agent)),e.Espion&&(t.spy=e.Espion),e.Scientifique&&(t.scientist=e.Scientifique),e.Amoureux&&(t.lovers=d(e.Amoureux)),e["La Bête"]&&(t.beast=e["La Bête"]),e["Chasseur de primes"]&&(t.bountyHunter=e["Chasseur de primes"]),e.Vaudou&&(t.voodoo=e.Vaudou)),t}function ce(e,t){const n=[];return d(e["Liste des joueurs"]).forEach(r=>{let l="Villageois",u="Villageois";t&&(t.Loups&&d(t.Loups).includes(r)?(l="Loups",u="Loups"):t.Traître&&d(t.Traître).includes(r)?(l="Traître",u="Loups"):t["Idiot du Village"]&&d(t["Idiot du Village"]).includes(r)?(l="Idiot du Village",u="Idiot du Village"):t.Cannibale&&d(t.Cannibale).includes(r)?(l="Cannibale",u="Cannibale"):t.Agent&&d(t.Agent).includes(r)?(l="Agent",u="Agent"):t.Espion&&d(t.Espion).includes(r)?(l="Espion",u="Espion"):t.Scientifique&&d(t.Scientifique).includes(r)?(l="Scientifique",u="Scientifique"):t["La Bête"]&&d(t["La Bête"]).includes(r)?(l="La Bête",u="La Bête"):t["Chasseur de primes"]&&d(t["Chasseur de primes"]).includes(r)?(l="Chasseur de primes",u="Chasseur de primes"):t.Vaudou&&d(t.Vaudou).includes(r)?(l="Vaudou",u="Vaudou"):t.Amoureux&&d(t.Amoureux).includes(r)&&(l="Amoureux",u="Amoureux")),n.push({player:r,role:l,camp:u})}),n}function ue(e){return e.map(t=>({player:"Ponce",camp:t.Camp||"Unknown",isTraitor:t.Traître||!1,secondaryRole:t["Rôle secondaire"]==="N/A"?null:t["Rôle secondaire"],wolfPower:t["Pouvoir de loup"]==="N/A"?null:t["Pouvoir de loup"],villagerJob:t["Métier villageois"]==="N/A"?null:t["Métier villageois"],playersKilled:t["Joueurs tués"],deathDay:t["Jour de mort"],deathType:t["Type de mort"],killers:t["Joueurs tueurs"]}))}function oe(e,t,n,i){return e.length===0?null:re(e,t,i).map(l=>{const u=t.find(o=>o.Game===l.Game),m=n.filter(o=>o.Game===l.Game),p=le(u),a=ce(l,u),h=ue(m);return{gameId:l.Game,date:l.Date,isModded:l["Game Moddée"],playerCount:l["Nombre de joueurs"],wolfCount:l["Nombre de loups"],hasTraitor:l["Rôle Traître"],hasLovers:l["Rôle Amoureux"],soloRoles:l["Rôles solo"],winningCamp:l["Camp victorieux"],victoryType:l["Type de victoire"],dayCount:l["Nombre de journées"],villagerSurvivors:l["Survivants villageois"],wolfSurvivors:l["Survivants loups (traître inclus)"],loverSurvivors:l["Survivants amoureux"],soloSurvivors:l["Survivants solo"],winners:l["Liste des gagnants"],harvest:l.Récolte,totalHarvest:l["Total récolte"],harvestPercentage:l["Pourcentage de récolte"],playersList:l["Liste des joueurs"],versions:l.Versions,map:l.Map,youtubeEmbedUrl:z(l.VOD,l.VODEnd),gameDuration:K(l.Début,l.Fin),roles:p,playerRoles:a,playerDetails:h}})}function de(e){const{data:t,isLoading:n,error:i}=Y((r,l,u)=>oe(r,l,u,e));return{data:t||[],isLoading:n,error:i}}function ye(){const{navigationFilters:e,navigateBack:t}=F(),{data:n,isLoading:i,error:r}=de(e),[l,u]=L.useState("date"),[m,p]=L.useState("desc"),[a,h]=L.useState(null),[o,x]=L.useState(1),[I,$]=L.useState(25),b=L.useRef(!1),R=e.selectedPlayer?[e.selectedPlayer]:e.playerPairFilter?.selectedPlayerPair?e.playerPairFilter.selectedPlayerPair:e.multiPlayerFilter?.selectedPlayers?e.multiPlayerFilter.selectedPlayers:[],P=R.length>0,C=c=>P?(c.winners?c.winners.split(",").map(y=>y.trim()):[]).filter(y=>R.some(w=>w.toLowerCase()===y.toLowerCase())).join(", "):"",g=L.useMemo(()=>n?[...n].sort((c,v)=>{let f,y;switch(l){case"date":f=new Date(c.date.split("/").reverse().join("-")).getTime(),y=new Date(v.date.split("/").reverse().join("-")).getTime();break;case"gameId":f=c.gameId,y=v.gameId;break;case"playerCount":f=c.playerCount,y=v.playerCount;break;case"gameDuration":f=c.gameDuration||0,y=v.gameDuration||0;break;case"winningCamp":f=c.winningCamp,y=v.winningCamp;break;case"victoryType":f=c.victoryType,y=v.victoryType;break;case"winner":f=C(c),y=C(v);break;default:return 0}let w;return m==="asc"?w=f>y?1:f<y?-1:0:w=f<y?1:f>y?-1:0,w===0?m==="asc"?c.gameId-v.gameId:v.gameId-c.gameId:w}):[],[n,l,m]),j=Math.ceil(g.length/I),N=(o-1)*I,A=N+I,B=g.slice(N,A);L.useEffect(()=>{if(b.current){b.current=!1;return}x(1),h(null)},[n]),L.useEffect(()=>{x(1),h(null)},[l,m]);const T=c=>{b.current=!0,x(c),h(null)},H=c=>{b.current=!0,$(c),x(1),h(null)},J=c=>{b.current=!0,h(a===c?null:c)},V=c=>{l===c?p(m==="asc"?"desc":"asc"):(u(c),p("desc"))},S=c=>l!==c?"↕️":m==="asc"?"↗️":"↘️",k=()=>{const c=[];if(e.selectedPlayer&&e.campFilter){const v=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",f=e.campFilter.excludeTraitor&&e.campFilter.selectedCamp==="Loups"?"Loups sans Traître":e.campFilter.selectedCamp;c.push(`${e.selectedPlayer} jouant ${f}${v}`)}else{if(e.selectedPlayer){const v=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":e.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";c.push(`Joueur: ${e.selectedPlayer}${v}`)}if(e.campFilter){const{selectedCamp:v,campFilterMode:f,excludeTraitor:y}=e.campFilter,q=`Camp: ${y&&v==="Loups"?"Loups sans Traître":v}`,E=f==="wins-only"?" (victoires uniquement)":f==="all-assignments"?" (toutes assignations)":"";c.push(q+E)}}if(e.playerPairFilter){const{selectedPlayerPair:v,selectedPairRole:f}=e.playerPairFilter,y=v.join(" & "),w=f==="wolves"?"loups":"amoureux";c.push(`Paire ${w}: ${y}`)}if(e.multiPlayerFilter){const{selectedPlayers:v,playersFilterMode:f,winnerPlayer:y}=e.multiPlayerFilter,w=v.join(" & ");let q="";f==="all-common-games"?q="toutes les parties communes":f==="opposing-camps"?q="affrontements uniquement":f==="same-camp"&&(q="parties en équipe (même camp)");const E=y?` (victoires de ${y})`:"";c.push(`${w} (${q}${E})`)}return e.selectedVictoryType&&c.push(`Victoire: ${e.selectedVictoryType}`),e.selectedHarvestRange&&c.push(`Récolte: ${e.selectedHarvestRange}`),e.selectedGameDuration&&c.push(`Durée: ${e.selectedGameDuration} jour${e.selectedGameDuration>1?"s":""}`),e.selectedGame&&c.push(`Partie #${e.selectedGame}`),e.selectedDate&&(e.selectedDate.includes("/")&&e.selectedDate.split("/").length===2?c.push(`Mois: ${e.selectedDate}`):c.push(`Date: ${e.selectedDate}`)),e.selectedGameIds&&e.selectedGameIds.length>0&&c.push(`${e.selectedGameIds.length} parties sélectionnée${e.selectedGameIds.length>1?"s":""}`),c};return i?s.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):r?s.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",r]}):!n||n.length===0?s.jsxs("div",{className:"lycans-empty-section",children:[s.jsx("h2",{children:"Aucune partie trouvée"}),s.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",e.fromComponent]})]}):s.jsxs("div",{className:"lycans-game-details",children:[s.jsxs("div",{className:"lycans-game-details-header",children:[s.jsxs("div",{className:"lycans-game-details-navigation",children:[e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",e.fromComponent]}),s.jsxs("h2",{children:["Détails des Parties (",n.length," partie",n.length>1?"s":"",")"]})]}),k().length>0&&s.jsxs("div",{className:"lycans-active-filters",children:[s.jsx("strong",{children:"Filtres actifs:"})," ",k().join(", ")]})]}),j>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",N+1," à ",Math.min(A,g.length)," sur ",g.length," parties"]}),s.jsxs("div",{className:"lycans-pagination-controls",children:[s.jsxs("select",{value:I,onChange:c=>H(Number(c.target.value)),className:"lycans-pagination-select",children:[s.jsx("option",{value:10,children:"10 par page"}),s.jsx("option",{value:25,children:"25 par page"}),s.jsx("option",{value:50,children:"50 par page"}),s.jsx("option",{value:100,children:"100 par page"})]}),s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>T(1),disabled:o===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>T(o-1),disabled:o===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",o," sur ",j]}),s.jsx("button",{onClick:()=>T(o+1),disabled:o===j,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>T(j),disabled:o===j,className:"lycans-pagination-btn",children:"»»"})]})]})]}),s.jsx("div",{className:"lycans-games-table-container",children:s.jsxs("table",{className:"lycans-games-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{onClick:()=>V("gameId"),className:"sortable",children:["Partie ",S("gameId")]}),s.jsxs("th",{onClick:()=>V("date"),className:"sortable",children:["Date ",S("date")]}),s.jsxs("th",{onClick:()=>V("playerCount"),className:"sortable",children:["Joueurs ",S("playerCount")]}),s.jsxs("th",{onClick:()=>V("gameDuration"),className:"sortable",children:["Durée ",S("gameDuration")]}),s.jsxs("th",{onClick:()=>V("winningCamp"),className:"sortable",children:["Camp Vainqueur ",S("winningCamp")]}),s.jsxs("th",{onClick:()=>V("victoryType"),className:"sortable",children:["Type de Victoire ",S("victoryType")]}),P&&s.jsxs("th",{onClick:()=>V("winner"),className:"sortable",children:["Vainqueur ",S("winner")]}),s.jsx("th",{children:"Détails"})]})}),s.jsx("tbody",{children:B.map(c=>s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:a===c.gameId?"selected":"",children:[s.jsxs("td",{children:["#",c.gameId]}),s.jsx("td",{children:c.date}),s.jsx("td",{children:c.playerCount}),s.jsx("td",{children:W(c.gameDuration)}),s.jsx("td",{style:{color:M[c.winningCamp]||"#fff"},children:c.winningCamp}),s.jsx("td",{children:c.victoryType}),P&&s.jsx("td",{children:C(c)}),s.jsx("td",{children:s.jsx("button",{onClick:()=>J(c.gameId),className:"lycans-details-btn",children:a===c.gameId?"Masquer":"Voir"})})]},c.gameId),a===c.gameId&&s.jsx("tr",{className:"game-details-row",children:s.jsx("td",{colSpan:P?8:7,children:s.jsx(me,{game:c})})},`${c.gameId}-details`)]}))})]})}),j>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",N+1," à ",Math.min(A,g.length)," sur ",g.length," parties"]}),s.jsx("div",{className:"lycans-pagination-controls",children:s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>T(1),disabled:o===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>T(o-1),disabled:o===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",o," sur ",j]}),s.jsx("button",{onClick:()=>T(o+1),disabled:o===j,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>T(j),disabled:o===j,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function W(e){if(e===null||e<=0)return"N/A";const t=Math.floor(e/60),n=e%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}function me({game:e}){const[t,n]=L.useState(!1);return s.jsx("div",{className:"lycans-game-detail-view",children:s.jsxs("div",{className:"lycans-game-detail-grid",children:[s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Générales"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de joueurs:"}),s.jsx("span",{className:"value",children:e.playerCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de loups:"}),s.jsx("span",{className:"value",children:e.wolfCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Traître:"}),s.jsx("span",{className:"value",children:e.hasTraitor?"Oui":"Non"})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Amoureux:"}),s.jsx("span",{className:"value",children:e.hasLovers?"Oui":"Non"})]}),e.soloRoles&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Rôles solo:"}),s.jsx("span",{className:"value",children:e.soloRoles})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Supplémentaires"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Jours de jeu:"}),s.jsx("span",{className:"value",children:e.dayCount})]}),e.gameDuration!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Durée de la partie:"}),s.jsx("span",{className:"value",children:W(e.gameDuration)})]}),e.versions&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Version:"}),s.jsxs("span",{className:"value",children:[e.versions,e.isModded?" (moddée)":""]})]}),e.map&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Map:"}),s.jsx("span",{className:"value",children:e.map})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Résultats"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Camp vainqueur:"}),s.jsx("span",{className:"value",children:e.winningCamp})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Type de victoire:"}),s.jsx("span",{className:"value",children:e.victoryType})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants villageois:"}),s.jsx("span",{className:"value",children:e.villagerSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants loups:"}),s.jsx("span",{className:"value",children:e.wolfSurvivors})]}),e.loverSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants amoureux:"}),s.jsx("span",{className:"value",children:e.loverSurvivors})]}),e.soloSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants solo:"}),s.jsx("span",{className:"value",children:e.soloSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Gagnants:"}),s.jsx("span",{className:"value",children:e.winners})]})]})]}),e.harvest!==null&&s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Récolte"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Récolte:"}),s.jsx("span",{className:"value",children:e.harvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Total possible:"}),s.jsx("span",{className:"value",children:e.totalHarvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Pourcentage:"}),s.jsx("span",{className:"value",children:typeof e.harvestPercentage=="number"?(e.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Rôles des Joueurs"}),s.jsx("div",{className:"lycans-player-roles-grid",children:e.playerRoles.map((i,r)=>{let l=i.role===i.camp?i.camp:`${i.camp} (${i.role})`;return s.jsxs("div",{className:"lycans-player-role-item",children:[s.jsx("div",{className:"lycans-player-name",style:{color:M[i.camp]||"#fff",textAlign:"left"},children:i.player}),s.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:l})]},r)})})]}),e.youtubeEmbedUrl&&s.jsx("div",{className:"lycans-game-detail-section full-width",children:s.jsx("button",{onClick:()=>n(!t),className:"lycans-video-toggle-btn",children:t?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),e.youtubeEmbedUrl&&t&&s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Vidéo de la Partie"}),s.jsx("div",{className:"lycans-youtube-container",children:s.jsx("iframe",{src:e.youtubeEmbedUrl,title:`Partie Lycans #${e.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{ye as GameDetailsChart};
