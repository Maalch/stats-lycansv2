import{g as Z,j as e,u as ue,a as fe,r as $}from"./index-CqfwvEwc.js";import{u as de}from"./baseStatsHook-CfToY4jU.js";import{b as _,a as J,g as he}from"./datasyncExport-si5Bh5xk.js";import{g as ge}from"./roleUtils-C8smGkiJ.js";import{u as ye}from"./useJoueursData-CuqVbDOu.js";import{a as Pe,u as xe,m as ve}from"./api-By4wjWZ_.js";import{F as ee,C as ae,X as re,Y as se,a as Re}from"./FullscreenChart-BHMIaneA.js";import{R as ie,T as te}from"./CategoricalChart-CpbFmD-I.js";import{B as Ce,a as je}from"./BarChart-8YzkNq2m.js";import{S as we,a as Te}from"./ScatterChart-Rpe8nWBz.js";function B(i,r){const l=J(i.MainRoleInitial,i.MainRoleChanges||[]),n=ge(i);return he(l,r,n)}function I(i,r=!1,l=!1){const n={};return i.forEach(p=>{const c=new Set;p.PlayerStats.forEach(s=>{const o=B(s,{regroupWolfSubRoles:r,regroupVillagers:l});c.add(o)}),c.forEach(s=>{n[s]||(n[s]={totalGames:0,wins:0,winRate:0,players:{}}),n[s].totalGames++});const d=new Set;p.PlayerStats.forEach(s=>{if(s.Victorious){const o=B(s,{regroupWolfSubRoles:r,regroupVillagers:l});d.add(o)}}),d.forEach(s=>{n[s]&&n[s].wins++})}),n}function Q(i,r,l=!1,n=!1){const p={};return i.forEach(c=>{c.PlayerStats.forEach(d=>{const s=Z(d),o=d.Username,a=B(d,{regroupWolfSubRoles:l,regroupVillagers:n}),R=a==="Autres"?"R√¥les sp√©ciaux":a;r[R].players[s]||(r[R].players[s]={games:0,wins:0,winRate:0,displayName:o}),r[R].players[s].games++,r[R].players[s].displayName=o,d.Victorious&&r[R].players[s].wins++,p[s]||(p[s]={totalGames:0,camps:{},displayName:o}),p[s].displayName=o,p[s].camps[R]||(p[s].camps[R]={games:0,wins:0,winRate:0,performance:0}),p[s].totalGames++,p[s].camps[R].games++,d.Victorious&&p[s].camps[R].wins++})}),p}function be(i){const r={};return r["R√¥les sp√©ciaux"]={totalGames:0,wins:0,winRate:0,players:{}},i.forEach(l=>{l.PlayerStats.forEach(n=>{_(J(n.MainRoleInitial,n.MainRoleChanges||[]))==="Autres"&&(r["R√¥les sp√©ciaux"].totalGames++,n.Victorious&&r["R√¥les sp√©ciaux"].wins++)})}),r}function Fe(i,r){const l={};return i.forEach(n=>{n.PlayerStats.forEach(p=>{const c=Z(p),d=p.Username;if(_(J(p.MainRoleInitial,p.MainRoleChanges||[]))==="Autres"){const o="R√¥les sp√©ciaux";r[o].players[c]||(r[o].players[c]={games:0,wins:0,winRate:0,displayName:d}),r[o].players[c].games++,r[o].players[c].displayName=d,p.Victorious&&r[o].players[c].wins++,l[c]||(l[c]={totalGames:0,camps:{},displayName:d}),l[c].displayName=d,l[c].camps[o]||(l[c].camps[o]={games:0,wins:0,winRate:0,performance:0}),l[c].totalGames++,l[c].camps[o].games++,p.Victorious&&l[c].camps[o].wins++}})}),l}function z(i){Object.keys(i).forEach(r=>{i[r].totalGames>0&&(i[r].winRate=parseFloat((i[r].wins/i[r].totalGames*100).toFixed(2))),Object.keys(i[r].players).forEach(l=>{const n=i[r].players[l];n.games>0&&(n.winRate=parseFloat((n.wins/n.games*100).toFixed(2)))})})}function q(i,r){Object.keys(i).forEach(l=>{Object.keys(i[l].camps).forEach(n=>{const p=i[l].camps[n];p.games>0&&(p.winRate=parseFloat((p.wins/p.games*100).toFixed(2)),r[n]&&r[n].winRate!==void 0?p.performance=parseFloat((p.winRate-r[n].winRate).toFixed(2)):p.performance=0)})})}function Ae(i,r,l){const n=[];return Object.keys(i).forEach(c=>{const d=i[c],s=[];Object.keys(d.camps).forEach(o=>{const a=d.camps[o];if(a.games>=l){const R=r[o]&&r[o].winRate!==void 0?r[o].winRate.toFixed(2):"0.00";s.push({camp:o,games:a.games,wins:a.wins,winRate:a.winRate.toFixed(2),campAvgWinRate:R,performance:a.performance.toFixed(2)})}}),s.sort((o,a)=>parseFloat(a.performance)-parseFloat(o.performance)),s.length>0&&n.push({player:d.displayName,totalGames:d.totalGames,campPerformance:s})}),n.sort((c,d)=>d.totalGames-c.totalGames),{campAverages:Object.keys(r).map(c=>({camp:c,totalGames:r[c].totalGames,wins:r[c].wins,winRate:r[c].winRate.toFixed(2)})),playerPerformanceArray:n}}function Ne(i){if(i.length===0)return null;const r=I(i,!1,!1),l=I(i,!0,!0),n=be(i),p=Q(i,r,!1,!1),c=Q(i,l,!0,!0),d=Fe(i,n);z(r),z(l),z(n),q(p,r),q(c,l),q(d,n);const s={...r},o={...p};l.Loup&&(s["Camp Loup"]=l.Loup,Object.keys(c).forEach(x=>{o[x]||(o[x]=c[x]),c[x].camps.Loup&&(o[x].camps["Camp Loup"]=c[x].camps.Loup)})),l.Villageois&&(s["Camp Villageois"]=l.Villageois,Object.keys(c).forEach(x=>{o[x]||(o[x]=c[x]),c[x].camps.Villageois&&(o[x].camps["Camp Villageois"]=c[x].camps.Villageois)})),n["R√¥les sp√©ciaux"]&&(s["R√¥les sp√©ciaux"]=n["R√¥les sp√©ciaux"],Object.keys(d).forEach(x=>{o[x]||(o[x]=d[x]),d[x].camps["R√¥les sp√©ciaux"]&&(o[x].camps["R√¥les sp√©ciaux"]=d[x].camps["R√¥les sp√©ciaux"])}));const a=3,{campAverages:R,playerPerformanceArray:j}=Ae(o,s,a);return{campAverages:R,playerPerformance:j,minGamesRequired:a}}function Ve(){const{data:i,isLoading:r,error:l}=de(Ne);return{playerCampPerformance:i,isLoading:r,error:l}}function We({viewMode:i,selectedCamp:r,chartData:l,highlightedPlayer:n,lycansColorScheme:p,playersColor:c,onBarClick:d}){return e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:i==="performance"?r==="Tous les camps"?"Meilleures performances - Tous les camps":`Meilleurs joueurs en ${r}`:r==="Tous les camps"?"Plus grand % de parties - Tous les camps":`Plus grand % de parties en ${r}`}),e.jsx(ee,{title:i==="performance"?r==="Tous les camps"?"Meilleures Performances - Tous les camps":`Meilleurs Joueurs - ${r}`:r==="Tous les camps"?"Pourcentage de Parties Jou√©es - Tous les camps":`Pourcentage de Parties Jou√©es - ${r}`,children:e.jsx("div",{style:{height:500},children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Ce,{data:l,margin:{top:20,right:30,left:20,bottom:0},children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(re,{dataKey:r==="Tous les camps"?"uniqueKey":"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:s,y:o,payload:a,index:R})=>{const j=l[R],x=j?.player||a.value,F=n===(j?.player||a.value);return e.jsx("text",{x:s,y:o,dy:16,textAnchor:"end",fill:F?"var(--accent-primary)":"var(--text-secondary)",fontSize:F?14:13,fontWeight:F?"bold":"italic",transform:`rotate(-45 ${s} ${o})`,children:x})}}),e.jsx(se,{domain:i==="playPercentage"?[0,100]:["auto","auto"],label:{value:i==="performance"?"Performance vs moyenne (%)":"Pourcentage de parties jou√©es (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(te,{content:({active:s,payload:o})=>{if(s&&o&&o.length>0){const a=o[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r==="Tous les camps"?`${a.player} - ${a.camp}`:a.player})}),i==="performance"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Parties: ",a.games]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux personnel: ",a.winRate,"%"]}),r!=="Tous les camps"&&e.jsxs("div",{children:["Moyenne camp: ",a.campAvgWinRate,"%"]}),e.jsxs("div",{children:["Performance: ",a.performance>0?"+":"",a.performance]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Parties dans ce r√¥le: ",a.games]}),e.jsxs("div",{children:["Total parties: ",a.totalGames]}),e.jsxs("div",{children:["Pourcentage: ",a.playPercentage?.toFixed(1),"%"]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]})]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(je,{dataKey:i==="performance"?"performanceNum":"playPercentage",style:{cursor:"pointer"},onClick:d,children:l.map((s,o)=>{const a=n===s.player,R=s.isHighlightedAddition;let j;return r==="Tous les camps"?j=p[s.camp]||`var(--chart-color-${o%6+1})`:j=c[s.player]||"var(--accent-primary)",e.jsx(Re,{fill:j,stroke:a?"var(--accent-primary)":"transparent",strokeWidth:a?3:0,strokeDasharray:R?"5,5":"none",opacity:R?.8:1},`cell-${o}`)})})]})})})})]})}function Ge({viewMode:i,selectedCamp:r,chartData:l,highlightedPlayer:n,lycansColorScheme:p,playersColor:c,onScatterClick:d}){return e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:i==="performance"?r==="Tous les camps"?"Vue Partie/Performance - Tous les camps":`Vue Partie/Performance - ${r}`:r==="Tous les camps"?"Vue Pourcentage/Taux de victoire - Tous les camps":`Vue Pourcentage/Taux de victoire - ${r}`}),e.jsx(ee,{title:i==="performance"?r==="Tous les camps"?"Vue Partie/Performance - Tous les camps":`Vue Partie/Performance - ${r}`:r==="Tous les camps"?"Vue Pourcentage/Taux de victoire - Tous les camps":`Vue Pourcentage/Taux de victoire - ${r}`,children:e.jsx("div",{style:{height:500},children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(we,{margin:{top:20,right:30,left:20,bottom:40},children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(re,{type:"number",dataKey:"games",name:"Parties",label:{value:"Nombre de parties",position:"bottom"}}),e.jsx(se,{type:"number",dataKey:i==="performance"?"performanceNum":r==="Tous les camps"?"playPercentage":"winRateNum",name:i==="performance"?"Performance":r==="Tous les camps"?"Pourcentage":"Taux de victoire",domain:i==="performance"?["auto","auto"]:[0,100],label:{value:i==="performance"?"Performance vs moyenne (%)":r==="Tous les camps"?"Pourcentage de parties jou√©es (%)":"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(te,{cursor:{strokeDasharray:"3 3"},content:({active:s,payload:o})=>{if(s&&o&&o.length>0){const a=o[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r==="Tous les camps"?`${a.player} - ${a.camp}`:a.player})}),i==="performance"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Parties: ",a.games]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux personnel: ",a.winRate,"%"]}),r!=="Tous les camps"&&e.jsxs("div",{children:["Moyenne camp: ",a.campAvgWinRate,"%"]}),e.jsxs("div",{children:["Performance: ",a.performance>0?"+":"",a.performance]})]}):e.jsx(e.Fragment,{children:r==="Tous les camps"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Parties dans ce r√¥le: ",a.games]}),e.jsxs("div",{children:["Total parties: ",a.totalGames]}),e.jsxs("div",{children:["Pourcentage: ",a.playPercentage?.toFixed(1),"%"]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Parties: ",a.games]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]})]})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(Te,{data:l,onClick:d,shape:s=>{const o=n===s.payload?.player,a=s.payload?.isHighlightedAddition;return e.jsxs("g",{style:{cursor:"pointer"},children:[e.jsx("circle",{cx:s.cx,cy:s.cy,r:o?15:12,fill:r==="Tous les camps"?p[s.payload?.camp]||"var(--accent-primary)":c[s.payload?.player]||"var(--accent-primary)",stroke:o?"var(--accent-primary)":"#222",strokeWidth:o?3:1,strokeDasharray:a?"5,5":"none",opacity:a?.8:1}),e.jsx("text",{x:s.cx,y:s.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:o?"12":"10",fontWeight:"bold",pointerEvents:"none",children:s.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})}function Be(){const{navigateToGameDetails:i,navigationState:r,updateNavigationState:l}=ue(),{settings:n}=fe(),p=Pe(),{joueursData:c}=ye(),d=xe(c),[s,o]=$.useState(r.campPerformanceState?.viewMode||"performance"),[a,R]=$.useState(r.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[j,x]=$.useState(r.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:F,isLoading:ne,error:K}=Ve();$.useEffect(()=>{r.campPerformanceState||l({campPerformanceState:{viewMode:s,selectedCampPerformanceCamp:a,selectedCampPerformanceMinGames:j}})},[s,a,j,r.campPerformanceState,l]);const oe=$.useMemo(()=>{if(!F?.campAverages)return["Tous les camps"];const t=F.campAverages.map(W=>W.camp),m=["Tous les camps"];t.includes("Camp Villageois")&&m.push("Camp Villageois"),t.includes("Chasseur")&&m.push("Chasseur"),t.includes("Alchimiste")&&m.push("Alchimiste"),t.includes("Villageois")&&m.push("Villageois"),t.includes("Camp Loup")&&m.push("Camp Loup"),t.includes("Loup")&&m.push("Loup"),t.includes("Tra√Ætre")&&m.push("Tra√Ætre"),t.includes("Louveteau")&&m.push("Louveteau"),t.includes("R√¥les sp√©ciaux")&&m.push("R√¥les sp√©ciaux");const C=["Camp Villageois","Camp Loup","R√¥les sp√©ciaux"],N=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Tra√Ætre","Louveteau"],...C],M=t.filter(W=>!N.includes(W)).sort();return[...m,...M]},[F]),{campPlayPercentageData:le,topPlayPercentageData:ce,totalPlayPercentagePlayers:E}=$.useMemo(()=>{if(!F?.playerPerformance||s!=="playPercentage")return{campPlayPercentageData:[],topPlayPercentageData:[],totalPlayPercentagePlayers:0};const{playerPerformance:t}=F,m=[],C=[],T=new Map;for(const h of t){const w=h.campPerformance.reduce((f,A)=>f+A.games,0);for(const f of h.campPerformance)if(f.games>=j){const A=f.games/w*100,u=`${h.player}-${f.camp}`,y={player:h.player,camp:f.camp,games:f.games,wins:f.wins,winRate:f.winRate,performance:f.performance,winRateNum:parseFloat(f.winRate),performanceNum:parseFloat(f.performance),campAvgWinRateNum:parseFloat(f.campAvgWinRate),totalGames:w,playPercentage:A,isHighlightedAddition:!1,uniqueKey:u,playerCamp:u},V=T.get(h.player);(!V||y.playPercentage>V.playPercentage)&&T.set(h.player,y),a!=="Tous les camps"&&f.camp===a&&m.push(y)}}C.push(...T.values());const N=(h,w,f=!1)=>{if(!n.highlightedPlayer||h.some(P=>P.player===n.highlightedPlayer&&(!w||P.camp===w)))return h;const u=t.find(P=>P.player===n.highlightedPlayer);if(!u)return h;const y=u.campPerformance.reduce((P,b)=>P+b.games,0);if(f){let P=null;for(const b of u.campPerformance)if(b.games>=1){const L=b.games/y*100,X=`${u.player}-${b.camp}`,Y={player:u.player,camp:b.camp,games:b.games,wins:b.wins,winRate:b.winRate,performance:b.performance,winRateNum:parseFloat(b.winRate),performanceNum:parseFloat(b.performance),campAvgWinRateNum:parseFloat(b.campAvgWinRate),totalGames:y,playPercentage:L,isHighlightedAddition:!0,uniqueKey:X,playerCamp:X};(!P||Y.playPercentage>P.playPercentage)&&(P=Y)}return P?[...h,P]:h}const V=[];for(const P of u.campPerformance)if((!w||P.camp===w)&&P.games>=1){const b=P.games/y*100,L=`${u.player}-${P.camp}`;V.push({player:u.player,camp:P.camp,games:P.games,wins:P.wins,winRate:P.winRate,performance:P.performance,winRateNum:parseFloat(P.winRate),performanceNum:parseFloat(P.performance),campAvgWinRateNum:parseFloat(P.campAvgWinRate),totalGames:y,playPercentage:b,isHighlightedAddition:!0,uniqueKey:L,playerCamp:L})}return[...h,...V]},M=a!=="Tous les camps"?N(m,a,!1):[],W=N(C,void 0,!0),D=M.sort((h,w)=>w.playPercentage-h.playPercentage),H=W.sort((h,w)=>w.playPercentage-h.playPercentage),k=(h,w)=>{const f=h.slice(0,w);if(f.some(y=>y.player===n.highlightedPlayer)||!n.highlightedPlayer)return f;const u=h.find(y=>y.player===n.highlightedPlayer);if(u){const y={...u,isHighlightedAddition:!0};return[...f,y]}return f};let G=0;a==="Tous les camps"?G=T.size:G=m.length;const v=k(D,15),g=k(H,15);return{campPlayPercentageData:v,topPlayPercentageData:g,totalPlayPercentagePlayers:G}},[F,a,j,n.highlightedPlayer,s]),{campPlayerData:me,topPerformersData:pe,totalMatchingPlayers:S}=$.useMemo(()=>{if(!F?.playerPerformance||s!=="performance")return{campPlayerData:[],topPerformersData:[],totalMatchingPlayers:0};const{playerPerformance:t}=F,m=[],C=[],T=new Map;for(const v of t)for(const g of v.campPerformance)if(g.games>=j){const h=`${v.player}-${g.camp}`,w={player:v.player,camp:g.camp,games:g.games,wins:g.wins,winRate:g.winRate,performance:g.performance,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:h,playerCamp:h},f=T.get(v.player);(!f||w.performanceNum>f.performanceNum)&&T.set(v.player,w),a!=="Tous les camps"&&g.camp===a&&m.push({player:v.player,...g,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:h,playerCamp:h})}C.push(...T.values());const N=(v,g,h=!1)=>{if(!n.highlightedPlayer||v.some(u=>u.player===n.highlightedPlayer&&(!g||u.camp===g)))return v;const f=t.find(u=>u.player===n.highlightedPlayer);if(!f)return v;if(h){let u=null;for(const y of f.campPerformance)if(y.games>=1){const V=`${f.player}-${y.camp}`,P={player:f.player,camp:y.camp,games:y.games,wins:y.wins,winRate:y.winRate,performance:y.performance,winRateNum:parseFloat(y.winRate),performanceNum:parseFloat(y.performance),campAvgWinRateNum:parseFloat(y.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:V,playerCamp:V};(!u||P.performanceNum>u.performanceNum)&&(u=P)}return u?[...v,u]:v}const A=[];for(const u of f.campPerformance)if((!g||u.camp===g)&&u.games>=1){const y=`${f.player}-${u.camp}`;A.push({player:f.player,camp:u.camp,games:u.games,wins:u.wins,winRate:u.winRate,performance:u.performance,winRateNum:parseFloat(u.winRate),performanceNum:parseFloat(u.performance),campAvgWinRateNum:parseFloat(u.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:y,playerCamp:y})}return[...v,...A]},M=a!=="Tous les camps"?N(m,a,!1):[],W=N(C,void 0,!0),D=M.sort((v,g)=>g.performanceNum-v.performanceNum),H=W.sort((v,g)=>g.performanceNum-v.performanceNum),k=(v,g)=>{const h=v.slice(0,g);if(h.some(A=>A.player===n.highlightedPlayer)||!n.highlightedPlayer)return h;const f=v.find(A=>A.player===n.highlightedPlayer);if(f){const A={...f,isHighlightedAddition:!0};return[...h,A]}return h};let G=0;return a==="Tous les camps"?G=T.size:G=m.length,{campPlayerData:k(D,15),topPerformersData:k(H,15),totalMatchingPlayers:G}},[F,a,j,n.highlightedPlayer,s]),O=t=>{t&&t.player&&(a!=="Tous les camps"?i(a==="Camp Loup"?{selectedPlayer:t.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${a}`}:a==="Camp Villageois"?{selectedPlayer:t.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${a}`}:a==="R√¥les sp√©ciaux"?{selectedPlayer:t.player,fromComponent:`Performance des Joueurs - ${a}`}:{selectedPlayer:t.player,campFilter:{selectedCamp:a,campFilterMode:"wins-only",excludeWolfSubRoles:a==="Tra√Ætre"||a==="Louveteau",excludeVillagers:a==="Chasseur"||a==="Alchimiste"},fromComponent:`Performance des Joueurs - ${a}`}):t.camp==="Camp Loup"?i({selectedPlayer:t.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):t.camp==="Camp Villageois"?i({selectedPlayer:t.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):t.camp==="R√¥les sp√©ciaux"?i({selectedPlayer:t.player,fromComponent:"Performance des Joueurs - Tous les camps"}):i({selectedPlayer:t.player,campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only",excludeWolfSubRoles:t.camp==="Tra√Ætre"||t.camp==="Louveteau",excludeVillagers:t.camp==="Chasseur"||t.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};if(ne)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."});if(K)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",K]});if(!F)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e de performance par camp disponible"});const U=s==="performance"?a==="Tous les camps"?pe:me:a==="Tous les camps"?ce:le;return e.jsxs("div",{className:"lycans-player-camp-performance",children:[e.jsx("h2",{children:s==="performance"?"Meilleures Performances par Camp":"Pourcentage de Parties Jou√©es par R√¥le"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"view-mode-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Affichage:"}),e.jsxs("select",{id:"view-mode-select",value:s,onChange:t=>{const m=t.target.value;o(m),l({campPerformanceState:{viewMode:m,selectedCampPerformanceCamp:a,selectedCampPerformanceMinGames:j}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:[e.jsx("option",{value:"performance",children:"üèÜ Meilleures performances"}),e.jsx("option",{value:"playPercentage",children:"üìä % parties jou√©es"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),e.jsx("select",{id:"camp-select",value:a,onChange:t=>{const m=t.target.value;R(m),l({campPerformanceState:{viewMode:s,selectedCampPerformanceCamp:m,selectedCampPerformanceMinGames:j}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:oe.map(t=>{let m=t,C=!1,T=!1,N=!1;return t==="Tous les camps"?(m="üìä Tous les camps",N=!0):t==="Camp Villageois"?(m="   üèòÔ∏è Camp Villageois",C=!0,T=!0):t==="Villageois"?(m="   Villageois",C=!0):t==="Chasseur"?(m="     Chasseur",C=!0):t==="Alchimiste"?(m="     Alchimiste",C=!0):t==="Camp Loup"?(m="   üê∫ Camp Loup",C=!0,T=!0):t==="Loup"?(m="     Loup",C=!0):t==="Tra√Ætre"?(m="     Tra√Ætre",C=!0):t==="Louveteau"?(m="     Louveteau",C=!0):t==="R√¥les sp√©ciaux"?(m="   ‚≠ê R√¥les sp√©ciaux",C=!0,T=!0):(m=`     ${t}`,C=!0),e.jsx("option",{value:t,style:{fontFamily:"monospace",fontSize:C?"0.85rem":"0.9rem",fontWeight:T?"bold":"normal",color:T?"var(--accent-primary)":N?"var(--accent-secondary)":"inherit"},children:m},t)})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-select",value:j,onChange:t=>{const m=Number(t.target.value);x(m),l({campPerformanceState:{viewMode:s,selectedCampPerformanceCamp:a,selectedCampPerformanceMinGames:m}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:ve.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:e.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.95rem",fontWeight:"500"},children:[s==="performance"?S:E," joueur",(s==="performance"?S:E)!==1?"s":""," ",(s==="performance"?S:E)!==1?"correspondent":"correspond"," aux crit√®res"]})}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsx(We,{viewMode:s,selectedCamp:a,chartData:U,highlightedPlayer:n.highlightedPlayer,lycansColorScheme:p,playersColor:d,onBarClick:O}),e.jsx(Ge,{viewMode:s,selectedCamp:a,chartData:U,highlightedPlayer:n.highlightedPlayer,lycansColorScheme:p,playersColor:d,onScatterClick:O})]})]})}export{Be as PlayerCampChart};
