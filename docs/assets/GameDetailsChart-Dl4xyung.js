import{r as F,j as a,u as Q,a as X}from"./index-B8jMWc6y.js";import{b as Z}from"./baseStatsHook-D-YQ61rK.js";import{g as v,a as k,b as ee}from"./gameUtils-C0qLdSzT.js";import{a as H,b as ae}from"./api-zyox9Kf8.js";function se(e,t){if(!e)return null;try{const n=new URL(e);let i="",s=0;if(n.hostname==="youtu.be"){i=n.pathname.slice(1);const o=n.searchParams.get("t");o&&(s=parseInt(o,10)||0)}else if(n.hostname==="www.youtube.com"||n.hostname==="youtube.com"){i=n.searchParams.get("v")||"";const o=n.searchParams.get("t");o&&(s=parseInt(o,10)||0)}if(!i)return null;const r=`https://www.youtube.com/embed/${i}?start=${s}`;if(t)try{const o=new URL(t);let c=0;if(o.hostname==="youtu.be"){const d=o.searchParams.get("t");d&&(c=parseInt(d,10)||0)}else if(o.hostname==="www.youtube.com"||o.hostname==="youtube.com"){const d=o.searchParams.get("t");d&&(c=parseInt(d,10)||0)}if(c>s)return`${r}&end=${c}`}catch(o){console.warn("Failed to parse end URL:",t,o)}return r}catch(n){return console.warn("Failed to create YouTube embed URL:",e,n),null}}function te(e,t){if(!e||!t)return null;try{const n=new Date(e),i=new Date(t);if(isNaN(n.getTime())||isNaN(i.getTime()))return console.warn("Invalid date format:",e,t),null;const s=i.getTime()-n.getTime();return s>0?Math.round(s/1e3):null}catch(n){return console.warn("Failed to calculate game duration:",e,t,n),null}}function J(e,t,n=!1){const i=t.PlayerStats.find(r=>r.Username.toLowerCase()===e.toLowerCase());return i?v(i.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!n}):"Villageois"}function ne(e,t,n){const i=e.toLowerCase(),s=n.PlayerStats.find(o=>o.Username.toLowerCase()===i);return s?v(s.MainRoleInitial)===t:!1}function O(e,t,n){const i=e.filter(s=>s.PlayerStats.some(r=>r.Username.toLowerCase()===t.toLowerCase()));return!n||n==="all-assignments"?i:n==="wins-only"?i.filter(s=>s.PlayerStats.some(r=>r.Username.toLowerCase()===t.toLowerCase()&&r.Victorious)):i}function re(e,t){return e.filter(n=>n.DisplayedId===t)}function le(e,t){return e.filter(n=>t.includes(n.DisplayedId))}function ie(e,t){return e.filter(n=>{const s=new Date(n.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});if(t.includes("/")&&t.split("/").length===2){const[r,o]=t.split("/"),c=s.split("/");if(c.length===3){const[,d,u]=c;return d===r&&u===o}}else return s===t;return!1})}function oe(e,t){return e.filter(n=>n.LegacyData?.VictoryType===t)}function ce(e,t){return e.filter(n=>t==="Village"||t==="ChÃ¢teau"?n.MapName===t:t==="Autres"?n.MapName!=="Village"&&n.MapName!=="ChÃ¢teau":n.MapName===t)}function de(e,t){return e.filter(n=>{const i=n.HarvestGoal,s=n.HarvestDone;if(i==null||s===null||s===void 0||i===0)return!1;const r=s/i*100;switch(t){case"0-25%":return r>=0&&r<=25;case"26-50%":return r>25&&r<=50;case"51-75%":return r>50&&r<=75;case"76-99%":return r>75&&r<=99;case"100%":return r>=100;default:return!0}})}function ue(e,t){return e.filter(n=>{if(!n.EndTiming)return!1;const i=n.EndTiming.match(/(?:Nuit|Jour)\s+(\d+)/);return i?parseInt(i[1],10)===t:!1})}function me(e,t,n){const{selectedCamp:i,campFilterMode:s,_smallCamps:r,excludeTraitor:o}=t;return e.filter(c=>{if(n){if(i==="Autres"&&r)return r.some(g=>ne(n,g,c))?s==="wins-only"?c.PlayerStats.find(p=>p.Username.toLowerCase()===n.toLowerCase())?.Victorious===!0:!0:!1;const d=J(n,c,o);let u=!1;return i==="Loup"&&o?u=d==="Loup"&&!c.PlayerStats.some(m=>m.Username.toLowerCase()===n.toLowerCase()&&m.MainRoleInitial==="TraÃ®tre"):u=d===i,u?s==="wins-only"?c.PlayerStats.find(g=>g.Username.toLowerCase()===n.toLowerCase())?.Victorious===!0:!0:!1}else if(s==="wins-only"){const d=k(c);return i==="Autres"&&r?r.includes(d):d===i}else return i==="Autres"&&r?r.some(d=>c.PlayerStats.some(u=>v(u.MainRoleInitial)===d)):c.PlayerStats.some(d=>v(d.MainRoleInitial)===i)})}function pe(e,t,n){const{selectedPlayers:i,playersFilterMode:s,winnerPlayer:r}=t;return e.filter(o=>{const c=o.PlayerStats.map(m=>m.Username.toLowerCase());if(!i.every(m=>c.includes(m.toLowerCase())))return!1;const u=i.map(m=>J(m,o,n?.excludeTraitor||!1));switch(s){case"all-common-games":return r?o.PlayerStats.find(P=>P.Username.toLowerCase()===r.toLowerCase())?.Victorious===!0:!0;case"opposing-camps":if(!([...new Set(u)].length>1))return!1;if(r){const y=i.findIndex(P=>P.toLowerCase()===r.toLowerCase());if(y!==-1){const P=u[y],b=k(o);return P==="Agent"&&b==="Agent"?o.PlayerStats.find(h=>h.Username.toLowerCase()===r.toLowerCase())?.Victorious===!0:P===b}}return!0;case"same-camp":if(!([...new Set(u)].length===1))return!1;const w=u[0];if(n&&n.selectedCamp){const y=n.selectedCamp;if(w!==y)return!1}if(r){const y=k(o);return w==="Agent"&&y==="Agent"?i.every(P=>o.PlayerStats.find(T=>T.Username.toLowerCase()===P.toLowerCase())?.Victorious===!0):w===y}return!0;default:return!0}})}function he(e,t){const{selectedPlayerPair:n,selectedPairRole:i}=t;return n.length!==2?e:e.filter(s=>{const r=s.PlayerStats.map(c=>c.Username.toLowerCase());if(!n.every(c=>r.includes(c.toLowerCase())))return!1;switch(i){case"wolves":return n.every(c=>{const d=s.PlayerStats.find(u=>u.Username.toLowerCase()===c.toLowerCase());return v(d?.MainRoleInitial)==="Loup"});case"lovers":return n.every(c=>{const d=s.PlayerStats.find(u=>u.Username.toLowerCase()===c.toLowerCase());return v(d?.MainRoleInitial)==="Amoureux"});default:return!0}})}function ye(e,t,n){const i=t&&(t.selectedPlayer||t.selectedGame||t.selectedVictoryType||t.selectedDate||t.selectedHarvestRange||t.selectedGameDuration||t.selectedGameIds&&t.selectedGameIds.length>0||t.selectedMapName||t.campFilter||t.playerPairFilter||t.multiPlayerFilter);if(!i&&n)return O(e,n,"all-assignments");if(!i)return e;let s=[...e];return t.selectedPlayer&&(s=O(s,t.selectedPlayer,t.selectedPlayerWinMode)),t.selectedGame&&(s=re(s,t.selectedGame)),t.selectedGameIds&&(s=le(s,t.selectedGameIds)),t.campFilter&&(s=me(s,t.campFilter,t.selectedPlayer)),t.selectedDate&&(s=ie(s,t.selectedDate)),t.selectedHarvestRange&&(s=de(s,t.selectedHarvestRange)),t.selectedVictoryType&&(s=oe(s,t.selectedVictoryType)),t.selectedGameDuration&&(s=ue(s,t.selectedGameDuration)),t.selectedMapName&&(s=ce(s,t.selectedMapName)),t.multiPlayerFilter&&(s=pe(s,t.multiPlayerFilter,t.campFilter)),t.playerPairFilter&&(s=he(s,t.playerPairFilter)),s}function fe(e,t,n){return e.length===0?null:ye(e,t,n).map(s=>{const r=s.PlayerStats.length,o=s.PlayerStats.filter(h=>v(h.MainRoleInitial)==="Loup"),c=s.PlayerStats.filter(h=>v(h.MainRoleInitial)==="TraÃ®tre"),d=s.PlayerStats.filter(h=>v(h.MainRoleInitial)==="Amoureux"),u=s.PlayerStats.filter(h=>h.Victorious),m=o.length+c.length,g=k(s),p=["Loup","Villageois","Amoureux"],N=s.PlayerStats.filter(h=>!p.includes(v(h.MainRoleInitial))),w=N.length>0?N.map(h=>v(h.MainRoleInitial)).join(", "):null,P=new Date(s.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});let b=0;if(s.EndTiming){const h=s.EndTiming.match(/[UNJMC](\d+)/);h&&(b=parseInt(h[1],10))}let T=null;return s.HarvestGoal&&s.HarvestGoal>0&&(T=s.HarvestDone/s.HarvestGoal),{gameId:s.DisplayedId,date:P,isModded:s.Modded||!1,playerCount:r,wolfCount:m,hasTraitor:c.length>0,hasLovers:d.length>0,soloRoles:w,winningCamp:g,dayCount:b,winners:u.map(h=>h.Username).join(", "),harvest:s.HarvestDone,totalHarvest:s.HarvestGoal,harvestPercentage:T,playersList:s.PlayerStats.map(h=>h.Username).join(", "),versions:s.Version||null,map:s.MapName,victoryType:s.LegacyData?.VictoryType||null,youtubeEmbedUrl:se(s.LegacyData?.VODLink||null,s.LegacyData?.VODLinkEnd||null),gameDuration:te(s.StartDate,s.EndDate),playerData:s.PlayerStats}})}function ge(e,t){const{data:n,isLoading:i,error:s}=Z(r=>fe(r,e,t));return{data:n||[],isLoading:i,error:s}}const xe=({playerData:e})=>{const t=H(),n=ae(),i=e.reduce((o,c)=>{const d=v(c.MainRoleInitial);return o[d]||(o[d]=[]),o[d].push(c),o},{}),s=["Villageois","Loup","Amoureux"],r=Object.entries(i).sort(([o,c],[d,u])=>{const m=s.includes(o),g=s.includes(d);return m&&!g?-1:!m&&g?1:u.length-c.length});return a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"Composition des Camps"}),a.jsx("div",{className:"camps-grid",children:r.map(([o,c])=>{const d=c,u=t[o]||"#666",g=d.filter(p=>p.Victorious).length>0;return a.jsxs("div",{className:`camp-group ${g?"winning-camp":""}`,style:{borderColor:u,backgroundColor:`${u}15`,boxShadow:g?`0 0 10px ${u}40`:"none"},children:[a.jsx("div",{className:"camp-header",style:{backgroundColor:`${u}25`},children:a.jsxs("h5",{style:{color:u},children:[o," (",d.length,")",g&&a.jsx("span",{className:"victory-crown",children:"ğŸ‘‘"})]})}),a.jsx("div",{className:"camp-players",children:d.sort((p,N)=>p.Username.localeCompare(N.Username)).map(p=>{let N=u;return p.Color&&n[p.Color]&&(N=n[p.Color]),a.jsxs("div",{className:`player-badge ${p.Victorious?"winner":""} ${p.DeathTiming?"dead":"alive"}`,style:{borderColor:N},title:`${p.Username} - ${v(p.MainRoleInitial)}${p.DeathTiming?` (Mort ${ee(p.DeathTiming)})`:""}`,children:[a.jsx("span",{className:"player-name",children:p.Username}),p.DeathTiming&&a.jsx("span",{className:"death-indicator",children:"ğŸ’€"}),p.Victorious&&a.jsx("span",{className:"victory-indicator",children:"â­"})]},p.Username)})})]},o)})})]})};function je(e){if(e===null||e<=0)return"N/A";const t=Math.floor(e/60),n=e%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}function Ce({game:e}){const[t,n]=F.useState(!1),i=H();return a.jsx("div",{className:"lycans-game-detail-view",children:a.jsxs("div",{className:"lycans-game-detail-grid",children:[a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations GÃ©nÃ©rales"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de joueurs:"}),a.jsx("span",{className:"value",children:e.playerCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de loups:"}),a.jsx("span",{className:"value",children:e.wolfCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"TraÃ®tre:"}),a.jsx("span",{className:"value",children:e.hasTraitor?"Oui":"Non"})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Amoureux:"}),a.jsx("span",{className:"value",children:e.hasLovers?"Oui":"Non"})]}),e.soloRoles&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"RÃ´les solo:"}),a.jsx("span",{className:"value",children:e.soloRoles})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations SupplÃ©mentaires"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[e.victoryType!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Type de victoire:"}),a.jsx("span",{className:"value",children:e.victoryType})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Jours de jeu:"}),a.jsx("span",{className:"value",children:e.dayCount})]}),e.gameDuration!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"DurÃ©e de la partie:"}),a.jsx("span",{className:"value",children:je(e.gameDuration)})]}),e.versions&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Version:"}),a.jsxs("span",{className:"value",children:[e.versions,e.isModded?" (moddÃ©e)":""]})]}),e.map&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Map:"}),a.jsx("span",{className:"value",children:e.map})]})]})]}),e.harvest!==null&&a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"RÃ©colte"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"RÃ©colte:"}),a.jsx("span",{className:"value",children:e.harvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Total possible:"}),a.jsx("span",{className:"value",children:e.totalHarvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Pourcentage:"}),a.jsx("span",{className:"value",children:typeof e.harvestPercentage=="number"?(e.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),a.jsx(xe,{playerData:e.playerData}),a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"RÃ´les des Joueurs"}),a.jsx("div",{className:"lycans-player-roles-grid",children:e.playerData.sort((s,r)=>{const o=v(s.MainRoleInitial),c=v(r.MainRoleInitial),d=["Villageois","Loup","TraÃ®tre","Amoureux"],u=d.indexOf(o),m=d.indexOf(c);return u!==-1&&m!==-1?u-m:u!==-1?-1:m!==-1?1:o!==c?o.localeCompare(c):s.Username.localeCompare(r.Username)}).map(s=>{const r=v(s.MainRoleInitial),o=s.MainRoleInitial,c=s.Power,d=s.SecondaryRole;let u=r;o&&o!==r&&(u+=` - ${o}`),c&&c.trim()&&(u+=` - ${c}`),d&&d.trim()&&(u+=` + ${d}`);let m=i[s.MainRoleInitial]||"#666";m==="#666"&&(m=i[r]||"#666");const g=i[r]||"#666",p=s.DeathTiming,N=s.Victorious;return a.jsxs("div",{className:`lycans-player-role-item ${N?"victorious":""}`,style:{borderColor:g},children:[a.jsxs("div",{className:"lycans-player-name",style:{color:m,textAlign:"left"},children:[s.Username,p&&a.jsx("span",{className:"death-skull",children:"ğŸ’€"})]}),a.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:u})]},s.Username)})})]}),e.youtubeEmbedUrl&&a.jsx("div",{className:"lycans-game-detail-section full-width",children:a.jsx("button",{onClick:()=>n(!t),className:"lycans-video-toggle-btn",children:t?"ğŸ“¹ Masquer la vidÃ©o":"ğŸ¥ Voir la vidÃ©o"})}),e.youtubeEmbedUrl&&t&&a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"VidÃ©o de la Partie"}),a.jsx("div",{className:"lycans-youtube-container",children:a.jsx("iframe",{src:e.youtubeEmbedUrl,title:`Partie Lycans #${e.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}function Le(){const{navigationFilters:e,navigateBack:t}=Q(),{settings:n}=X(),i=!!(e.selectedPlayer||e.selectedGame||e.selectedVictoryType||e.selectedDate||e.selectedHarvestRange||e.selectedGameDuration||e.selectedGameIds&&e.selectedGameIds.length>0||e.selectedMapName||e.campFilter||e.playerPairFilter||e.multiPlayerFilter),s=i?null:n.highlightedPlayer,{data:r,isLoading:o,error:c}=ge(e,s),d=H(),[u,m]=F.useState("date"),[g,p]=F.useState("desc"),[N,w]=F.useState(null),[y,P]=F.useState(1),[b,T]=F.useState(25),h=F.useRef(!1),D=e.selectedPlayer?[e.selectedPlayer]:e.playerPairFilter?.selectedPlayerPair?e.playerPairFilter.selectedPlayerPair:e.multiPlayerFilter?.selectedPlayers?e.multiPlayerFilter.selectedPlayers:n.highlightedPlayer?[n.highlightedPlayer]:[],V=D.length>0,Y=()=>D.length===0?"Vainqueur":D.length===1?D[0]+" (victoire)":D.length===2?D.join(" & ")+" (victoires)":`${D.slice(0,2).join(" & ")} (+${D.length-2}) (victoires)`,A=l=>{if(!V)return"";if(!i&&s)return(l.winners?l.winners.split(",").map(E=>E.trim()):[]).filter(E=>D.some(K=>K.toLowerCase()===E.toLowerCase())).length>0?"âœ…":"âŒ";const f=l.playersList?l.playersList.split(",").map(C=>C.trim()):[];return D.filter(C=>f.some(L=>L.toLowerCase()===C.toLowerCase())).length===0?"Pas dans la partie":(l.winners?l.winners.split(",").map(C=>C.trim()):[]).filter(C=>D.some(L=>L.toLowerCase()===C.toLowerCase())).length>0?"âœ…":"âŒ"},R=F.useMemo(()=>r?[...r].sort((l,f)=>{let x,j;switch(u){case"date":x=new Date(l.date.split("/").reverse().join("-")).getTime(),j=new Date(f.date.split("/").reverse().join("-")).getTime();break;case"gameId":x=parseInt(l.gameId,10),j=parseInt(f.gameId,10);break;case"playerCount":x=l.playerCount,j=f.playerCount;break;case"gameDuration":x=l.gameDuration||0,j=f.gameDuration||0;break;case"winningCamp":x=l.winningCamp,j=f.winningCamp;break;case"winner":x=A(l),j=A(f);break;default:return 0}let G;if(g==="asc"?G=x>j?1:x<j?-1:0:G=x<j?1:x>j?-1:0,G===0){const C=parseInt(l.gameId,10),L=parseInt(f.gameId,10);return g==="asc"?C-L:L-C}return G}):[],[r,u,g]),I=Math.ceil(R.length/b),U=(y-1)*b,B=U+b,z=R.slice(U,B);F.useEffect(()=>{if(h.current){h.current=!1;return}P(1),w(null)},[r]),F.useEffect(()=>{P(1),w(null)},[u,g]);const S=l=>{h.current=!0,P(l),w(null)},_=l=>{h.current=!0,T(l),P(1),w(null)},W=l=>{h.current=!0,w(N===l?null:l)},M=l=>{u===l?p(g==="asc"?"desc":"asc"):(m(l),p("desc"))},$=l=>u!==l?"â†•ï¸":g==="asc"?"â†—ï¸":"â†˜ï¸",q=()=>{const l=[];if(e.selectedPlayer&&e.campFilter){const f=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",x=e.campFilter.excludeTraitor&&e.campFilter.selectedCamp==="Loup"?"Loups sans TraÃ®tre":e.campFilter.selectedCamp;l.push(`${e.selectedPlayer} jouant ${x}${f}`)}else{if(e.selectedPlayer){const f=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":e.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";l.push(`Joueur: ${e.selectedPlayer}${f}`)}if(e.campFilter){const{selectedCamp:f,campFilterMode:x,excludeTraitor:j}=e.campFilter,C=`Camp: ${j&&f==="Loup"?"Loups sans TraÃ®tre":f}`,L=x==="wins-only"?" (victoires uniquement)":x==="all-assignments"?" (toutes assignations)":"";l.push(C+L)}}if(e.selectedMapName){const f=e.selectedMapName==="Autres"?"autres cartes":e.selectedMapName;l.push(`Carte: ${f}`)}if(e.playerPairFilter){const{selectedPlayerPair:f,selectedPairRole:x}=e.playerPairFilter,j=f.join(" & "),G=x==="wolves"?"loups":"amoureux";l.push(`Paire ${G}: ${j}`)}if(e.multiPlayerFilter){const{selectedPlayers:f,playersFilterMode:x,winnerPlayer:j}=e.multiPlayerFilter,G=f.join(" & ");let C="";x==="all-common-games"?C="toutes les parties communes":x==="opposing-camps"?C="affrontements uniquement":x==="same-camp"&&(C="parties en Ã©quipe (mÃªme camp)");const L=j?` (victoires de ${j})`:"";l.push(`${G} (${C}${L})`)}return e.selectedVictoryType&&l.push(`Victoire: ${e.selectedVictoryType}`),e.selectedHarvestRange&&l.push(`RÃ©colte: ${e.selectedHarvestRange}`),e.selectedGameDuration&&l.push(`DurÃ©e: ${e.selectedGameDuration} jour${e.selectedGameDuration>1?"s":""}`),e.selectedGame&&l.push(`Partie ${e.selectedGame}`),e.selectedDate&&(e.selectedDate.includes("/")&&e.selectedDate.split("/").length===2?l.push(`Mois: ${e.selectedDate}`):l.push(`Date: ${e.selectedDate}`)),e.selectedGameIds&&e.selectedGameIds.length>0&&l.push(`${e.selectedGameIds.length} parties sÃ©lectionnÃ©e${e.selectedGameIds.length>1?"s":""}`),l};return o?a.jsx("div",{className:"statistiques-chargement",children:"Chargement des dÃ©tails des parties..."}):c?a.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",c]}):!r||r.length===0?a.jsxs("div",{className:"lycans-empty-section",children:[a.jsx("h2",{children:"Aucune partie trouvÃ©e"}),a.jsx("p",{children:"Aucune partie ne correspond aux critÃ¨res sÃ©lectionnÃ©s."}),e.fromComponent&&a.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["â† Retour Ã  ",e.fromComponent]})]}):a.jsxs("div",{className:"lycans-game-details",children:[a.jsxs("div",{className:"lycans-game-details-header",children:[a.jsxs("div",{className:"lycans-game-details-navigation",children:[e.fromComponent&&a.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["â† Retour Ã  ",e.fromComponent]}),a.jsxs("h2",{children:["DÃ©tails des Parties (",r.length," partie",r.length>1?"s":"",")"]})]}),q().length>0&&a.jsxs("div",{className:"lycans-active-filters",children:[a.jsx("strong",{children:"Filtres actifs:"})," ",q().join(", ")]})]}),I>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",U+1," Ã  ",Math.min(B,R.length)," sur ",R.length," parties"]}),a.jsxs("div",{className:"lycans-pagination-controls",children:[a.jsxs("select",{value:b,onChange:l=>_(Number(l.target.value)),className:"lycans-pagination-select",children:[a.jsx("option",{value:10,children:"10 par page"}),a.jsx("option",{value:25,children:"25 par page"}),a.jsx("option",{value:50,children:"50 par page"}),a.jsx("option",{value:100,children:"100 par page"})]}),a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>S(1),disabled:y===1,className:"lycans-pagination-btn",children:"Â«Â«"}),a.jsx("button",{onClick:()=>S(y-1),disabled:y===1,className:"lycans-pagination-btn",children:"â€¹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",y," sur ",I]}),a.jsx("button",{onClick:()=>S(y+1),disabled:y===I,className:"lycans-pagination-btn",children:"â€º"}),a.jsx("button",{onClick:()=>S(I),disabled:y===I,className:"lycans-pagination-btn",children:"Â»Â»"})]})]})]}),a.jsx("div",{className:"lycans-games-table-container",children:a.jsxs("table",{className:"lycans-games-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsxs("th",{onClick:()=>M("gameId"),className:"sortable",children:["Partie ",$("gameId")]}),a.jsxs("th",{onClick:()=>M("date"),className:"sortable",children:["Date ",$("date")]}),a.jsxs("th",{onClick:()=>M("playerCount"),className:"sortable",children:["Joueurs ",$("playerCount")]}),a.jsxs("th",{onClick:()=>M("gameDuration"),className:"sortable",children:["DurÃ©e ",$("gameDuration")]}),a.jsxs("th",{onClick:()=>M("winningCamp"),className:"sortable",children:["Camp Vainqueur ",$("winningCamp")]}),V&&a.jsxs("th",{onClick:()=>M("winner"),className:"sortable",children:[Y()," ",$("winner")]}),a.jsx("th",{children:"DÃ©tails"})]})}),a.jsx("tbody",{children:z.map(l=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:`${N===l.gameId?"selected":""} clickable-row`,onClick:()=>W(l.gameId),style:{cursor:"pointer"},children:[a.jsxs("td",{children:["#",l.gameId]}),a.jsx("td",{children:l.date}),a.jsx("td",{children:l.playerCount}),a.jsx("td",{children:ve(l.gameDuration)}),a.jsx("td",{style:{color:d[l.winningCamp]||"#fff"},children:l.winningCamp}),V&&a.jsx("td",{style:{textAlign:"left",fontSize:"1.2rem",verticalAlign:"middle"},children:A(l)}),a.jsx("td",{children:a.jsx("button",{onClick:f=>{f.stopPropagation(),W(l.gameId)},className:"lycans-details-btn",children:N===l.gameId?"Masquer":"Voir"})})]},l.gameId),N===l.gameId&&a.jsx("tr",{className:"game-details-row",children:a.jsx("td",{colSpan:V?8:7,children:a.jsx(Ce,{game:l})})},`${l.gameId}-details`)]}))})]})}),I>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",U+1," Ã  ",Math.min(B,R.length)," sur ",R.length," parties"]}),a.jsx("div",{className:"lycans-pagination-controls",children:a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>S(1),disabled:y===1,className:"lycans-pagination-btn",children:"Â«Â«"}),a.jsx("button",{onClick:()=>S(y-1),disabled:y===1,className:"lycans-pagination-btn",children:"â€¹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",y," sur ",I]}),a.jsx("button",{onClick:()=>S(y+1),disabled:y===I,className:"lycans-pagination-btn",children:"â€º"}),a.jsx("button",{onClick:()=>S(I),disabled:y===I,className:"lycans-pagination-btn",children:"Â»Â»"})]})})]})]})}function ve(e){if(e===null||e<=0)return"N/A";const t=Math.floor(e/60),n=e%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}export{Le as GameDetailsChart};
