function a(e){if(!e)return{videoId:null,timestamp:null};try{const t=new URL(e);let n=null,r=null;t.hostname==="youtu.be"?n=t.pathname.slice(1):(t.hostname==="www.youtube.com"||t.hostname==="youtube.com")&&(n=t.searchParams.get("v"));const o=t.searchParams.get("t");if(o)if(/^\d+$/.test(o))r=parseInt(o,10);else{const s=o.match(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?/);if(s){const i=parseInt(s[1]||"0",10),u=parseInt(s[2]||"0",10),l=parseInt(s[3]||"0",10);r=i*3600+u*60+l}}return{videoId:n,timestamp:r}}catch{return console.warn("Failed to parse YouTube URL:",e),{videoId:null,timestamp:null}}}function c(e,t){if(!e||!t)return null;try{const s=new Date(e),i=new Date(t);if(!isNaN(s.getTime())&&!isNaN(i.getTime())){const u=i.getTime()-s.getTime();return u>0?Math.round(u/1e3):null}}catch{}const n=a(e),r=a(t);if(n.timestamp===null||r.timestamp===null)return null;const o=r.timestamp-n.timestamp;return o>0?o:null}function m(e){const t=Math.floor(e/60),n=Math.round(e%60);return`${t}:${n.toString().padStart(2,"0")}`}function f(e,t){if(!e)return"Villageois";let n;n=t||{};const{regroupLovers:r=!0,regroupVillagers:o=!0,regroupTraitor:s=!1}=n;return e==="Amoureux Loup"||e==="Amoureux Villageois"?r?"Amoureux":e:e==="Chasseur"||e==="Alchimiste"?o?"Villageois":e:e==="Traître"&&s?"Loup":e}function p(e){const t=e.PlayerStats.filter(r=>r.Victorious);let n="";if(t.length>0){const r=t.map(o=>o.MainRoleInitial);if(r.includes("Loup")||r.includes("Traître"))n="Loup";else if(r.includes("Amoureux Loup")||r.includes("Amoureux Villageois")||r.includes("Amoureux"))n="Amoureux";else if(r.includes("Villageois")||r.includes("Chasseur")||r.includes("Alchimiste"))n="Villageois";else{const o=r.filter(s=>!["Villageois","Loup","Traître","Chasseur","Alchimiste","Amoureux Loup","Amoureux Villageois"].includes(s));o.length>0?n=o[0]:n="Villageois"}return n}return"Villageois"}function g(e){if(!e)return"";const t=e.charAt(0),n=e.slice(1),o={J:"Jour",N:"Nuit",M:"Meeting",U:"Journée"}[t]||"Moment inconnu",s=i=>{const u=parseInt(i);return u===1?"1ère":`${u}ème`};return t==="U"?`${s(n)} journée`:`${o} de la ${s(n)} journée`}export{p as a,g as b,c,m as f,f as g};
