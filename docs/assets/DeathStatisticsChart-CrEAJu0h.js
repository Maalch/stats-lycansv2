import{u as ye,r as H,c as ve,a as xe,j as e}from"./index-i4QS7rG7.js";import{u as le}from"./baseStatsHook-D7t6xw7t.js";import{b as V,D as l,g as z}from"./datasyncExport-B2TMu2Nk.js";import{c as ae,a as fe,m as re}from"./api-Bvxy60s6.js";import{F as W,B as G,C as U,X as q,Y as w,a as $}from"./FullscreenChart-CZOorMsP.js";import{R as Z,T as J}from"./CategoricalChart-Bx9WMv4B.js";function Se(S){const p=new Set;S.filter(s=>!s.LegacyData||s.LegacyData.deathInformationFilled===!0).forEach(s=>{s.PlayerStats.forEach(N=>{const F=z(N.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});p.add(F)})});const a=Array.from(p);return[...ae.filter(s=>a.includes(s)),...a.filter(s=>!ae.includes(s)).sort()]}function ie(S){switch(S){case l.SURVIVOR:return"Survivant";case l.VOTE:return"Mort aux votes";case l.WEREWOLF_KILL:return"Tué par un loup";case l.HUNTER_SHOT:return"Abattu par un chasseur";case l.BOUNTY_HUNTER:return"Tué par un chasseur de primes";case l.LOVER_DEATH:return"Mort par amoureux";case l.LOVER_WEREWOLF:return"Tué par un loup amoureux";case l.BEAST_KILL:return"Dévoré par la Bête";case l.ASSASSIN_POTION:return"Tué par une potion (Assassin)";case l.HAUNTED_POTION:return"Tué par une potion (Hanté)";case l.ZOMBIE_KILL:return"Tué par un zombie";case l.RESURRECTED_WEREWOLF:return"Tué par un loup ressuscité";case l.AVENGER_KILL:return"Tué par un vengeur";case l.AGENT_KILL:return"Éliminé par l'Agent";case l.SHERIFF_KILL:return"Abattu par le Shérif";case l.EXPLOSION:return"Mort dans une explosion";case l.CRUSHED:return"Écrasé";case l.STARVATION:return"Mort de faim";case l.FALL_DEATH:return"Mort de chute";case l.BESTIAL_DEATH:return"Mort bestiale";case l.AVATAR_DEATH:return"Mort liée à l'Avatar";case l.DISCONNECT:return"Déconnexion";case l.UNKNOWN:default:return"Mort inconnue"}}function se(S){switch(S){case l.SURVIVOR:return"Survivant";case l.VOTE:return"Mort aux votes";case l.WEREWOLF_KILL:return"Kill en Loup";case l.HUNTER_SHOT:return"Tir de Chasseur";case l.BOUNTY_HUNTER:return"Kill en Chasseur de primes";case l.LOVER_DEATH:return"Kill de son amoureux";case l.LOVER_WEREWOLF:return"Kill en Loup amoureux";case l.BEAST_KILL:return"Kill en Bête";case l.ASSASSIN_POTION:return"Kill avec Potion (Assassin)";case l.HAUNTED_POTION:return"Kill avec Potion (Hanté)";case l.ZOMBIE_KILL:return"Kill en Zombie";case l.RESURRECTED_WEREWOLF:return"Kill en Loup ressuscité";case l.AVENGER_KILL:return"Kill en Vengeur";case l.AGENT_KILL:return"Kill en Agent";case l.SHERIFF_KILL:return"Kill en Shérif";case l.EXPLOSION:return"Explosion";case l.CRUSHED:return"Écrasement";case l.STARVATION:return"Famine";case l.FALL_DEATH:return"Chute mortelle";case l.BESTIAL_DEATH:return"Tuerie bestiale";case l.AVATAR_DEATH:return"Mort d'Avatar";case l.DISCONNECT:return"Déconnexion";case l.UNKNOWN:default:return"Kill inconnu"}}function Te(S){const p=new Set;S.forEach(f=>{f.PlayerStats.forEach(s=>{if(s.DeathType){const N=V(s.DeathType);p.add(N)}})});const x=Array.from(p),a=[l.WEREWOLF_KILL,l.VOTE,l.HUNTER_SHOT,l.ZOMBIE_KILL,l.ASSASSIN_POTION,l.HAUNTED_POTION,l.AVENGER_KILL,l.LOVER_DEATH,l.SURVIVOR];return[...a.filter(f=>x.includes(f)),...x.filter(f=>!a.includes(f)).sort()]}function je(S,p){return S.PlayerStats.filter(x=>V(x.DeathType)!=="SURVIVOR"&&(x.DeathTiming||x.DeathType)).map(x=>{let a=null;if(x.KillerName){const s=S.PlayerStats.find(N=>N.Username===x.KillerName);s&&(a=z(s.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1}),s.MainRoleFinal&&s.MainRoleFinal!==s.MainRoleInitial&&(s.MainRoleFinal==="Loup"?a="Loup":s.MainRoleFinal==="Zombie"&&(a="Vaudou")))}const f=V(x.DeathType);return{playerName:x.Username,deathType:f,killerName:x.KillerName,killerCamp:a}}).filter(x=>{if(!p||p==="Tous les camps")return!0;const a=S.PlayerStats.find(s=>s.Username===x.playerName);return a?z(a.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===p:!1})}function De(S,p){const x=[];return S.PlayerStats.forEach(a=>{if(a.KillerName&&a.DeathType){const f=V(a.DeathType);if(f==="SURVIVOR"||f==="VOTE"||f==="DISCONNECT"||f==="STARVATION"||f==="FALL_DEATH"||f==="AVATAR_DEATH")return;const s=S.PlayerStats.find(F=>F.Username===a.KillerName);if(!s)return;let N=z(s.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});s.MainRoleFinal&&s.MainRoleFinal!==s.MainRoleInitial&&(s.MainRoleFinal==="Loup"?N="Loup":s.MainRoleFinal==="Zombie"&&(N="Vaudou")),x.push({killerName:a.KillerName,victimName:a.Username,deathType:f,killerCamp:N})}}),p&&p!=="Tous les camps"?x.filter(a=>a.killerCamp===p):x}function Ae(S,p){if(S.length===0)return null;const x=S.filter(m=>!m.LegacyData||m.LegacyData.deathInformationFilled===!0);if(x.length===0)return null;const a=[],f={};x.forEach(m=>{je(m,p).forEach(j=>{a.push({...j,gameId:m.Id})}),m.PlayerStats.forEach(j=>{const k=j.Username;(!p||p==="Tous les camps"||z(j.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===p)&&(f[k]=(f[k]||0)+1)})});const s=a.length,N=x.length,F=N>0?s/N:0,P={};a.forEach(m=>{P[m.deathType]=(P[m.deathType]||0)+1});const _=Object.entries(P).map(([m,u])=>({type:m,count:u||0,percentage:s>0?(u||0)/s*100:0})).sort((m,u)=>u.count-m.count),O={};x.forEach(m=>{De(m,p).forEach(j=>{O[j.killerName]||(O[j.killerName]={kills:0,victims:new Set,killsByDeathType:{}}),O[j.killerName].kills++,O[j.killerName].victims.add(j.victimName),O[j.killerName].killsByDeathType[j.deathType]=(O[j.killerName].killsByDeathType[j.deathType]||0)+1})});const B=Object.entries(O).map(([m,u])=>{const j=f[m]||0,k=j>0?u.kills/j:0;return{killerName:m,kills:u.kills,victims:Array.from(u.victims),percentage:s>0?u.kills/s*100:0,gamesPlayed:j,averageKillsPerGame:k,killsByDeathType:u.killsByDeathType}}).sort((m,u)=>u.kills-m.kills),o={};a.forEach(m=>{o[m.playerName]||(o[m.playerName]={totalDeaths:0,deathsByType:{},killedBy:{},deathDays:[]});const u=o[m.playerName];u.totalDeaths++,u.deathsByType[m.deathType]=(u.deathsByType[m.deathType]||0)+1,m.killerName&&(u.killedBy[m.killerName]=(u.killedBy[m.killerName]||0)+1)});const M=Object.entries(o).map(([m,u])=>({playerName:m,totalDeaths:u.totalDeaths,deathsByType:u.deathsByType,killedBy:u.killedBy,averageDeathDay:u.deathDays.length>0?u.deathDays.reduce((j,k)=>j+k,0)/u.deathDays.length:null,deathRate:f[m]>0?u.totalDeaths/f[m]:0})).sort((m,u)=>u.totalDeaths-m.totalDeaths),T=_.length>0?_[0].type:null,K=B.length>0?B[0].killerName:null;return{totalDeaths:s,totalGames:N,averageDeathsPerGame:F,deathsByType:_,killerStats:B,playerDeathStats:M,mostCommonDeathType:T,mostDeadlyKiller:K}}function Pe(S){return le(p=>Ae(p,S))}function Re(){return le(S=>Se(S))}function ke(){const{navigateToGameDetails:S,navigationState:p,updateNavigationState:x}=ye(),[a,f]=H.useState(p.deathStatisticsState?.selectedCamp||p.deathStatsSelectedCamp||"Tous les camps"),[s,N]=H.useState(p.deathStatisticsState?.minGamesForAverage||10),{data:F}=Re(),{data:P,isLoading:_,error:O}=Pe(a),{data:B}=ve(),{settings:o}=xe(),M=fe();H.useEffect(()=>{(!p.deathStatisticsState||p.deathStatisticsState.selectedCamp!==a||p.deathStatisticsState.minGamesForAverage!==s)&&x({deathStatisticsState:{selectedCamp:a,minGamesForAverage:s,focusChart:p.deathStatisticsState?.focusChart}})},[a,s,p.deathStatisticsState,x]);const T=H.useMemo(()=>B?Te(B):[],[B]),K=H.useMemo(()=>{const t={};T.forEach(r=>{r==="WEREWOLF_KILL"?t[r]=M.Loup:r==="VOTE"?t[r]="var(--chart-color-1)":r==="HUNTER_SHOT"?t[r]=M.Chasseur:r==="ZOMBIE_KILL"?t[r]=M.Vaudou:r==="ASSASSIN_POTION"||r==="HAUNTED_POTION"?t[r]=M.Alchimiste:r==="AVENGER_KILL"?t[r]="var(--chart-color-2)":r==="LOVER_DEATH"||r==="LOVER_WEREWOLF"?t[r]=M.Amoureux:r==="DISCONNECT"?t[r]="var(--chart-color-3)":r==="SURVIVOR"&&(t[r]="var(--chart-color-4)")});const d=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let c=0;return T.forEach(r=>{t[r]||(t[r]=d[c%d.length],c++)}),t},[T,M]),m=t=>{f(t),x({deathStatsSelectedCamp:t,deathStatisticsState:{selectedCamp:t,minGamesForAverage:s,focusChart:p.deathStatisticsState?.focusChart}})},u=t=>{N(t),x({deathStatisticsState:{selectedCamp:a,minGamesForAverage:t,focusChart:p.deathStatisticsState?.focusChart}})},{totalKillsData:j,averageKillsData:k,highlightedPlayerAddedToTotal:Q,highlightedPlayerAddedToAverage:ne,gamesWithKillers:oe,totalEligibleForAverage:ce}=H.useMemo(()=>{if(!P)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1,gamesWithKillers:0,totalEligibleForAverage:0};const t=P.killerStats.sort((n,y)=>y.kills-n.kills).slice(0,15),d=o.highlightedPlayer&&t.some(n=>n.killerName===o.highlightedPlayer),c=t.map(n=>{const y={name:n.killerName,value:n.kills,victims:n.victims.length,percentage:n.percentage,gamesPlayed:n.gamesPlayed,averageKillsPerGame:n.averageKillsPerGame,isHighlightedAddition:!1};return T.forEach(A=>{y[A]=n.killsByDeathType[A]||0}),y});let r=!1;if(o.highlightedPlayer&&!d){const n=P.killerStats.find(y=>y.killerName===o.highlightedPlayer);if(n){const y={name:n.killerName,value:n.kills,victims:n.victims.length,percentage:n.percentage,gamesPlayed:n.gamesPlayed,averageKillsPerGame:n.averageKillsPerGame,isHighlightedAddition:!0};T.forEach(A=>{y[A]=n.killsByDeathType[A]||0}),c.push(y),r=!0}}const D=P.killerStats.filter(n=>n.gamesPlayed>=s),b=D.sort((n,y)=>y.averageKillsPerGame-n.averageKillsPerGame).slice(0,15),L=o.highlightedPlayer&&b.some(n=>n.killerName===o.highlightedPlayer),g=b.map(n=>{const y={name:n.killerName,value:n.averageKillsPerGame,victims:n.victims.length,percentage:n.percentage,gamesPlayed:n.gamesPlayed,averageKillsPerGame:n.averageKillsPerGame,isHighlightedAddition:!1};return T.forEach(A=>{const C=n.killsByDeathType[A]||0;y[A]=n.gamesPlayed>0?C/n.gamesPlayed:0}),y});let R=!1;if(o.highlightedPlayer&&!L){const n=P.killerStats.find(y=>y.killerName===o.highlightedPlayer);if(n){const y={name:n.killerName,value:n.averageKillsPerGame,victims:n.victims.length,percentage:n.percentage,gamesPlayed:n.gamesPlayed,averageKillsPerGame:n.averageKillsPerGame,isHighlightedAddition:!0};T.forEach(A=>{const C=n.killsByDeathType[A]||0;y[A]=n.gamesPlayed>0?C/n.gamesPlayed:0}),g.push(y),R=!0}}return{totalKillsData:c,averageKillsData:g,highlightedPlayerAddedToTotal:r,highlightedPlayerAddedToAverage:R,gamesWithKillers:P.totalGames,totalEligibleForAverage:D.length}},[P,o.highlightedPlayer,s,T]),{totalDeathsData:ee,survivalRateData:te,highlightedPlayerAddedToDeaths:he,highlightedPlayerAddedToSurvival:de}=H.useMemo(()=>{if(!P||!B)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const t={},d=B.filter(i=>!i.LegacyData||i.LegacyData.deathInformationFilled===!0);d.forEach(i=>{i.PlayerStats.forEach(h=>{const v=h.Username;(!a||a==="Tous les camps"||z(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===a)&&(t[v]=(t[v]||0)+1)})});const c=P.playerDeathStats.sort((i,h)=>h.totalDeaths-i.totalDeaths).slice(0,15),r=o.highlightedPlayer&&c.some(i=>i.playerName===o.highlightedPlayer),D=c.map(i=>{const h=t[i.playerName]||0,v=h>0?(h-i.totalDeaths)/h*100:0,E={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:h,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!1};return T.forEach(I=>{E[I]=i.deathsByType[I]||0}),E});let b=!1;if(o.highlightedPlayer&&!r){const i=P.playerDeathStats.find(h=>h.playerName===o.highlightedPlayer);if(i){const h=t[i.playerName]||0,v=h>0?(h-i.totalDeaths)/h*100:0,E={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:h,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!0};T.forEach(I=>{E[I]=i.deathsByType[I]||0}),D.push(E),b=!0}}const L={},g={};d.forEach(i=>{i.PlayerStats.forEach(h=>{const v=h.Username;if((!a||a==="Tous les camps"||z(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===a)&&h.DeathType&&h.DeathType!=="N/A"){g[v]||(g[v]={totalDeaths:0,deathsByType:{}}),g[v].totalDeaths++;const I=V(h.DeathType);g[v].deathsByType[I]=(g[v].deathsByType[I]||0)+1}})}),Object.entries(t).forEach(([i,h])=>{if(h>=s){const v=g[i],E=v?v.totalDeaths:0,I=v?v.deathsByType:{},X=h>0?(h-E)/h*100:0,Y=h>0?E/h:0;L[i]={playerName:i,totalDeaths:E,deathsByType:I,gamesPlayed:h,survivalRate:X,deathRate:Y}}});const n=Object.values(L).sort((i,h)=>h.survivalRate-i.survivalRate).slice(0,15),y=o.highlightedPlayer&&n.some(i=>i.playerName===o.highlightedPlayer),A=n.map(i=>{const h={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!1};return T.forEach(v=>{const E=i.deathsByType[v]||0;h[v]=i.gamesPlayed>0?E/i.gamesPlayed*100:0}),h});let C=!1;if(o.highlightedPlayer&&!y){let i=L[o.highlightedPlayer];if(!i){const h=t[o.highlightedPlayer]||0,v=g[o.highlightedPlayer],E=v?v.totalDeaths:0,I=v?v.deathsByType:{},X=h>0?(h-E)/h*100:0,Y=h>0?E/h:0;i={playerName:o.highlightedPlayer,totalDeaths:E,deathsByType:I,gamesPlayed:h,survivalRate:X,deathRate:Y}}if(i){const h={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!0};T.forEach(v=>{const E=i.deathsByType[v]||0;h[v]=i.gamesPlayed>0?E/i.gamesPlayed*100:0}),A.push(h),C=!0}}return{totalDeathsData:D,survivalRateData:A,highlightedPlayerAddedToDeaths:b,highlightedPlayerAddedToSurvival:C}},[P,B,o.highlightedPlayer,s,T,a]);if(_)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."});if(O)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",O]});if(!P)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de mort disponible"});const me=({active:t,payload:d,label:c})=>{if(t&&d&&d.length){const r=d[0].payload,D=r.isHighlightedAddition,b=o.highlightedPlayer===r.name,L=T.reduce((g,R)=>g+(r[R]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:b?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",L]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",r.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill:"}),T.map(g=>{const R=r[g]||0;return R===0?null:e.jsxs("p",{style:{color:K[g],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:K[g],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[se(g),":"]})," ",R]},g)})]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),b&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},ge=({active:t,payload:d,label:c})=>{if(t&&d&&d.length){const r=d[0].payload,D=r.isHighlightedAddition,b=o.highlightedPlayer===r.name,L=r.gamesPlayed>=s,g=P?.killerStats.find(y=>y.killerName===r.name),R=T.reduce((y,A)=>y+(r[A]||0),0),n=g?g.kills:Math.round(R*r.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:b?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",R.toFixed(2)," (",n," kills /",r.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",r.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill (moyenne):"}),T.map(y=>{const A=r[y]||0;if(A===0)return null;const C=g?g.killsByDeathType[y]||0:Math.round(A*r.gamesPlayed);return e.jsxs("p",{style:{color:K[y],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:K[y],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[se(y),":"]})," ",A.toFixed(2)," (",C," kills /",r.gamesPlayed," games)"]},y)})]}),D&&!L&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",s," parties)"]}),D&&L&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),b&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},ue=({active:t,payload:d,label:c})=>{if(t&&d&&d.length){const r=d[0].payload,D=r.isHighlightedAddition,b=o.highlightedPlayer===r.name,L=T.reduce((g,R)=>g+(r[R]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:b?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",L]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",r.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",r.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort:"}),T.map(g=>{const R=r[g]||0;return R===0?null:e.jsxs("p",{style:{color:K[g],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:K[g],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(g),":"]})," ",R]},g)})]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),b&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},pe=({active:t,payload:d,label:c})=>{if(t&&d&&d.length){const r=d[0].payload,D=r.isHighlightedAddition,b=o.highlightedPlayer===r.name,L=r.gamesPlayed>=s;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:b?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",r.survivalRate.toFixed(1),"% (",r.gamesPlayed-r.totalDeaths," survies / ",r.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",r.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",r.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort (taux %):"}),T.map(g=>{const R=r[g]||0;return R===0?null:e.jsxs("p",{style:{color:K[g],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:K[g],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(g),":"]})," ",R.toFixed(1),"%"]},g)})]}),D&&!L&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",s," parties)"]}),D&&L&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),b&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"Statistiques de Tueurs"}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:a,onChange:t=>m(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),F?.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:P.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiés"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:P.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrées"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:oe})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:a==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${a} (Total)`}),Q&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(W,{title:a==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${a} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(G,{data:j,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:c})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:c.value})}),e.jsx(w,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(me,{})}),T.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"kills",fill:K[t],onClick:d=>{const c={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};a!=="Tous les camps"&&(c.campFilter={selectedCamp:a,campFilterMode:"all-assignments"}),S(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:a==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${a} (Moyenne par partie)`}),ne&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:s,onChange:t=>u(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(W,{title:a==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${a} (Moyenne par partie)`,children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(G,{data:k,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:c})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:c.value})}),e.jsx(w,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(ge,{})}),T.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"averageKills",fill:K[t],onClick:d=>{const c={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};a!=="Tous les camps"&&(c.campFilter={selectedCamp:a,campFilterMode:"all-assignments"}),S(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,k.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",ce," ayant au moins ",s," partie",s>1?"s":"",")"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:a==="Tous les camps"?"Morts (Total)":`Morts en ${a} (Total)`}),he&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(W,{title:a==="Tous les camps"?"Morts (Total)":`Morts en ${a} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(G,{data:ee,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:c})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:c.value})}),e.jsx(w,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(ue,{})}),T.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"deaths",fill:K[t],onClick:d=>{const c={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};a!=="Tous les camps"&&(c.campFilter={selectedCamp:a,campFilterMode:"all-assignments"}),S(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,ee.filter(t=>!t.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",a==="Tous les camps"?"(Total)":` en ${a}`]}),de&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:s,onChange:t=>u(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(W,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(G,{data:te,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:c})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:c.value})}),e.jsx(w,{label:{value:"Taux de mort (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(pe,{})}),T.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"survivalRate",fill:K[t],onClick:d=>{const c={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};a!=="Tous les camps"&&(c.campFilter={selectedCamp:a,campFilterMode:"all-assignments"}),S(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,te.filter(t=>!t.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",s," partie",s>1?"s":"",")"]})]})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"Données en cours de récupération (données partielles)."]})})]})}export{ke as DeathStatisticsChart};
