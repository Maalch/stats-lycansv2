import{r as f,j as s}from"./index-MQfKgXjG.js";function x(e){if(!e)return null;try{const n=new URL(e);let l=null;if(n.hostname==="clips.twitch.tv")l=n.pathname.split("/")[1];else if(n.hostname.includes("twitch.tv")){const i=n.pathname.split("/"),r=i.indexOf("clip");r!==-1&&i[r+1]&&(l=i[r+1])}if(l)return`https://clips.twitch.tv/embed?clip=${l}&parent=${window.location.hostname}`}catch(n){console.warn("Failed to parse Twitch clip URL:",e,n)}return null}function d(e){return e.NewName?e.NewName:e.ClipName?e.ClipName:`Clip ${e.ClipId}`}function m(e){return e?e.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function N(e){return e?e.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function v(e){const n=[e.POVPlayer],l=m(e.OthersPlayers);return[...n,...l]}function j(e,n){const l=n.toLowerCase();return e.filter(i=>v(i).map(c=>c.toLowerCase()).includes(l))}function g(e){const n=new Set;return e.forEach(l=>{Array.isArray(l.Tags)&&l.Tags.forEach(i=>n.add(i))}),Array.from(n).sort()}function C(e,n){const l=N(e.RelatedClips);return n.filter(i=>l.includes(i.ClipId))}function b(e,n){return e.NextClip&&n.find(l=>l.ClipId===e.NextClip)||null}function P({clip:e,onClose:n,onNextClip:l,onRelatedClip:i,onRandomClip:r,relatedClips:c=[],nextClip:o=null}){f.useEffect(()=>{const a=t=>{t.key==="Escape"&&n()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[n]);const p=x(e.ClipUrl),h=d(e),y=m(e.OthersPlayers),u=Array.isArray(e.Tags)&&e.Tags.some(a=>a.toLowerCase().includes("warning sonore"));return s.jsx("div",{className:"lycans-clip-viewer-overlay",onClick:n,children:s.jsxs("div",{className:"lycans-clip-viewer-container",onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"lycans-clip-viewer-header",children:[s.jsxs("div",{className:"lycans-clip-viewer-title",children:[s.jsx("h2",{children:h}),Array.isArray(e.Tags)&&e.Tags.filter(a=>!a.toLowerCase().includes("warning")).length>0&&s.jsx("div",{className:"lycans-clip-tags",children:e.Tags.filter(a=>!a.toLowerCase().includes("warning")).map((a,t)=>s.jsx("span",{className:"lycans-clip-tag",children:a},t))})]}),s.jsx("button",{className:"lycans-clip-viewer-close",onClick:n,children:"âœ•"})]}),u&&s.jsxs("div",{className:"lycans-clip-warning-banner",children:[s.jsx("span",{className:"lycans-clip-warning-icon",children:"âš ï¸ ðŸ”Š"}),s.jsx("span",{className:"lycans-clip-warning-text",children:"Attention : Ce clip contient un son fort"})]}),s.jsxs("div",{className:"lycans-clip-viewer-content",children:[s.jsx("div",{className:"lycans-clip-player",children:p?s.jsx("iframe",{src:p,frameBorder:"0",allowFullScreen:!0,scrolling:"no",title:h}):s.jsxs("div",{className:"lycans-clip-no-video",children:[s.jsx("p",{children:"VidÃ©o non disponible"}),e.ClipUrl&&s.jsx("a",{href:e.ClipUrl,target:"_blank",rel:"noopener noreferrer",children:"Voir sur Twitch"})]})}),s.jsxs("div",{className:"lycans-clip-metadata",children:[s.jsxs("div",{className:"lycans-clip-info-section",children:[s.jsx("h3",{children:"Joueurs"}),s.jsxs("div",{className:"lycans-clip-players",children:[s.jsxs("div",{className:"lycans-clip-pov-player",children:[s.jsx("span",{className:"lycans-clip-pov-badge",children:"POV"}),s.jsx("span",{className:"lycans-clip-player-name",children:e.POVPlayer})]}),y.length>0&&s.jsx("div",{className:"lycans-clip-other-players",children:y.map((a,t)=>s.jsx("span",{className:"lycans-clip-player-name",children:a},t))})]})]}),e.AdditionalInfo&&s.jsxs("div",{className:"lycans-clip-info-section",children:[s.jsx("h3",{children:"PrÃ©cision"}),s.jsx("p",{className:"lycans-clip-description",children:e.AdditionalInfo})]}),(o||c.length>0||r)&&s.jsxs("div",{className:"lycans-clip-info-section",children:[s.jsx("h3",{children:"Navigation"}),s.jsxs("div",{className:"lycans-clip-navigation",children:[r&&s.jsx("button",{className:"lycans-clip-nav-btn lycans-clip-random-btn",onClick:r,title:"Lire un clip alÃ©atoire",children:"ðŸŽ² Clip alÃ©atoire"}),o&&l&&s.jsxs("button",{className:"lycans-clip-nav-btn lycans-clip-next-btn",onClick:l,children:["â–¶ Suivant: ",d(o)]}),c.length>0&&i&&s.jsxs("div",{className:"lycans-clip-related-clips",children:[s.jsx("p",{className:"lycans-clip-related-label",children:"Autres POV:"}),c.map(a=>s.jsxs("button",{className:"lycans-clip-nav-btn lycans-clip-related-btn",onClick:()=>i(a.ClipId),children:[d(a)," (",a.POVPlayer,")"]},a.ClipId))]})]})]})]})]})]})})}export{P as C,C as a,j as b,g as c,v as d,b as f,d as g,m as p};
