import{r as n,j as e}from"./index-EzEkAVIm.js";import{R as m,B as p,C as f,X as x,Y as d,T as g,a as h,b as j}from"./BarChart-DLpEM1GY.js";function y(){const[t,o]=n.useState(null),[r,s]=n.useState(!0),[a,u]=n.useState(null);return n.useEffect(()=>{(async()=>{try{s(!0),u(null);const c=await fetch("https://script.google.com/macros/s/AKfycbw7amBQVger2k8MpFhueGGtAMUsYioIvdU2yVcixtFuk66a2DRWEpZ_c3xf2nncKjuHPg/exec?action=campWinStats");if(!c.ok)throw new Error(`Erreur réseau: ${c.status}`);const l=await c.json();if(l.error)throw new Error(l.error);o(l)}catch(i){console.error("Erreur lors du chargement des statistiques de victoire:",i),u(i instanceof Error?i.message:"Erreur inconnue")}finally{s(!1)}})()},[]),{campWinStats:t,isLoading:r,errorInfo:a}}const v={Villageois:"#4CAF50",Loups:"#F44336",Amoureux:"#E91E63","Idiot du village":"#9C27B0",Cannibale:"#795548","La Bête":"#FF9800",Espion:"#2196F3",Vaudou:"#673AB7","Chasseur de primes":"#FFC107"},C="#607D8B";function S(){const{campWinStats:t,isLoading:o,errorInfo:r}=y();return o?e.jsx("div",{className:"statistiques-chargement",children:"Chargement des statistiques de victoire..."}):r?e.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",r]}):!t||!t.campStats||t.campStats.length===0?e.jsx("div",{className:"statistiques-vide",children:"Aucune donnée de victoire disponible"}):e.jsxs("div",{className:"lycans-stats-container",children:[e.jsx("h2",{children:"Statistiques de Victoire par Camp"}),e.jsxs("p",{children:["Total des parties: ",t.totalGames]}),e.jsx("div",{className:"lycans-chart-wrapper",style:{height:400},children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(p,{data:t.campStats,margin:{top:20,right:30,left:20,bottom:70},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(x,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(d,{yAxisId:"left",orientation:"left",stroke:"#8884d8",label:{value:"Nombre de victoires",angle:-90,position:"insideLeft"}}),e.jsx(d,{yAxisId:"right",orientation:"right",stroke:"#82ca9d",label:{value:"Taux de victoire (%)",angle:-90,position:"insideRight"}}),e.jsx(g,{formatter:(s,a)=>a==="wins"?[`${s} victoires`,"Victoires"]:a==="winRate"?[`${s}%`,"Taux de victoire"]:[s,a]}),e.jsx(h,{yAxisId:"left",dataKey:"wins",name:"wins",fill:"#8884d8",children:t.campStats.map((s,a)=>e.jsx(j,{fill:v[s.camp]||C},`cellule-${a}`))}),e.jsx(h,{yAxisId:"right",dataKey:"winRate",name:"winRate",fill:"#82ca9d"})]})})})]})}export{S as CampWinRateChart};
