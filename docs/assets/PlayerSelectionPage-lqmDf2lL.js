import{a as O,r as R,g as H,f as te,u as K,j as e,c as re,l as ie}from"./index-CJw4exqE.js";import{u as _}from"./useJoueursData-Bt0aVGEG.js";import{u as Q}from"./baseStatsHook-CVdGoofE.js";import{g as ne}from"./gameUtils-CCGRmivF.js";import{g as Z,a as le,c as oe}from"./datasyncExport-D6_8Fmuy.js";import{u as J,g as ce,a as U,l as ee}from"./api-Dk75epw7.js";import{d as de}from"./durationFormatters-Br-IfF5C.js";import{F as q,C as I,X as z,Y as G,B as V,a as L,b as E}from"./FullscreenChart-DJnVED8Y.js";import{R as D,T as $}from"./CategoricalChart-BEA6YnmZ.js";import{L as pe,a as ue}from"./LineChart-BnNMi2rf.js";import{P as me,a as he}from"./PieChart-RyN_pERa.js";import{u as ge}from"./useDeathStatisticsFromRaw-_hkUaxAx.js";import{R as X}from"./ReferenceLine-DAwSgtju.js";import{g as fe}from"./deathTypes-CGUOTngO.js";import"./ActivePoints-CLGi340b.js";import"./PolarChart-DfCfckwx.js";function xe(c){const{settings:v}=O(),{joueursData:j}=_(),[f,x]=R.useState(null),[y,N]=R.useState(!1),[m,d]=R.useState(null);R.useEffect(()=>{let l=!0;return(async()=>{try{N(!0),d(null);const a=v.dataSource==="discord"?"/data/discord/playerAchievements.json":"/data/playerAchievements.json",r=await fetch(a);if(!r.ok)throw new Error(`Failed to load achievements: ${r.status} ${r.statusText}`);const t=await r.json();l&&x(t)}catch(a){l&&d(a instanceof Error?a.message:"Failed to load achievements")}finally{l&&N(!1)}})(),()=>{l=!1}},[v.dataSource]);const o=(()=>{if(!c||!f)return null;const i=j?.Players?.find(a=>a.Joueur===c)?.SteamID;return i?f.achievements[i]||null:(console.warn(`‚ö†Ô∏è No Steam ID found for player: ${c}`),null)})();return R.useEffect(()=>{if(c&&f&&j){const i=j.Players?.find(r=>r.Joueur===c)?.SteamID;if(!i){console.log(`‚ùå No Steam ID found for player: ${c}`);return}const a=f.achievements[i];a?console.log(`üèÜ Achievements for ${c} [ID: ${i}] (${v.dataSource}):`,{allGames:a.allGamesAchievements.length,moddedOnly:a.moddedOnlyAchievements.length,categories:[...new Set([...a.allGamesAchievements.map(r=>r.category),...a.moddedOnlyAchievements.map(r=>r.category)])]}):console.log(`‚ùå No achievements found for ${c} [ID: ${i}] in ${v.dataSource} data source`)}},[c,f,j,v.dataSource]),{data:o,isLoading:y,error:m,metadata:{generatedAt:f?.generatedAt||null,totalPlayers:f?.totalPlayers||0,totalGames:f?.totalGames||0,totalModdedGames:f?.totalModdedGames||0}}}function ve(c,v,j){if(!c||c.trim()===""||v.length===0)return null;const f=[];let x=c;v.forEach(i=>{const a=i.PlayerStats.find(r=>H(r)===c||r.Username.toLowerCase()===c.toLowerCase());if(a){x=a.Username;const r=Z(le(a.MainRoleInitial,a.MainRoleChanges||[]));if(j&&j!=="Tous les camps"&&r!==j)return;const t=ne(i),p=a.Victorious,u=te(new Date(i.StartDate)),b=oe(i.StartDate,i.EndDate)||0;f.push({gameId:i.Id,date:u,camp:r,won:p,winnerCamp:t,playersInGame:i.PlayerStats.length,mapName:i.MapName,duration:b})}}),f.sort((i,a)=>{const r=t=>{const p=t.split("/");return p.length===3?new Date(parseInt(p[2]),parseInt(p[1])-1,parseInt(p[0])):new Date(t)};return r(a.date).getTime()-r(i.date).getTime()});const y=f.length,N=f.filter(i=>i.won).length,m=y>0?(N/y*100).toFixed(2):"0.00",d={};f.forEach(i=>{d[i.camp]||(d[i.camp]={appearances:0,wins:0,winRate:"0.00"}),d[i.camp].appearances++,i.won&&d[i.camp].wins++}),Object.keys(d).forEach(i=>{const a=d[i];a.winRate=a.appearances>0?(a.wins/a.appearances*100).toFixed(2):"0.00"});const o={};f.forEach(i=>{o[i.mapName]||(o[i.mapName]={appearances:0,wins:0,winRate:"0.00"}),o[i.mapName].appearances++,i.won&&o[i.mapName].wins++}),Object.keys(o).forEach(i=>{const a=o[i];a.winRate=a.appearances>0?(a.wins/a.appearances*100).toFixed(2):"0.00"});const l=f.reduce((i,a)=>i+a.duration,0);return{playerName:x,totalGames:y,totalWins:N,winRate:m,totalPlayTime:l,games:f,campStats:d,mapStats:o}}function ye(c){const v={};let j=0,f=0;return Object.entries(c).forEach(([x,y])=>{x==="Village"||x==="Ch√¢teau"?v[x]={...y}:(j+=y.appearances,f+=y.wins)}),j>=10&&(v.Autres={appearances:j,wins:f,winRate:j>0?(f/j*100).toFixed(2):"0.00"}),v}function Y(c,v){const{data:j,isLoading:f,error:x}=Q(y=>c?ve(c,y,v):null);return{data:j,isLoading:f,error:x}}function je({achievements:c,title:v,emptyMessage:j,achievementType:f="all"}){const{navigateToTab:x,updateNavigationState:y,clearNavigation:N}=K(),{settings:m,updateSettings:d}=O(),{joueursData:o}=_(),l=J(o),i=(s,S)=>{if(S.stopPropagation(),!s.redirectTo)return;N();const P=m.highlightedPlayer;if(d(f==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:P,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:P,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}),s.category==="comparison"&&s.redirectTo.subTab==="comparison"){const h=m.highlightedPlayer||"",g=a(s.description,h);g&&y({playerComparisonState:{selectedPlayer1:h,selectedPlayer2:g,showDetailedStats:!0}})}if(s.category==="comparison"&&s.redirectTo.subTab==="pairing"){const h=s.description.toLowerCase().includes("loup");y({selectedPairingTab:h?"wolves":"lovers"})}if(s.category==="kills"&&s.redirectTo.subTab==="deathStats"){const h=s.description.match(/(Villageois|Loups|Autres)/i);h&&y({deathStatsSelectedCamp:h[1]});let g=10;const n=s.description.match(/min\.\s*(\d+)/);n&&(g=parseInt(n[1],10));let w="totalKills",C="killers";const k=s.redirectTo.chartSection;k&&(k==="killers-total"?(w="totalKills",C="killers"):k==="killers-average"?(w="averageKills",C="killers"):k==="deaths-total"?(w="totalDeaths",C="deaths"):k==="survivors-average"?(w="survivalRate",C="deaths"):(k==="hunters-good"||k==="hunters-bad")&&(C="hunter",w="averageKills")),y({deathStatisticsState:{selectedCamp:h?.[1]||"Tous les camps",minGamesForAverage:g,selectedView:C,focusChart:w}})}if(s.category==="map"&&s.redirectTo.subTab==="playersGeneral"){const h=s.redirectTo.mapFilter||"all";let g=10;const n=s.description.match(/min\.\s*(\d+)/);n&&(g=parseInt(n[1])),d(f==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:h,playerFilter:{mode:"none",players:[]},highlightedPlayer:P,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:h,playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:h,playerFilter:{mode:"none",players:[]},highlightedPlayer:P,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:h,playerFilter:{mode:"none",players:[]}}}),y({playersGeneralState:{minGamesForWinRate:g,winRateOrder:"best",focusChart:"winRate"}}),x("players","playersGeneral");return}if(s.category==="history"&&s.redirectTo.subTab==="history"&&y({selectedPlayerName:m.highlightedPlayer||"",groupingMethod:"session"}),s.category==="series"&&s.redirectTo.subTab==="series"){let h="wins";const g=s.title.toLowerCase(),n=s.description.toLowerCase();g.includes("d√©faite")||n.includes("d√©faite")?h="losses":g.includes("loup")||n.includes("loup")?h="loup":g.includes("villageois")||n.includes("villageois")?h="villageois":(g.includes("victoire")||n.includes("victoire"))&&(h="wins"),y({selectedSeriesType:h})}if(s.category==="general"&&s.redirectTo.subTab==="playersGeneral"){let h=10;const g=s.description.match(/min\.\s*(\d+)/);g&&(h=parseInt(g[1],10));let n="winRate",w="best";const C=s.title.toLowerCase(),k=s.description.toLowerCase();C.includes("participation")||k.includes("participation")?n="participation":(C.includes("taux de victoire")||k.includes("taux de victoire"))&&(n="winRate",(C.includes("moins bon")||C.includes("mauvais")||k.includes("moins bon")||k.includes("mauvais"))&&(w="worst")),y({playersGeneralState:{minGamesForWinRate:h,winRateOrder:w,focusChart:n}})}if(s.category==="performance"&&s.redirectTo.subTab==="campPerformance"){const h=s.redirectTo.chartSection;let g="Villageois",n=1;h&&(h==="camp-loup"?g="Loup":h==="camp-villageois"?g="Villageois":h==="camp-idiot"?g="Idiot du Village":h==="camp-amoureux"?g="Amoureux":(h==="solo-roles"||h==="hall-of-fame")&&(g="Villageois"));const w=s.description.match(/min\.\s*(\d+)/);w&&(n=parseInt(w[1],10)),h==="solo-roles"?g="R√¥les sp√©ciaux":h==="hall-of-fame"&&(g="Tous les camps"),y({campPerformanceState:{selectedCampPerformanceCamp:g,selectedCampPerformanceMinGames:n}})}if(s.category==="voting"&&s.redirectTo.subTab==="votingStats"){const h=s.title.toLowerCase();let g="overview",n="behavior";h.includes("agressivit√©")?(g="overview",n="behavior"):h.includes("taux de vote")?(g="behavior",n="voteRate"):h.includes("pr√©cision")&&(g="overview",n="accuracy"),y({votingStatsState:{selectedCategory:g,selectedView:n}})}x(s.redirectTo.tab,s.redirectTo.subTab)},a=(s,S)=>{const P=[/avec ([^:]+?):/,/contre ([^:]+?):/];for(const h of P){const g=s.match(h);if(g&&g[1]){const n=g[1].trim();if(n!==S)return n}}return null},r=s=>{if(!s.redirectTo)return"Aucune navigation disponible";switch(s.category){case"general":if(s.redirectTo.subTab==="playersGeneral"){const h=s.description.match(/min\.\s*(\d+)/),g=h?parseInt(h[1],10):10,n=s.title.toLowerCase(),w=f==="modded"?" (Filtre parties modd√©es activ√©)":" (Filtres r√©initialis√©s)";return n.includes("taux de victoire")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les taux de victoire (min. ${g} parties)${w}`:n.includes("participation")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les participations${w}`:`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le classement g√©n√©ral des joueurs${w}`}break;case"map":if(s.redirectTo.subTab==="playersGeneral"){const h=s.redirectTo.mapFilter,g=h==="village"?"Village":h==="chateau"?"Ch√¢teau":"map",n=f==="modded"?" (Filtres parties modd√©es + map activ√©s)":" (Filtre map activ√©)";return`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques g√©n√©rales filtr√©es sur ${g}${n}`}break;case"history":if(s.redirectTo.subTab==="history")return"Cliquez pour voir l'historique d√©taill√© du joueur par map";break;case"comparison":if(s.redirectTo.subTab==="comparison")return`Cliquez pour comparer avec ${a(s.description,m.highlightedPlayer||"")||"ce joueur"}`;if(s.redirectTo.subTab==="pairing")return"Cliquez pour voir les statistiques de paires";break;case"kills":if(s.redirectTo.subTab==="deathStats"){const h=s.description.match(/(Villageois|Loups|Autres)/i),g=s.description.match(/min\.\s*(\d+)/),n=g?parseInt(g[1],10):10,w=h?.[1]||"Tous les camps",C=s.redirectTo.chartSection;let k="kills et morts";return C==="killers-total"?k="total des kills":C==="killers-average"?k=`moyenne des kills (min. ${n} parties)`:C==="deaths-total"?k="total des morts":C==="survivors-average"&&(k=`taux de survie (min. ${n} parties)`),`Cliquez pour voir les statistiques de ${k} ${w!=="Tous les camps"?`en ${w}`:""}`}break;case"series":if(s.redirectTo.subTab==="series"){const h=s.title.toLowerCase(),g=s.description.toLowerCase();return h.includes("d√©faite")||g.includes("d√©faite")?"Cliquez pour voir les s√©ries de d√©faites":h.includes("loup")||g.includes("loup")?"Cliquez pour voir les s√©ries Loups":h.includes("villageois")||g.includes("villageois")?"Cliquez pour voir les s√©ries Villageois":h.includes("victoire")||g.includes("victoire")?"Cliquez pour voir les s√©ries de victoires":"Cliquez pour voir les s√©ries cons√©cutives"}break;case"performance":if(s.redirectTo.subTab==="campPerformance"){const h=s.redirectTo.chartSection,g=f==="modded"?" (Filtre parties modd√©es activ√©)":" (Filtres r√©initialis√©s)";return h==="camp-loup"?`Cliquez pour voir les performances camp Loup${g}`:h==="camp-villageois"?`Cliquez pour voir les performances camp Villageois${g}`:h==="camp-idiot"?`Cliquez pour voir les performances camp Idiot du Village${g}`:h==="camp-amoureux"?`Cliquez pour voir les performances camp Amoureux${g}`:h==="solo-roles"?`Cliquez pour voir le classement (r√¥les sp√©ciaux)${g}`:h==="hall-of-fame"?`Cliquez pour voir le Hall of Fame (toutes performances)${g}`:`Cliquez pour voir les performances par camp${g}`}break;case"voting":if(s.redirectTo.subTab==="votingStats"){const h=s.description.match(/min\.\s*(\d+)/),g=h?parseInt(h[1],10):25,n=f==="modded"?" (Filtre parties modd√©es activ√©)":" (Filtres r√©initialis√©s)",w=s.title.toLowerCase();return w.includes("agressivit√©")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le score d'agressivit√© (min. ${g} meetings)${n}`:w.includes("taux de vote")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le taux de vote (min. ${g} meetings)${n}`:w.includes("pr√©cision")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir la pr√©cision des votes${n}`:`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques de vote${n}`}break}return`Cliquez pour voir ${s.redirectTo.subTab}`+(f==="modded"?" (Filtre parties modd√©es activ√©)":" (Filtres r√©initialis√©s)")},t=s=>l[s]||ce(s),p=s=>{const S=[/avec ([^:]+?):/,/contre ([^:]+?):/];let P=s;return S.forEach(h=>{const g=s.match(h);if(g&&g[1]){const n=g[1].trim(),C=`<span class="player-name-highlight" style="color: ${t(n)};">${n}</span>`;P=P.replace(n,C)}}),P};if(c.length===0)return e.jsxs("div",{className:"achievements-empty",children:[e.jsx("h4",{children:v}),e.jsx("p",{children:j||"Aucun succ√®s dans cette cat√©gorie"})]});const u=s=>s===1?"ü•á":s===2?"ü•à":s===3?"ü•â":"",b=s=>s===1?"rank-1":s===2?"rank-2":s===3?"rank-3":s&&s<=10?"rank-top-10":"",T=c.filter(s=>s.category!=="comparison"&&(s.type==="good"||s.type==="neutral")).sort((s,S)=>(s.rank??999)-(S.rank??999)),F=c.filter(s=>s.category!=="comparison"&&s.type==="bad").sort((s,S)=>(s.rank??999)-(S.rank??999)),A=c.filter(s=>s.category==="comparison"),B=T.filter(s=>s.rank&&s.rank<=3).length;return e.jsxs("div",{className:"achievements-container",children:[e.jsx("h4",{children:v}),B>0&&e.jsxs("div",{className:"top3-showcase",children:[e.jsx("h5",{className:"top3-title",children:"‚ú® Podium d'Excellence ‚ú®"}),e.jsx("div",{className:"top3-grid",children:T.filter(s=>s.rank&&s.rank<=3).map((s,S)=>e.jsxs("div",{className:`top3-card ${b(s.rank)} animate-slide-in`,style:{animationDelay:`${S*.15}s`},onClick:P=>i(s,P),title:r(s),children:[e.jsx("div",{className:"top3-medal-container",children:e.jsx("span",{className:"top3-medal",children:u(s.rank)})}),e.jsxs("div",{className:"top3-content",children:[e.jsxs("div",{className:"top3-rank-badge",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]}),e.jsx("h6",{className:"top3-achievement-title",children:s.title}),e.jsx("p",{className:"top3-achievement-description",children:s.description})]}),e.jsxs("div",{className:"top3-sparkles",children:[e.jsx("span",{className:"sparkle sparkle-1",children:"‚ú®"}),e.jsx("span",{className:"sparkle sparkle-2",children:"‚≠ê"}),e.jsx("span",{className:"sparkle sparkle-3",children:"‚ú®"})]})]},s.id))})]}),T.length>0&&e.jsxs("div",{className:"achievements-section good-achievements",children:[e.jsx("h5",{children:"üèÜ Classements"}),e.jsx("div",{className:"achievements-grid",children:T.filter(s=>!s.rank||s.rank>3).map((s,S)=>e.jsxs("div",{className:`achievement-card good ${b(s.rank)}`,onClick:P=>i(s,P),title:r(s),style:{animationDelay:`${S*.05}s`},children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:s.title}),e.jsxs("span",{className:"achievement-rank",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:s.description})]},s.id))})]}),F.length>0&&e.jsxs("div",{className:"achievements-section bad-achievements",children:[e.jsx("h5",{children:"üíÄ Classements (Invers√©s)"}),e.jsx("div",{className:"achievements-grid",children:F.map(s=>e.jsxs("div",{className:`achievement-card bad rank-${s.rank}`,onClick:S=>i(s,S),title:r(s),children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:s.title}),e.jsxs("span",{className:"achievement-rank",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:s.description})]},s.id))})]}),A.length>0&&e.jsxs("div",{className:"achievements-section comparison-achievements",children:[e.jsx("h5",{children:"üìä Statistiques Face-√†-Face"}),e.jsx("div",{className:"achievements-grid",children:A.map(s=>e.jsxs("div",{className:"achievement-card comparison",onClick:S=>i(s,S),title:r(s),children:[e.jsx("div",{className:"achievement-header",children:e.jsx("span",{className:"achievement-title",children:s.title})}),e.jsx("p",{className:"achievement-description",dangerouslySetInnerHTML:{__html:p(s.description)}})]},s.id))})]})]})}function be({selectedPlayerName:c,groupingMethod:v,campFilter:j="all"}){const{navigateToGameDetails:f}=K(),{data:x,isLoading:y,error:N}=Y(c),m=R.useMemo(()=>{switch(v){case"month":return"par Mois";case"quarter":return"par Trimestre";case"year":return"par Ann√©e";default:return"par Session"}},[v]),d=R.useMemo(()=>{if(!x?.games)return new Map;const a=new Map;return x.games.forEach(r=>{if(!a.has(r.date)){const t=r.date.split("/");t.length===3?a.set(r.date,new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0])).getTime()):a.set(r.date,new Date(r.date).getTime())}}),a},[x?.games]),o=R.useMemo(()=>{if(!x?.games)return[];const a={};return x.games.forEach(r=>{if(j!=="all"){if(j==="solo"){if(r.camp==="Villageois"||r.camp==="Loup")return}else if(r.camp!==j)return}let t;const p=r.date.split("/");if(v==="month")if(p.length===3)t=`${p[1].padStart(2,"0")}/${p[2]}`;else{const u=new Date(r.date);t=`${String(u.getMonth()+1).padStart(2,"0")}/${u.getFullYear()}`}else if(v==="quarter")if(p.length===3){const u=parseInt(p[1],10);t=`T${Math.floor((u-1)/3)+1}/${p[2]}`}else{const u=new Date(r.date);t=`T${Math.floor(u.getMonth()/3)+1}/${u.getFullYear()}`}else v==="year"?p.length===3?t=`${p[2]}`:t=`${new Date(r.date).getFullYear()}`:t=r.date;a[t]||(a[t]={games:[],wins:0,total:0}),a[t].games.push(r),a[t].total++,r.won&&a[t].wins++}),Object.entries(a).map(([r,t])=>({period:r,totalGames:t.total,victories:t.wins,defeats:t.total-t.wins,winRate:t.total>0?(t.wins/t.total*100).toFixed(1):"0.0",winRateNum:t.total>0?t.wins/t.total*100:0})).sort((r,t)=>{if(v==="month"){const[p,u]=r.period.split("/"),[b,T]=t.period.split("/"),F=new Date(parseInt(u),parseInt(p)-1,1),A=new Date(parseInt(T),parseInt(b)-1,1);return F.getTime()-A.getTime()}else if(v==="quarter"){const[p,u]=r.period.split("/"),[b,T]=t.period.split("/"),F=parseInt(p.replace(/\D/g,""),10)||1,A=parseInt(b.replace(/\D/g,""),10)||1,B=new Date(parseInt(u,10),(F-1)*3,1),s=new Date(parseInt(T,10),(A-1)*3,1);return B.getTime()-s.getTime()}else if(v==="year"){const p=parseInt(r.period,10),u=parseInt(t.period,10);return p-u}else{const p=d.get(r.period)||0,u=d.get(t.period)||0;return p-u}})},[x,v,d,j]),i=(a=>a<=15?{fontSize:12,angle:-45,height:80,interval:0}:a<=30?{fontSize:12,angle:-45,height:85,interval:1}:a<=50?{fontSize:12,angle:-60,height:95,interval:2}:{fontSize:12,angle:-75,height:105,interval:Math.floor(a/12)})(o.length);return y?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):N?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]}):x?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["√âvolution des Performances ",m]}),e.jsx(q,{title:`√âvolution des Performances ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(pe,{data:o,margin:{top:20,right:30,left:20,bottom:20},onClick:a=>{if(a&&a.activeLabel){const r=o.find(t=>t.period===a.activeLabel);r&&f({selectedPlayer:c,selectedDate:r.period,fromComponent:`√âvolution des Performances ${m}`})}},style:{cursor:"pointer"},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"period",angle:i.angle,textAnchor:"end",height:i.height,interval:i.interval,fontSize:i.fontSize}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:a,payload:r})=>{if(a&&r&&r.length>0){const t=r[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.period})}),e.jsxs("div",{children:["Parties: ",t.totalGames]}),e.jsxs("div",{children:["Victoires: ",t.victories]}),e.jsxs("div",{children:["Taux: ",t.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(ue,{type:"monotone",dataKey:"winRateNum",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:2,r:4}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["R√©partition Victoires/D√©faites ",m]}),e.jsx(q,{title:`R√©partition Victoires/D√©faites ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:o,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"period",angle:i.angle,textAnchor:"end",height:i.height,interval:i.interval,fontSize:i.fontSize}),e.jsx(G,{label:{value:"Nombre de parties",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx($,{content:({active:a,payload:r})=>{if(a&&r&&r.length>0){const t=r[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.period})}),e.jsxs("div",{children:["Total: ",t.totalGames," parties"]}),e.jsxs("div",{children:["Victoires: ",t.victories]}),e.jsxs("div",{children:["D√©faites: ",t.defeats]}),e.jsxs("div",{children:["Taux: ",t.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(L,{dataKey:"victories",stackId:"games",fill:"var(--accent-tertiary)",name:"Victoires",children:o.map((a,r)=>e.jsx(E,{fill:"var(--accent-tertiary)",onClick:()=>{f({selectedPlayer:c,selectedDate:a.period,fromComponent:`Historique Joueur - Victoires ${m}`})},style:{cursor:"pointer"}},`cell-victories-${r}`))}),e.jsx(L,{dataKey:"defeats",stackId:"games",fill:"var(--chart-color-4)",name:"D√©faites",children:o.map((a,r)=>e.jsx(E,{fill:"var(--chart-color-4)",onClick:()=>{f({selectedPlayer:c,selectedDate:a.period,fromComponent:`Historique Joueur - D√©faites ${m}`})},style:{cursor:"pointer"}},`cell-defeats-${r}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e d'historique disponible"})}function we({selectedPlayerName:c}){const{navigateToGameDetails:v}=K(),{data:j,isLoading:f,error:x}=Y(c),y=U(),N=R.useMemo(()=>j?.campStats?Object.entries(j.campStats).map(([d,o])=>({name:d,value:o.appearances,winRate:o.winRate,winRateDisplay:Math.max(parseFloat(o.winRate),1),wins:o.wins,percentage:(o.appearances/j.totalGames*100).toFixed(1)})):[],[j]),m=R.useMemo(()=>{if(!N.length)return[];const d=5;let o=0;const l=[],i=[];if(N.forEach(a=>{parseFloat(a.percentage)<d?(o+=Number(a.value),l.push(a)):i.push(a)}),o>0){const a=N.reduce((r,t)=>r+Number(t.value),0);i.push({name:"Autres",value:o,winRate:"0.0",winRateDisplay:1,wins:l.reduce((r,t)=>r+t.wins,0),percentage:(o/a*100).toFixed(1),_details:l})}return i},[N]);return f?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):x?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",x]}):j?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Distribution par Camps"}),e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(me,{children:[e.jsx(he,{data:m,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",label:d=>{const o=d.percent!==void 0?d.percent:0;return d.name==="Autres"?`Autres : ${d.value} (${(o*100).toFixed(1)}%)`:`${d.name}: ${d.value} (${(o*100).toFixed(1)}%)`},children:m.map((d,o)=>e.jsx(E,{fill:d.name==="Autres"?ee:y[d.name]||`var(--chart-color-${o%6+1})`,onClick:()=>{if(d.name==="Autres"){const l=d._details?.map(i=>i.name)||[];v({selectedPlayer:c,campFilter:{selectedCamp:"Autres",campFilterMode:"all-assignments",_smallCamps:l},fromComponent:"Distribution par Camps"})}else d.name==="Tra√Ætre"||d.name==="Louveteau"?v({selectedPlayer:c,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):d.name==="Loup"?v({selectedPlayer:c,campFilter:{selectedCamp:"Loup",campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):v({selectedPlayer:c,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments"},fromComponent:"Distribution par Camps"})},style:{cursor:"pointer"}},`cell-${o}`))}),e.jsx($,{content:({active:d,payload:o})=>{if(d&&o&&o.length>0){const l=o[0].payload;if(l.name==="Autres"&&l._details){const i=[...l._details].sort((a,r)=>r.value-a.value);return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Autres - ",l.value," parties (",l.percentage,"%)"]})}),e.jsx("div",{children:i.map((a,r)=>e.jsxs("div",{children:[a.name,": ",a.value," parties (",a.percentage,"%)"]},r))}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--chart-color-1)",marginTop:"0.25rem",fontStyle:"italic"},children:"Cliquez pour voir toutes les parties de ces camps"})]})}return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:[l.name," - ",l.value," parties (",l.percentage,"%)"]})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}})]})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Camp"}),e.jsx(q,{title:"Performance par Camp",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:N,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:d,payload:o})=>{if(d&&o&&o.length>0){const l=o[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:l.name})}),e.jsxs("div",{children:["Victoires: ",l.wins," / ",l.value]}),e.jsxs("div",{children:["Taux: ",l.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(L,{dataKey:"winRateDisplay",children:N.map((d,o)=>e.jsx(E,{fill:parseFloat(d.winRate)===0?`${y[d.name]||`var(--chart-color-${o%6+1})`}50`:y[d.name]||`var(--chart-color-${o%6+1})`,onClick:()=>{d.name==="Tra√Ætre"||d.name==="Louveteau"?v({selectedPlayer:c,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):d.name==="Loup"?v({selectedPlayer:c,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):v({selectedPlayer:c,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments"},fromComponent:"Performance par Camp"})},style:{cursor:"pointer"}},`cell-${o}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e d'historique disponible"})}function Ce({selectedPlayerName:c}){const{navigateToGameDetails:v,navigationState:j,updateNavigationState:f}=K(),[x,y]=R.useState(j.playerHistoryMapState?.selectedCamp||"Tous les camps"),{data:N}=ge(),{data:m,isLoading:d,error:o}=Y(c,x);R.useEffect(()=>{(!j.playerHistoryMapState||j.playerHistoryMapState.selectedCamp!==x)&&f({playerHistoryMapState:{selectedCamp:x}})},[x,j.playerHistoryMapState,f]);const l=a=>{y(a),f({playerHistoryMapState:{selectedCamp:a}})},i=R.useMemo(()=>{if(!m?.mapStats)return[];const a=ye(m.mapStats);return Object.entries(a).map(([r,t])=>({name:r,value:t.appearances,winRate:t.winRate,winRateDisplay:Math.max(parseFloat(t.winRate),.1),wins:t.wins,percentage:(t.appearances/m.totalGames*100).toFixed(1)}))},[m]);return d?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):o?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",o]}):m?i.length===0?e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donn√©e de carte disponible"}),e.jsx("p",{children:"Aucune statistique de carte n'est disponible pour ce joueur."})]}):e.jsx("div",{className:"lycans-graphiques-groupe",children:e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["Performance par Carte",x!=="Tous les camps"?` (${x})`:""]}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select-map",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select-map",value:x,onChange:a=>l(a.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),N?.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsx(q,{title:"Performance par Carte",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:i,margin:{top:20,right:140,left:20,bottom:20},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(X,{y:50,stroke:"var(--text-secondary)",strokeDasharray:"5 5",strokeOpacity:.5}),(()=>{if(i.length>0){const a=i.reduce((p,u)=>p+u.value,0),r=i.reduce((p,u)=>p+u.wins,0),t=a>0?r/a*100:0;if(t!==50)return e.jsx(X,{y:t,stroke:"var(--accent-primary)",strokeDasharray:"3 3",strokeOpacity:.7,label:{value:`Moyenne: ${t.toFixed(1)}%`,position:"right",offset:5,style:{fill:"var(--accent-primary)"}}})}return null})(),e.jsx($,{content:({active:a,payload:r})=>{if(a&&r&&r.length>0){const t=r[0].payload,p=[];return i.forEach(u=>{if(u.name!==t.name&&u.value>=5){const b=parseFloat(t.winRate)-parseFloat(u.winRate);Math.abs(b)>=2&&p.push({map:u.name,diff:b,better:b>0})}}),e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)",maxWidth:"250px"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.name})}),e.jsxs("div",{children:["Parties: ",t.value]}),e.jsxs("div",{children:["Victoires: ",t.wins]}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsxs("strong",{children:["Taux: ",t.winRate,"%"]})}),p.length>0&&e.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Comparaisons:"}),p.map((u,b)=>e.jsxs("div",{style:{fontSize:"0.75rem",color:u.better?"var(--accent-tertiary)":"var(--chart-color-4)"},children:[u.better?"‚Üó":"‚Üò"," ",Math.abs(u.diff).toFixed(1),"% vs ",u.map]},b))]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(L,{dataKey:"winRateDisplay",label:a=>{const{x:r,y:t,width:p,payload:u}=a;if(r===void 0||t===void 0||p===void 0||!u)return null;const b=u.winRate||"0";return e.jsxs("text",{x:r+p/2,y:t-5,fill:"var(--text-primary)",textAnchor:"middle",fontSize:"12",fontWeight:"bold",children:[b,"%"]})},onClick:a=>{if(a&&a.name){const r={selectedPlayer:c,selectedMapName:a.name,fromComponent:"Performance par Carte"};x!=="Tous les camps"&&(r.campFilter={selectedCamp:x,campFilterMode:"all-assignments"}),v(r)}},children:i.map((a,r)=>{let t;a.name==="Village"?t="var(--accent-secondary)":a.name==="Ch√¢teau"?t="var(--accent-tertiary)":a.name==="Autres"?t=ee:t=`var(--chart-color-${r%6+1})`;const p=Math.max(...i.map(b=>parseFloat(b.winRate))),u=parseFloat(a.winRate)===p&&p>0;return e.jsx(E,{fill:parseFloat(a.winRate)===0?`${t}30`:t,stroke:"transparent",strokeWidth:u?3:1,style:{cursor:"pointer"}},`cell-map-${r}`)})})]})})})})]})}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e d'historique disponible"})}function Ne({selectedPlayerName:c}){const{gameData:v}=re(),{joueursData:j}=_(),f=J(j),x=U(),y=R.useMemo(()=>{if(!v||!c)return{playersKilled:[],killedBy:[],deathTypes:[],availableDeathTypes:[]};const m={},d={},o={},l=new Set;v.forEach(p=>{const u=p.PlayerStats.find(b=>b.Username.toLowerCase()===c.toLowerCase());if(u&&(p.PlayerStats.forEach(b=>{b.KillerName?.toLowerCase()===c.toLowerCase()&&(m[b.Username]=(m[b.Username]||0)+1)}),u.KillerName&&(d[u.KillerName]=(d[u.KillerName]||0)+1),u.DeathType)){const b=u.DeathType,T=fe(b);o[T]||(o[T]={count:0,byDeathType:{}}),o[T].count+=1,o[T].byDeathType[b]=(o[T].byDeathType[b]||0)+1,l.add(b)}});const i=Object.entries(m).map(([p,u])=>({player:p,kills:u})).sort((p,u)=>u.kills-p.kills).slice(0,10),a=Object.entries(d).map(([p,u])=>({player:p,kills:u})).sort((p,u)=>u.kills-p.kills).slice(0,10),r=Object.entries(o).map(([p,u])=>{const b={deathType:p,count:u.count};return b[p]=u.count,b}).sort((p,u)=>u.count-p.count).slice(0,10),t=Object.keys(o);return{playersKilled:i,killedBy:a,deathTypes:r,availableDeathTypes:t}},[v,c]),N=R.useMemo(()=>{const m={};y.availableDeathTypes.forEach(l=>{l==="Tu√© par Loup"?m[l]=x.Loup:l==="Mort aux votes"?m[l]="var(--chart-color-1)":l.includes("Chasseur")?m[l]=x.Chasseur:l==="Tu√© par Zombie"?m[l]=x.Vaudou:l==="Tu√© par potion assassin"?m[l]=x.Alchimiste:l==="Tu√© par Vengeur"?m[l]="var(--chart-color-2)":l==="Amoureux mort"?m[l]=x.Amoureux:l==="Tu√© par La B√™te"?m[l]="var(--chart-color-3)":l==="Tu√© par Sh√©rif"&&(m[l]="var(--chart-color-4)")});const d=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let o=0;return y.availableDeathTypes.forEach(l=>{m[l]||(m[l]=d[o%d.length],o++)}),m},[y.availableDeathTypes,x]);return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[y.playersKilled.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Les Victimes"}),e.jsx(q,{title:"Les Victimes",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:y.playersKilled,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(G,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx($,{content:({active:m,payload:d})=>{if(m&&d&&d.length>0){const o=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:o.player})}),e.jsxs("div",{children:["Tu√© ",o.kills," fois par ",c]})]})}return null}}),e.jsx(L,{dataKey:"kills",children:y.playersKilled.map((m,d)=>e.jsx(E,{fill:f[m.player]||"var(--chart-color-3)"},`cell-killed-${d}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucun kill enregistr√©"}),e.jsxs("p",{children:[c," n'a tu√© aucun joueur dans les parties enregistr√©es."]})]}),y.killedBy.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Les Tueurs"}),e.jsx(q,{title:"Les Tueurs",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:y.killedBy,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(G,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx($,{content:({active:m,payload:d})=>{if(m&&d&&d.length>0){const o=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:o.player})}),e.jsxs("div",{children:["A tu√© ",c," ",o.kills," fois"]})]})}return null}}),e.jsx(L,{dataKey:"kills",children:y.killedBy.map((m,d)=>e.jsx(E,{fill:f[m.player]||"var(--chart-color-4)"},`cell-killer-${d}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune mort par kill"}),e.jsxs("p",{children:[c," n'a jamais √©t√© tu√© par un autre joueur dans les parties enregistr√©es."]})]}),y.deathTypes.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Types de Mort les Plus Fr√©quents"}),e.jsx(q,{title:"Types de Mort les Plus Fr√©quents",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:y.deathTypes,margin:{top:20,right:30,left:20,bottom:90},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"deathType",angle:-45,textAnchor:"end",height:120,interval:0,fontSize:12}),e.jsx(G,{label:{value:"Nombre de morts",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx($,{content:({active:m,payload:d})=>{if(m&&d&&d.length>0){const o=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:o.deathType})}),e.jsxs("div",{children:[c," est mort ",o.count," fois ainsi"]})]})}return null}}),y.availableDeathTypes.map(m=>e.jsx(L,{dataKey:m,name:m,stackId:"deaths",fill:N[m]||"var(--chart-color-5)"},m))]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donn√©e de mort"}),e.jsxs("p",{children:["Aucune information de mort disponible pour ",c,"."]})]})]})}function ke(c,v){if(!c||c.trim()===""||v.length===0)return null;const j=new Map,f=new Map,x=new Map;v.forEach(o=>{if(!o.Modded||!o.LegacyData||o.LegacyData.deathInformationFilled!==!0)return;const l=o.PlayerStats.find(i=>H(i)===c||i.Username.toLowerCase()===c.toLowerCase());if(l){if(l.MainRoleInitial==="Inconnu")return;const i=l.Victorious,a=Z(l.MainRoleInitial),r=a==="Loup"||a==="Tra√Ætre"||a==="Louveteau";if(a==="Villageois"&&(l.MainRoleInitial==="Chasseur"||l.MainRoleInitial==="Alchimiste")){const t=j.get(l.MainRoleInitial)||{appearances:0,wins:0};j.set(l.MainRoleInitial,{appearances:t.appearances+1,wins:t.wins+(i?1:0)})}else if(l.Power&&l.Power.trim()!==""){if(a==="Villageois"){const t=j.get(l.Power)||{appearances:0,wins:0};j.set(l.Power,{appearances:t.appearances+1,wins:t.wins+(i?1:0)})}else if(r){const t=f.get(l.Power)||{appearances:0,wins:0,roleBreakdown:new Map},p=t.roleBreakdown;p.set(l.MainRoleInitial,(p.get(l.MainRoleInitial)||0)+1),f.set(l.Power,{appearances:t.appearances+1,wins:t.wins+(i?1:0),roleBreakdown:p})}}else if(a==="Villageois"||r)if(a==="Villageois"){const t=j.get("Aucun pouvoir")||{appearances:0,wins:0};j.set("Aucun pouvoir",{appearances:t.appearances+1,wins:t.wins+(i?1:0)})}else{const t=f.get("Aucun pouvoir")||{appearances:0,wins:0,roleBreakdown:new Map},p=t.roleBreakdown;p.set(l.MainRoleInitial,(p.get(l.MainRoleInitial)||0)+1),f.set("Aucun pouvoir",{appearances:t.appearances+1,wins:t.wins+(i?1:0),roleBreakdown:p})}if(l.SecondaryRole&&l.SecondaryRole.trim()!==""){if(l.SecondaryRole==="Inconnu")return;const t=x.get(l.SecondaryRole)||{appearances:0,wins:0};x.set(l.SecondaryRole,{appearances:t.appearances+1,wins:t.wins+(i?1:0)})}}});const y=new Map;v.forEach(o=>{if(!o.LegacyData||o.LegacyData.deathInformationFilled!==!0)return;const l=o.PlayerStats.find(i=>H(i)===c||i.Username.toLowerCase()===c.toLowerCase());if(l&&(l.MainRoleInitial==="Chasseur"||l.MainRoleInitial==="Alchimiste")){const i=l.MainRoleInitial;y.set(i,(y.get(i)||0)+1)}});const N=o=>Array.from(o.entries()).map(([l,i])=>({name:l,appearances:i.appearances,wins:i.wins,winRate:i.appearances>0?(i.wins/i.appearances*100).toFixed(1):"0.0",camp:"Villageois",...y.has(l)&&{totalGamesAllModes:y.get(l)}})).sort((l,i)=>i.appearances-l.appearances),m=o=>Array.from(o.entries()).map(([l,i])=>({name:l,appearances:i.appearances,wins:i.wins,winRate:i.appearances>0?(i.wins/i.appearances*100).toFixed(1):"0.0",camp:"Loup",roleBreakdown:Array.from(i.roleBreakdown.entries()).map(([a,r])=>({role:a,count:r})).sort((a,r)=>r.count-a.count)})).sort((l,i)=>i.appearances-l.appearances),d=o=>Array.from(o.entries()).map(([l,i])=>({name:l,appearances:i.appearances,wins:i.wins,winRate:i.appearances>0?(i.wins/i.appearances*100).toFixed(1):"0.0"})).sort((l,i)=>i.appearances-l.appearances);return{villageoisPowers:N(j),loupPowers:m(f),secondaryRoles:d(x)}}function Se({selectedPlayerName:c}){const{navigateToGameDetails:v}=K(),{settings:j}=O(),f=U(),{data:x,isLoading:y,error:N}=Q(r=>ke(c,r)),m=R.useMemo(()=>{if(!x)return{villageoisPowers:[],loupPowers:[],secondaryRoles:[]};const r=1,t=1,p=15;return{villageoisPowers:x.villageoisPowers.filter(u=>u.appearances>=r).slice(0,p),loupPowers:x.loupPowers.filter(u=>u.appearances>=r).slice(0,p),secondaryRoles:x.secondaryRoles.filter(u=>u.appearances>=t).slice(0,p)}},[x]);if(y)return e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique des r√¥les..."});if(N)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]});if(!x)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e de r√¥le disponible"});const d=m.villageoisPowers.length>0,o=m.loupPowers.length>0,l=m.secondaryRoles.length>0;if(!d&&!o&&!l)return e.jsx("div",{className:"donnees-manquantes",children:"Aucun pouvoir ou r√¥le secondaire trouv√©"});const i=({active:r,payload:t})=>{if(r&&t&&t.length>0){const p=t[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:p.name})}),e.jsxs("div",{children:["Apparitions: ",p.appearances]}),p.totalGamesAllModes&&p.totalGamesAllModes!==p.appearances&&e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",fontStyle:"italic"},children:["(Total avec parties non modd√©es: ",p.totalGamesAllModes,")"]}),p.roleBreakdown&&p.roleBreakdown.length>0&&e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:[e.jsx("div",{style:{fontStyle:"italic"},children:"R√©partition par r√¥le:"}),p.roleBreakdown.map((u,b)=>e.jsxs("div",{style:{marginLeft:"0.5rem"},children:["‚Ä¢ ",u.role,": ",u.count]},b))]}),e.jsxs("div",{children:["Victoires: ",p.wins]}),e.jsxs("div",{children:["Taux de victoire: ",p.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null},a=(r,t,p,u,b)=>e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:t}),e.jsx(q,{title:t,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(V,{data:r,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:12,tick:({x:T,y:F,payload:A})=>e.jsx("text",{x:T,y:F,textAnchor:"end",transform:`rotate(-45, ${T}, ${F})`,fill:j.highlightedPlayer===c?"var(--text-primary)":"var(--text-secondary)",fontSize:12,children:A.value})}),e.jsx(G,{label:{value:"Nombre d'apparitions",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:e.jsx(i,{})}),e.jsx(L,{dataKey:"appearances",children:r.map((T,F)=>e.jsx(E,{fill:b?b(T.name,F):p,onClick:()=>u(T.name),style:{cursor:"pointer"}},`cell-${F}`))})]})})})})]});return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[d&&a(m.villageoisPowers,"Camp Villageois","var(--chart-color-1)",r=>{v({selectedPlayer:c,campFilter:{selectedCamp:"Villageois",campFilterMode:"all-assignments"},fromComponent:`Historique des R√¥les - Pouvoir: ${r}`})},r=>r==="Chasseur"&&f.Chasseur?f.Chasseur:r==="Alchimiste"&&f.Alchimiste?f.Alchimiste:"var(--chart-color-1)"),o&&a(m.loupPowers,"Camp Loups","var(--chart-color-2)",r=>{v({selectedPlayer:c,campFilter:{selectedCamp:"Loup",campFilterMode:"all-assignments"},fromComponent:`Historique des R√¥les - Pouvoir: ${r}`})},()=>f.Loup||"var(--chart-color-2)"),l&&a(m.secondaryRoles,"R√¥les Secondaires","var(--chart-color-3)",r=>{v({selectedPlayer:c,fromComponent:`Historique des R√¥les - R√¥le Secondaire: ${r}`})})]})}function Be(){const{settings:c,updateSettings:v}=O(),{navigateToGameDetails:j}=K(),{data:f,isLoading:x,error:y}=ie(),{joueursData:N,isLoading:m}=_(),{data:d,isLoading:o,error:l}=xe(c.highlightedPlayer),i=J(N),[a,r]=R.useState(""),[t,p]=R.useState(()=>c.useIndependentFilters&&c.independentFilters?.gameTypeEnabled?c.independentFilters.gameFilter==="modded"?"modded":"all":c.gameFilter==="modded"?"modded":"all"),[u,b]=R.useState("achievements"),[T,F]=R.useState("session"),[A,B]=R.useState("all");R.useEffect(()=>{if(c.useIndependentFilters&&c.independentFilters?.gameTypeEnabled){const n=c.independentFilters.gameFilter==="modded"?"modded":"all";p(n)}else if(!c.useIndependentFilters){const n=c.gameFilter==="modded"?"modded":"all";p(n)}},[c.gameFilter,c.useIndependentFilters,c.independentFilters?.gameTypeEnabled,c.independentFilters?.gameFilter]);const{data:s}=Y(c.highlightedPlayer||""),S=R.useMemo(()=>{if(!f||!f.GameStats)return[];const n=new Map;return f.GameStats.forEach(w=>{const C=new Date(w.StartDate);w.PlayerStats.forEach(k=>{const M=H(k),se=N?.Players?.find(ae=>ae.SteamID===M)?.Joueur||k.Username;n.has(M)||n.set(M,{games:0,wins:0,firstDate:C,lastDate:C,displayName:se});const W=n.get(M);W.games++,k.Victorious&&W.wins++,C<W.firstDate&&(W.firstDate=C),C>W.lastDate&&(W.lastDate=C)})}),Array.from(n.entries()).map(([w,C])=>{let k=N?.Players?.find(M=>M.SteamID===w);return k||(k=N?.Players?.find(M=>M.Joueur===C.displayName)),{id:w,name:C.displayName,totalGames:C.games,totalWins:C.wins,winRate:C.games>0?C.wins/C.games*100:0,firstGameDate:C.firstDate.toLocaleDateString("fr-FR"),lastGameDate:C.lastDate.toLocaleDateString("fr-FR"),isHighlighted:C.displayName===c.highlightedPlayer,image:k?.Image||null,twitch:k?.Twitch||null,youtube:k?.Youtube||null}})},[f,c.highlightedPlayer,N]),P=R.useMemo(()=>{if(!a.trim())return S;const n=a.toLowerCase();return S.filter(w=>w.name.toLowerCase().includes(n))},[S,a]),h=R.useMemo(()=>[...P].sort((n,w)=>w.totalGames-n.totalGames),[P]),g=n=>{v({highlightedPlayer:n}),r("")};return x||m?e.jsxs("div",{className:"player-selection-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des joueurs..."})]}):y?e.jsxs("div",{className:"player-selection-error",children:[e.jsx("h2",{children:"Erreur"}),e.jsxs("p",{children:["Impossible de charger les donn√©es des joueurs: ",y]})]}):!f||S.length===0?e.jsxs("div",{className:"player-selection-empty",children:[e.jsx("h2",{children:"Aucune donn√©e disponible"}),e.jsx("p",{children:"Aucun joueur trouv√© dans les donn√©es."})]}):e.jsxs("div",{className:"player-selection-container",children:[!c.highlightedPlayer&&e.jsxs("div",{className:"search-controls-header",children:[e.jsxs("div",{className:"selection-prompt-content",children:[e.jsx("h2",{children:"S√©lectionnez un joueur"}),e.jsx("p",{children:"Choisissez un joueur pour le mettre en √©vidence dans tous les graphiques."})]}),e.jsxs("div",{className:"search-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un joueur...",value:a,onChange:n=>r(n.target.value),className:"search-input"}),e.jsx("span",{className:"search-icon",children:"üîç"})]}),e.jsxs("div",{className:"player-count",children:[P.length," joueur",P.length!==1?"s":"",a&&` (filtr√©${P.length!==1?"s":""} de ${S.length})`]})]})]}),e.jsx("div",{className:"player-display",children:a?P.length>0?e.jsxs("div",{className:"search-results",children:[e.jsxs("div",{className:"search-results-header",children:[e.jsx("h3",{children:"R√©sultats de recherche:"}),e.jsx("button",{className:"clear-search-btn",onClick:()=>r(""),children:"Effacer la recherche"})]}),e.jsx("div",{className:"suggestion-list",children:h.map(n=>e.jsxs("button",{className:`suggestion-btn ${n.isHighlighted?"highlighted":""}`,onClick:()=>g(n.name),children:[n.image?e.jsx("img",{src:n.image,alt:n.name,className:"player-avatar"}):e.jsx("div",{className:"player-avatar-default",style:{"--player-color":i[n.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"suggestion-btn-content",children:[e.jsxs("div",{className:"suggestion-btn-name",children:[n.name,n.isHighlighted&&e.jsx("span",{className:"highlight-indicator",children:" ‚òÖ"})]}),e.jsxs("div",{className:"suggestion-btn-stats",children:[n.totalGames," parties ‚Ä¢ ",n.winRate.toFixed(1),"% victoires"]})]})]},n.id))})]}):e.jsxs("div",{className:"no-results",children:[e.jsxs("p",{children:['Aucun joueur trouv√© pour "',a,'"']}),e.jsx("button",{className:"clear-search-btn",onClick:()=>r(""),children:"Effacer la recherche"})]}):c.highlightedPlayer?(()=>{const n=S.find(w=>w.name===c.highlightedPlayer);return n?e.jsxs("div",{className:"single-player-card highlighted",children:[e.jsxs("div",{className:"player-card-header",children:[e.jsx("h3",{className:"player-name",children:n.name}),e.jsx("span",{className:"highlight-badge",children:"‚òÖ Mis en √©vidence"})]}),e.jsxs("div",{className:"player-info-row",children:[n.image?e.jsx("img",{src:n.image,alt:n.name,className:"player-avatar large"}):e.jsx("div",{className:"player-avatar-default large",style:{"--player-color":i[n.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"player-info-text",children:[e.jsxs("div",{className:"player-stats-summary",children:[n.totalGames," parties ‚Ä¢ ",n.totalWins," victoires ‚Ä¢ ",n.winRate.toFixed(1),"% taux de victoire"]}),(n.twitch||n.youtube)&&e.jsxs("div",{className:"social-links",children:[n.twitch&&e.jsx("a",{href:n.twitch,target:"_blank",rel:"noopener noreferrer",className:"social-link twitch",children:"üì∫ Twitch"}),n.youtube&&e.jsx("a",{href:n.youtube,target:"_blank",rel:"noopener noreferrer",className:"social-link youtube",children:"üé¨ YouTube"})]})]})]}),e.jsxs("div",{className:"player-actions",children:[e.jsxs("div",{className:"lycans-categories-selection",style:{marginBottom:"1rem"},children:[e.jsx("button",{className:`lycans-categorie-btn ${u==="achievements"?"active":""}`,onClick:()=>b("achievements"),children:"Classement"}),e.jsx("button",{className:`lycans-categorie-btn ${u==="evolution"?"active":""}`,onClick:()=>b("evolution"),children:"√âvolution"}),e.jsx("button",{className:`lycans-categorie-btn ${u==="camps"?"active":""}`,onClick:()=>b("camps"),children:"Camps"}),e.jsx("button",{className:`lycans-categorie-btn ${u==="maps"?"active":""}`,onClick:()=>b("maps"),children:"Maps"}),e.jsx("button",{className:`lycans-categorie-btn ${u==="kills"?"active":""}`,onClick:()=>b("kills"),children:"Kills"})]}),u==="achievements"&&e.jsxs("div",{className:"achievements-section",children:[o?e.jsxs("div",{className:"achievements-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des classements..."})]}):l?e.jsx("div",{className:"achievements-error",children:e.jsxs("p",{children:["‚ùå Erreur lors du chargement des classements: ",l]})}):d?e.jsx(je,{achievements:t==="all"?d.allGamesAchievements:d.moddedOnlyAchievements,title:t==="all"?"Classements - Toutes les parties":"Classements - Parties modd√©es",emptyMessage:"Aucun classement dans cette cat√©gorie",achievementType:t}):e.jsx("div",{className:"achievements-empty",children:e.jsx("p",{children:"Aucun classement disponible pour ce joueur"})}),e.jsxs("div",{className:"achievements-filter",children:[e.jsx("button",{className:`filter-btn ${t==="all"?"active":""}`,onClick:w=>{w.stopPropagation(),p("all")},children:"Toutes les parties"}),e.jsx("button",{className:`filter-btn ${t==="modded"?"active":""}`,onClick:w=>{w.stopPropagation(),p("modded")},children:"Parties modd√©es"})]})]}),u==="evolution"&&e.jsxs("div",{className:"player-history-section",children:[s&&e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Total Parties"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{j({selectedPlayer:n.name,fromComponent:"Historique Joueur - Total Parties"})},title:`Cliquer pour voir toutes les parties de ${n.name}`,style:{fontSize:"1.3rem"},children:s.totalGames}),e.jsx("p",{children:"parties jou√©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Temps de jeu cumul√©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{fontSize:"1.3rem"},children:de(s.totalPlayTime)}),e.jsx("p",{children:"temps total de jeu"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Victoires"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{j({selectedPlayer:n.name,selectedPlayerWinMode:"wins-only",fromComponent:"Historique Joueur - Victoires"})},title:`Cliquer pour voir toutes les victoires de ${n.name}`,style:{fontSize:"1.3rem"},children:s.totalWins}),e.jsx("p",{children:"parties gagn√©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Taux de Victoire"}),e.jsxs("div",{className:"lycans-valeur-principale",style:{fontSize:"1.3rem"},children:[s.winRate,"%"]}),e.jsx("p",{children:"pourcentage global"})]})]}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"grouping-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Groupement:"}),e.jsxs("select",{id:"grouping-select",value:T,onChange:w=>F(w.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"160px"},children:[e.jsx("option",{value:"session",children:"Par session"}),e.jsx("option",{value:"month",children:"Par mois"}),e.jsx("option",{value:"quarter",children:"Par trimestre"}),e.jsx("option",{value:"year",children:"Par ann√©e"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-filter-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),e.jsxs("select",{id:"camp-filter-select",value:A,onChange:w=>B(w.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"160px"},children:[e.jsx("option",{value:"all",children:"Tous les camps"}),e.jsx("option",{value:"Villageois",children:"Villageois"}),e.jsx("option",{value:"Loup",children:"Loups"}),e.jsx("option",{value:"solo",children:"R√¥les solo"})]})]})]}),e.jsx(be,{selectedPlayerName:n.name,groupingMethod:T,campFilter:A})]}),u==="camps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(we,{selectedPlayerName:n.name})}),u==="maps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(Ce,{selectedPlayerName:n.name})}),u==="roles"&&e.jsx("div",{className:"player-history-section",children:e.jsx(Se,{selectedPlayerName:n.name})}),u==="kills"&&e.jsx("div",{className:"player-history-section",children:e.jsx(Ne,{selectedPlayerName:n.name})}),e.jsx("button",{className:"highlight-btn active",onClick:w=>{w.stopPropagation(),v({highlightedPlayer:null})},children:"‚òÖ Retirer la mise en √©vidence"})]}),e.jsxs("div",{className:"player-period",children:[e.jsx("span",{className:"period-label",children:"P√©riode d'activit√©:"}),e.jsxs("span",{className:"period-range",children:[n.firstGameDate," - ",n.lastGameDate]})]})]}):e.jsxs("div",{className:"no-player-found",children:[e.jsxs("p",{children:['Le joueur "',c.highlightedPlayer,`" n'a pas √©t√© trouv√© dans les donn√©es.`]}),e.jsx("button",{className:"clear-selection-btn",onClick:()=>v({highlightedPlayer:null}),children:"Effacer la s√©lection"})]})})():e.jsx("div",{className:"player-selection-prompt",children:e.jsx("div",{className:"character-selection-grid",children:h.map(n=>e.jsxs("div",{className:`character-card ${n.isHighlighted?"highlighted":""}`,onClick:()=>g(n.name),title:`${n.name} - ${n.totalGames} parties, ${n.winRate.toFixed(1)}% victoires`,children:[e.jsx("div",{className:"character-avatar-container",children:n.image?e.jsx("img",{src:n.image,alt:n.name,className:"character-avatar"}):e.jsx("div",{className:"character-avatar-default",style:{"--player-color":i[n.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"character-avatar-overlay"})})}),e.jsx("div",{className:"character-name",children:n.name}),(n.twitch||n.youtube)&&e.jsxs("div",{className:"character-social-indicators",children:[n.twitch&&e.jsx("div",{className:"social-indicator twitch",title:"Twitch",children:"T"}),n.youtube&&e.jsx("div",{className:"social-indicator youtube",title:"YouTube",children:"Y"})]})]},n.id))})})})]})}export{Be as PlayerSelectionPage};
