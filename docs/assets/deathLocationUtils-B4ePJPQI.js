import{r as l}from"./index-CzUMR0Fm.js";import{q as W,D as F,z as ne,bL as ie,bM as le,aA as oe,S as V,u as N,aD as $,Z as B,L as S,c as J,s as se,aF as ue,aG as ce,aH as T,a as de,aT as pe,b as q,aN as me,ac as Q,ad as ee,bN as ve,ai as fe,aj as ye,Y as he,ak as xe,al as ge,a0 as te,b3 as be,a1 as Ae,a4 as O,bO as Ie,a2 as z,ar as U,a5 as Ee,a6 as Pe,a9 as C,a7 as Se,aE as Oe,a8 as _e,aQ as we,bP as De,v as ae,b9 as Le,J as Te,I as Ce,bQ as Me,av as je,aa as ze}from"./CategoricalChart-FSn6qg4M.js";import{g as Ne,b as Z,u as Ke,c as Re,G as ke,S as We,d as Fe,e as Ve,f as Be,a as $e}from"./FullscreenChart-DZjiOcHV.js";import{C as Ue}from"./CartesianScaleHelper-B5QcuZLv.js";import{g as G}from"./datasyncExport-BirWLS1z.js";function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?X(Object(a),!0).forEach(function(r){Ze(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ze(e,t,a){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ge(e){var t=Xe(e,"string");return typeof t=="symbol"?t:t+""}function Xe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},K.apply(null,arguments)}var He=(e,t,a,r,n,i,o)=>{var u,c,d,v,{x1:p,x2:h,y1:g,y2:x}=o;if(n==null||i==null)return null;var f=new Ue({x:n,y:i}),m={x:e?(u=n.map(p,{position:"start"}))!==null&&u!==void 0?u:null:n.rangeMin(),y:a?(c=i.map(g,{position:"start"}))!==null&&c!==void 0?c:null:i.rangeMin()},s={x:t?(d=n.map(h,{position:"end"}))!==null&&d!==void 0?d:null:n.rangeMax(),y:r?(v=i.map(x,{position:"end"}))!==null&&v!==void 0?v:null:i.rangeMax()};return o.ifOverflow==="discard"&&(!f.isInRange(m)||!f.isInRange(s))?null:Ne(m,s)},Ye=(e,t)=>{var a;return l.isValidElement(e)?a=l.cloneElement(e,t):typeof e=="function"?a=e(t):a=l.createElement(de,K({},t,{className:"recharts-reference-area-rect"})),a};function Je(e){var t=ne();return l.useEffect(()=>(t(ie(e)),()=>{t(le(e))})),null}function qe(e){var{x1:t,x2:a,y1:r,y2:n,className:i,shape:o,xAxisId:u,yAxisId:c}=e,d=oe(),v=V(),p=N(I=>$(I,"xAxis",u,v)),h=N(I=>$(I,"yAxis",c,v));if(p==null||h==null)return null;var g=T(t),x=T(a),f=T(r),m=T(n);if(!g&&!x&&!f&&!m&&!o)return null;var s=He(g,x,f,m,p,h,e);if(!s&&!o)return null;var y=e.ifOverflow==="hidden",b=y?"url(#".concat(d,")"):void 0;return l.createElement(B,{zIndex:e.zIndex},l.createElement(S,{className:J("recharts-reference-area",i)},Ye(o,H(H({clipPath:b},se(e)),s)),s!=null&&l.createElement(ue,K({},s,{lowerWidth:s.width,upperWidth:s.width}),l.createElement(ce,{label:e.label}),e.children)))}var Qe={ifOverflow:"discard",xAxisId:0,yAxisId:0,radius:0,fill:"#ccc",label:!1,fillOpacity:.5,stroke:"none",strokeWidth:1,zIndex:F.area};function et(e){var t=W(e,Qe);return l.createElement(l.Fragment,null,l.createElement(Je,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}),l.createElement(qe,t))}et.displayName="ReferenceArea";var tt=["option","isActive"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_.apply(null,arguments)}function at(e,t){if(e==null)return{};var a,r,n=rt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function rt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function nt(e){var{option:t,isActive:a}=e,r=at(e,tt);return typeof t=="string"?l.createElement(Z,_({option:l.createElement(pe,_({type:t},r)),isActive:a,shapeType:"symbols"},r)):l.createElement(Z,_({option:t,isActive:a,shapeType:"symbols"},r))}var it=(e,t,a,r,n,i,o)=>Q(e,"xAxis",t,o),lt=(e,t,a,r,n,i,o)=>ee(e,"xAxis",t,o),ot=(e,t,a,r,n,i,o)=>Q(e,"yAxis",a,o),st=(e,t,a,r,n,i,o)=>ee(e,"yAxis",a,o),ut=(e,t,a,r)=>ve(e,"zAxis",r,!1),ct=(e,t,a,r,n)=>n,dt=(e,t,a,r,n,i)=>i,pt=(e,t,a,r,n,i,o)=>me(e,void 0,void 0,o),mt=q([fe,ct],(e,t)=>e.filter(a=>a.type==="scatter").find(a=>a.id===t)),vt=q([pt,it,lt,ot,st,ut,mt,dt],(e,t,a,r,n,i,o,u)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:v}=e;if(o!=null){var p;if(o?.data!=null&&o.data.length>0?p=o.data:p=c?.slice(d,v+1),!(p==null||t==null||r==null||a==null||n==null||a?.length===0||n?.length===0))return wt({displayedData:p,xAxis:t,yAxis:r,zAxis:i,scatterSettings:o,xAxisTicks:a,yAxisTicks:n,cells:u})}}),ft=["id"],yt=["onMouseEnter","onClick","onMouseLeave"],ht=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function k(e,t){if(e==null)return{};var a,r,n=xt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},E.apply(null,arguments)}function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Y(Object(a),!0).forEach(function(r){gt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function gt(e,t,a){return(t=bt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bt(e){var t=At(e,"string");return typeof t=="symbol"?t:t+""}function At(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var It=e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:r,value:te(a,t),payload:e}]},Et=l.memo(e=>{var{dataKey:t,points:a,stroke:r,strokeWidth:n,fill:i,name:o,hide:u,tooltipType:c,id:d}=e,v={dataDefinedOnItem:a?.map(p=>p.tooltipPayload),getPosition:p=>{var h;return a==null||(h=a[Number(p)])===null||h===void 0?void 0:h.tooltipPosition},settings:{stroke:r,strokeWidth:n,fill:i,nameKey:void 0,dataKey:t,name:te(o,t),hide:u,type:c,color:i,unit:"",graphicalItemId:d}};return l.createElement(Ae,{tooltipEntrySettings:v})});function Pt(e){var{points:t,props:a}=e,{line:r,lineType:n,lineJointType:i}=a;if(!r)return null;var o=ae(a),u=Ce(r),c,d;if(n==="joint")c=t.map(m=>{var s,y;return{x:(s=m.cx)!==null&&s!==void 0?s:null,y:(y=m.cy)!==null&&y!==void 0?y:null}});else if(n==="fitting"){var{xmin:v,xmax:p,a:h,b:g}=Me(t),x=m=>h*m+g;c=[{x:v,y:x(v)},{x:p,y:x(p)}]}var f=A(A(A({},o),{},{fill:"none",stroke:o&&o.fill},u),{},{points:c});return l.isValidElement(r)?d=l.cloneElement(r,f):typeof r=="function"?d=r(f):d=l.createElement(je,E({},f,{type:i})),l.createElement(S,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function St(e){var{showLabels:t,points:a,children:r}=e,n=Oe(),i=l.useMemo(()=>a?.map(o=>{var u,c,d={x:(u=o.x)!==null&&u!==void 0?u:0,y:(c=o.y)!==null&&c!==void 0?c:0,width:o.width,height:o.height,lowerWidth:o.width,upperWidth:o.width};return A(A({},d),{},{value:void 0,payload:o.payload,viewBox:d,parentViewBox:n,fill:void 0})}),[n,a]);return l.createElement(_e,{value:t?i:void 0},r)}function Ot(e){var{points:t,allOtherScatterProps:a}=e,{shape:r,activeShape:n,dataKey:i}=a,{id:o}=a,u=k(a,ft),c=N(we),{onMouseEnter:d,onClick:v,onMouseLeave:p}=a,h=k(a,yt),g=Fe(d,i,o),x=Ve(p),f=Be(v,i,o);if(!De(t))return null;var m=ae(u);return l.createElement(l.Fragment,null,l.createElement(Pt,{points:t,props:u}),t.map((s,y)=>{var b=n!=null&&n!==!1,I=b&&c===String(y),w=b&&I?n:r,P=A(A(A({},m),s),{},{index:y,[Le]:String(o)});return l.createElement(B,{key:"symbol-".concat(s?.cx,"-").concat(s?.cy,"-").concat(s?.size,"-").concat(y),zIndex:I?F.activeDot:void 0},l.createElement(S,E({className:"recharts-scatter-symbol"},Te(h,s,y),{onMouseEnter:g(s,y),onMouseLeave:x(s,y),onClick:f(s,y)}),l.createElement(nt,E({option:w,isActive:I},P))))}))}function _t(e){var{previousPointsRef:t,props:a}=e,{points:r,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:u}=a,c=t.current,d=Ee(a,"recharts-scatter-"),[v,p]=l.useState(!1),h=l.useCallback(()=>{p(!1)},[]),g=l.useCallback(()=>{p(!0)},[]),x=!v;return l.createElement(St,{showLabels:x,points:r},a.children,l.createElement(Pe,{animationId:d,begin:i,duration:o,isActive:n,easing:u,onAnimationEnd:h,onAnimationStart:g,key:d},f=>{var m=f===1?r:r?.map((s,y)=>{var b=c&&c[y];return b?A(A({},s),{},{cx:s.cx==null?void 0:C(b.cx,s.cx,f),cy:s.cy==null?void 0:C(b.cy,s.cy,f),size:C(b.size,s.size,f)}):A(A({},s),{},{size:C(0,s.size,f)})});return f>0&&(t.current=m),l.createElement(S,null,l.createElement(Ot,{points:m,allOtherScatterProps:a,showLabels:x}))}),l.createElement(Se,{label:a.label}))}function wt(e){var{displayedData:t,xAxis:a,yAxis:r,zAxis:n,scatterSettings:i,xAxisTicks:o,yAxisTicks:u,cells:c}=e,d=O(a.dataKey)?i.dataKey:a.dataKey,v=O(r.dataKey)?i.dataKey:r.dataKey,p=n&&n.dataKey,h=n?n.range:Ie.range,g=h&&h[0],x=a.scale.bandwidth?a.scale.bandwidth():0,f=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((m,s)=>{var y=z(m,d),b=z(m,v),I=!O(p)&&z(m,p)||"-",w=[{name:O(a.dataKey)?i.name:a.name||String(a.dataKey),unit:a.unit||"",value:y,payload:m,dataKey:d,type:i.tooltipType},{name:O(r.dataKey)?i.name:r.name||String(r.dataKey),unit:r.unit||"",value:b,payload:m,dataKey:v,type:i.tooltipType}];I!=="-"&&n!=null&&w.push({name:n.name||n.dataKey,unit:n.unit||"",value:I,payload:m,dataKey:p,type:i.tooltipType});var P=U({axis:a,ticks:o,bandSize:x,entry:m,index:s,dataKey:d}),D=U({axis:r,ticks:u,bandSize:f,entry:m,index:s,dataKey:v}),R=I!=="-"&&n!=null?n.scale.map(I):g,L=R==null?0:Math.sqrt(Math.max(R,0)/Math.PI);return A(A({},m),{},{cx:P,cy:D,x:P==null?void 0:P-L,y:D==null?void 0:D-L,width:2*L,height:2*L,size:R,node:{x:y,y:b,z:I},tooltipPayload:w,tooltipPosition:{x:P,y:D},payload:m},c&&c[s]&&c[s].props)})}var Dt=(e,t,a)=>({x:e.cx,y:e.cy,value:Number(a==="x"?e.node.x:e.node.y),errorVal:z(e,t)});function Lt(e){var{hide:t,points:a,className:r,needClip:n,xAxisId:i,yAxisId:o,id:u}=e,c=l.useRef(null);if(t)return null;var d=J("recharts-scatter",r),v=u;return l.createElement(B,{zIndex:e.zIndex},l.createElement(S,{className:d,clipPath:n?"url(#clipPath-".concat(v,")"):void 0,id:u},n&&l.createElement("defs",null,l.createElement(ke,{clipPathId:v,xAxisId:i,yAxisId:o})),l.createElement(We,{xAxisId:i,yAxisId:o,data:a,dataPointFormatter:Dt,errorBarOffset:0},l.createElement(S,{key:"recharts-scatter-symbols"},l.createElement(_t,{props:e,previousPointsRef:c})))))}var re={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:F.scatter};function Tt(e){var t=W(e,re),{animationBegin:a,animationDuration:r,animationEasing:n,hide:i,isAnimationActive:o,legendType:u,lineJointType:c,lineType:d,shape:v,xAxisId:p,yAxisId:h,zAxisId:g}=t,x=k(t,ht),{needClip:f}=Ke(p,h),m=l.useMemo(()=>be(e.children,Re),[e.children]),s=V(),y=N(b=>vt(b,p,h,g,e.id,m,s));return f==null||y==null?null:l.createElement(l.Fragment,null,l.createElement(Et,{dataKey:e.dataKey,points:y,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),l.createElement(Lt,E({},x,{xAxisId:p,yAxisId:h,zAxisId:g,lineType:d,lineJointType:c,legendType:u,shape:v,hide:i,isAnimationActive:o,animationBegin:a,animationDuration:r,animationEasing:n,points:y,needClip:f})))}function Ct(e){var t=W(e,re),a=V();return l.createElement(he,{id:t.id,type:"scatter"},r=>l.createElement(l.Fragment,null,l.createElement(xe,{legendPayload:It(t)}),l.createElement(ge,{type:"scatter",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:a}),l.createElement(Tt,E({},t,{id:r}))))}var Mt=l.memo(Ct,ye);Mt.displayName="Scatter";var jt=["item"],Bt=l.forwardRef((e,t)=>l.createElement($e,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jt,tooltipPayloadSearcher:ze,categoricalChartProps:e,ref:t}));function $t(e,t){return e==="BY_WOLF"||e==="SURVIVALIST_NOT_SAVED"?t.Loup:e==="VOTED"?"var(--chart-color-1)":e==="BULLET"||e==="BULLET_HUMAN"||e==="BULLET_WOLF"?t.Chasseur:e==="BY_ZOMBIE"?t.Vaudou:e==="ASSASSIN"?t.Alchimiste:e==="AVENGER"?"var(--chart-color-2)":e==="LOVER_DEATH"?t.Amoureux:e==="BY_BEAST"?"var(--chart-color-3)":e==="SHERIF_SUCCESS"?"var(--chart-color-4)":e==="SMUGGLER_HUNT_KILL"?t.Contrebandier:"var(--accent-primary-text)"}const zt={Village:{src:"/Village.webp",zMin:-820,zMax:820,xMin:-461,xMax:461},Château:{src:"/Château.webp",zMin:-820,zMax:820,xMin:-461,xMax:461}},M={x:166.35,z:176.22,multiplier:5.45},j={x:403.32,z:-121.11,multiplier:18.4};function Nt(e,t,a){let r=e,n=t;return a==="Village"?(r=(e-M.x)*M.multiplier,n=(t-M.z)*M.multiplier*-1):a==="Château"&&(r=(e-j.x)*j.multiplier,n=(t-j.z)*j.multiplier*-1),{x:r,z:n}}function Ut(e){return zt[e]||null}function Kt(e){return e?e==="SURVIVALIST_NOT_SAVED"?"BY_WOLF":e:"UNKNOWN"}function Zt(e,t){if(t===0)return e.map(r=>({centroidX:r.x,centroidZ:r.z,items:[r]}));const a=[];return e.forEach(r=>{let n=!1;for(const i of a)if(Math.sqrt(Math.pow(r.x-i.centroidX,2)+Math.pow(r.z-i.centroidZ,2))<=t){const u=i.items.length;i.centroidX=(i.centroidX*u+r.x)/(u+1),i.centroidZ=(i.centroidZ*u+r.z)/(u+1),i.items.push(r),n=!0;break}n||a.push({centroidX:r.x,centroidZ:r.z,items:[r]})}),a}function Gt(e){if(e.length===0)return null;const t=new Map;e.forEach(n=>{t.set(n.deathType,(t.get(n.deathType)||0)+1)});let a=e[0].deathType,r=0;return t.forEach((n,i)=>{n>r&&(r=n,a=i)}),a}function Xt(e,t){const a=[];return e.forEach(r=>{r.PlayerStats.filter(n=>n.DeathPosition!==null).filter(n=>!t||t==="Tous les camps"?!0:G(n.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0})===t).forEach(n=>{if(n.DeathPosition){const i=G(n.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0}),o=Nt(n.DeathPosition.x,n.DeathPosition.z,r.MapName);a.push({x:o.x,z:o.z,playerName:n.Username,deathType:Kt(n.DeathType),mapName:r.MapName,killerName:n.KillerName||null,camp:i,gameId:r.DisplayedId,displayedGameId:r.DisplayedId})}})}),a}function Ht(e){const t=new Set;return e.forEach(a=>{a.PlayerStats.some(n=>n.DeathPosition!==null)&&a.MapName&&t.add(a.MapName)}),Array.from(t).sort()}export{et as R,Bt as S,Zt as a,Gt as b,Xt as c,Ut as d,Mt as e,$t as f,Ht as g,Nt as h};
