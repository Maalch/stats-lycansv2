import{a as B,r as N,g as Y,b as U,m as ee,u as K,j as e,d as se,n as ae}from"./index-D29gFAlo.js";import{g as te,a as re,u as ie}from"./datasyncExport-N4AHjlHv.js";import{g as le}from"./gameUtils-BmoQUGqx.js";import{u as O}from"./useJoueursData-BNoj_dH5.js";import{u as _,g as ne,a as oe,l as X}from"./api-DI8yaqsp.js";import{F as L,C as M,X as z,Y as E,B as W,a as I,b as F}from"./FullscreenChart-uZG6xoIM.js";import{R as D,T as A}from"./CategoricalChart-DKXOB_65.js";import{L as ce,a as de}from"./LineChart-Bt1GwRd4.js";import{P as ue,a as me}from"./PieChart-91tjgO96.js";import{R as J}from"./ReferenceLine-wsNwfsiA.js";import"./ActivePoints-CUQr_5PE.js";import"./PolarChart-BuWqPLNi.js";function pe(d){const{settings:g}=B(),[h,f]=N.useState(null),[j,m]=N.useState(!1),[u,p]=N.useState(null);N.useEffect(()=>{let r=!0;return(async()=>{try{m(!0),p(null);const n=g.dataSource==="discord"?"/data/discord/playerAchievements.json":"/data/playerAchievements.json",o=await fetch(n);if(!o.ok)throw new Error(`Failed to load achievements: ${o.status} ${o.statusText}`);const x=await o.json();r&&f(x)}catch(n){r&&p(n instanceof Error?n.message:"Failed to load achievements")}finally{r&&m(!1)}})(),()=>{r=!1}},[g.dataSource]);const i=d&&h?.achievements[d]||null;return N.useEffect(()=>{if(d&&h){const r=h.achievements[d];r?console.log(`ðŸ† Achievements for ${d} (${g.dataSource}):`,{allGames:r.allGamesAchievements.length,moddedOnly:r.moddedOnlyAchievements.length,categories:[...new Set([...r.allGamesAchievements.map(t=>t.category),...r.moddedOnlyAchievements.map(t=>t.category)])]}):console.log(`âŒ No achievements found for ${d} in ${g.dataSource} data source`)}},[d,h,g.dataSource]),{data:i,isLoading:j,error:u,metadata:{generatedAt:h?.generatedAt||null,totalPlayers:h?.totalPlayers||0,totalGames:h?.totalGames||0,totalModdedGames:h?.totalModdedGames||0}}}function he(d,g){if(!d||d.trim()===""||g.length===0)return null;const h=[];let f=d;g.forEach(r=>{const t=r.PlayerStats.find(n=>Y(n)===d||n.Username.toLowerCase()===d.toLowerCase());if(t){f=U(t);const n=te(re(t.MainRoleInitial,t.MainRoleChanges||[])),o=le(r),x=t.Victorious,k=ee(new Date(r.StartDate));h.push({gameId:r.Id,date:k,camp:n,won:x,winnerCamp:o,playersInGame:r.PlayerStats.length,mapName:r.MapName})}}),h.sort((r,t)=>{const n=o=>{const x=o.split("/");return x.length===3?new Date(parseInt(x[2]),parseInt(x[1])-1,parseInt(x[0])):new Date(o)};return n(t.date).getTime()-n(r.date).getTime()});const j=h.length,m=h.filter(r=>r.won).length,u=j>0?(m/j*100).toFixed(2):"0.00",p={};h.forEach(r=>{p[r.camp]||(p[r.camp]={appearances:0,wins:0,winRate:"0.00"}),p[r.camp].appearances++,r.won&&p[r.camp].wins++}),Object.keys(p).forEach(r=>{const t=p[r];t.winRate=t.appearances>0?(t.wins/t.appearances*100).toFixed(2):"0.00"});const i={};return h.forEach(r=>{i[r.mapName]||(i[r.mapName]={appearances:0,wins:0,winRate:"0.00"}),i[r.mapName].appearances++,r.won&&i[r.mapName].wins++}),Object.keys(i).forEach(r=>{const t=i[r];t.winRate=t.appearances>0?(t.wins/t.appearances*100).toFixed(2):"0.00"}),{playerName:f,totalGames:j,totalWins:m,winRate:u,games:h,campStats:p,mapStats:i}}function ge(d){const g={};let h=0,f=0;return Object.entries(d).forEach(([j,m])=>{j==="Village"||j==="ChÃ¢teau"?g[j]={...m}:(h+=m.appearances,f+=m.wins)}),h>=10&&(g.Autres={appearances:h,wins:f,winRate:h>0?(f/h*100).toFixed(2):"0.00"}),g}function H(d){const{data:g,isLoading:h,error:f}=ie(j=>d?he(d,j):null);return{data:g,isLoading:h,error:f}}function fe({achievements:d,title:g,emptyMessage:h,achievementType:f="all"}){const{navigateToTab:j,updateNavigationState:m,clearNavigation:u}=K(),{settings:p,updateSettings:i}=B(),{joueursData:r}=O(),t=_(r),n=(s,b)=>{if(b.stopPropagation(),!s.redirectTo)return;u();const C=p.highlightedPlayer;if(i(f==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:C,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:C,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}),s.category==="comparison"&&s.redirectTo.subTab==="comparison"){const a=p.highlightedPlayer||"",l=o(s.description,a);l&&m({playerComparisonState:{selectedPlayer1:a,selectedPlayer2:l,showDetailedStats:!0}})}if(s.category==="comparison"&&s.redirectTo.subTab==="pairing"){const a=s.description.toLowerCase().includes("loup");m({selectedPairingTab:a?"wolves":"lovers"})}if(s.category==="kills"&&s.redirectTo.subTab==="deathStats"){const a=s.description.match(/(Villageois|Loups|Autres)/i);a&&m({deathStatsSelectedCamp:a[1]});let l=10;const c=s.description.match(/min\.\s*(\d+)/);c&&(l=parseInt(c[1],10));let v="totalKills";const y=s.redirectTo.chartSection;y&&(y==="killers-total"?v="totalKills":y==="killers-average"?v="averageKills":y==="deaths-total"?v="totalDeaths":y==="survivors-average"&&(v="survivalRate")),m({deathStatisticsState:{selectedCamp:a?.[1]||"Tous les camps",minGamesForAverage:l,focusChart:v}})}if(s.category==="map"&&s.redirectTo.subTab==="playersGeneral"){const a=s.redirectTo.mapFilter||"all";let l=10;const c=s.description.match(/min\.\s*(\d+)/);c&&(l=parseInt(c[1])),i(f==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:a,playerFilter:{mode:"none",players:[]},highlightedPlayer:C,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:a,playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:a,playerFilter:{mode:"none",players:[]},highlightedPlayer:C,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:a,playerFilter:{mode:"none",players:[]}}}),m({playersGeneralState:{minGamesForWinRate:l,winRateOrder:"best",focusChart:"winRate"}}),j("players","playersGeneral");return}if(s.category==="history"&&s.redirectTo.subTab==="history"&&m({selectedPlayerName:p.highlightedPlayer||"",groupingMethod:"session"}),s.category==="series"&&s.redirectTo.subTab==="series"){let a="wins";const l=s.title.toLowerCase(),c=s.description.toLowerCase();l.includes("dÃ©faite")||c.includes("dÃ©faite")?a="losses":l.includes("loup")||c.includes("loup")?a="loup":l.includes("villageois")||c.includes("villageois")?a="villageois":(l.includes("victoire")||c.includes("victoire"))&&(a="wins"),m({selectedSeriesType:a})}if(s.category==="general"&&s.redirectTo.subTab==="playersGeneral"){let a=10;const l=s.description.match(/min\.\s*(\d+)/);l&&(a=parseInt(l[1],10));let c="winRate",v="best";const y=s.title.toLowerCase(),R=s.description.toLowerCase();y.includes("participation")||R.includes("participation")?c="participation":(y.includes("taux de victoire")||R.includes("taux de victoire"))&&(c="winRate",(y.includes("moins bon")||y.includes("mauvais")||R.includes("moins bon")||R.includes("mauvais"))&&(v="worst")),m({playersGeneralState:{minGamesForWinRate:a,winRateOrder:v,focusChart:c}})}if(s.category==="performance"&&s.redirectTo.subTab==="campPerformance"){const a=s.redirectTo.chartSection;let l="Villageois",c=1;a&&(a==="camp-loup"?l="Loup":a==="camp-villageois"?l="Villageois":a==="camp-idiot"?l="Idiot du Village":a==="camp-amoureux"?l="Amoureux":(a==="solo-roles"||a==="hall-of-fame")&&(l="Villageois"));const v=s.description.match(/min\.\s*(\d+)/);v&&(c=parseInt(v[1],10)),a==="solo-roles"?l="RÃ´les spÃ©ciaux":a==="hall-of-fame"&&(l="Tous les camps"),m({campPerformanceState:{selectedCampPerformanceCamp:l,selectedCampPerformanceMinGames:c}})}if(s.category==="voting"&&s.redirectTo.subTab==="votingStats"){const a=s.title.toLowerCase();let l="overview",c="behavior";a.includes("agressivitÃ©")?(l="overview",c="behavior"):a.includes("taux de vote")?(l="behavior",c="voteRate"):a.includes("prÃ©cision")&&(l="overview",c="accuracy"),m({votingStatsState:{selectedCategory:l,selectedView:c}})}j(s.redirectTo.tab,s.redirectTo.subTab)},o=(s,b)=>{const C=[/avec ([^:]+?):/,/contre ([^:]+?):/];for(const a of C){const l=s.match(a);if(l&&l[1]){const c=l[1].trim();if(c!==b)return c}}return null},x=s=>{if(!s.redirectTo)return"Aucune navigation disponible";switch(s.category){case"general":if(s.redirectTo.subTab==="playersGeneral"){const a=s.description.match(/min\.\s*(\d+)/),l=a?parseInt(a[1],10):10,c=s.title.toLowerCase(),v=f==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)";return c.includes("taux de victoire")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les taux de victoire (min. ${l} parties)${v}`:c.includes("participation")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les participations${v}`:`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le classement gÃ©nÃ©ral des joueurs${v}`}break;case"map":if(s.redirectTo.subTab==="playersGeneral"){const a=s.redirectTo.mapFilter,l=a==="village"?"Village":a==="chateau"?"ChÃ¢teau":"map",c=f==="modded"?" (Filtres parties moddÃ©es + map activÃ©s)":" (Filtre map activÃ©)";return`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques gÃ©nÃ©rales filtrÃ©es sur ${l}${c}`}break;case"history":if(s.redirectTo.subTab==="history")return"Cliquez pour voir l'historique dÃ©taillÃ© du joueur par map";break;case"comparison":if(s.redirectTo.subTab==="comparison")return`Cliquez pour comparer avec ${o(s.description,p.highlightedPlayer||"")||"ce joueur"}`;if(s.redirectTo.subTab==="pairing")return"Cliquez pour voir les statistiques de paires";break;case"kills":if(s.redirectTo.subTab==="deathStats"){const a=s.description.match(/(Villageois|Loups|Autres)/i),l=s.description.match(/min\.\s*(\d+)/),c=l?parseInt(l[1],10):10,v=a?.[1]||"Tous les camps",y=s.redirectTo.chartSection;let R="kills et morts";return y==="killers-total"?R="total des kills":y==="killers-average"?R=`moyenne des kills (min. ${c} parties)`:y==="deaths-total"?R="total des morts":y==="survivors-average"&&(R=`taux de survie (min. ${c} parties)`),`Cliquez pour voir les statistiques de ${R} ${v!=="Tous les camps"?`en ${v}`:""}`}break;case"series":if(s.redirectTo.subTab==="series"){const a=s.title.toLowerCase(),l=s.description.toLowerCase();return a.includes("dÃ©faite")||l.includes("dÃ©faite")?"Cliquez pour voir les sÃ©ries de dÃ©faites":a.includes("loup")||l.includes("loup")?"Cliquez pour voir les sÃ©ries Loups":a.includes("villageois")||l.includes("villageois")?"Cliquez pour voir les sÃ©ries Villageois":a.includes("victoire")||l.includes("victoire")?"Cliquez pour voir les sÃ©ries de victoires":"Cliquez pour voir les sÃ©ries consÃ©cutives"}break;case"performance":if(s.redirectTo.subTab==="campPerformance"){const a=s.redirectTo.chartSection,l=f==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)";return a==="camp-loup"?`Cliquez pour voir les performances camp Loup${l}`:a==="camp-villageois"?`Cliquez pour voir les performances camp Villageois${l}`:a==="camp-idiot"?`Cliquez pour voir les performances camp Idiot du Village${l}`:a==="camp-amoureux"?`Cliquez pour voir les performances camp Amoureux${l}`:a==="solo-roles"?`Cliquez pour voir le classement (rÃ´les spÃ©ciaux)${l}`:a==="hall-of-fame"?`Cliquez pour voir le Hall of Fame (toutes performances)${l}`:`Cliquez pour voir les performances par camp${l}`}break;case"voting":if(s.redirectTo.subTab==="votingStats"){const a=s.description.match(/min\.\s*(\d+)/),l=a?parseInt(a[1],10):25,c=f==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)",v=s.title.toLowerCase();return v.includes("agressivitÃ©")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le score d'agressivitÃ© (min. ${l} meetings)${c}`:v.includes("taux de vote")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir le taux de vote (min. ${l} meetings)${c}`:v.includes("prÃ©cision")?`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir la prÃ©cision des votes${c}`:`Classement: ${s.rank}${s.totalRanked?`/${s.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques de vote${c}`}break}return`Cliquez pour voir ${s.redirectTo.subTab}`+(f==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)")},k=s=>t[s]||ne(s),G=s=>{const b=[/avec ([^:]+?):/,/contre ([^:]+?):/];let C=s;return b.forEach(a=>{const l=s.match(a);if(l&&l[1]){const c=l[1].trim(),y=`<span class="player-name-highlight" style="color: ${k(c)};">${c}</span>`;C=C.replace(c,y)}}),C};if(d.length===0)return e.jsxs("div",{className:"achievements-empty",children:[e.jsx("h4",{children:g}),e.jsx("p",{children:h||"Aucun succÃ¨s dans cette catÃ©gorie"})]});const w=s=>s===1?"ðŸ¥‡":s===2?"ðŸ¥ˆ":s===3?"ðŸ¥‰":"",S=s=>s===1?"rank-1":s===2?"rank-2":s===3?"rank-3":s&&s<=10?"rank-top-10":"",T=d.filter(s=>s.category!=="comparison"&&(s.type==="good"||s.type==="neutral")).sort((s,b)=>(s.rank??999)-(b.rank??999)),V=d.filter(s=>s.category!=="comparison"&&s.type==="bad").sort((s,b)=>(s.rank??999)-(b.rank??999)),$=d.filter(s=>s.category==="comparison"),P=T.filter(s=>s.rank&&s.rank<=3).length;return e.jsxs("div",{className:"achievements-container",children:[e.jsx("h4",{children:g}),P>0&&e.jsxs("div",{className:"top3-showcase",children:[e.jsx("h5",{className:"top3-title",children:"âœ¨ Podium d'Excellence âœ¨"}),e.jsx("div",{className:"top3-grid",children:T.filter(s=>s.rank&&s.rank<=3).map((s,b)=>e.jsxs("div",{className:`top3-card ${S(s.rank)} animate-slide-in`,style:{animationDelay:`${b*.15}s`},onClick:C=>n(s,C),title:x(s),children:[e.jsx("div",{className:"top3-medal-container",children:e.jsx("span",{className:"top3-medal",children:w(s.rank)})}),e.jsxs("div",{className:"top3-content",children:[e.jsxs("div",{className:"top3-rank-badge",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]}),e.jsx("h6",{className:"top3-achievement-title",children:s.title}),e.jsx("p",{className:"top3-achievement-description",children:s.description})]}),e.jsxs("div",{className:"top3-sparkles",children:[e.jsx("span",{className:"sparkle sparkle-1",children:"âœ¨"}),e.jsx("span",{className:"sparkle sparkle-2",children:"â­"}),e.jsx("span",{className:"sparkle sparkle-3",children:"âœ¨"})]})]},s.id))})]}),T.length>0&&e.jsxs("div",{className:"achievements-section good-achievements",children:[e.jsx("h5",{children:"ðŸ† Classements"}),e.jsx("div",{className:"achievements-grid",children:T.filter(s=>!s.rank||s.rank>3).map((s,b)=>e.jsxs("div",{className:`achievement-card good ${S(s.rank)}`,onClick:C=>n(s,C),title:x(s),style:{animationDelay:`${b*.05}s`},children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:s.title}),e.jsxs("span",{className:"achievement-rank",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:s.description})]},s.id))})]}),V.length>0&&e.jsxs("div",{className:"achievements-section bad-achievements",children:[e.jsx("h5",{children:"ðŸ’€ Classements (InversÃ©s)"}),e.jsx("div",{className:"achievements-grid",children:V.map(s=>e.jsxs("div",{className:`achievement-card bad rank-${s.rank}`,onClick:b=>n(s,b),title:x(s),children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:s.title}),e.jsxs("span",{className:"achievement-rank",children:["#",s.rank,s.totalRanked?`/${s.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:s.description})]},s.id))})]}),$.length>0&&e.jsxs("div",{className:"achievements-section comparison-achievements",children:[e.jsx("h5",{children:"ðŸ“Š Statistiques Face-Ã -Face"}),e.jsx("div",{className:"achievements-grid",children:$.map(s=>e.jsxs("div",{className:"achievement-card comparison",onClick:b=>n(s,b),title:x(s),children:[e.jsx("div",{className:"achievement-header",children:e.jsx("span",{className:"achievement-title",children:s.title})}),e.jsx("p",{className:"achievement-description",dangerouslySetInnerHTML:{__html:G(s.description)}})]},s.id))})]})]})}function xe({selectedPlayerName:d,groupingMethod:g}){const{navigateToGameDetails:h}=K(),{data:f,isLoading:j,error:m}=H(d),u=N.useMemo(()=>{if(!f?.games)return new Map;const t=new Map;return f.games.forEach(n=>{if(!t.has(n.date)){const o=n.date.split("/");o.length===3?t.set(n.date,new Date(parseInt(o[2]),parseInt(o[1])-1,parseInt(o[0])).getTime()):t.set(n.date,new Date(n.date).getTime())}}),t},[f?.games]),p=N.useMemo(()=>{if(!f?.games)return[];const t={};return f.games.forEach(n=>{let o;if(g==="month"){const x=n.date.split("/");x.length===3?o=`${x[1]}/${x[2]}`:o=n.date}else o=n.date;t[o]||(t[o]={games:[],wins:0,total:0}),t[o].games.push(n),t[o].total++,n.won&&t[o].wins++}),Object.entries(t).map(([n,o])=>({period:n,totalGames:o.total,victories:o.wins,defeats:o.total-o.wins,winRate:o.total>0?(o.wins/o.total*100).toFixed(1):"0.0",winRateNum:o.total>0?o.wins/o.total*100:0})).sort((n,o)=>{if(g==="month"){const[x,k]=n.period.split("/"),[G,w]=o.period.split("/"),S=new Date(parseInt(k),parseInt(x)-1,1),T=new Date(parseInt(w),parseInt(G)-1,1);return S.getTime()-T.getTime()}else{const x=u.get(n.period)||0,k=u.get(o.period)||0;return x-k}})},[f,g,u]),r=(t=>t<=15?{fontSize:12,angle:-45,height:80,interval:0}:t<=30?{fontSize:12,angle:-45,height:85,interval:1}:t<=50?{fontSize:12,angle:-60,height:95,interval:2}:{fontSize:12,angle:-75,height:105,interval:Math.floor(t/12)})(p.length);return j?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):m?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",m]}):f?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["Ã‰volution des Performances ",g==="month"?"par Mois":"par Session"]}),e.jsx(L,{title:`Ã‰volution des Performances ${g==="month"?"par Mois":"par Session"}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(ce,{data:p,margin:{top:20,right:30,left:20,bottom:20},onClick:t=>{if(t&&t.activeLabel){const n=p.find(o=>o.period===t.activeLabel);n&&h({selectedPlayer:d,selectedDate:n.period,fromComponent:`Ã‰volution des Performances ${g==="month"?"par Mois":"par Session"}`})}},style:{cursor:"pointer"},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"period",angle:r.angle,textAnchor:"end",height:r.height,interval:r.interval,fontSize:r.fontSize}),e.jsx(E,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(A,{content:({active:t,payload:n})=>{if(t&&n&&n.length>0){const o=n[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:o.period})}),e.jsxs("div",{children:["Parties: ",o.totalGames]}),e.jsxs("div",{children:["Victoires: ",o.victories]}),e.jsxs("div",{children:["Taux: ",o.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(de,{type:"monotone",dataKey:"winRateNum",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:2,r:4}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["RÃ©partition Victoires/DÃ©faites ",g==="month"?"par Mois":"par Session"]}),e.jsx(L,{title:`RÃ©partition Victoires/DÃ©faites ${g==="month"?"par Mois":"par Session"}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{data:p,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"period",angle:r.angle,textAnchor:"end",height:r.height,interval:r.interval,fontSize:r.fontSize}),e.jsx(E,{label:{value:"Nombre de parties",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(A,{content:({active:t,payload:n})=>{if(t&&n&&n.length>0){const o=n[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:o.period})}),e.jsxs("div",{children:["Total: ",o.totalGames," parties"]}),e.jsxs("div",{children:["Victoires: ",o.victories]}),e.jsxs("div",{children:["DÃ©faites: ",o.defeats]}),e.jsxs("div",{children:["Taux: ",o.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"victories",stackId:"games",fill:"var(--accent-tertiary)",name:"Victoires",children:p.map((t,n)=>e.jsx(F,{fill:"var(--accent-tertiary)",onClick:()=>{h({selectedPlayer:d,selectedDate:t.period,fromComponent:`Historique Joueur - Victoires ${g==="month"?"par Mois":"par Session"}`})},style:{cursor:"pointer"}},`cell-victories-${n}`))}),e.jsx(I,{dataKey:"defeats",stackId:"games",fill:"var(--chart-color-4)",name:"DÃ©faites",children:p.map((t,n)=>e.jsx(F,{fill:"var(--chart-color-4)",onClick:()=>{h({selectedPlayer:d,selectedDate:t.period,fromComponent:`Historique Joueur - DÃ©faites ${g==="month"?"par Mois":"par Session"}`})},style:{cursor:"pointer"}},`cell-defeats-${n}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function ve({selectedPlayerName:d}){const{navigateToGameDetails:g}=K(),{data:h,isLoading:f,error:j}=H(d),m=oe(),u=N.useMemo(()=>h?.campStats?Object.entries(h.campStats).map(([i,r])=>({name:i,value:r.appearances,winRate:r.winRate,winRateDisplay:Math.max(parseFloat(r.winRate),1),wins:r.wins,percentage:(r.appearances/h.totalGames*100).toFixed(1)})):[],[h]),p=N.useMemo(()=>{if(!u.length)return[];const i=5;let r=0;const t=[],n=[];if(u.forEach(o=>{parseFloat(o.percentage)<i?(r+=Number(o.value),t.push(o)):n.push(o)}),r>0){const o=u.reduce((x,k)=>x+Number(k.value),0);n.push({name:"Autres",value:r,winRate:"0.0",winRateDisplay:1,wins:t.reduce((x,k)=>x+k.wins,0),percentage:(r/o*100).toFixed(1),_details:t})}return n},[u]);return f?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):j?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",j]}):h?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Distribution par Camps"}),e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(ue,{children:[e.jsx(me,{data:p,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",label:i=>{const r=i.percent!==void 0?i.percent:0;return i.name==="Autres"?`Autres : ${i.value} (${(r*100).toFixed(1)}%)`:`${i.name}: ${i.value} (${(r*100).toFixed(1)}%)`},children:p.map((i,r)=>e.jsx(F,{fill:i.name==="Autres"?X:m[i.name]||`var(--chart-color-${r%6+1})`,onClick:()=>{if(i.name==="Autres"){const t=i._details?.map(n=>n.name)||[];g({selectedPlayer:d,campFilter:{selectedCamp:"Autres",campFilterMode:"all-assignments",_smallCamps:t},fromComponent:"Distribution par Camps"})}else i.name==="TraÃ®tre"||i.name==="Louveteau"?g({selectedPlayer:d,campFilter:{selectedCamp:i.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):i.name==="Loup"?g({selectedPlayer:d,campFilter:{selectedCamp:"Loup",campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):g({selectedPlayer:d,campFilter:{selectedCamp:i.name,campFilterMode:"all-assignments"},fromComponent:"Distribution par Camps"})},style:{cursor:"pointer"}},`cell-${r}`))}),e.jsx(A,{content:({active:i,payload:r})=>{if(i&&r&&r.length>0){const t=r[0].payload;if(t.name==="Autres"&&t._details){const n=[...t._details].sort((o,x)=>x.value-o.value);return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Autres - ",t.value," parties (",t.percentage,"%)"]})}),e.jsx("div",{children:n.map((o,x)=>e.jsxs("div",{children:[o.name,": ",o.value," parties (",o.percentage,"%)"]},x))}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--chart-color-1)",marginTop:"0.25rem",fontStyle:"italic"},children:"Cliquez pour voir toutes les parties de ces camps"})]})}return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:[t.name," (",t.percentage,"%)"]})}),e.jsxs("div",{children:["Apparitions: ",t.value]}),e.jsxs("div",{children:["Victoires: ",t.wins," (",t.winRate,"%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}})]})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Camp"}),e.jsx(L,{title:"Performance par Camp",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{data:u,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(E,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(A,{content:({active:i,payload:r})=>{if(i&&r&&r.length>0){const t=r[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.name})}),e.jsxs("div",{children:["Victoires: ",t.wins," / ",t.value]}),e.jsxs("div",{children:["Taux: ",t.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"winRateDisplay",children:u.map((i,r)=>e.jsx(F,{fill:parseFloat(i.winRate)===0?`${m[i.name]||`var(--chart-color-${r%6+1})`}50`:m[i.name]||`var(--chart-color-${r%6+1})`,onClick:()=>{i.name==="TraÃ®tre"||i.name==="Louveteau"?g({selectedPlayer:d,campFilter:{selectedCamp:i.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):i.name==="Loup"?g({selectedPlayer:d,campFilter:{selectedCamp:i.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):g({selectedPlayer:d,campFilter:{selectedCamp:i.name,campFilterMode:"all-assignments"},fromComponent:"Performance par Camp"})},style:{cursor:"pointer"}},`cell-${r}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function je({selectedPlayerName:d}){const{navigateToGameDetails:g}=K(),{data:h,isLoading:f,error:j}=H(d),m=N.useMemo(()=>{if(!h?.mapStats)return[];const u=ge(h.mapStats);return Object.entries(u).map(([p,i])=>({name:p,value:i.appearances,winRate:i.winRate,winRateDisplay:Math.max(parseFloat(i.winRate),.1),wins:i.wins,percentage:(i.appearances/h.totalGames*100).toFixed(1)}))},[h]);return f?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):j?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",j]}):h?m.length===0?e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e de carte disponible"}),e.jsx("p",{children:"Aucune statistique de carte n'est disponible pour ce joueur."})]}):e.jsx("div",{className:"lycans-graphiques-groupe",children:e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Carte"}),e.jsx(L,{title:"Performance par Carte",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{data:m,margin:{top:20,right:140,left:20,bottom:20},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(E,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(J,{y:50,stroke:"var(--text-secondary)",strokeDasharray:"5 5",strokeOpacity:.5}),(()=>{if(m.length>0){const u=m.reduce((r,t)=>r+t.value,0),p=m.reduce((r,t)=>r+t.wins,0),i=u>0?p/u*100:0;if(i!==50)return e.jsx(J,{y:i,stroke:"var(--accent-primary)",strokeDasharray:"3 3",strokeOpacity:.7,label:{value:`Moyenne: ${i.toFixed(1)}%`,position:"right",offset:5,style:{fill:"var(--accent-primary)"}}})}return null})(),e.jsx(A,{content:({active:u,payload:p})=>{if(u&&p&&p.length>0){const i=p[0].payload,r=[];return m.forEach(t=>{if(t.name!==i.name&&t.value>=5){const n=parseFloat(i.winRate)-parseFloat(t.winRate);Math.abs(n)>=2&&r.push({map:t.name,diff:n,better:n>0})}}),e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)",maxWidth:"250px"},children:[e.jsx("div",{children:e.jsx("strong",{children:i.name})}),e.jsxs("div",{children:["Parties: ",i.value]}),e.jsxs("div",{children:["Victoires: ",i.wins]}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsxs("strong",{children:["Taux: ",i.winRate,"%"]})}),r.length>0&&e.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Comparaisons:"}),r.map((t,n)=>e.jsxs("div",{style:{fontSize:"0.75rem",color:t.better?"var(--accent-tertiary)":"var(--chart-color-4)"},children:[t.better?"â†—":"â†˜"," ",Math.abs(t.diff).toFixed(1),"% vs ",t.map]},n))]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"winRateDisplay",label:u=>{const{x:p,y:i,width:r,payload:t}=u;if(p===void 0||i===void 0||r===void 0||!t)return null;const n=t.winRate||"0";return e.jsxs("text",{x:p+r/2,y:i-5,fill:"var(--text-primary)",textAnchor:"middle",fontSize:"12",fontWeight:"bold",children:[n,"%"]})},onClick:u=>{u&&u.name&&g({selectedPlayer:d,selectedMapName:u.name,fromComponent:"Performance par Carte"})},children:m.map((u,p)=>{let i;u.name==="Village"?i="var(--accent-secondary)":u.name==="ChÃ¢teau"?i="var(--accent-tertiary)":u.name==="Autres"?i=X:i=`var(--chart-color-${p%6+1})`;const r=Math.max(...m.map(n=>parseFloat(n.winRate))),t=parseFloat(u.winRate)===r&&r>0;return e.jsx(F,{fill:parseFloat(u.winRate)===0?`${i}30`:i,stroke:"transparent",strokeWidth:t?3:1,style:{cursor:"pointer"}},`cell-map-${p}`)})})]})})})})]})}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function ye({selectedPlayerName:d}){const{gameData:g}=se(),{joueursData:h}=O(),f=_(h),j=N.useMemo(()=>{if(!g||!d)return{playersKilled:[],killedBy:[]};const m={},u={};g.forEach(r=>{const t=r.PlayerStats.find(n=>n.Username.toLowerCase()===d.toLowerCase());t&&(r.PlayerStats.forEach(n=>{n.KillerName?.toLowerCase()===d.toLowerCase()&&(m[n.Username]=(m[n.Username]||0)+1)}),t.KillerName&&(u[t.KillerName]=(u[t.KillerName]||0)+1))});const p=Object.entries(m).map(([r,t])=>({player:r,kills:t})).sort((r,t)=>t.kills-r.kills).slice(0,10),i=Object.entries(u).map(([r,t])=>({player:r,kills:t})).sort((r,t)=>t.kills-r.kills).slice(0,10);return{playersKilled:p,killedBy:i}},[g,d]);return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[j.playersKilled.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Joueurs les plus souvent tuÃ©s"}),e.jsx(L,{title:"Joueurs les plus souvent tuÃ©s",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{data:j.playersKilled,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(E,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(A,{content:({active:m,payload:u})=>{if(m&&u&&u.length>0){const p=u[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:p.player})}),e.jsxs("div",{children:["TuÃ© ",p.kills," fois par ",d]})]})}return null}}),e.jsx(I,{dataKey:"kills",children:j.playersKilled.map((m,u)=>e.jsx(F,{fill:f[m.player]||"var(--chart-color-3)"},`cell-killed-${u}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucun kill enregistrÃ©"}),e.jsxs("p",{children:[d," n'a tuÃ© aucun joueur dans les parties enregistrÃ©es."]})]}),j.killedBy.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Le plus souvent tuÃ© par"}),e.jsx(L,{title:"Le plus souvent tuÃ© par",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{data:j.killedBy,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(E,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(A,{content:({active:m,payload:u})=>{if(m&&u&&u.length>0){const p=u[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:p.player})}),e.jsxs("div",{children:["A tuÃ© ",d," ",p.kills," fois"]})]})}return null}}),e.jsx(I,{dataKey:"kills",children:j.killedBy.map((m,u)=>e.jsx(F,{fill:f[m.player]||"var(--chart-color-4)"},`cell-killer-${u}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune mort par kill"}),e.jsxs("p",{children:[d," n'a jamais Ã©tÃ© tuÃ© par un autre joueur dans les parties enregistrÃ©es."]})]})]})}function Ae(){const{settings:d,updateSettings:g}=B(),{navigateToGameDetails:h}=K(),{data:f,isLoading:j,error:m}=ae(),{joueursData:u,isLoading:p}=O(),{data:i,isLoading:r,error:t}=pe(d.highlightedPlayer),n=_(u),[o,x]=N.useState(""),[k,G]=N.useState("all"),[w,S]=N.useState("achievements"),[T,V]=N.useState("session"),{data:$}=H(d.highlightedPlayer||""),P=N.useMemo(()=>{if(!f||!f.GameStats)return[];const a=new Map;return f.GameStats.forEach(l=>{const c=new Date(l.StartDate);l.PlayerStats.forEach(v=>{const y=Y(v),Q=u?.Players?.find(Z=>Z.ID===y)?.Joueur||U(v);a.has(y)||a.set(y,{games:0,wins:0,firstDate:c,lastDate:c,displayName:Q});const q=a.get(y);q.games++,v.Victorious&&q.wins++,c<q.firstDate&&(q.firstDate=c),c>q.lastDate&&(q.lastDate=c)})}),Array.from(a.entries()).map(([l,c])=>{let v=u?.Players?.find(y=>y.ID===l);return v||(v=u?.Players?.find(y=>y.Joueur===c.displayName)),{name:c.displayName,totalGames:c.games,totalWins:c.wins,winRate:c.games>0?c.wins/c.games*100:0,firstGameDate:c.firstDate.toLocaleDateString("fr-FR"),lastGameDate:c.lastDate.toLocaleDateString("fr-FR"),isHighlighted:c.displayName===d.highlightedPlayer,image:v?.Image||null,twitch:v?.Twitch||null,youtube:v?.Youtube||null}})},[f,d.highlightedPlayer,u]),s=N.useMemo(()=>{if(!o.trim())return P;const a=o.toLowerCase();return P.filter(l=>l.name.toLowerCase().includes(a))},[P,o]),b=N.useMemo(()=>[...s].sort((a,l)=>l.totalGames-a.totalGames),[s]),C=a=>{g({highlightedPlayer:a}),x("")};return j||p?e.jsxs("div",{className:"player-selection-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des joueurs..."})]}):m?e.jsxs("div",{className:"player-selection-error",children:[e.jsx("h2",{children:"Erreur"}),e.jsxs("p",{children:["Impossible de charger les donnÃ©es des joueurs: ",m]})]}):!f||P.length===0?e.jsxs("div",{className:"player-selection-empty",children:[e.jsx("h2",{children:"Aucune donnÃ©e disponible"}),e.jsx("p",{children:"Aucun joueur trouvÃ© dans les donnÃ©es."})]}):e.jsxs("div",{className:"player-selection-container",children:[!d.highlightedPlayer&&e.jsxs("div",{className:"search-controls-header",children:[e.jsxs("div",{className:"selection-prompt-content",children:[e.jsx("h2",{children:"SÃ©lectionnez un joueur"}),e.jsx("p",{children:"Choisissez un joueur pour le mettre en Ã©vidence dans tous les graphiques."})]}),e.jsxs("div",{className:"search-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un joueur...",value:o,onChange:a=>x(a.target.value),className:"search-input"}),e.jsx("span",{className:"search-icon",children:"ðŸ”"})]}),e.jsxs("div",{className:"player-count",children:[s.length," joueur",s.length!==1?"s":"",o&&` (filtrÃ©${s.length!==1?"s":""} de ${P.length})`]})]})]}),e.jsx("div",{className:"player-display",children:o?s.length>0?e.jsxs("div",{className:"search-results",children:[e.jsxs("div",{className:"search-results-header",children:[e.jsx("h3",{children:"RÃ©sultats de recherche:"}),e.jsx("button",{className:"clear-search-btn",onClick:()=>x(""),children:"Effacer la recherche"})]}),e.jsx("div",{className:"suggestion-list",children:b.map(a=>e.jsxs("button",{className:`suggestion-btn ${a.isHighlighted?"highlighted":""}`,onClick:()=>C(a.name),children:[a.image?e.jsx("img",{src:a.image,alt:a.name,className:"player-avatar"}):e.jsx("div",{className:"player-avatar-default",style:{"--player-color":n[a.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"suggestion-btn-content",children:[e.jsxs("div",{className:"suggestion-btn-name",children:[a.name,a.isHighlighted&&e.jsx("span",{className:"highlight-indicator",children:" â˜…"})]}),e.jsxs("div",{className:"suggestion-btn-stats",children:[a.totalGames," parties â€¢ ",a.winRate.toFixed(1),"% victoires"]})]})]},a.name))})]}):e.jsxs("div",{className:"no-results",children:[e.jsxs("p",{children:['Aucun joueur trouvÃ© pour "',o,'"']}),e.jsx("button",{className:"clear-search-btn",onClick:()=>x(""),children:"Effacer la recherche"})]}):d.highlightedPlayer?(()=>{const a=P.find(l=>l.name===d.highlightedPlayer);return a?e.jsxs("div",{className:"single-player-card highlighted",children:[e.jsxs("div",{className:"player-card-header",children:[e.jsx("h3",{className:"player-name",children:a.name}),e.jsx("span",{className:"highlight-badge",children:"â˜… Mis en Ã©vidence"})]}),e.jsxs("div",{className:"player-info-row",children:[a.image?e.jsx("img",{src:a.image,alt:a.name,className:"player-avatar large"}):e.jsx("div",{className:"player-avatar-default large",style:{"--player-color":n[a.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"player-info-text",children:[e.jsxs("div",{className:"player-stats-summary",children:[a.totalGames," parties â€¢ ",a.totalWins," victoires â€¢ ",a.winRate.toFixed(1),"% taux de victoire"]}),(a.twitch||a.youtube)&&e.jsxs("div",{className:"social-links",children:[a.twitch&&e.jsx("a",{href:a.twitch,target:"_blank",rel:"noopener noreferrer",className:"social-link twitch",children:"ðŸ“º Twitch"}),a.youtube&&e.jsx("a",{href:a.youtube,target:"_blank",rel:"noopener noreferrer",className:"social-link youtube",children:"ðŸŽ¬ YouTube"})]})]})]}),e.jsxs("div",{className:"player-actions",children:[e.jsxs("div",{className:"lycans-categories-selection",style:{marginBottom:"1rem"},children:[e.jsx("button",{className:`lycans-categorie-btn ${w==="achievements"?"active":""}`,onClick:()=>S("achievements"),children:"Classement"}),e.jsx("button",{className:`lycans-categorie-btn ${w==="evolution"?"active":""}`,onClick:()=>S("evolution"),children:"Ã‰volution"}),e.jsx("button",{className:`lycans-categorie-btn ${w==="camps"?"active":""}`,onClick:()=>S("camps"),children:"Camps"}),e.jsx("button",{className:`lycans-categorie-btn ${w==="maps"?"active":""}`,onClick:()=>S("maps"),children:"Maps"}),e.jsx("button",{className:`lycans-categorie-btn ${w==="kills"?"active":""}`,onClick:()=>S("kills"),children:"Kills"})]}),w==="achievements"&&e.jsxs("div",{className:"achievements-section",children:[r?e.jsxs("div",{className:"achievements-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des classements..."})]}):t?e.jsx("div",{className:"achievements-error",children:e.jsxs("p",{children:["âŒ Erreur lors du chargement des classements: ",t]})}):i?e.jsx(fe,{achievements:k==="all"?i.allGamesAchievements:i.moddedOnlyAchievements,title:k==="all"?"Classements - Toutes les parties":"Classements - Parties moddÃ©es",emptyMessage:"Aucun classement dans cette catÃ©gorie",achievementType:k}):e.jsx("div",{className:"achievements-empty",children:e.jsx("p",{children:"Aucun classement disponible pour ce joueur"})}),e.jsxs("div",{className:"achievements-filter",children:[e.jsx("button",{className:`filter-btn ${k==="all"?"active":""}`,onClick:l=>{l.stopPropagation(),G("all")},children:"Toutes les parties"}),e.jsx("button",{className:`filter-btn ${k==="modded"?"active":""}`,onClick:l=>{l.stopPropagation(),G("modded")},children:"Parties moddÃ©es"})]})]}),w==="evolution"&&e.jsxs("div",{className:"player-history-section",children:[$&&e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total Parties"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{h({selectedPlayer:a.name,fromComponent:"Historique Joueur - Total Parties"})},title:`Cliquer pour voir toutes les parties de ${a.name}`,children:$.totalGames}),e.jsx("p",{children:"parties jouÃ©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Victoires"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{h({selectedPlayer:a.name,selectedPlayerWinMode:"wins-only",fromComponent:"Historique Joueur - Victoires"})},title:`Cliquer pour voir toutes les victoires de ${a.name}`,children:$.totalWins}),e.jsx("p",{children:"parties gagnÃ©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Taux de Victoire"}),e.jsxs("div",{className:"lycans-valeur-principale",children:[$.winRate,"%"]}),e.jsx("p",{children:"pourcentage global"})]})]}),e.jsx("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"grouping-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Groupement:"}),e.jsxs("select",{id:"grouping-select",value:T,onChange:l=>V(l.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"120px"},children:[e.jsx("option",{value:"session",children:"Par session"}),e.jsx("option",{value:"month",children:"Par mois"})]})]})}),e.jsx(xe,{selectedPlayerName:a.name,groupingMethod:T})]}),w==="camps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(ve,{selectedPlayerName:a.name})}),w==="maps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(je,{selectedPlayerName:a.name})}),w==="kills"&&e.jsx("div",{className:"player-history-section",children:e.jsx(ye,{selectedPlayerName:a.name})}),e.jsx("button",{className:"highlight-btn active",onClick:l=>{l.stopPropagation(),g({highlightedPlayer:null})},children:"â˜… Retirer la mise en Ã©vidence"})]}),e.jsxs("div",{className:"player-period",children:[e.jsx("span",{className:"period-label",children:"PÃ©riode d'activitÃ©:"}),e.jsxs("span",{className:"period-range",children:[a.firstGameDate," - ",a.lastGameDate]})]})]}):e.jsxs("div",{className:"no-player-found",children:[e.jsxs("p",{children:['Le joueur "',d.highlightedPlayer,`" n'a pas Ã©tÃ© trouvÃ© dans les donnÃ©es.`]}),e.jsx("button",{className:"clear-selection-btn",onClick:()=>g({highlightedPlayer:null}),children:"Effacer la sÃ©lection"})]})})():e.jsx("div",{className:"player-selection-prompt",children:e.jsx("div",{className:"character-selection-grid",children:b.map(a=>e.jsxs("div",{className:`character-card ${a.isHighlighted?"highlighted":""}`,onClick:()=>C(a.name),title:`${a.name} - ${a.totalGames} parties, ${a.winRate.toFixed(1)}% victoires`,children:[e.jsx("div",{className:"character-avatar-container",children:a.image?e.jsx("img",{src:a.image,alt:a.name,className:"character-avatar"}):e.jsx("div",{className:"character-avatar-default",style:{"--player-color":n[a.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"character-avatar-overlay"})})}),e.jsx("div",{className:"character-name",children:a.name}),(a.twitch||a.youtube)&&e.jsxs("div",{className:"character-social-indicators",children:[a.twitch&&e.jsx("div",{className:"social-indicator twitch",title:"Twitch",children:"T"}),a.youtube&&e.jsx("div",{className:"social-indicator youtube",title:"YouTube",children:"Y"})]})]},a.name))})})})]})}export{Ae as PlayerSelectionPage};
