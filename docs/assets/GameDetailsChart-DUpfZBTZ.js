import{s as m,a as G,u as U,r as N,j as s}from"./index-DPotY0EQ.js";import{b as W}from"./baseStatsHook-OUMJOSyE.js";import{a as E}from"./api-beq3FXpM.js";function H(e,t){if(!e)return null;try{const n=new URL(e);let i="",l=0;if(n.hostname==="youtu.be"){i=n.pathname.slice(1);const c=n.searchParams.get("t");c&&(l=parseInt(c,10)||0)}else if(n.hostname==="www.youtube.com"||n.hostname==="youtube.com"){i=n.searchParams.get("v")||"";const c=n.searchParams.get("t");c&&(l=parseInt(c,10)||0)}if(!i)return null;const r=`https://www.youtube.com/embed/${i}?start=${l}`;if(t)try{const c=new URL(t);let p=0;if(c.hostname==="youtu.be"){const d=c.searchParams.get("t");d&&(p=parseInt(d,10)||0)}else if(c.hostname==="www.youtube.com"||c.hostname==="youtube.com"){const d=c.searchParams.get("t");d&&(p=parseInt(d,10)||0)}if(p>l)return`${r}&end=${p}`}catch(c){console.warn("Failed to parse end URL:",t,c)}return r}catch(n){return console.warn("Failed to create YouTube embed URL:",e,n),null}}function J(e,t){if(!e||!t)return null;try{const n=r=>{const c=new URL(r);let p=0;if(c.hostname==="youtu.be"){const d=c.searchParams.get("t");d&&(p=parseInt(d,10)||0)}else if(c.hostname==="www.youtube.com"||c.hostname==="youtube.com"){const d=c.searchParams.get("t");d&&(p=parseInt(d,10)||0)}return p},i=n(e),l=n(t);return l>i?l-i:null}catch(n){return console.warn("Failed to calculate game duration:",e,t,n),null}}function $(e,t,n=!1){const i=e.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(i)?"Loups":t.Traître&&t.Traître.toLowerCase().includes(i)?n?"Traître":"Loups":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(i)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(i)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(i)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(i)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(i)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(i)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(i)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(i)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(i)?"Vaudou":"Villageois"}function O(e,t,n,i){const l=e.toLowerCase();switch(t){case"Traître":return!!(n.Traître&&n.Traître.toLowerCase().includes(l));case"Idiot du Village":return!!(n["Idiot du village"]&&n["Idiot du village"].toLowerCase().includes(l));case"Cannibale":return!!(n.Cannibale&&n.Cannibale.toLowerCase().includes(l));case"Agent":return!!(n.Agent&&n.Agent.toLowerCase().includes(l));case"Espion":return!!(n.Espion&&n.Espion.toLowerCase().includes(l));case"Scientifique":return!!(n.Scientifique&&n.Scientifique.toLowerCase().includes(l));case"Amoureux":return!!(n.Amoureux&&n.Amoureux.toLowerCase().includes(l));case"La Bête":return!!(n["La Bête"]&&n["La Bête"].toLowerCase().includes(l));case"Chasseur de primes":return!!(n["Chasseur de primes"]&&n["Chasseur de primes"].toLowerCase().includes(l));case"Vaudou":return!!(n.Vaudou&&n.Vaudou.toLowerCase().includes(l));case"Villageois":const r=i["Liste des joueurs"].toLowerCase().includes(l),c=[...n.Loups?m(n.Loups):[],...n.Traître?[n.Traître.trim()]:[],...n["Idiot du village"]?[n["Idiot du village"].trim()]:[],...n.Cannibale?[n.Cannibale.trim()]:[],...n.Agent?m(n.Agent):[],...n.Espion?[n.Espion.trim()]:[],...n.Scientifique?[n.Scientifique.trim()]:[],...n.Amoureux?m(n.Amoureux):[],...n["La Bête"]?[n["La Bête"].trim()]:[],...n["Chasseur de primes"]?[n["Chasseur de primes"].trim()]:[],...n.Vaudou?[n.Vaudou.trim()]:[]].map(p=>p.toLowerCase());return r&&!c.includes(l);default:return!1}}function F(e,t,n){const i=e.filter(l=>l["Liste des joueurs"].toLowerCase().includes(t.toLowerCase()));return!n||n==="all-assignments"?i:n==="wins-only"?i.filter(l=>G(t,l["Liste des gagnants"])):i}function Y(e,t){return e.filter(n=>n.Game===t)}function z(e,t){return e.filter(n=>t.includes(n.Game))}function K(e,t){return e.filter(n=>n["Type de victoire"]===t)}function _(e,t){return e.filter(n=>{const i=n.Date;if(t.includes("/")&&t.split("/").length===2){const[l,r]=t.split("/"),c=i.split("/");if(c.length===3){const[,p,d]=c;return p===l&&d===r}}else return i===t;return!1})}function Q(e,t){return e.filter(n=>{const i=n["Pourcentage de récolte"];if(i==null)return!1;const l=i*100;switch(t){case"0-25%":return l>=0&&l<=25;case"26-50%":return l>25&&l<=50;case"51-75%":return l>50&&l<=75;case"76-99%":return l>75&&l<=99;case"100%":return l>=100;default:return!0}})}function X(e,t){return e.filter(n=>n["Nombre de journées"]===t)}function Z(e,t,n,i){const{selectedCamp:l,campFilterMode:r,_smallCamps:c,excludeTraitor:p}=n;return e.filter(d=>{const a=t.find(h=>h.Game===d.Game);if(!a)return!1;if(i){if(l==="Autres"&&c)return c.some(o=>O(i,o,a,d));const h=$(i,a,p);return l==="Loups"&&p?h==="Loups"&&!(a.Traître&&a.Traître.toLowerCase().includes(i.toLowerCase())):h==="Agent"&&l==="Agent"&&d["Camp victorieux"]==="Agent"?m(d["Liste des gagnants"]?.toString()||"").some(C=>C.toLowerCase()===i.toLowerCase()):h===l}else{if(r==="wins-only")return l==="Autres"&&c?c.includes(d["Camp victorieux"]):d["Camp victorieux"]===l;if(l==="Autres"&&c)return c.some(h=>{switch(h){case"Traître":return!!(a.Traître&&a.Traître.trim());case"Idiot du Village":return!!(a["Idiot du village"]&&a["Idiot du village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());case"Villageois":return m(d["Liste des joueurs"]).length>0;default:return!1}});switch(l){case"Loups":return!!(a.Loups&&a.Loups.trim());case"Traître":return!!(a.Traître&&a.Traître.trim());case"Villageois":const h=m(d["Liste des joueurs"]),o=[...m(a.Loups||""),...a.Traître?[a.Traître.trim()]:[],...a["Idiot du village"]?[a["Idiot du village"].trim()]:[],...a.Cannibale?[a.Cannibale.trim()]:[],...a.Agent?m(a.Agent):[],...a.Espion?[a.Espion.trim()]:[],...a.Scientifique?[a.Scientifique.trim()]:[],...m(a.Amoureux||""),...a["La Bête"]?[a["La Bête"].trim()]:[],...a["Chasseur de primes"]?[a["Chasseur de primes"].trim()]:[],...a.Vaudou?[a.Vaudou.trim()]:[]];return h.some(C=>!o.includes(C));case"Idiot du Village":return!!(a["Idiot du village"]&&a["Idiot du village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());default:return d["Camp victorieux"]===l}}})}function D(e,t,n){const{selectedPlayers:i,playersFilterMode:l,winnerPlayer:r}=n;return e.filter(c=>{const p=m(c["Liste des joueurs"]);if(!i.every(o=>p.some(C=>C.toLowerCase()===o.toLowerCase())))return!1;const a=t.find(o=>o.Game===c.Game);if(!a)return!1;const h=i.map(o=>$(o,a));switch(l){case"all-common-games":return r?m(c["Liste des gagnants"]?.toString()||"").some(g=>g.toLowerCase()===r.toLowerCase()):!0;case"opposing-camps":const o=h.map(f=>f==="Traître"?"Loups":f);if(!([...new Set(o)].length>1))return!1;if(r){const f=i.findIndex(g=>g.toLowerCase()===r.toLowerCase());if(f!==-1){const g=o[f],L=c["Camp victorieux"]==="Traître"?"Loups":c["Camp victorieux"];return g==="Agent"&&L==="Agent"?m(c["Liste des gagnants"]?.toString()||"").some(j=>j.toLowerCase()===r.toLowerCase()):g===L}}return!0;case"same-camp":const V=h.map(f=>f==="Traître"?"Loups":f);if(!([...new Set(V)].length===1))return!1;if(r){const f=V[0],g=c["Camp victorieux"]==="Traître"?"Loups":c["Camp victorieux"];if(f==="Agent"&&g==="Agent"){const L=m(c["Liste des gagnants"]?.toString()||"");return i.every(R=>L.some(j=>j.toLowerCase()===R.toLowerCase()))}return f===g}return!0;default:return!0}})}function ee(e,t,n){const{selectedPlayerPair:i,selectedPairRole:l}=n;return i.length!==2?e:e.filter(r=>{const c=m(r["Liste des joueurs"]);if(!i.every(a=>c.some(h=>h.toLowerCase()===a.toLowerCase())))return!1;const d=t.find(a=>a.Game===r.Game);if(!d)return!1;switch(l){case"wolves":const a=m(d.Loups||"");return i.every(o=>a.some(C=>C.toLowerCase()===o.toLowerCase()));case"lovers":const h=m(d.Amoureux||"");return i.every(o=>h.some(C=>C.toLowerCase()===o.toLowerCase()));default:return!0}})}function se(e,t,n){if(!n)return e;let i=[...e];return n.selectedPlayer&&(i=F(i,n.selectedPlayer,n.selectedPlayerWinMode)),n.selectedGame&&(i=Y(i,n.selectedGame)),n.selectedGameIds&&(i=z(i,n.selectedGameIds)),n.campFilter&&(i=Z(i,t,n.campFilter,n.selectedPlayer)),n.selectedVictoryType&&(i=K(i,n.selectedVictoryType)),n.selectedDate&&(i=_(i,n.selectedDate)),n.selectedHarvestRange&&(i=Q(i,n.selectedHarvestRange)),n.selectedGameDuration&&(i=X(i,n.selectedGameDuration)),n.multiPlayerFilter&&(i=D(i,t,n.multiPlayerFilter)),n.playerPairFilter&&(i=ee(i,t,n.playerPairFilter)),i}function ne(e){const t={};return e&&(e.Loups&&(t.wolves=m(e.Loups)),e.Traître&&(t.traitor=e.Traître),e["Idiot du village"]&&(t.villageIdiot=e["Idiot du village"]),e.Cannibale&&(t.cannibal=e.Cannibale),e.Agent&&(t.agent=m(e.Agent)),e.Espion&&(t.spy=e.Espion),e.Scientifique&&(t.scientist=e.Scientifique),e.Amoureux&&(t.lovers=m(e.Amoureux)),e["La Bête"]&&(t.beast=e["La Bête"]),e["Chasseur de primes"]&&(t.bountyHunter=e["Chasseur de primes"]),e.Vaudou&&(t.voodoo=e.Vaudou)),t}function te(e,t){const n=[];return m(e["Liste des joueurs"]).forEach(l=>{let r="Villageois",c="Villageois";t&&(t.Loups&&m(t.Loups).includes(l)?(r="Loups",c="Loups"):t.Traître&&m(t.Traître).includes(l)?(r="Traître",c="Loups"):t["Idiot du village"]&&m(t["Idiot du village"]).includes(l)?(r="Idiot du Village",c="Idiot du Village"):t.Cannibale&&m(t.Cannibale).includes(l)?(r="Cannibale",c="Cannibale"):t.Agent&&m(t.Agent).includes(l)?(r="Agent",c="Agent"):t.Espion&&m(t.Espion).includes(l)?(r="Espion",c="Espion"):t.Scientifique&&m(t.Scientifique).includes(l)?(r="Scientifique",c="Scientifique"):t["La Bête"]&&m(t["La Bête"]).includes(l)?(r="La Bête",c="La Bête"):t["Chasseur de primes"]&&m(t["Chasseur de primes"]).includes(l)?(r="Chasseur de primes",c="Chasseur de primes"):t.Vaudou&&m(t.Vaudou).includes(l)?(r="Vaudou",c="Vaudou"):t.Amoureux&&m(t.Amoureux).includes(l)&&(r="Amoureux",c="Amoureux")),n.push({player:l,role:r,camp:c})}),n}function ie(e){return e.map(t=>({player:"Ponce",camp:t.Camp||"Unknown",isTraitor:t.Traître||!1,secondaryRole:t["Rôle secondaire"]==="N/A"?null:t["Rôle secondaire"],wolfPower:t["Pouvoir de loup"]==="N/A"?null:t["Pouvoir de loup"],villagerJob:t["Métier villageois"]==="N/A"?null:t["Métier villageois"],playersKilled:t["Joueurs tués"],deathDay:t["Jour de mort"],deathType:t["Type de mort"],killers:t["Joueurs tueurs"]}))}function ae(e,t,n,i){return e.length===0?null:se(e,t,i).map(r=>{const c=t.find(o=>o.Game===r.Game),p=n.filter(o=>o.Game===r.Game),d=ne(c),a=te(r,c),h=ie(p);return{gameId:r.Game,date:r.Date,isModded:r["Game Moddée"],playerCount:r["Nombre de joueurs"],wolfCount:r["Nombre de loups"],hasTraitor:r["Rôle Traître"],hasLovers:r["Rôle Amoureux"],soloRoles:r["Rôles solo"],winningCamp:r["Camp victorieux"],victoryType:r["Type de victoire"],dayCount:r["Nombre de journées"],villagerSurvivors:r["Survivants villageois"],wolfSurvivors:r["Survivants loups (traître inclus)"],loverSurvivors:r["Survivants amoureux"],soloSurvivors:r["Survivants solo"],winners:r["Liste des gagnants"],harvest:r.Récolte,totalHarvest:r["Total récolte"],harvestPercentage:r["Pourcentage de récolte"],playersList:r["Liste des joueurs"],versions:r.Versions,map:r.Map,youtubeEmbedUrl:H(r.Début,r.Fin),gameDuration:J(r.Début,r.Fin),roles:d,playerRoles:a,playerDetails:h}})}function re(e){const{data:t,isLoading:n,error:i}=W((l,r,c)=>ae(l,r,c,e));return{data:t||[],isLoading:n,error:i}}function me(){const{navigationFilters:e,navigateBack:t}=U(),{data:n,isLoading:i,error:l}=re(e),[r,c]=N.useState("date"),[p,d]=N.useState("desc"),[a,h]=N.useState(null),[o,C]=N.useState(1),[S,V]=N.useState(25),P=N.useRef(!1),w=N.useMemo(()=>n?[...n].sort((u,v)=>{let y,x;switch(r){case"date":y=new Date(u.date.split("/").reverse().join("-")).getTime(),x=new Date(v.date.split("/").reverse().join("-")).getTime();break;case"gameId":y=u.gameId,x=v.gameId;break;case"playerCount":y=u.playerCount,x=v.playerCount;break;case"dayCount":y=u.dayCount,x=v.dayCount;break;case"winningCamp":y=u.winningCamp,x=v.winningCamp;break;case"victoryType":y=u.victoryType,x=v.victoryType;break;default:return 0}let b;return p==="asc"?b=y>x?1:y<x?-1:0:b=y<x?1:y>x?-1:0,b===0?p==="asc"?u.gameId-v.gameId:v.gameId-u.gameId:b}):[],[n,r,p]),f=Math.ceil(w.length/S),g=(o-1)*S,L=g+S,R=w.slice(g,L);N.useEffect(()=>{if(P.current){P.current=!1;return}C(1),h(null)},[n]),N.useEffect(()=>{C(1),h(null)},[r,p]);const j=u=>{P.current=!0,C(u),h(null)},k=u=>{P.current=!0,V(u),C(1),h(null)},M=u=>{P.current=!0,h(a===u?null:u)},T=u=>{r===u?d(p==="asc"?"desc":"asc"):(c(u),d("desc"))},I=u=>r!==u?"↕️":p==="asc"?"↗️":"↘️",B=()=>{const u=[];if(e.selectedPlayer&&e.campFilter){const v=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",y=e.campFilter.excludeTraitor&&e.campFilter.selectedCamp==="Loups"?"Loups sans Traître":e.campFilter.selectedCamp;u.push(`${e.selectedPlayer} jouant ${y}${v}`)}else{if(e.selectedPlayer){const v=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":e.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";u.push(`Joueur: ${e.selectedPlayer}${v}`)}if(e.campFilter){const{selectedCamp:v,campFilterMode:y,excludeTraitor:x}=e.campFilter,A=`Camp: ${x&&v==="Loups"?"Loups sans Traître":v}`,q=y==="wins-only"?" (victoires uniquement)":y==="all-assignments"?" (toutes assignations)":"";u.push(A+q)}}if(e.playerPairFilter){const{selectedPlayerPair:v,selectedPairRole:y}=e.playerPairFilter,x=v.join(" & "),b=y==="wolves"?"loups":"amoureux";u.push(`Paire ${b}: ${x}`)}if(e.multiPlayerFilter){const{selectedPlayers:v,playersFilterMode:y,winnerPlayer:x}=e.multiPlayerFilter,b=v.join(" & ");let A="";y==="all-common-games"?A="toutes les parties communes":y==="opposing-camps"?A="affrontements uniquement":y==="same-camp"&&(A="parties en équipe (même camp)");const q=x?` (victoires de ${x})`:"";u.push(`${b} (${A}${q})`)}return e.selectedVictoryType&&u.push(`Victoire: ${e.selectedVictoryType}`),e.selectedHarvestRange&&u.push(`Récolte: ${e.selectedHarvestRange}`),e.selectedGameDuration&&u.push(`Durée: ${e.selectedGameDuration} jour${e.selectedGameDuration>1?"s":""}`),e.selectedGame&&u.push(`Partie #${e.selectedGame}`),e.selectedDate&&(e.selectedDate.includes("/")&&e.selectedDate.split("/").length===2?u.push(`Mois: ${e.selectedDate}`):u.push(`Date: ${e.selectedDate}`)),e.selectedGameIds&&e.selectedGameIds.length>0&&u.push(`${e.selectedGameIds.length} parties sélectionnée${e.selectedGameIds.length>1?"s":""}`),u};return i?s.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):l?s.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",l]}):!n||n.length===0?s.jsxs("div",{className:"lycans-empty-section",children:[s.jsx("h2",{children:"Aucune partie trouvée"}),s.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",e.fromComponent]})]}):s.jsxs("div",{className:"lycans-game-details",children:[s.jsxs("div",{className:"lycans-game-details-header",children:[s.jsxs("div",{className:"lycans-game-details-navigation",children:[e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",e.fromComponent]}),s.jsxs("h2",{children:["Détails des Parties (",n.length," partie",n.length>1?"s":"",")"]})]}),B().length>0&&s.jsxs("div",{className:"lycans-active-filters",children:[s.jsx("strong",{children:"Filtres actifs:"})," ",B().join(", ")]})]}),f>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",g+1," à ",Math.min(L,w.length)," sur ",w.length," parties"]}),s.jsxs("div",{className:"lycans-pagination-controls",children:[s.jsxs("select",{value:S,onChange:u=>k(Number(u.target.value)),className:"lycans-pagination-select",children:[s.jsx("option",{value:10,children:"10 par page"}),s.jsx("option",{value:25,children:"25 par page"}),s.jsx("option",{value:50,children:"50 par page"}),s.jsx("option",{value:100,children:"100 par page"})]}),s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>j(1),disabled:o===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>j(o-1),disabled:o===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",o," sur ",f]}),s.jsx("button",{onClick:()=>j(o+1),disabled:o===f,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>j(f),disabled:o===f,className:"lycans-pagination-btn",children:"»»"})]})]})]}),s.jsx("div",{className:"lycans-games-table-container",children:s.jsxs("table",{className:"lycans-games-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{onClick:()=>T("gameId"),className:"sortable",children:["Partie ",I("gameId")]}),s.jsxs("th",{onClick:()=>T("date"),className:"sortable",children:["Date ",I("date")]}),s.jsxs("th",{onClick:()=>T("playerCount"),className:"sortable",children:["Joueurs ",I("playerCount")]}),s.jsxs("th",{onClick:()=>T("dayCount"),className:"sortable",children:["Jours ",I("dayCount")]}),s.jsxs("th",{onClick:()=>T("winningCamp"),className:"sortable",children:["Camp Vainqueur ",I("winningCamp")]}),s.jsxs("th",{onClick:()=>T("victoryType"),className:"sortable",children:["Type de Victoire ",I("victoryType")]}),s.jsx("th",{children:"Détails"})]})}),s.jsx("tbody",{children:R.map(u=>s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:a===u.gameId?"selected":"",children:[s.jsxs("td",{children:["#",u.gameId]}),s.jsx("td",{children:u.date}),s.jsx("td",{children:u.playerCount}),s.jsx("td",{children:u.dayCount}),s.jsx("td",{style:{color:E[u.winningCamp]||"#fff"},children:u.winningCamp}),s.jsx("td",{children:u.victoryType}),s.jsx("td",{children:s.jsx("button",{onClick:()=>M(u.gameId),className:"lycans-details-btn",children:a===u.gameId?"Masquer":"Voir"})})]},u.gameId),a===u.gameId&&s.jsx("tr",{className:"game-details-row",children:s.jsx("td",{colSpan:7,children:s.jsx(ce,{game:u})})},`${u.gameId}-details`)]}))})]})}),f>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",g+1," à ",Math.min(L,w.length)," sur ",w.length," parties"]}),s.jsx("div",{className:"lycans-pagination-controls",children:s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>j(1),disabled:o===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>j(o-1),disabled:o===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",o," sur ",f]}),s.jsx("button",{onClick:()=>j(o+1),disabled:o===f,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>j(f),disabled:o===f,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function le(e){if(e===null||e<=0)return"N/A";const t=Math.floor(e/60),n=e%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}function ce({game:e}){const[t,n]=N.useState(!1);return s.jsx("div",{className:"lycans-game-detail-view",children:s.jsxs("div",{className:"lycans-game-detail-grid",children:[s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Générales"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de joueurs:"}),s.jsx("span",{className:"value",children:e.playerCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de loups:"}),s.jsx("span",{className:"value",children:e.wolfCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Traître:"}),s.jsx("span",{className:"value",children:e.hasTraitor?"Oui":"Non"})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Amoureux:"}),s.jsx("span",{className:"value",children:e.hasLovers?"Oui":"Non"})]}),e.soloRoles&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Rôles solo:"}),s.jsx("span",{className:"value",children:e.soloRoles})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Supplémentaires"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[e.gameDuration!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Durée de la partie:"}),s.jsx("span",{className:"value",children:le(e.gameDuration)})]}),e.versions&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Version:"}),s.jsxs("span",{className:"value",children:[e.versions,e.isModded?" (moddée)":""]})]}),e.map&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Map:"}),s.jsx("span",{className:"value",children:e.map})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Résultats"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Camp vainqueur:"}),s.jsx("span",{className:"value",children:e.winningCamp})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Type de victoire:"}),s.jsx("span",{className:"value",children:e.victoryType})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants villageois:"}),s.jsx("span",{className:"value",children:e.villagerSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants loups:"}),s.jsx("span",{className:"value",children:e.wolfSurvivors})]}),e.loverSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants amoureux:"}),s.jsx("span",{className:"value",children:e.loverSurvivors})]}),e.soloSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants solo:"}),s.jsx("span",{className:"value",children:e.soloSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Gagnants:"}),s.jsx("span",{className:"value",children:e.winners})]})]})]}),e.harvest!==null&&s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Récolte"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Récolte:"}),s.jsx("span",{className:"value",children:e.harvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Total possible:"}),s.jsx("span",{className:"value",children:e.totalHarvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Pourcentage:"}),s.jsx("span",{className:"value",children:typeof e.harvestPercentage=="number"?(e.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Rôles des Joueurs"}),s.jsx("div",{className:"lycans-player-roles-grid",children:e.playerRoles.map((i,l)=>{let r=i.role===i.camp?i.camp:`${i.camp} (${i.role})`;return s.jsxs("div",{className:"lycans-player-role-item",children:[s.jsx("div",{className:"lycans-player-name",style:{color:E[i.camp]||"#fff",textAlign:"left"},children:i.player}),s.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:r})]},l)})})]}),e.youtubeEmbedUrl&&s.jsx("div",{className:"lycans-game-detail-section full-width",children:s.jsx("button",{onClick:()=>n(!t),className:"lycans-video-toggle-btn",children:t?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),e.youtubeEmbedUrl&&t&&s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Vidéo de la Partie"}),s.jsx("div",{className:"lycans-youtube-container",children:s.jsx("iframe",{src:e.youtubeEmbedUrl,title:`Partie Lycans #${e.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{me as GameDetailsChart};
