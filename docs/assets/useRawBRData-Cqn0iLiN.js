import{a as c,p as g,r as u,k as p,D as b}from"./index-BA0rguXe.js";function m(){const{settings:n}=c(),[i,s]=u.useState(null),[f,d]=u.useState(null),[r,a]=u.useState(!0),[t,e]=u.useState(null);return u.useEffect(()=>{(async()=>{try{a(!0),e(null);const l=n.dataSource,R=await p(l,b.RAW_BR_DATA);R?(s(R.BRParties?.data||[]),d(R.BRRefParties?.data||[])):(s([]),d([]))}catch(l){console.error("Error fetching raw BR data:",l),e(l instanceof Error?l.message:"Unknown error")}finally{a(!1)}})()},[n.dataSource]),{brPartiesData:i,brRefPartiesData:f,isLoading:r,error:t}}function G(){const{settings:n}=c(),{brPartiesData:i,brRefPartiesData:s,isLoading:f,error:d}=m();return{data:i?.filter(a=>{if(!a.Game||!a.Participants)return!1;const t=s?.find(e=>e.Game===a.Game);if(!t)return D(a,n);if(t["Nombre de participants"]<6)return!1;if(n.independentFilters){const e=n.independentFilters;if(e.gameTypeEnabled&&e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!t["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&t["Game Moddée"])return!1}if(e.dateRangeEnabled&&(e.dateRange.start||e.dateRange.end)){const o=g(t.Date);if(!o)return!1;if(e.dateRange.start){const l=new Date(e.dateRange.start);if(o<l)return!1}if(e.dateRange.end){const l=new Date(e.dateRange.end);if(o>l)return!1}}}return D(a,n)})||null,isLoading:f,error:d}}function w(){const{settings:n}=c(),{brRefPartiesData:i,isLoading:s,error:f}=m();return{data:i?.filter(r=>{if(!r.Game||!r.Date||r["Nombre de participants"]<6)return!1;if(n.independentFilters){const a=n.independentFilters;if(a.gameTypeEnabled&&a.gameFilter!=="all"){if(a.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(a.gameFilter==="non-modded"&&r["Game Moddée"])return!1}if(a.dateRangeEnabled&&(a.dateRange.start||a.dateRange.end)){const t=g(r.Date);if(!t)return!1;if(a.dateRange.start){const e=new Date(a.dateRange.start);if(t<e)return!1}if(a.dateRange.end){const e=new Date(a.dateRange.end);if(t>e)return!1}}}return!0})||null,isLoading:s,error:f}}function y(){const{settings:n}=c(),{brPartiesData:i,brRefPartiesData:s,isLoading:f,error:d}=m();return{data:i?.filter(a=>{if(!a.Game||!a.Participants)return!1;const t=s?.find(e=>e.Game===a.Game);if(!t||t["Nombre de participants"]>=6)return!1;if(n.independentFilters){const e=n.independentFilters;if(e.gameTypeEnabled&&e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!t["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&t["Game Moddée"])return!1}if(e.dateRangeEnabled&&(e.dateRange.start||e.dateRange.end)){const o=g(t.Date);if(!o)return!1;if(e.dateRange.start){const l=new Date(e.dateRange.start);if(o<l)return!1}if(e.dateRange.end){const l=new Date(e.dateRange.end);if(o>l)return!1}}}return D(a,n)})||null,isLoading:f,error:d}}function E(){const{settings:n}=c(),{brRefPartiesData:i,isLoading:s,error:f}=m();return{data:i?.filter(r=>{if(!r.Game||!r.Date||r["Nombre de participants"]>=6)return!1;if(n.independentFilters){const a=n.independentFilters;if(a.gameTypeEnabled&&a.gameFilter!=="all"){if(a.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(a.gameFilter==="non-modded"&&r["Game Moddée"])return!1}if(a.dateRangeEnabled&&(a.dateRange.start||a.dateRange.end)){const t=g(r.Date);if(!t)return!1;if(a.dateRange.start){const e=new Date(a.dateRange.start);if(t<e)return!1}if(a.dateRange.end){const e=new Date(a.dateRange.end);if(t>e)return!1}}}return!0})||null,isLoading:s,error:f}}function D(n,i){if(i.playerFilter.mode!=="none"&&i.playerFilter.players.length>0){const s=n.Participants.toLowerCase();if(i.playerFilter.mode==="include"){if(!i.playerFilter.players.some(d=>d.toLowerCase()===s))return!1}else if(i.playerFilter.mode==="exclude"&&i.playerFilter.players.some(d=>d.toLowerCase()===s))return!1}return!0}export{w as a,y as b,E as c,G as u};
