import{g as $,u as Ne,a as Se,r as I,j as e}from"./index-Dn3O4-e6.js";import{u as ke}from"./baseStatsHook-BKS9nzUX.js";import{g as xe,a as oe}from"./datasyncExport-BirWLS1z.js";import{u as ze}from"./useJoueursData-P1fdQefL.js";import{u as Ie,a as ce}from"./api-CE4lPatC.js";import{F as D,C as E,X as B,Y as G}from"./FullscreenChart-BCOflSig.js";import{R as K,T as O,a as H}from"./CategoricalChart-BAXJGr_q.js";import{B as V,a as T}from"./BarChart-CKlIVSLi.js";function de(A,P,m=5){if(!P)return[];const o=A.filter(v=>v.players.includes(P));if(o.length===0)return[];const S=Math.max(...o.map(v=>v.appearances));return o.filter(v=>v.appearances===S).sort((v,k)=>parseFloat(k.winRate)-parseFloat(v.winRate)).slice(0,m)}function pe(A,P,m=5){if(!P)return[];const o=A.filter(v=>v.players.includes(P));if(o.length===0)return[];const S=Math.max(...o.map(v=>parseFloat(v.winRate)));return o.filter(v=>parseFloat(v.winRate)===S).sort((v,k)=>k.appearances-v.appearances).slice(0,m)}function Me(A){if(A.length===0)return null;const P={},m={},o={};let S=0,M=0,v=0;A.forEach(b=>{const l=b.PlayerStats.filter(d=>xe(oe(d.MainRoleInitial,d.MainRoleChanges||[]),{regroupWolfSubRoles:!1})==="Loup"),w=b.PlayerStats.filter(d=>xe(oe(d.MainRoleInitial,d.MainRoleChanges||[]),{regroupLovers:!0})==="Amoureux");if(l.length>=2){S++;for(let d=0;d<l.length;d++)for(let g=d+1;g<l.length;g++){const z=$(l[d]),p=$(l[g]),R=l[d].Username,h=l[g].Username,W=[z,p].sort().join(" & ");P[W]?P[W].players=[R,h]:P[W]={appearances:0,wins:0,players:[R,h]},P[W].appearances++,l[d].Victorious&&l[g].Victorious&&P[W].wins++}}if(w.length>=2){M++;for(let d=0;d<w.length;d+=2)if(d+1<w.length){const g=$(w[d]),z=$(w[d+1]),p=w[d].Username,R=w[d+1].Username,h=[g,z].sort().join(" & ");m[h]?m[h].players=[p,R]:m[h]={appearances:0,wins:0,players:[p,R]},m[h].appearances++,w[d].Victorious&&w[d+1].Victorious&&m[h].wins++}}const y=b.PlayerStats.filter(d=>oe(d.MainRoleInitial,d.MainRoleChanges||[])==="Agent");if(y.length>=2){v++;for(let d=0;d<y.length;d++)for(let g=d+1;g<y.length;g++){const z=$(y[d]),p=$(y[g]),R=y[d].Username,h=y[g].Username,W=[z,p].sort(),C=W.join(" & "),q=W[0]===z,Z=q?R:h,U=q?h:R,x=q?y[d]:y[g],L=q?y[g]:y[d];o[C]?o[C].players=[Z,U]:o[C]={appearances:0,wins:0,player1Wins:0,player2Wins:0,players:[Z,U]},o[C].appearances++,x.Victorious&&(o[C].player1Wins++,o[C].wins++),L.Victorious&&(o[C].player2Wins++,o[C].wins++)}}});const k=Object.keys(P).map(b=>{const l=P[b],w=l.appearances>0?(l.wins/l.appearances*100).toFixed(2):"0.00";return{pair:l.players.join(" & "),appearances:l.appearances,wins:l.wins,winRate:w,players:l.players}}),J=Object.keys(m).map(b=>{const l=m[b],w=l.appearances>0?(l.wins/l.appearances*100).toFixed(2):"0.00";return{pair:l.players.join(" & "),appearances:l.appearances,wins:l.wins,winRate:w,players:l.players}});k.sort((b,l)=>l.appearances-b.appearances),J.sort((b,l)=>l.appearances-b.appearances);const N=Object.keys(o).map(b=>{const l=o[b],w=l.appearances>0?(l.wins/l.appearances*100).toFixed(2):"0.00",y=l.appearances>0?(l.player1Wins/l.appearances*100).toFixed(2):"0.00",d=l.appearances>0?(l.player2Wins/l.appearances*100).toFixed(2):"0.00";return{pair:l.players.join(" & "),appearances:l.appearances,wins:l.wins,winRate:w,players:l.players,player1Wins:l.player1Wins,player2Wins:l.player2Wins,player1WinRate:y,player2WinRate:d}});return N.sort((b,l)=>l.appearances-b.appearances),{wolfPairs:{totalGames:S,pairs:k},loverPairs:{totalGames:M,pairs:J},agentPairs:{totalGames:v,pairs:N}}}function He(){const{data:A,isLoading:P,error:m}=ke(o=>Me(o));return{data:A,isLoading:P,error:m}}function Ke(){const{navigateToGameDetails:A,navigationState:P,updateNavigationState:m}=Ne(),{data:o,isLoading:S,error:M}=He(),{settings:v}=Se(),{joueursData:k}=ze(),J=Ie(k),[N,b]=I.useState(P.selectedPairingTab||"wolves"),[l,w]=I.useState(ce.MIN_WOLF_APPEARANCES),[y,d]=I.useState(ce.MIN_LOVER_APPEARANCES),[g,z]=I.useState(ce.MIN_AGENT_APPEARANCES),[p,R]=I.useState(P.selectedPairingPlayers?.[0]||v.highlightedPlayer||null),[h,W]=I.useState(P.selectedPairingPlayers?.[1]||null);I.useEffect(()=>{const r=[p,h].filter(s=>s!==null);r.length>0?m({selectedPairingPlayers:r}):m({selectedPairingPlayers:void 0})},[p,h,m]);const C=[1,2,3,5,10],q=[1,3,5,7,10,15],Z=[1,2,3,5,10],U=I.useMemo(()=>{if(!o)return[];const r=new Set;return[...o.wolfPairs.pairs,...o.loverPairs.pairs,...o.agentPairs.pairs].forEach(s=>{s.players.forEach(a=>r.add(a))}),Array.from(r).sort()},[o]),x=p!==null&&h!==null,L=p!==null&&h===null,c=L?p:null;if(S)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de paires..."});if(M)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",M]});if(!o)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de paires disponible"});const f=r=>J[r]||"#8884d8",F=r=>`gradient-${r.replace(/[^a-zA-Z0-9]/g,"")}`,_=r=>r.map(s=>{const[a,i]=s.players,t=f(a),u=f(i),n=F(s.pair);return e.jsxs("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:t}),e.jsx("stop",{offset:"50%",stopColor:t}),e.jsx("stop",{offset:"50%",stopColor:u}),e.jsx("stop",{offset:"100%",stopColor:u})]},n)}),re=o.wolfPairs.pairs.map(r=>({...r,winRateNum:parseFloat(r.winRate),winRateDisplay:Math.max(parseFloat(r.winRate),1),gradientId:F(r.pair)})),ae=o.loverPairs.pairs.map(r=>({...r,winRateNum:parseFloat(r.winRate),winRateDisplay:Math.max(parseFloat(r.winRate),1),gradientId:F(r.pair)})),se=o.agentPairs.pairs.map(r=>({...r,winRateNum:parseFloat(r.winRate),winRateDisplay:Math.max(parseFloat(r.winRate),1),player1WinRateNum:parseFloat(r.player1WinRate),player2WinRateNum:parseFloat(r.player2WinRate),gradientId:F(r.pair)})),me=c?de(o.wolfPairs.pairs,c,5):[],ve=c?de(o.loverPairs.pairs,c,5):[],fe=c?de(o.agentPairs.pairs,c,5):[],je=c?pe(o.wolfPairs.pairs,c,5):[],Pe=c?pe(o.loverPairs.pairs,c,5):[],be=c?pe(o.agentPairs.pairs,c,5):[],he=x?o.wolfPairs.pairs.filter(r=>r.players.includes(p)&&r.players.includes(h)):[],ue=x?o.loverPairs.pairs.filter(r=>r.players.includes(p)&&r.players.includes(h)):[],ge=x?o.agentPairs.pairs.filter(r=>r.players.includes(p)&&r.players.includes(h)):[],we=re.filter(r=>r.appearances>=l).length,Ae=ae.filter(r=>r.appearances>=y).length,Re=se.filter(r=>r.appearances>=g).length,X=(r,s,a)=>{const i=new Map;return r.forEach(t=>{i.set(t.pair,{...t,isHighlightedAddition:!1})}),x&&a.length>0?a.forEach(t=>{i.get(t.pair)||i.set(t.pair,{...t,winRateNum:parseFloat(t.winRate),winRateDisplay:Math.max(parseFloat(t.winRate),1),gradientId:F(t.pair),isHighlightedAddition:!0})}):L&&s.forEach(t=>{const u=i.get(t.pair);u?i.set(t.pair,{...u,winRateNum:parseFloat(u.winRate),winRateDisplay:Math.max(parseFloat(u.winRate),1),gradientId:F(u.pair)}):i.set(t.pair,{...t,winRateNum:parseFloat(t.winRate),winRateDisplay:Math.max(parseFloat(t.winRate),1),gradientId:F(t.pair),isHighlightedAddition:!0})}),Array.from(i.values())},te=X([...re].sort((r,s)=>s.appearances-r.appearances).slice(0,10),me,he),Y=X([...re].filter(r=>r.appearances>=l).sort((r,s)=>s.winRateNum-r.winRateNum).slice(0,10),je.filter(r=>r.appearances>=l),he.filter(r=>r.appearances>=l)),ie=X([...ae].sort((r,s)=>s.appearances-r.appearances).slice(0,10),ve,ue),Q=X([...ae].filter(r=>r.appearances>=y).sort((r,s)=>s.winRateNum-r.winRateNum).slice(0,10),Pe.filter(r=>r.appearances>=y),ue.filter(r=>r.appearances>=y)),ye=(r,s,a)=>{const i=new Map;return r.forEach(t=>{i.set(t.pair,{...t,isHighlightedAddition:!1})}),x&&a.length>0?a.forEach(t=>{i.get(t.pair)||i.set(t.pair,{...t,winRateNum:parseFloat(t.winRate),winRateDisplay:Math.max(parseFloat(t.winRate),1),player1WinRateNum:parseFloat(t.player1WinRate),player2WinRateNum:parseFloat(t.player2WinRate),gradientId:F(t.pair),isHighlightedAddition:!0})}):L&&s.forEach(t=>{const u=i.get(t.pair);u?i.set(t.pair,{...u,winRateNum:parseFloat(u.winRate),winRateDisplay:Math.max(parseFloat(u.winRate),1),gradientId:F(u.pair)}):i.set(t.pair,{...t,winRateNum:parseFloat(t.winRate),winRateDisplay:Math.max(parseFloat(t.winRate),1),player1WinRateNum:parseFloat(t.player1WinRate),player2WinRateNum:parseFloat(t.player2WinRate),gradientId:F(t.pair),isHighlightedAddition:!0})}),Array.from(i.values())},ne=ye([...se].sort((r,s)=>s.appearances-r.appearances).slice(0,10),fe,ge),ee=ye([...se].filter(r=>r.appearances>=g).sort((r,s)=>s.winRateNum-r.winRateNum).slice(0,10),be.filter(r=>r.appearances>=g),ge.filter(r=>r.appearances>=g)),We=()=>e.jsx("div",{children:e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires de Loups les Plus FrÃ©quentes"}),e.jsx(D,{title:"Paires de Loups les Plus FrÃ©quentes",children:te.length>0?e.jsx("div",{style:{height:350},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:te,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx("defs",{children:_(te)}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Apparitions",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",margin:"4px 0"},children:[e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(i),borderRadius:"2px"}}),e.jsx("span",{children:i}),e.jsx("span",{children:"+"}),e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(t),borderRadius:"2px"}}),e.jsx("span",{children:t})]}),e.jsxs("div",{children:["Apparitions: ",a.appearances]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"appearances",name:"Apparitions",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h);return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${n.gradientId})`,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"wolves"},fromComponent:"Paires de Loups les Plus FrÃ©quentes"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Aucune paire rÃ©currente trouvÃ©e"})})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Paires de Loups les Plus Performantes"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-wolf-appearances-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. apparitions:"}),e.jsx("select",{id:"min-wolf-appearances-select",value:l,onChange:r=>w(Number(r.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:q.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs(D,{title:"Paires de Loups les Plus Performantes",children:[Y.length>0?e.jsx("div",{style:{height:320},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:Y,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx("defs",{children:_(Y)}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",margin:"4px 0"},children:[e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(i),borderRadius:"2px"}}),e.jsx("span",{children:i}),e.jsx("span",{children:"+"}),e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(t),borderRadius:"2px"}}),e.jsx("span",{children:t})]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]}),e.jsxs("div",{children:["Victoires: ",a.wins," / ",a.appearances]})]})}return null}}),e.jsx(T,{dataKey:"winRateDisplay",name:"Taux de victoire (%)",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h);return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${n.gradientId})`,fillOpacity:parseFloat(n.winRate)===0?.3:1,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"wolves"},fromComponent:"Paires de Loups les Plus Performantes"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Pas assez de donnÃ©es pour analyser la performance"})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Y.length," des paires (sur ",we,") avec au moins ",l," apparition",l>1?"s":""]})]})]})]})}),Ce=()=>e.jsx("div",{children:e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires d'Amoureux les Plus FrÃ©quentes"}),e.jsx(D,{title:"Paires d'Amoureux les Plus FrÃ©quentes",children:ie.length>0?e.jsx("div",{style:{height:350},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:ie,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx("defs",{children:_(ie)}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Apparitions",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",margin:"4px 0"},children:[e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(i),borderRadius:"2px"}}),e.jsx("span",{children:i}),e.jsx("span",{children:"+"}),e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(t),borderRadius:"2px"}}),e.jsx("span",{children:t})]}),e.jsxs("div",{children:["Apparitions: ",a.appearances]}),e.jsxs("div",{children:["Victoires: ",a.wins]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"appearances",name:"Apparitions",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h);return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${n.gradientId})`,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"lovers"},fromComponent:"Paires d'Amoureux les Plus FrÃ©quentes"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Aucune paire d'amoureux trouvÃ©e"})})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Paires d'Amoureux les Plus Performantes"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-lover-appearances-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. apparitions:"}),e.jsx("select",{id:"min-lover-appearances-select",value:y,onChange:r=>d(Number(r.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:C.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs(D,{title:"Paires d'Amoureux les Plus Performantes",children:[Q.length>0?e.jsx("div",{style:{height:320},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:Q,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx("defs",{children:_(Q)}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",margin:"4px 0"},children:[e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(i),borderRadius:"2px"}}),e.jsx("span",{children:i}),e.jsx("span",{children:"+"}),e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(t),borderRadius:"2px"}}),e.jsx("span",{children:t})]}),e.jsxs("div",{children:["Taux de victoire: ",a.winRate,"%"]}),e.jsxs("div",{children:["Victoires: ",a.wins," / ",a.appearances]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"winRateDisplay",name:"Taux de victoire (%)",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h);return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${n.gradientId})`,fillOpacity:parseFloat(n.winRate)===0?.3:1,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"lovers"},fromComponent:"Paires d'Amoureux les Plus Performantes"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Pas assez de donnÃ©es pour analyser la performance"})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Q.length," des paires (sur ",Ae,") avec au moins ",y," apparition",y>1?"s":""]})]})]})]})}),Fe=()=>e.jsx("div",{children:e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsx("h3",{children:"Paires d'Agents les Plus FrÃ©quentes"}),e.jsx(D,{title:"Paires d'Agents les Plus FrÃ©quentes",children:ne.length>0?e.jsx("div",{style:{height:350},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:ne,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx("defs",{children:_(ne)}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Apparitions",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",margin:"4px 0"},children:[e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(i),borderRadius:"2px",display:"inline-block"}}),e.jsx("span",{children:i}),e.jsx("span",{children:"vs"}),e.jsx("span",{style:{width:"12px",height:"12px",backgroundColor:f(t),borderRadius:"2px",display:"inline-block"}}),e.jsx("span",{children:t})]}),e.jsxs("div",{children:["Apparitions: ",a.appearances]}),e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsxs("div",{style:{color:f(i)},children:["ðŸ† ",i,": ",a.player1Wins??0," victoire",(a.player1Wins??0)>1?"s":""," (",a.player1WinRate??"0.00","%)"]}),e.jsxs("div",{style:{color:f(t)},children:["ðŸ† ",t,": ",a.player2Wins??0," victoire",(a.player2Wins??0)>1?"s":""," (",a.player2WinRate??"0.00","%)"]})]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"appearances",name:"Apparitions",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h);return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${n.gradientId})`,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"agents"},fromComponent:"Paires d'Agents les Plus FrÃ©quentes"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Aucune paire d'agents trouvÃ©e"})})})]}),e.jsxs("div",{className:"lycans-graphique-moitie",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Performance des Paires d'Agents"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-agent-appearances-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. apparitions:"}),e.jsx("select",{id:"min-agent-appearances-select",value:g,onChange:r=>z(Number(r.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:Z.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs(D,{title:"Performance des Paires d'Agents",children:[ee.length>0?e.jsx("div",{style:{height:320},children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:ee,margin:{top:20,right:30,left:20,bottom:20},barGap:0,barCategoryGap:"20%",children:[e.jsx("defs",{children:ee.map(r=>{const[s,a]=r.players;return[e.jsxs("linearGradient",{id:`agent-p1-${r.pair.replace(/[^a-zA-Z0-9]/g,"")}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:f(s),stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:f(s),stopOpacity:.7})]},`p1-${r.pair}`),e.jsxs("linearGradient",{id:`agent-p2-${r.pair.replace(/[^a-zA-Z0-9]/g,"")}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:f(a),stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:f(a),stopOpacity:.7})]},`p2-${r.pair}`)]})}),e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"pair",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:11,tick:({x:r,y:s,payload:a})=>{const i=c&&a.value.includes(c)||x&&a.value.includes(p)&&a.value.includes(h);return e.jsx("text",{x:r,y:s,dy:16,textAnchor:"end",fill:i?"var(--accent-primary)":"var(--text-primary)",fontSize:i?12:11,fontWeight:i?"bold":"normal",transform:`rotate(-45 ${r} ${s})`,children:a.value})}}),e.jsx(G,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(O,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const a=s[0].payload,[i,t]=a.players;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.pair})}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"4px"},children:[a.appearances," confrontation",a.appearances>1?"s":""]}),e.jsxs("div",{style:{color:f(i),fontWeight:"bold"},children:["ðŸ† ",i,": ",a.player1Wins??0," victoire",(a.player1Wins??0)>1?"s":""," (",a.player1WinRate??"0.00","%)"]}),e.jsxs("div",{style:{color:f(t),fontWeight:"bold"},children:["ðŸ† ",t,": ",a.player2Wins??0," victoire",(a.player2Wins??0)>1?"s":""," (",a.player2WinRate??"0.00","%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"player1WinRateNum",name:"Joueur 1",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h),le=`agent-p1-${n.pair.replace(/[^a-zA-Z0-9]/g,"")}`;return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${le})`,fillOpacity:parseFloat(n.player1WinRate)===0?.3:1,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"agents"},fromComponent:"Performance des Paires d'Agents"})},style:{cursor:"pointer"}})}}),e.jsx(T,{dataKey:"player2WinRateNum",name:"Joueur 2",shape:r=>{const{x:s,y:a,width:i,height:t,payload:u}=r,n=u,j=c&&n.players.includes(c)||x&&n.players.includes(p)&&n.players.includes(h),le=`agent-p2-${n.pair.replace(/[^a-zA-Z0-9]/g,"")}`;return e.jsx(H,{x:s,y:a,width:i,height:t,fill:`url(#${le})`,fillOpacity:parseFloat(n.player2WinRate)===0?.3:1,stroke:j?"var(--accent-primary)":n.isHighlightedAddition?"var(--accent-secondary)":"transparent",strokeWidth:j?3:n.isHighlightedAddition?2:0,onClick:()=>{A({playerPairFilter:{selectedPlayerPair:n.players,selectedPairRole:"agents"},fromComponent:"Performance des Paires d'Agents"})},style:{cursor:"pointer"}})}})]})})}):e.jsx("div",{className:"lycans-empty-section",children:e.jsx("p",{children:"Pas assez de donnÃ©es pour analyser la performance"})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",ee.length," des paires (sur ",Re,") avec au moins ",g," apparition",g>1?"s":"",e.jsx("br",{}),e.jsx("span",{style:{fontStyle:"italic"},children:"Chaque barre reprÃ©sente le taux de victoire de chaque agent"})]})]})]})]})});return e.jsxs("div",{className:"lycans-players-pairing",children:[e.jsx("h2",{children:"Analyse des Paires de Joueurs"}),e.jsx("p",{className:"lycans-stats-info",children:"FrÃ©quence et performance des joueurs lorsqu'ils jouent ensemble en tant que loups, amoureux ou agents"}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("label",{style:{fontWeight:"bold",color:"var(--text-primary)"},children:"Mettre en Ã©vidence une paire:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"pairing-player1-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Joueur 1:"}),e.jsxs("select",{id:"pairing-player1-select",value:p||"",onChange:r=>R(r.target.value||null),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"-- Aucun --"}),U.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"pairing-player2-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Joueur 2:"}),e.jsxs("select",{id:"pairing-player2-select",value:h||"",onChange:r=>W(r.target.value||null),disabled:!p,style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem",minWidth:"150px",opacity:p?1:.5,cursor:p?"pointer":"not-allowed"},children:[e.jsx("option",{value:"",children:"-- Aucun --"}),U.filter(r=>r!==p).map(r=>e.jsx("option",{value:r,children:r},r))]})]}),p&&e.jsx("button",{onClick:()=>{R(null),W(null)},style:{background:"var(--accent-primary)",color:"white",border:"none",borderRadius:"4px",padding:"0.25rem 0.75rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:"bold"},type:"button",children:"âœ• RÃ©initialiser"})]}),x&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--accent-primary)",marginTop:"0.5rem",marginBottom:0},children:["ðŸ“Š Mode paire activÃ©: ",p," + ",h]}),L&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--accent-secondary)",marginTop:"0.5rem",marginBottom:0},children:["ðŸ‘¤ Mode joueur unique: ",p]})]}),e.jsxs("nav",{className:"lycans-submenu",children:[e.jsxs("button",{className:`lycans-submenu-btn${N==="wolves"?" active":""}`,onClick:()=>{b("wolves"),m({selectedPairingTab:"wolves"})},type:"button",children:["Paires de Loups (",o.wolfPairs.pairs.length,")"]}),e.jsxs("button",{className:`lycans-submenu-btn${N==="lovers"?" active":""}`,onClick:()=>{b("lovers"),m({selectedPairingTab:"lovers"})},type:"button",children:["Paires d'Amoureux (",o.loverPairs.pairs.length,")"]}),e.jsxs("button",{className:`lycans-submenu-btn${N==="agents"?" active":""}`,onClick:()=>{b("agents"),m({selectedPairingTab:"agents"})},type:"button",children:["Paires d'Agents (",o.agentPairs.pairs.length,")"]})]}),e.jsxs("div",{className:"lycans-dashboard-content",children:[N==="wolves"&&We(),N==="lovers"&&Ce(),N==="agents"&&Fe()]})]})}export{Ke as PlayerPairingStatsChart};
