import{r as N,u as E,j as s}from"./index-BQ0kkpX9.js";import{u as R,a as k,b as q}from"./useRawGameData-DP6-F-OP.js";import{c as B,a as $}from"./gameUtils-eJjgb3Fr.js";import{a as G}from"./api-beq3FXpM.js";function M(a){const{data:j,isLoading:v,error:g}=R(),{data:b,isLoading:h,error:P}=k(),{data:x,isLoading:I,error:T}=q();return{data:N.useMemo(()=>{if(!j||!b||!x)return[];let p=[...j];return a&&(a.selectedPlayer&&(p=p.filter(r=>r["Liste des joueurs"].toLowerCase().includes(a.selectedPlayer.toLowerCase()))),a.selectedGame&&(p=p.filter(r=>r.Game===a.selectedGame)),a.selectedCamp&&(p=p.filter(r=>{if(a.selectedPlayer){const t=b.find(C=>C.Game===r.Game);if(!t)return!1;const e=a.selectedPlayer.toLowerCase();if(a.selectedCamp==="Autres"&&a._smallCamps){const C=a._smallCamps;for(const i of C){let u=!1;switch(i){case"Traître":u=!!(t.Traître&&t.Traître.toLowerCase().includes(e));break;case"Idiot du Village":u=!!(t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e));break;case"Cannibale":u=!!(t.Cannibale&&t.Cannibale.toLowerCase().includes(e));break;case"Agent":u=!!(t.Agent&&t.Agent.toLowerCase().includes(e));break;case"Espion":u=!!(t.Espion&&t.Espion.toLowerCase().includes(e));break;case"Scientifique":u=!!(t.Scientifique&&t.Scientifique.toLowerCase().includes(e));break;case"Amoureux":u=!!(t.Amoureux&&t.Amoureux.toLowerCase().includes(e));break;case"La Bête":u=!!(t["La Bête"]&&t["La Bête"].toLowerCase().includes(e));break;case"Chasseur de primes":u=!!(t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e));break;case"Vaudou":u=!!(t.Vaudou&&t.Vaudou.toLowerCase().includes(e));break;case"Villageois":const n=r["Liste des joueurs"].toLowerCase().includes(e),o=t.Loups&&t.Loups.toLowerCase().includes(e)||t.Traître&&t.Traître.toLowerCase().includes(e)||t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e)||t.Cannibale&&t.Cannibale.toLowerCase().includes(e)||t.Agent&&t.Agent.toLowerCase().includes(e)||t.Espion&&t.Espion.toLowerCase().includes(e)||t.Scientifique&&t.Scientifique.toLowerCase().includes(e)||t.Amoureux&&t.Amoureux.toLowerCase().includes(e)||t["La Bête"]&&t["La Bête"].toLowerCase().includes(e)||t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e)||t.Vaudou&&t.Vaudou.toLowerCase().includes(e);u=n&&!o;break}if(u)return!0}return!1}return t.Loups&&t.Loups.toLowerCase().includes(e)?a.selectedCamp==="Loups":t.Traître&&t.Traître.toLowerCase().includes(e)?a.selectedCamp==="Traître":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e)?a.selectedCamp==="Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(e)?a.selectedCamp==="Cannibale":t.Agent&&t.Agent.toLowerCase().includes(e)?a.selectedCamp==="Agent":t.Espion&&t.Espion.toLowerCase().includes(e)?a.selectedCamp==="Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(e)?a.selectedCamp==="Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(e)?a.selectedCamp==="Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(e)?a.selectedCamp==="La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e)?a.selectedCamp==="Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(e)?a.selectedCamp==="Vaudou":r["Liste des joueurs"].toLowerCase().includes(e)?a.selectedCamp==="Villageois":!1}else{if((a.campFilterMode||"wins-only")==="wins-only")return a.selectedCamp==="Autres"&&a._smallCamps?a._smallCamps.includes(r["Camp victorieux"]):r["Camp victorieux"]===a.selectedCamp;{const e=b.find(c=>c.Game===r.Game);if(!e)return r["Camp victorieux"]===a.selectedCamp;if(a.selectedCamp==="Autres"&&a._smallCamps)return a._smallCamps.some(C=>{switch(C){case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const i=r["Liste des joueurs"].split(",").map(n=>n.trim()).filter(n=>n),u=[...e.Loups?e.Loups.split(",").map(n=>n.trim()).filter(n=>n):[],...e.Traître?[e.Traître.trim()].filter(n=>n):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(n=>n):[],...e.Cannibale?[e.Cannibale.trim()].filter(n=>n):[],...e.Agent?[e.Agent.trim()].filter(n=>n):[],...e.Espion?[e.Espion.trim()].filter(n=>n):[],...e.Scientifique?[e.Scientifique.trim()].filter(n=>n):[],...e.Amoureux?e.Amoureux.split(",").map(n=>n.trim()).filter(n=>n):[],...e["La Bête"]?[e["La Bête"].trim()].filter(n=>n):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(n=>n):[],...e.Vaudou?[e.Vaudou.trim()].filter(n=>n):[]];return i.some(n=>!u.includes(n));default:return!1}});switch(a.selectedCamp){case"Loups":return!!(e.Loups&&e.Loups.trim());case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const c=r["Liste des joueurs"].split(",").map(i=>i.trim()).filter(i=>i),C=[...e.Loups?e.Loups.split(",").map(i=>i.trim()).filter(i=>i):[],...e.Traître?[e.Traître.trim()].filter(i=>i):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(i=>i):[],...e.Cannibale?[e.Cannibale.trim()].filter(i=>i):[],...e.Agent?[e.Agent.trim()].filter(i=>i):[],...e.Espion?[e.Espion.trim()].filter(i=>i):[],...e.Scientifique?[e.Scientifique.trim()].filter(i=>i):[],...e.Amoureux?e.Amoureux.split(",").map(i=>i.trim()).filter(i=>i):[],...e["La Bête"]?[e["La Bête"].trim()].filter(i=>i):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(i=>i):[],...e.Vaudou?[e.Vaudou.trim()].filter(i=>i):[]];return c.some(i=>!C.includes(i));default:return r["Camp victorieux"]===a.selectedCamp}}}})),a.selectedVictoryType&&(p=p.filter(r=>r["Type de victoire"]===a.selectedVictoryType)),a.selectedDate&&(p=p.filter(r=>{const t=r.Date;if(a.selectedDate.includes("/")&&a.selectedDate.split("/").length===2){const[e,c]=a.selectedDate.split("/"),C=t.split("/");if(C.length===3){const[,i,u]=C;return i===e&&u===c}}else return t===a.selectedDate;return!1})),a.selectedPlayerPair&&a.selectedPairRole&&(p=p.filter(r=>{const t=b.find(u=>u.Game===r.Game);if(!t)return!1;const[e,c]=a.selectedPlayerPair,C=e.toLowerCase(),i=c.toLowerCase();if(a.selectedPairRole==="wolves"){if(t.Loups){const u=t.Loups.toLowerCase();return u.includes(C)&&u.includes(i)}}else if(a.selectedPairRole==="lovers"&&t.Amoureux){const u=t.Amoureux.toLowerCase();return u.includes(C)&&u.includes(i)}return!1})),a.selectedHarvestRange&&(p=p.filter(r=>{const t=r["Pourcentage de récolte"];if(t==null)return!1;const e=t*100;switch(a.selectedHarvestRange){case"0-25%":return e>=0&&e<=25;case"26-50%":return e>25&&e<=50;case"51-75%":return e>50&&e<=75;case"76-99%":return e>75&&e<=99;case"100%":return e>=100;default:return!0}})),a.selectedGameDuration&&(p=p.filter(r=>r["Nombre de journées"]===a.selectedGameDuration)),a.selectedPlayers&&a.selectedPlayers.length===2&&(p=p.filter(r=>{const t=r["Liste des joueurs"].toLowerCase(),[e,c]=a.selectedPlayers;if(!(t.includes(e.toLowerCase())&&t.includes(c.toLowerCase())))return!1;if(a.playersFilterMode==="all-common-games"){if(a.winnerPlayer){const i=b.find(o=>o.Game===r.Game);if(!i)return!0;const n=(o=>{const d=o.toLowerCase();return i.Loups&&i.Loups.toLowerCase().includes(d)||i.Traître&&i.Traître.toLowerCase().includes(d)?"Loups":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(d)?"Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(d)?"Cannibale":i.Agent&&i.Agent.toLowerCase().includes(d)?"Agent":i.Espion&&i.Espion.toLowerCase().includes(d)?"Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(d)?"Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(d)?"Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(d)?"La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(d)?"Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(d)?"Vaudou":"Villageois"})(a.winnerPlayer);return r["Camp victorieux"]===n}return!0}if(a.playersFilterMode==="opposing-camps"){const i=b.find(m=>m.Game===r.Game);if(!i)return!1;const u=m=>{const f=m.toLowerCase();return i.Loups&&i.Loups.toLowerCase().includes(f)||i.Traître&&i.Traître.toLowerCase().includes(f)?"Loups":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(f)?"Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(f)?"Cannibale":i.Agent&&i.Agent.toLowerCase().includes(f)?"Agent":i.Espion&&i.Espion.toLowerCase().includes(f)?"Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(f)?"Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(f)?"Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(f)?"La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(f)?"Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(f)?"Vaudou":"Villageois"},n=u(e),o=u(c);if(!(n!==o))return!1;if(a.winnerPlayer){const m=u(a.winnerPlayer);return r["Camp victorieux"]===m}return!0}return!1}))),p.map(r=>{const t=b.find(o=>o.Game===r.Game),e=x.filter(o=>o.Game===r.Game),c={};t&&(t.Loups&&(c.wolves=t.Loups.split(", ").filter(Boolean)),t.Traître&&(c.traitor=t.Traître),t["Idiot du village"]&&(c.villageIdiot=t["Idiot du village"]),t.Cannibale&&(c.cannibal=t.Cannibale),t.Agent&&(c.agent=t.Agent),t.Espion&&(c.spy=t.Espion),t.Scientifique&&(c.scientist=t.Scientifique),t.Amoureux&&(c.lovers=t.Amoureux.split(", ").filter(Boolean)),t["La Bête"]&&(c.beast=t["La Bête"]),t["Chasseur de primes"]&&(c.bountyHunter=t["Chasseur de primes"]),t.Vaudou&&(c.voodoo=t.Vaudou));const C=e.map(o=>({player:"Ponce",camp:o.Camp||"Unknown",isTraitor:o.Traître||!1,secondaryRole:o["Rôle secondaire"]==="N/A"?null:o["Rôle secondaire"],wolfPower:o["Pouvoir de loup"]==="N/A"?null:o["Pouvoir de loup"],villagerJob:o["Métier villageois"]==="N/A"?null:o["Métier villageois"],playersKilled:o["Joueurs tués"],deathDay:o["Jour de mort"],deathType:o["Type de mort"],killers:o["Joueurs tueurs"]})),i=[];return r["Liste des joueurs"].split(", ").filter(Boolean).forEach(o=>{let d="Villageois",m="Villageois";t&&(t.Loups&&t.Loups.split(", ").includes(o)?(d="Loups",m="Loups"):t.Traître&&t.Traître===o?(d="Traître",m="Loups"):t["Idiot du village"]&&t["Idiot du village"]===o?(d="Idiot du Village",m="Idiot du Village"):t.Cannibale&&t.Cannibale===o?(d="Cannibale",m="Cannibale"):t.Agent&&t.Agent.split(", ").includes(o)?(d="Agent",m="Agent"):t.Espion&&t.Espion===o?(d="Espion",m="Espion"):t.Scientifique&&t.Scientifique===o?(d="Scientifique",m="Scientifique"):t["La Bête"]&&t["La Bête"]===o?(d="La Bête",m="La Bête"):t["Chasseur de primes"]&&t["Chasseur de primes"]===o?(d="Chasseur de primes",m="Chasseur de primes"):t.Vaudou&&t.Vaudou===o?(d="Vaudou",m="Vaudou"):t.Amoureux&&t.Amoureux.split(", ").includes(o)&&d==="Villageois"&&(d="Amoureux",m="Amoureux")),i.push({player:o,role:d,camp:m})}),{gameId:r.Game,date:r.Date,isModded:r["Game Moddée"],playerCount:r["Nombre de joueurs"],wolfCount:r["Nombre de loups"],hasTraitor:r["Rôle Traître"],hasLovers:r["Rôle Amoureux"],soloRoles:r["Rôles solo"],winningCamp:r["Camp victorieux"],victoryType:r["Type de victoire"],dayCount:r["Nombre de journées"],villagerSurvivors:r["Survivants villageois"],wolfSurvivors:r["Survivants loups (traître inclus)"],loverSurvivors:r["Survivants amoureux"],soloSurvivors:r["Survivants solo"],winners:r["Liste des gagnants"],harvest:r.Récolte,totalHarvest:r["Total récolte"],harvestPercentage:r["Pourcentage de récolte"],playersList:r["Liste des joueurs"],versions:r.Versions,map:r.Map,youtubeEmbedUrl:$(r.Début,r.Fin),gameDuration:B(r.Début,r.Fin),roles:c,playerRoles:i,playerDetails:C}})},[j,b,x,a]),isLoading:v||h||I,error:g||P||T}}function Y(){const{navigationFilters:a,navigateBack:j}=E(),{data:v,isLoading:g,error:b}=M(a),[h,P]=N.useState("date"),[x,I]=N.useState("desc"),[T,S]=N.useState(null),[y,V]=N.useState(1),[p,r]=N.useState(25),t=N.useRef(!1),e=N.useMemo(()=>v?[...v].sort((l,w)=>{let L,A;switch(h){case"date":L=new Date(l.date.split("/").reverse().join("-")).getTime(),A=new Date(w.date.split("/").reverse().join("-")).getTime();break;case"gameId":L=l.gameId,A=w.gameId;break;case"playerCount":L=l.playerCount,A=w.playerCount;break;case"dayCount":L=l.dayCount,A=w.dayCount;break;case"winningCamp":L=l.winningCamp,A=w.winningCamp;break;case"victoryType":L=l.victoryType,A=w.victoryType;break;default:return 0}return x==="asc"?L>A?1:-1:L<A?1:-1}):[],[v,h,x]),c=Math.ceil(e.length/p),C=(y-1)*p,i=C+p,u=e.slice(C,i);N.useEffect(()=>{if(t.current){t.current=!1;return}V(1),S(null)},[v]),N.useEffect(()=>{V(1),S(null)},[h,x]);const n=l=>{t.current=!0,V(l),S(null)},o=l=>{t.current=!0,r(l),V(1),S(null)},d=l=>{t.current=!0,S(T===l?null:l)},m=l=>{h===l?I(x==="asc"?"desc":"asc"):(P(l),I("desc"))},f=l=>h!==l?"↕️":x==="asc"?"↗️":"↘️",D=()=>{const l=[];if(a.selectedPlayer&&a.selectedCamp)l.push(`${a.selectedPlayer} jouant ${a.selectedCamp}`);else if(a.selectedPlayer&&l.push(`Joueur: ${a.selectedPlayer}`),a.selectedCamp){const w=`Camp: ${a.selectedCamp}`,L=a.campFilterMode==="wins-only"?" (victoires uniquement)":a.campFilterMode==="all-assignments"?" (toutes assignations)":"";l.push(w+L)}if(a.selectedPlayerPair&&a.selectedPairRole){const w=a.selectedPlayerPair.join(" & "),L=a.selectedPairRole==="wolves"?"loups":"amoureux";l.push(`Paire ${L}: ${w}`)}if(a.selectedPlayers&&a.playersFilterMode){const w=a.selectedPlayers.join(" & "),L=a.playersFilterMode==="all-common-games"?"toutes les parties communes":"affrontements uniquement",A=a.winnerPlayer?` (victoires de ${a.winnerPlayer})`:"";l.push(`${w} (${L}${A})`)}return a.selectedVictoryType&&l.push(`Victoire: ${a.selectedVictoryType}`),a.selectedHarvestRange&&l.push(`Récolte: ${a.selectedHarvestRange}`),a.selectedGameDuration&&l.push(`Durée: ${a.selectedGameDuration} jour${a.selectedGameDuration>1?"s":""}`),a.selectedGame&&l.push(`Partie #${a.selectedGame}`),a.selectedDate&&(a.selectedDate.includes("/")&&a.selectedDate.split("/").length===2?l.push(`Mois: ${a.selectedDate}`):l.push(`Date: ${a.selectedDate}`)),l};return g?s.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):b?s.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",b]}):!v||v.length===0?s.jsxs("div",{className:"lycans-empty-section",children:[s.jsx("h2",{children:"Aucune partie trouvée"}),s.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),a.fromComponent&&s.jsxs("button",{onClick:j,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",a.fromComponent]})]}):s.jsxs("div",{className:"lycans-game-details",children:[s.jsxs("div",{className:"lycans-game-details-header",children:[s.jsxs("div",{className:"lycans-game-details-navigation",children:[a.fromComponent&&s.jsxs("button",{onClick:j,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",a.fromComponent]}),s.jsxs("h2",{children:["Détails des Parties (",v.length," partie",v.length>1?"s":"",")"]})]}),D().length>0&&s.jsxs("div",{className:"lycans-active-filters",children:[s.jsx("strong",{children:"Filtres actifs:"})," ",D().join(", ")]})]}),c>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",C+1," à ",Math.min(i,e.length)," sur ",e.length," parties"]}),s.jsxs("div",{className:"lycans-pagination-controls",children:[s.jsxs("select",{value:p,onChange:l=>o(Number(l.target.value)),className:"lycans-pagination-select",children:[s.jsx("option",{value:10,children:"10 par page"}),s.jsx("option",{value:25,children:"25 par page"}),s.jsx("option",{value:50,children:"50 par page"}),s.jsx("option",{value:100,children:"100 par page"})]}),s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>n(1),disabled:y===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>n(y-1),disabled:y===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",y," sur ",c]}),s.jsx("button",{onClick:()=>n(y+1),disabled:y===c,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>n(c),disabled:y===c,className:"lycans-pagination-btn",children:"»»"})]})]})]}),s.jsx("div",{className:"lycans-games-table-container",children:s.jsxs("table",{className:"lycans-games-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{onClick:()=>m("gameId"),className:"sortable",children:["Partie ",f("gameId")]}),s.jsxs("th",{onClick:()=>m("date"),className:"sortable",children:["Date ",f("date")]}),s.jsxs("th",{onClick:()=>m("playerCount"),className:"sortable",children:["Joueurs ",f("playerCount")]}),s.jsxs("th",{onClick:()=>m("dayCount"),className:"sortable",children:["Jours ",f("dayCount")]}),s.jsxs("th",{onClick:()=>m("winningCamp"),className:"sortable",children:["Camp Vainqueur ",f("winningCamp")]}),s.jsxs("th",{onClick:()=>m("victoryType"),className:"sortable",children:["Type de Victoire ",f("victoryType")]}),s.jsx("th",{children:"Détails"})]})}),s.jsx("tbody",{children:u.map(l=>s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:T===l.gameId?"selected":"",children:[s.jsxs("td",{children:["#",l.gameId]}),s.jsx("td",{children:l.date}),s.jsx("td",{children:l.playerCount}),s.jsx("td",{children:l.dayCount}),s.jsx("td",{style:{color:G[l.winningCamp]||"#fff"},children:l.winningCamp}),s.jsx("td",{children:l.victoryType}),s.jsx("td",{children:s.jsx("button",{onClick:()=>d(l.gameId),className:"lycans-details-btn",children:T===l.gameId?"Masquer":"Voir"})})]},l.gameId),T===l.gameId&&s.jsx("tr",{className:"game-details-row",children:s.jsx("td",{colSpan:7,children:s.jsx(J,{game:l})})},`${l.gameId}-details`)]}))})]})}),c>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",C+1," à ",Math.min(i,e.length)," sur ",e.length," parties"]}),s.jsx("div",{className:"lycans-pagination-controls",children:s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>n(1),disabled:y===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>n(y-1),disabled:y===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",y," sur ",c]}),s.jsx("button",{onClick:()=>n(y+1),disabled:y===c,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>n(c),disabled:y===c,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function F(a){if(a===null||a<=0)return"N/A";const j=Math.floor(a/60),v=a%60;return j===0?`${v}s`:v===0?`${j}m`:`${j}m ${v}s`}function J({game:a}){const[j,v]=N.useState(!1);return s.jsx("div",{className:"lycans-game-detail-view",children:s.jsxs("div",{className:"lycans-game-detail-grid",children:[s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Générales"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de joueurs:"}),s.jsx("span",{className:"value",children:a.playerCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de loups:"}),s.jsx("span",{className:"value",children:a.wolfCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Traître:"}),s.jsx("span",{className:"value",children:a.hasTraitor?"Oui":"Non"})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Amoureux:"}),s.jsx("span",{className:"value",children:a.hasLovers?"Oui":"Non"})]}),a.soloRoles&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Rôles solo:"}),s.jsx("span",{className:"value",children:a.soloRoles})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Supplémentaires"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[a.gameDuration!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Durée de la partie:"}),s.jsx("span",{className:"value",children:F(a.gameDuration)})]}),a.versions&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Version:"}),s.jsxs("span",{className:"value",children:[a.versions,a.isModded?" (moddée)":""]})]}),a.map&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Map:"}),s.jsx("span",{className:"value",children:a.map})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Résultats"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Camp vainqueur:"}),s.jsx("span",{className:"value",children:a.winningCamp})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Type de victoire:"}),s.jsx("span",{className:"value",children:a.victoryType})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants villageois:"}),s.jsx("span",{className:"value",children:a.villagerSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants loups:"}),s.jsx("span",{className:"value",children:a.wolfSurvivors})]}),a.loverSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants amoureux:"}),s.jsx("span",{className:"value",children:a.loverSurvivors})]}),a.soloSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants solo:"}),s.jsx("span",{className:"value",children:a.soloSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Gagnants:"}),s.jsx("span",{className:"value",children:a.winners})]})]})]}),a.harvest!==null&&s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Récolte"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Récolte:"}),s.jsx("span",{className:"value",children:a.harvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Total possible:"}),s.jsx("span",{className:"value",children:a.totalHarvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Pourcentage:"}),s.jsx("span",{className:"value",children:typeof a.harvestPercentage=="number"?(a.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Rôles des Joueurs"}),s.jsx("div",{className:"lycans-player-roles-grid",children:a.playerRoles.map((g,b)=>{const h=a.playerDetails.find(x=>x.player===g.player);let P=g.role===g.camp?g.camp:`${g.camp} (${g.role})`;if(h){const x=[];h.wolfPower&&h.wolfPower.trim()?x.push(h.wolfPower):h.villagerJob&&h.villagerJob.trim()&&x.push(h.villagerJob),x.length>0?(P=`${g.camp} - ${x[0]}`,h.secondaryRole&&h.secondaryRole.trim()&&(P+=` (${h.secondaryRole})`)):h.secondaryRole&&h.secondaryRole.trim()&&(P=`${g.camp} (${h.secondaryRole})`)}return s.jsxs("div",{className:"lycans-player-role-item",children:[s.jsx("div",{className:"lycans-player-name",style:{color:G[g.camp]||"#fff",textAlign:"left"},children:g.player}),s.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:P})]},b)})})]}),a.youtubeEmbedUrl&&s.jsx("div",{className:"lycans-game-detail-section full-width",children:s.jsx("button",{onClick:()=>v(!j),className:"lycans-video-toggle-btn",children:j?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),a.youtubeEmbedUrl&&j&&s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Vidéo de la Partie"}),s.jsx("div",{className:"lycans-youtube-container",children:s.jsx("iframe",{src:a.youtubeEmbedUrl,title:`Partie Lycans #${a.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{Y as GameDetailsChart};
