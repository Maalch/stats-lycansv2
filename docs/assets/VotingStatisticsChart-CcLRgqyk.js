import{r as B,a as J,u as $,j as e}from"./index-B0qrVTjy.js";import{F as N,B as F,C as R,X as k,Y as w,a as E,b as D}from"./FullscreenChart-D3KCDQoz.js";import{g as z,a as H,u as K}from"./datasyncExport-DroQWsm0.js";import{u as L}from"./useJoueursData-CAZwuEfR.js";import{u as G}from"./api-SWF0uUNr.js";import{R as O,T as W}from"./CategoricalChart-BH9JEESN.js";function X(r,m){if(!r.DeathTiming)return!0;const p=r.DeathTiming.toUpperCase();if(p.startsWith("M")){const h=parseInt(p.substring(1));return m<h}if(p.startsWith("N")||p.startsWith("J")){const h=parseInt(p.substring(1));return m<=h}return!0}function Y(r,m){return r.PlayerStats.filter(p=>X(p,m))}function U(r,m,p){const h=r.PlayerStats.find(f=>f.Username===p);return h?h.DeathType==="VOTED"&&h.DeathTiming===`M${m}`:!1}function Q(r){const m=[],p=new Map,h=new Map,f=new Map;r.PlayerStats.forEach(c=>{p.set(c.Username,{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0}),h.set(c.Username,{totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0}),f.set(c.Username,{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0})});const S=Math.max(...r.PlayerStats.flatMap(c=>c.Votes.map(g=>g.MeetingNr)),0);for(let c=1;c<=S;c++){const g=Y(r,c),j=r.PlayerStats.flatMap(d=>d.Votes.filter(x=>x.MeetingNr===c).map(x=>({voter:d.Username,vote:x,voterRole:d.MainRoleInitial}))),C=j.filter(d=>d.vote.Target!=="Passé").length,y=j.filter(d=>d.vote.Target==="Passé").length,u=g.length-j.length,t=new Map;j.filter(d=>d.vote.Target!=="Passé").forEach(d=>{const x=t.get(d.vote.Target)||0;t.set(d.vote.Target,x+1)});let l=null,T=0;for(const[d,x]of t.entries())x>T&&(l=d,T=x);let v=null;l&&T>0&&U(r,c,l)&&(v=l),m.push({meetingNumber:c,totalParticipants:g.length,totalVotes:C,totalSkips:y,totalAbstentions:u,participationRate:g.length>0?(C+y)/g.length*100:0,mostTargetedPlayer:l,mostTargetedCount:T,eliminatedPlayer:v}),g.forEach(d=>{const x=p.get(d.Username);x.totalMeetings++;const b=j.find(i=>i.voter===d.Username);if(b)if(b.vote.Target==="Passé")x.totalSkips++;else{x.totalVotes++;const i=h.get(d.Username);i.totalVotes++;const n=z(H(d.MainRoleInitial,d.MainRoleChanges||[])),a=r.PlayerStats.find(s=>s.Username===b.vote.Target);if(a){const s=z(H(a.MainRoleInitial,a.MainRoleChanges||[]));n===s?i.votesForOwnCamp++:i.votesForEnemyCamp++;const o=f.get(b.vote.Target);o.totalTimesTargeted++,n===s?o.timesTargetedByOwnCamp++:o.timesTargetedByEnemyCamp++;const A=H(a.MainRoleInitial,a.MainRoleChanges||[]),I=z(A);I==="Villageois"?o.timesTargetedAsVillager++:I==="Loup"?o.timesTargetedAsWolf++:o.timesTargetedAsSpecial++,U(r,c,b.vote.Target)&&o.eliminationsByVote++}}else x.totalAbstentions++})}const P=[],M=[],V=[];return r.PlayerStats.forEach(c=>{const g=p.get(c.Username),j=g.totalMeetings>0?g.totalVotes/g.totalMeetings*100:0,C=g.totalMeetings>0?g.totalSkips/g.totalMeetings*100:0,y=g.totalMeetings>0?g.totalAbstentions/g.totalMeetings*100:0,u=j-C*.5-y*.7;P.push({playerName:c.Username,totalMeetings:g.totalMeetings,totalVotes:g.totalVotes,totalSkips:g.totalSkips,totalAbstentions:g.totalAbstentions,votingRate:j,skippingRate:C,abstentionRate:y,aggressivenessScore:u});const t=h.get(c.Username),l=t.totalVotes>0?t.votesForEnemyCamp/t.totalVotes*100:0,T=t.totalVotes>0?t.votesForOwnCamp/t.totalVotes*100:0;M.push({playerName:c.Username,totalMeetings:g.totalMeetings,totalVotes:t.totalVotes,votesForEnemyCamp:t.votesForEnemyCamp,votesForOwnCamp:t.votesForOwnCamp,accuracyRate:l,friendlyFireRate:T});const v=f.get(c.Username),d=v.totalTimesTargeted>0?(v.totalTimesTargeted-v.eliminationsByVote)/v.totalTimesTargeted*100:100;V.push({playerName:c.Username,totalTimesTargeted:v.totalTimesTargeted,timesTargetedByEnemyCamp:v.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:v.timesTargetedByOwnCamp,timesTargetedAsVillager:v.timesTargetedAsVillager,timesTargetedAsWolf:v.timesTargetedAsWolf,timesTargetedAsSpecial:v.timesTargetedAsSpecial,eliminationsByVote:v.eliminationsByVote,survivalRate:d})}),{gameId:r.Id,totalMeetings:S,meetingAnalytics:m,playerBehaviors:P,playerAccuracies:M,playerTargetStats:V}}function Z(r){const m=r.map(Q),p=new Map,h=new Map,f=new Map;let S=0,P=0,M=0,V=0,c=0,g=0;m.forEach(u=>{S+=u.totalMeetings,u.meetingAnalytics.forEach(t=>{P+=t.participationRate,M++,V+=t.totalVotes,c+=t.totalSkips,g+=t.totalAbstentions}),u.playerBehaviors.forEach(t=>{const l=p.get(t.playerName)||{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0};p.set(t.playerName,{totalMeetings:l.totalMeetings+t.totalMeetings,totalVotes:l.totalVotes+t.totalVotes,totalSkips:l.totalSkips+t.totalSkips,totalAbstentions:l.totalAbstentions+t.totalAbstentions})}),u.playerAccuracies.forEach(t=>{const l=h.get(t.playerName)||{totalMeetings:0,totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0};h.set(t.playerName,{totalMeetings:l.totalMeetings+t.totalMeetings,totalVotes:l.totalVotes+t.totalVotes,votesForEnemyCamp:l.votesForEnemyCamp+t.votesForEnemyCamp,votesForOwnCamp:l.votesForOwnCamp+t.votesForOwnCamp})}),u.playerTargetStats.forEach(t=>{const l=f.get(t.playerName)||{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0};f.set(t.playerName,{totalTimesTargeted:l.totalTimesTargeted+t.totalTimesTargeted,timesTargetedByEnemyCamp:l.timesTargetedByEnemyCamp+t.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:l.timesTargetedByOwnCamp+t.timesTargetedByOwnCamp,timesTargetedAsVillager:l.timesTargetedAsVillager+t.timesTargetedAsVillager,timesTargetedAsWolf:l.timesTargetedAsWolf+t.timesTargetedAsWolf,timesTargetedAsSpecial:l.timesTargetedAsSpecial+t.timesTargetedAsSpecial,eliminationsByVote:l.eliminationsByVote+t.eliminationsByVote})})});const j=Array.from(p.entries()).map(([u,t])=>{const l=t.totalMeetings>0?t.totalVotes/t.totalMeetings*100:0,T=t.totalMeetings>0?t.totalSkips/t.totalMeetings*100:0,v=t.totalMeetings>0?t.totalAbstentions/t.totalMeetings*100:0,d=l-T*.5-v*.7;return{playerName:u,totalMeetings:t.totalMeetings,totalVotes:t.totalVotes,totalSkips:t.totalSkips,totalAbstentions:t.totalAbstentions,votingRate:l,skippingRate:T,abstentionRate:v,aggressivenessScore:d}}),C=Array.from(h.entries()).map(([u,t])=>{const l=t.totalVotes>0?t.votesForEnemyCamp/t.totalVotes*100:0,T=t.totalVotes>0?t.votesForOwnCamp/t.totalVotes*100:0;return{playerName:u,totalMeetings:t.totalMeetings,totalVotes:t.totalVotes,votesForEnemyCamp:t.votesForEnemyCamp,votesForOwnCamp:t.votesForOwnCamp,accuracyRate:l,friendlyFireRate:T}}),y=Array.from(f.entries()).map(([u,t])=>{const l=t.totalTimesTargeted>0?(t.totalTimesTargeted-t.eliminationsByVote)/t.totalTimesTargeted*100:100;return{playerName:u,totalTimesTargeted:t.totalTimesTargeted,timesTargetedByEnemyCamp:t.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:t.timesTargetedByOwnCamp,timesTargetedAsVillager:t.timesTargetedAsVillager,timesTargetedAsWolf:t.timesTargetedAsWolf,timesTargetedAsSpecial:t.timesTargetedAsSpecial,eliminationsByVote:t.eliminationsByVote,survivalRate:l}});return{playerBehaviorStats:j,playerAccuracyStats:C,playerTargetStats:y,overallMeetingStats:{totalMeetings:S,averageParticipationRate:M>0?P/M:0,totalVotes:V,totalSkips:c,totalAbstentions:g}}}function q(){return K(r=>{if(!r||r.length===0)return null;const m=r.filter(p=>p.PlayerStats.some(h=>h.Votes&&h.Votes.length>0));return m.length===0?null:Z(m)})}function _(r=5){const{data:m,isLoading:p,error:h}=q();return{data:B.useMemo(()=>m?{...m,playerBehaviorStats:m.playerBehaviorStats.filter(S=>S.totalMeetings>=r),playerAccuracyStats:m.playerAccuracyStats.filter(S=>S.totalVotes>=Math.ceil(r*.6)),playerTargetStats:m.playerTargetStats.filter(S=>S.totalTimesTargeted>=Math.ceil(r*.3))}:null,[m,r]),isLoading:p,error:h}}function oe(){const{settings:r}=J(),{navigateToGameDetails:m}=$(),{joueursData:p}=L(),h=G(p),[f,S]=B.useState("behavior"),[P,M]=B.useState(25),[V,c]=B.useState(null),{data:g,isLoading:j,error:C}=q(),{data:y}=_(P),u=i=>{i&&i.playerName&&m({selectedPlayer:i.playerName,fromComponent:"Statistiques de Vote"})},{behaviorChartData:t,highlightedPlayerInBehavior:l}=B.useMemo(()=>{if(!y)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const i=[...y.playerBehaviorStats].sort((o,A)=>A.aggressivenessScore-o.aggressivenessScore).slice(0,15),n=r.highlightedPlayer&&i.some(o=>o.playerName===r.highlightedPlayer);let a=[...i],s=!1;if(r.highlightedPlayer&&!n){const o=y.playerBehaviorStats.find(A=>A.playerName===r.highlightedPlayer);o&&(a.push({...o,isHighlightedAddition:!0}),s=!0)}return{behaviorChartData:a,highlightedPlayerInBehavior:s}},[y,r.highlightedPlayer]),{accuracyChartData:T,highlightedPlayerInAccuracy:v}=B.useMemo(()=>{if(!y)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const i=[...y.playerAccuracyStats].sort((o,A)=>A.accuracyRate-o.accuracyRate).slice(0,15),n=r.highlightedPlayer&&i.some(o=>o.playerName===r.highlightedPlayer);let a=[...i],s=!1;if(r.highlightedPlayer&&!n){const o=y.playerAccuracyStats.find(A=>A.playerName===r.highlightedPlayer);o&&(a.push({...o,isHighlightedAddition:!0}),s=!0)}return{accuracyChartData:a,highlightedPlayerInAccuracy:s}},[y,r.highlightedPlayer]),{targetChartData:d,highlightedPlayerInTargets:x}=B.useMemo(()=>{if(!y)return{targetChartData:[],highlightedPlayerInTargets:!1};const i=[...y.playerTargetStats].sort((o,A)=>A.survivalRate-o.survivalRate).slice(0,15),n=r.highlightedPlayer&&i.some(o=>o.playerName===r.highlightedPlayer);let a=[...i],s=!1;if(r.highlightedPlayer&&!n){const o=y.playerTargetStats.find(A=>A.playerName===r.highlightedPlayer);o&&(a.push({...o,isHighlightedAddition:!0}),s=!0)}return{targetChartData:a,highlightedPlayerInTargets:s}},[y,r.highlightedPlayer]);if(j)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de vote..."});if(C)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",C]});if(!g||!y)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de vote disponible"});const b=[5,10,25,50,100,200];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"📊 Statistiques de Vote"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"view-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Vue:"}),e.jsxs("select",{id:"view-select",value:f,onChange:i=>S(i.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"180px"},children:[e.jsx("option",{value:"behavior",children:"🗳️ Comportements de vote"}),e.jsx("option",{value:"accuracy",children:"🎯 Précision des votes"}),e.jsx("option",{value:"targets",children:"🔻 Joueurs ciblés"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:P,onChange:i=>M(Number(i.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:b.map(i=>e.jsx("option",{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[f==="behavior"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🗳️ Comportements de Vote - Score d'Agressivité"}),l&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basé sur le taux de vote, les abstentions et les "passés". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(N,{title:"Comportements de Vote - Score d'Agressivité",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(F,{data:t,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:a})=>{const s=r.highlightedPlayer===a.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:a.value})}}),e.jsx(w,{label:{value:"Score d'Agressivité (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(W,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const a=n[0].payload,s=a.isHighlightedAddition,o=r.highlightedPlayer===a.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.playerName})}),e.jsxs("div",{children:["Meetings: ",a.totalMeetings]}),e.jsxs("div",{children:["Votes: ",a.totalVotes," (",a.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Passés: ",a.totalSkips," (",a.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",a.totalAbstentions," (",a.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",a.aggressivenessScore.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(E,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:u,children:t.map((i,n)=>{const a=r.highlightedPlayer===i.playerName,s=V===i.playerName,o=i.isHighlightedAddition;return e.jsx(D,{fill:h[i.playerName]||(i.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:a?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:a?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>c(i.playerName),onMouseLeave:()=>c(null),style:{cursor:"pointer"}},`cell-behavior-${n}`)})})]})})})})]}),f==="accuracy"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🎯 Précision des Votes - Taux de Votes Justes"}),v&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigés contre le camp adverse (et non contre son propre camp)."}),e.jsx(N,{title:"Précision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(F,{data:T,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:a})=>{const s=r.highlightedPlayer===a.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:a.value})}}),e.jsx(w,{label:{value:"Taux de Précision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(W,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const a=n[0].payload,s=a.isHighlightedAddition,o=r.highlightedPlayer===a.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.playerName})}),e.jsxs("div",{children:["Nombre de meetings: ",a.totalMeetings]}),e.jsxs("div",{children:["Total de votes: ",a.totalVotes]}),e.jsxs("div",{children:["Votes justes: ",a.votesForEnemyCamp," (",a.accuracyRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Feu ami: ",a.votesForOwnCamp," (",a.friendlyFireRate.toFixed(1),"%)"]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(E,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:u,children:T.map((i,n)=>{const a=r.highlightedPlayer===i.playerName,s=V===i.playerName,o=i.isHighlightedAddition;return e.jsx(D,{fill:h[i.playerName]||(i.accuracyRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:a?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:a?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>c(i.playerName),onMouseLeave:()=>c(null),style:{cursor:"pointer"}},`cell-accuracy-${n}`)})})]})})})})]}),f==="targets"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🔻 Joueurs Ciblés - Taux de Survie aux Votes"}),x&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois où le joueur a survécu après avoir été ciblé par au moins un vote."}),e.jsx(N,{title:"Joueurs Ciblés - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(F,{data:d,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:a})=>{const s=r.highlightedPlayer===a.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:a.value})}}),e.jsx(w,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(W,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const a=n[0].payload,s=a.isHighlightedAddition,o=r.highlightedPlayer===a.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:a.playerName})}),e.jsxs("div",{children:["Fois ciblé: ",a.totalTimesTargeted]}),e.jsxs("div",{children:["Éliminé par vote: ",a.eliminationsByVote]}),e.jsxs("div",{children:["Taux de survie: ",a.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{children:["Par camp ennemi: ",a.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["Par propre camp: ",a.timesTargetedByOwnCamp]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(E,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:u,children:d.map((i,n)=>{const a=r.highlightedPlayer===i.playerName,s=V===i.playerName,o=i.isHighlightedAddition;return e.jsx(D,{fill:h[i.playerName]||(i.survivalRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:a?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:a?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>c(i.playerName),onMouseLeave:()=>c(null),style:{cursor:"pointer"}},`cell-targets-${n}`)})})]})})})})]})]})]})}export{oe as VotingStatisticsChart};
