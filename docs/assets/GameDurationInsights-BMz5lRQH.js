import{u as P,r as E,j as e}from"./index-CzvwpC9g.js";import{a as R,u as B}from"./baseStatsHook-Cav2udg1.js";import{g as J}from"./gameUtils-DiZ_LerR.js";import{c as S}from"./datasyncExport-Drm4NSNA.js";import{a as $,l as W,g as F}from"./api-dEX2eP6H.js";import{F as g,B as N,C as f,X as j,Y as D,a as G,b as A}from"./FullscreenChart-Bfb4A1RF.js";import{R as x,T as y,V as q}from"./CategoricalChart-CAq3Yk_X.js";import{L as w,a as z}from"./LineChart-nXmhKx1-.js";import{P as K,a as O}from"./PieChart-Crn50rUc.js";import"./ActivePoints-BaYPu3WZ.js";import"./PolarChart-CgkJX0rU.js";function T(r){const s=Math.floor(r/3600),i=Math.floor(r%3600/60),n=r%60;return s>0?`${s}h${i.toString().padStart(2,"0")}m${n.toString().padStart(2,"0")}s`:i>0?`${i}m${n.toString().padStart(2,"0")}s`:`${n}s`}function Y(r,s=10){const i=Math.round(r/60);return Math.round(i/s)*s}function V(){return{averageDuration:"0s",maxDuration:0,minDuration:1/0,maxDurationGameId:null,minDurationGameId:null,durationDistribution:{},durationsByWinnerCamp:{},durationsByPlayerCount:{},durationsByWolfRatio:{}}}function U(r,s,i){r>i.maxDuration&&(i.maxDuration=r,i.maxDurationGameId=s),r<i.minDuration&&(i.minDuration=r,i.minDurationGameId=s)}function X(r,s){const i=Y(r,2);s[i]||(s[i]=0),s[i]++}function H(r,s,i){r&&r.trim()!==""&&(i[r]||(i[r]={totalDuration:0,count:0,average:"0s"}),i[r].totalDuration+=s,i[r].count++)}function Q(r,s,i){if(r&&!isNaN(r)&&r>0){const n=r.toString();i[n]||(i[n]={totalDuration:0,count:0,average:"0s"}),i[n].totalDuration+=s,i[n].count++}}function Z(r,s,i,n){if(r&&s&&!isNaN(r)&&!isNaN(s)&&r>0){const l=r-s;if(l>0){const u=Math.round(s/l*100),d=(Math.round(u/1)*1).toString();n[d]||(n[d]={totalDuration:0,count:0,average:"0s"}),n[d].totalDuration+=i,n[d].count++}}}function _(r,s,i){const n=r.PlayerStats.length,l=r.PlayerStats.filter(d=>d.MainRoleFinal==="Loup").length;let u=J(r);const c=S(r.StartDate,r.EndDate);c&&!isNaN(c)&&c>0&&(i.gamesWithDuration++,i.totalDuration+=c,U(c,r.DisplayedId,s),X(c,s.durationDistribution),H(u,c,s.durationsByWinnerCamp),Q(n,c,s.durationsByPlayerCount),Z(n,l,c,s.durationsByWolfRatio))}function ee(r,s){if(s.gamesWithDuration>0){const i=s.totalDuration/s.gamesWithDuration;r.averageDuration=T(Math.round(i)),Object.keys(r.durationsByWinnerCamp).forEach(n=>{const l=r.durationsByWinnerCamp[n];if(l.count>0){const u=l.totalDuration/l.count;l.average=T(Math.round(u))}}),Object.keys(r.durationsByPlayerCount).forEach(n=>{const l=r.durationsByPlayerCount[n];if(l.count>0){const u=l.totalDuration/l.count;l.average=T(Math.round(u))}}),Object.keys(r.durationsByWolfRatio).forEach(n=>{const l=r.durationsByWolfRatio[n];if(l.count>0){const u=l.totalDuration/l.count;l.average=T(Math.round(u))}})}}function te(r){const s=Object.keys(r).map(i=>({duration:parseInt(i),count:r[parseInt(i)]}));return s.sort((i,n)=>i.duration-n.duration),s}function re(r){if(r.length===0)return null;const s=V(),i={totalDuration:0,gamesWithDuration:0};r.forEach(l=>{_(l,s,i)}),ee(s,i);const n=te(s.durationDistribution);return{averageDuration:s.averageDuration,maxDuration:s.maxDuration,minDuration:s.minDuration===1/0?0:s.minDuration,maxDurationGameId:s.maxDurationGameId,minDurationGameId:s.minDurationGameId,durationDistribution:n,durationsByWinnerCamp:s.durationsByWinnerCamp,durationsByPlayerCount:s.durationsByPlayerCount,durationsByWolfRatio:s.durationsByWolfRatio}}function ae(){const{data:r,isLoading:s,error:i}=R(re);return{durationAnalysis:r,fetchingData:s,apiError:i}}function L(r){if(!r||r.trim()==="")return null;const s=r.trim(),i=s.charAt(0).toUpperCase(),n=s.slice(1),l=parseInt(n,10);return["J","N","M"].includes(i)?isNaN(l)||l<1?(console.warn(`Invalid day number in EndTiming: ${r}`),null):{phase:i,dayNumber:l,originalTiming:s,phaseLabel:{J:"Jour",N:"Nuit",M:"Meeting"}[i]}:(console.warn(`Invalid game phase in EndTiming: ${r}`),null)}function ne(r){if(!r||r.length===0)return{totalGames:0,gamesWithEndTiming:0,averageGameLength:0,endTimingDistribution:[],phaseDistribution:[],dayDistribution:[],longestGame:null,shortestGame:null};const s=r.length;let i=0,n=0,l=null,u=null;const c={},d={},h={};r.forEach(t=>{const a=L(t.EndTiming);if(a){i++,n+=a.dayNumber,(!l||a.dayNumber>l.dayNumber)&&(l={gameId:t.DisplayedId,endTiming:a.originalTiming,dayNumber:a.dayNumber}),(!u||a.dayNumber<u.dayNumber)&&(u={gameId:t.DisplayedId,endTiming:a.originalTiming,dayNumber:a.dayNumber});const o=a.originalTiming;c[o]=(c[o]||0)+1;const m=a.phaseLabel;d[m]||(d[m]={count:0,totalDays:0}),d[m].count++,d[m].totalDays+=a.dayNumber;const p=a.dayNumber;h[p]||(h[p]={count:0,phases:{}}),h[p].count++,h[p].phases[m]=(h[p].phases[m]||0)+1}});const C=i>0?n/i:0,v=Object.entries(c).map(([t,a])=>{const o=L(t);return{timing:t,phase:o?.phaseLabel||"Unknown",dayNumber:o?.dayNumber||0,count:a,percentage:a/i*100}}).sort((t,a)=>{if(t.dayNumber!==a.dayNumber)return t.dayNumber-a.dayNumber;const o={Jour:0,Nuit:1,Meeting:2};return(o[t.phase]||3)-(o[a.phase]||3)}),M=Object.entries(d).map(([t,a])=>({phase:t,count:a.count,percentage:a.count/i*100,averageDay:a.count>0?a.totalDays/a.count:0})).sort((t,a)=>a.count-t.count),b=Object.entries(h).map(([t,a])=>({dayNumber:parseInt(t,10),count:a.count,percentage:a.count/i*100,phases:a.phases})).sort((t,a)=>t.dayNumber-a.dayNumber);return{totalGames:s,gamesWithEndTiming:i,averageGameLength:C,endTimingDistribution:v,phaseDistribution:M,dayDistribution:b,longestGame:l,shortestGame:u}}function ie(){const{data:r,isLoading:s,error:i}=B(n=>ne(n));return{gameTimeAnalysis:r,fetchingData:s,apiError:i}}function ye(){const{durationAnalysis:r,fetchingData:s,apiError:i}=ae(),{gameTimeAnalysis:n,fetchingData:l,apiError:u}=ie(),{navigateToGameDetails:c}=P(),[d,h]=E.useState("real"),C=$();if(s||l)return e.jsx("div",{className:"statistiques-attente",children:"Analyse des durées de partie en cours..."});if(i||u)return e.jsxs("div",{className:"statistiques-echec",children:["Problème rencontré: ",i||u]});if(!r||!n)return e.jsx("div",{className:"statistiques-indisponibles",children:"Données d'analyse non disponibles"});const v=t=>{const a=t.match(/(\d+)h/),o=t.match(/(\d+)m/),m=t.match(/(\d+)s/),p=a?parseInt(a[1]):0,I=o?parseInt(o[1]):0,k=m?parseInt(m[1]):0;return p*60+I+k/60},M=r?Object.entries(r.durationsByWolfRatio).map(([t,a])=>({ratio:parseFloat(t),moyenne:v(a.average),parties:a.count,dureeFormatee:a.average})).sort((t,a)=>t.ratio-a.ratio):[],b=r?Object.entries(r.durationsByWinnerCamp).map(([t,a])=>({camp:t,moyenne:v(a.average),parties:a.count,dureeFormatee:a.average})).sort((t,a)=>a.moyenne-t.moyenne):[];return e.jsxs("div",{className:"lycans-duree-analyse",children:[e.jsx("h2",{children:"Analyse des Durées de Partie"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${d==="real"?"active":""}`,onClick:()=>h("real"),children:"Durée réelle"}),e.jsx("button",{className:`lycans-categorie-btn ${d==="gametime"?"active":""}`,onClick:()=>h("gametime"),children:"Temps de jeu"})]}),d==="real"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Durée Moyenne"}),e.jsx("p",{className:"lycans-valeur-principale",children:r.averageDuration||"N/A"})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.minDurationGameId&&c({selectedGame:r.minDurationGameId,fromComponent:"Analyse des Durées de Partie"})},style:{cursor:r.minDurationGameId?"pointer":"default",opacity:r.minDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.minDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.minDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.minDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Durée Minimum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[Math.floor(r.minDuration/60),"min ",r.minDuration%60,"s"]}),r.minDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",r.minDurationGameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.maxDurationGameId&&c({selectedGame:r.maxDurationGameId,fromComponent:"Analyse des Durées de Partie"})},style:{cursor:r.maxDurationGameId?"pointer":"default",opacity:r.maxDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.maxDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.maxDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.maxDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Durée Maximum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[Math.floor(r.maxDuration/60),"min ",r.maxDuration%60,"s"]}),r.maxDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",r.maxDurationGameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution des Durées de Partie"}),e.jsx(g,{title:"Distribution des Durées de Partie",children:e.jsx("div",{style:{height:300},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(N,{data:r?.durationDistribution||[],margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"duration",label:{value:"Durée (minutes)",position:"insideBottom",offset:-5},tickFormatter:t=>`${t}min`}),e.jsx(D,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["~",o.duration," minutes"]})}),e.jsxs("div",{children:[o.count," parties"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Durées regroupées par intervalles de 2 minutes"})]})}return null}}),e.jsx(G,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-2)"})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Ratio Loups/Villageois"}),e.jsx(g,{title:"Durée Moyenne par Ratio Loups/Villageois",children:e.jsx("div",{style:{height:300},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(w,{data:M,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"ratio",type:"number",domain:["auto","auto"],allowDecimals:!1,tickFormatter:t=>`${t}%`,label:{value:"Ratio Loups/Joueurs (%)",position:"insideBottom",offset:-5}}),e.jsx(D,{label:{value:"Durée Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Pourcentage de loups : ",o.ratio,"%"]})}),e.jsxs("div",{children:["Durée moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]})]})}return null}}),e.jsx(z,{type:"monotone",dataKey:"moyenne",name:"Durée Moyenne",stroke:"var(--chart-color-5)",strokeWidth:2,activeDot:{r:8}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Camp Victorieux"}),e.jsx(g,{title:"Durée Moyenne par Camp Victorieux",children:e.jsx("div",{style:{height:300},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(N,{data:b,margin:{top:20,right:30,left:20,bottom:40},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(D,{label:{value:"Durée Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.camp})}),e.jsxs("div",{children:["Durée moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsxs(G,{dataKey:"moyenne",name:"moyenne",isAnimationActive:!1,onClick:t=>{t&&t.camp&&c({campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only"},fromComponent:"Durée Moyenne par Camp Victorieux"})},style:{cursor:"pointer"},children:[b.map(t=>e.jsx(A,{fill:C[t.camp]||W},`cell-${t.camp}`)),e.jsx(q,{dataKey:"moyenne",position:"top",formatter:t=>{const a=typeof t=="number"?t:Number(t);return isNaN(a)?"":`${Math.round(a)}min`},fill:"var(--text-primary)",fontSize:12})]})]})})})})]})]})]}),d==="gametime"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lycans-section-description",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Analyse du temps de jeu :"})," Ces graphiques montrent à quels moments les parties se terminent en fonction du cycle jour/nuit/meeting.",e.jsx("br",{}),e.jsx("strong",{children:"J"})," = Jour, ",e.jsx("strong",{children:"N"})," = Nuit, ",e.jsx("strong",{children:"M"})," = Meeting. Le chiffre indique le numéro du jour (J3 = 3ème jour, N2 = 2ème nuit, M4 = 4ème meeting).",e.jsx("br",{}),"Basé sur ",n.gamesWithEndTiming," parties avec données de timing sur ",n.totalGames," parties totales."]})}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Longueur Moyenne"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[n.averageGameLength.toFixed(1)," jours"]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{n.shortestGame&&c({selectedGame:n.shortestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:n.shortestGame?"pointer":"default",opacity:n.shortestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{n.shortestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{n.shortestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:n.shortestGame?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Partie Plus Courte"}),e.jsx("p",{className:"lycans-valeur-principale",children:n.shortestGame?n.shortestGame.endTiming:"N/A"}),n.shortestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",n.shortestGame.gameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{n.longestGame&&c({selectedGame:n.longestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:n.longestGame?"pointer":"default",opacity:n.longestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{n.longestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{n.longestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:n.longestGame?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Partie Plus Longue"}),e.jsx("p",{className:"lycans-valeur-principale",children:n.longestGame?n.longestGame.endTiming:"N/A"}),n.longestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",n.longestGame.gameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Phase de Fin"}),e.jsx(g,{title:"Distribution par Phase de Fin",children:e.jsx("div",{style:{height:300},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(K,{children:[e.jsx(O,{data:n.phaseDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({phase:t,percentage:a})=>`${t} (${a.toFixed(1)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:n.phaseDistribution.map((t,a)=>e.jsx(A,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":F(t.phase)},`cell-${a}`))}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.phase})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["Jour moyen: ",o.averageDay.toFixed(1)]})]})}return null}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Nombre de Jours"}),e.jsx(g,{title:"Distribution par Nombre de Jours",children:e.jsx("div",{style:{height:300},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(N,{data:n.dayDistribution,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"dayNumber",label:{value:"Nombre de Jours",position:"insideBottom",offset:-5}}),e.jsx(D,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload,m=Object.entries(o.phases).map(([p,I])=>`${p}: ${I}`).join(", ");return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Jour ",o.dayNumber]})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["Détail: ",m]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(G,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-3)",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Jour ${t.dayNumber}`})},style:{cursor:"pointer"}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Détail par Timing de Fin"}),e.jsx(g,{title:"Détail par Timing de Fin",children:e.jsx("div",{style:{height:400},children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(N,{data:n.endTimingDistribution,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"timing",angle:-45,textAnchor:"end",height:80,interval:0,label:{value:"Timing de Fin",position:"insideBottom",offset:-40}}),e.jsx(D,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(y,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const o=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.timing})}),e.jsxs("div",{children:["Phase: ",o.phase]}),e.jsxs("div",{children:["Jour: ",o.dayNumber]}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(G,{dataKey:"count",name:"Nombre de Parties",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Timing ${t.timing}`})},style:{cursor:"pointer"},children:n.endTimingDistribution.map((t,a)=>e.jsx(A,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":F(t.timing)},`cell-${a}`))})]})})})})]})]})]})]})}export{ye as GameDurationInsights};
