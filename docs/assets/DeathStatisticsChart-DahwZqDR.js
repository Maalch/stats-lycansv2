import{u as ue,r as M,c as pe,a as ye,j as e}from"./index-Dkkx70dj.js";import{u as le}from"./baseStatsHook-Bj8n8h1_.js";import{g as C}from"./gameUtils-Ch4K7k0-.js";import{F as U,B as z,C as G,X as w,Y as q,a as $}from"./FullscreenChart-CIda0wMa.js";import{a as ve,m as re}from"./api-qb_sZ0Rj.js";import{R as Z,T as X}from"./CategoricalChart-B5I8TVZc.js";const r={SURVIVOR:"SURVIVOR",VOTE:"VOTE",WEREWOLF_KILL:"WEREWOLF_KILL",HUNTER_SHOT:"HUNTER_SHOT",BOUNTY_HUNTER:"BOUNTY_HUNTER",LOVER_DEATH:"LOVER_DEATH",LOVER_WEREWOLF:"LOVER_WEREWOLF",BEAST_KILL:"BEAST_KILL",ASSASSIN_POTION:"ASSASSIN_POTION",HAUNTED_POTION:"HAUNTED_POTION",ZOMBIE_KILL:"ZOMBIE_KILL",RESURRECTED_WEREWOLF:"RESURRECTED_WEREWOLF",AVENGER_KILL:"AVENGER_KILL",AGENT_KILL:"AGENT_KILL",SHERIFF_KILL:"SHERIFF_KILL",EXPLOSION:"EXPLOSION",CRUSHED:"CRUSHED",STARVATION:"STARVATION",FALL_DEATH:"FALL_DEATH",BESTIAL_DEATH:"BESTIAL_DEATH",AVATAR_DEATH:"AVATAR_DEATH",DISCONNECT:"DISCONNECT",UNKNOWN:"UNKNOWN"};function fe(v){const n=new Set;v.filter(E=>!E.LegacyData||E.LegacyData.deathInformationFilled===!0).forEach(E=>{E.PlayerStats.forEach(F=>{const j=C(F.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});n.add(j)})});const i=Array.from(n),x=["Villageois","Loup","Amoureux"];return[...x.filter(E=>i.includes(E)),...i.filter(E=>!x.includes(E)).sort()]}function W(v){if(!v||v==="N/A")return r.SURVIVOR;const n=v.trim().toLowerCase();if(n.includes("vote"))return r.VOTE;if(n==="tué par loup"||n.includes("tué par un loup")||n.includes("tué par loup ressuscité"))return n.includes("ressuscité")?r.RESURRECTED_WEREWOLF:r.WEREWOLF_KILL;if(n.includes("amoureux")||n.includes("son amoureux"))return n.includes("tué par loup amoureux")?r.LOVER_WEREWOLF:r.LOVER_DEATH;if(n.includes("chasseur")||n.includes("balle"))return n.includes("primes")?r.BOUNTY_HUNTER:r.HUNTER_SHOT;if(n.includes("potion")){if(n.includes("assassin"))return r.ASSASSIN_POTION;if(n.includes("hanté"))return r.HAUNTED_POTION}return n.includes("la bête")?r.BEAST_KILL:n.includes("zombie")?r.ZOMBIE_KILL:n.includes("vengeur")?r.AVENGER_KILL:n.includes("l'agent")?r.AGENT_KILL:n.includes("shérif")?r.SHERIFF_KILL:n.includes("explosé")?r.EXPLOSION:n.includes("écrasé")?r.CRUSHED:n.includes("faim")?r.STARVATION:n.includes("chute")?r.FALL_DEATH:n.includes("bestiale")?r.BESTIAL_DEATH:n.includes("avatar")?r.AVATAR_DEATH:n==="déco"?r.DISCONNECT:r.UNKNOWN}function ae(v){switch(v){case r.SURVIVOR:return"Survivant";case r.VOTE:return"Mort aux votes";case r.WEREWOLF_KILL:return"Tué par un loup";case r.HUNTER_SHOT:return"Abattu par un chasseur";case r.BOUNTY_HUNTER:return"Tué par un chasseur de primes";case r.LOVER_DEATH:return"Mort par amoureux";case r.LOVER_WEREWOLF:return"Tué par un loup amoureux";case r.BEAST_KILL:return"Dévoré par la Bête";case r.ASSASSIN_POTION:return"Tué par une potion (Assassin)";case r.HAUNTED_POTION:return"Tué par une potion (Hanté)";case r.ZOMBIE_KILL:return"Tué par un zombie";case r.RESURRECTED_WEREWOLF:return"Tué par un loup ressuscité";case r.AVENGER_KILL:return"Tué par un vengeur";case r.AGENT_KILL:return"Éliminé par l'Agent";case r.SHERIFF_KILL:return"Abattu par le Shérif";case r.EXPLOSION:return"Mort dans une explosion";case r.CRUSHED:return"Écrasé";case r.STARVATION:return"Mort de faim";case r.FALL_DEATH:return"Mort de chute";case r.BESTIAL_DEATH:return"Mort bestiale";case r.AVATAR_DEATH:return"Mort liée à l'Avatar";case r.DISCONNECT:return"Déconnexion";case r.UNKNOWN:default:return"Mort inconnue"}}function ie(v){switch(v){case r.SURVIVOR:return"Survivant";case r.VOTE:return"Mort aux votes";case r.WEREWOLF_KILL:return"Kill en Loup";case r.HUNTER_SHOT:return"Tir de Chasseur";case r.BOUNTY_HUNTER:return"Kill en Chasseur de primes";case r.LOVER_DEATH:return"Kill de son amoureux";case r.LOVER_WEREWOLF:return"Kill en Loup amoureux";case r.BEAST_KILL:return"Kill en Bête";case r.ASSASSIN_POTION:return"Kill avec Potion (Assassin)";case r.HAUNTED_POTION:return"Kill avec Potion (Hanté)";case r.ZOMBIE_KILL:return"Kill en Zombie";case r.RESURRECTED_WEREWOLF:return"Kill en Loup ressuscité";case r.AVENGER_KILL:return"Kill en Vengeur";case r.AGENT_KILL:return"Kill en Agent";case r.SHERIFF_KILL:return"Kill en Shérif";case r.EXPLOSION:return"Explosion";case r.CRUSHED:return"Écrasement";case r.STARVATION:return"Famine";case r.FALL_DEATH:return"Chute mortelle";case r.BESTIAL_DEATH:return"Tuerie bestiale";case r.AVATAR_DEATH:return"Mort d'Avatar";case r.DISCONNECT:return"Déconnexion";case r.UNKNOWN:default:return"Kill inconnu"}}function xe(v){const n=new Set;v.forEach(x=>{x.PlayerStats.forEach(d=>{if(d.DeathType){const E=W(d.DeathType);n.add(E)}})});const T=Array.from(n),i=[r.WEREWOLF_KILL,r.VOTE,r.HUNTER_SHOT,r.ZOMBIE_KILL,r.ASSASSIN_POTION,r.HAUNTED_POTION,r.AVENGER_KILL,r.LOVER_DEATH,r.SURVIVOR];return[...i.filter(x=>T.includes(x)),...T.filter(x=>!i.includes(x)).sort()]}function Te(v,n){return v.PlayerStats.filter(T=>W(T.DeathType)!=="SURVIVOR"&&(T.DeathTiming||T.DeathType)).map(T=>{let i=null;if(T.KillerName){const d=v.PlayerStats.find(E=>E.Username===T.KillerName);d&&(i=C(d.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1}),d.MainRoleFinal&&d.MainRoleFinal!==d.MainRoleInitial&&(d.MainRoleFinal==="Loup"?i="Loup":d.MainRoleFinal==="Zombie"&&(i="Zombie")))}const x=W(T.DeathType);return{playerName:T.Username,deathType:x,killerName:T.KillerName,killerCamp:i}}).filter(T=>{if(!n||n==="Tous les camps")return!0;const i=v.PlayerStats.find(d=>d.Username===T.playerName);return i?C(i.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===n:!1})}function Se(v,n){const T=[];return v.PlayerStats.forEach(i=>{if(i.KillerName&&i.DeathType){const x=W(i.DeathType);if(x==="SURVIVOR"||x==="VOTE"||x==="DISCONNECT"||x==="STARVATION"||x==="FALL_DEATH"||x==="AVATAR_DEATH")return;const d=v.PlayerStats.find(F=>F.Username===i.KillerName);if(!d)return;let E=C(d.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});d.MainRoleFinal&&d.MainRoleFinal!==d.MainRoleInitial&&(d.MainRoleFinal==="Loup"?E="Loup":d.MainRoleFinal==="Zombie"&&(E="Zombie")),T.push({killerName:i.KillerName,victimName:i.Username,deathType:x,killerCamp:E})}}),n&&n!=="Tous les camps"?T.filter(i=>i.killerCamp===n):T}function Ee(v,n){if(v.length===0)return null;const T=v.filter(g=>!g.LegacyData||g.LegacyData.deathInformationFilled===!0);if(T.length===0)return null;const i=[],x={};T.forEach(g=>{Te(g,n).forEach(A=>{i.push({...A,gameId:g.Id})}),g.PlayerStats.forEach(A=>{const H=A.Username;(!n||n==="Tous les camps"||C(A.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===n)&&(x[H]=(x[H]||0)+1)})});const d=i.length,E=T.length,F=E>0?d/E:0,j={};i.forEach(g=>{j[g.deathType]=(j[g.deathType]||0)+1});const V=Object.entries(j).map(([g,p])=>({type:g,count:p,percentage:d>0?p/d*100:0})).sort((g,p)=>p.count-g.count),K={};T.forEach(g=>{Se(g,n).forEach(A=>{K[A.killerName]||(K[A.killerName]={kills:0,victims:new Set,killsByDeathType:{}}),K[A.killerName].kills++,K[A.killerName].victims.add(A.victimName),K[A.killerName].killsByDeathType[A.deathType]=(K[A.killerName].killsByDeathType[A.deathType]||0)+1})});const _=Object.entries(K).map(([g,p])=>{const A=x[g]||0,H=A>0?p.kills/A:0;return{killerName:g,kills:p.kills,victims:Array.from(p.victims),percentage:d>0?p.kills/d*100:0,gamesPlayed:A,averageKillsPerGame:H,killsByDeathType:p.killsByDeathType}}).sort((g,p)=>p.kills-g.kills),o={};i.forEach(g=>{o[g.playerName]||(o[g.playerName]={totalDeaths:0,deathsByType:{},killedBy:{},deathDays:[]});const p=o[g.playerName];p.totalDeaths++,p.deathsByType[g.deathType]=(p.deathsByType[g.deathType]||0)+1,g.killerName&&(p.killedBy[g.killerName]=(p.killedBy[g.killerName]||0)+1)});const B=Object.entries(o).map(([g,p])=>({playerName:g,totalDeaths:p.totalDeaths,deathsByType:p.deathsByType,killedBy:p.killedBy,averageDeathDay:p.deathDays.length>0?p.deathDays.reduce((A,H)=>A+H,0)/p.deathDays.length:null,deathRate:x[g]>0?p.totalDeaths/x[g]:0})).sort((g,p)=>p.totalDeaths-g.totalDeaths),S=V.length>0?V[0].type:null,I=_.length>0?_[0].killerName:null;return{totalDeaths:d,totalGames:E,averageDeathsPerGame:F,deathsByType:V,killerStats:_,playerDeathStats:B,mostCommonDeathType:S,mostDeadlyKiller:I}}function Ae(v){return le(n=>Ee(n,v))}function De(){return le(v=>fe(v))}function Ie(){const{navigateToGameDetails:v,navigationState:n,updateNavigationState:T}=ue(),[i,x]=M.useState(n.deathStatsSelectedCamp||"Tous les camps"),[d,E]=M.useState(10),{data:F}=De(),{data:j,isLoading:V,error:K}=Ae(i),{data:_}=pe(),{settings:o}=ye(),B=ve(),S=M.useMemo(()=>_?xe(_):[],[_]),I=M.useMemo(()=>{const t={};S.forEach(a=>{a==="WEREWOLF_KILL"?t[a]=B.Loup:a==="VOTE"?t[a]="var(--chart-color-1)":a==="HUNTER_SHOT"?t[a]=B.Chasseur:a==="ZOMBIE_KILL"?t[a]=B.Vaudou:a==="ASSASSIN_POTION"||a==="HAUNTED_POTION"?t[a]=B.Alchimiste:a==="AVENGER_KILL"?t[a]="var(--chart-color-2)":a==="LOVER_DEATH"||a==="LOVER_WEREWOLF"?t[a]=B.Amoureux:a==="DISCONNECT"?t[a]="var(--chart-color-3)":a==="SURVIVOR"&&(t[a]="var(--chart-color-4)")});const m=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let c=0;return S.forEach(a=>{t[a]||(t[a]=m[c%m.length],c++)}),t},[S,B]),g=t=>{x(t),T({deathStatsSelectedCamp:t})},{totalKillsData:p,averageKillsData:A,highlightedPlayerAddedToTotal:H,highlightedPlayerAddedToAverage:Q,gamesWithKillers:se,totalEligibleForAverage:ne}=M.useMemo(()=>{if(!j)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1,gamesWithKillers:0,totalEligibleForAverage:0};const t=j.killerStats.sort((s,y)=>y.kills-s.kills).slice(0,15),m=o.highlightedPlayer&&t.some(s=>s.killerName===o.highlightedPlayer),c=t.map(s=>{const y={name:s.killerName,value:s.kills,victims:s.victims.length,percentage:s.percentage,gamesPlayed:s.gamesPlayed,averageKillsPerGame:s.averageKillsPerGame,isHighlightedAddition:!1};return S.forEach(R=>{y[R]=s.killsByDeathType[R]||0}),y});let a=!1;if(o.highlightedPlayer&&!m){const s=j.killerStats.find(y=>y.killerName===o.highlightedPlayer);if(s){const y={name:s.killerName,value:s.kills,victims:s.victims.length,percentage:s.percentage,gamesPlayed:s.gamesPlayed,averageKillsPerGame:s.averageKillsPerGame,isHighlightedAddition:!0};S.forEach(R=>{y[R]=s.killsByDeathType[R]||0}),c.push(y),a=!0}}const D=j.killerStats.filter(s=>s.gamesPlayed>=d),L=D.sort((s,y)=>y.averageKillsPerGame-s.averageKillsPerGame).slice(0,15),O=o.highlightedPlayer&&L.some(s=>s.killerName===o.highlightedPlayer),u=L.map(s=>{const y={name:s.killerName,value:s.averageKillsPerGame,victims:s.victims.length,percentage:s.percentage,gamesPlayed:s.gamesPlayed,averageKillsPerGame:s.averageKillsPerGame,isHighlightedAddition:!1};return S.forEach(R=>{const k=s.killsByDeathType[R]||0;y[R]=s.gamesPlayed>0?k/s.gamesPlayed:0}),y});let N=!1;if(o.highlightedPlayer&&!O){const s=j.killerStats.find(y=>y.killerName===o.highlightedPlayer);if(s){const y={name:s.killerName,value:s.averageKillsPerGame,victims:s.victims.length,percentage:s.percentage,gamesPlayed:s.gamesPlayed,averageKillsPerGame:s.averageKillsPerGame,isHighlightedAddition:!0};S.forEach(R=>{const k=s.killsByDeathType[R]||0;y[R]=s.gamesPlayed>0?k/s.gamesPlayed:0}),u.push(y),N=!0}}return{totalKillsData:c,averageKillsData:u,highlightedPlayerAddedToTotal:a,highlightedPlayerAddedToAverage:N,gamesWithKillers:j.totalGames,totalEligibleForAverage:D.length}},[j,o.highlightedPlayer,d,S]),{totalDeathsData:ee,survivalRateData:te,highlightedPlayerAddedToDeaths:oe,highlightedPlayerAddedToSurvival:ce}=M.useMemo(()=>{if(!j||!_)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const t={},m=_.filter(l=>!l.LegacyData||l.LegacyData.deathInformationFilled===!0);m.forEach(l=>{l.PlayerStats.forEach(h=>{const f=h.Username;(!i||i==="Tous les camps"||C(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===i)&&(t[f]=(t[f]||0)+1)})});const c=j.playerDeathStats.sort((l,h)=>h.totalDeaths-l.totalDeaths).slice(0,15),a=o.highlightedPlayer&&c.some(l=>l.playerName===o.highlightedPlayer),D=c.map(l=>{const h=t[l.playerName]||0,f=h>0?(h-l.totalDeaths)/h*100:0,P={name:l.playerName,value:l.totalDeaths,totalDeaths:l.totalDeaths,gamesPlayed:h,deathRate:l.deathRate,survivalRate:f,isHighlightedAddition:!1};return S.forEach(b=>{P[b]=l.deathsByType[b]||0}),P});let L=!1;if(o.highlightedPlayer&&!a){const l=j.playerDeathStats.find(h=>h.playerName===o.highlightedPlayer);if(l){const h=t[l.playerName]||0,f=h>0?(h-l.totalDeaths)/h*100:0,P={name:l.playerName,value:l.totalDeaths,totalDeaths:l.totalDeaths,gamesPlayed:h,deathRate:l.deathRate,survivalRate:f,isHighlightedAddition:!0};S.forEach(b=>{P[b]=l.deathsByType[b]||0}),D.push(P),L=!0}}const O={},u={};m.forEach(l=>{l.PlayerStats.forEach(h=>{const f=h.Username;if((!i||i==="Tous les camps"||C(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===i)&&h.DeathType&&h.DeathType!=="N/A"){u[f]||(u[f]={totalDeaths:0,deathsByType:{}}),u[f].totalDeaths++;const b=W(h.DeathType);u[f].deathsByType[b]=(u[f].deathsByType[b]||0)+1}})}),Object.entries(t).forEach(([l,h])=>{if(h>=d){const f=u[l],P=f?f.totalDeaths:0,b=f?f.deathsByType:{},Y=h>0?(h-P)/h*100:0,J=h>0?P/h:0;O[l]={playerName:l,totalDeaths:P,deathsByType:b,gamesPlayed:h,survivalRate:Y,deathRate:J}}});const s=Object.values(O).sort((l,h)=>h.survivalRate-l.survivalRate).slice(0,15),y=o.highlightedPlayer&&s.some(l=>l.playerName===o.highlightedPlayer),R=s.map(l=>{const h={name:l.playerName,value:l.survivalRate,totalDeaths:l.totalDeaths,gamesPlayed:l.gamesPlayed,deathRate:l.deathRate,survivalRate:l.survivalRate,isHighlightedAddition:!1};return S.forEach(f=>{const P=l.deathsByType[f]||0;h[f]=l.gamesPlayed>0?P/l.gamesPlayed*100:0}),h});let k=!1;if(o.highlightedPlayer&&!y){let l=O[o.highlightedPlayer];if(!l){const h=t[o.highlightedPlayer]||0,f=u[o.highlightedPlayer],P=f?f.totalDeaths:0,b=f?f.deathsByType:{},Y=h>0?(h-P)/h*100:0,J=h>0?P/h:0;l={playerName:o.highlightedPlayer,totalDeaths:P,deathsByType:b,gamesPlayed:h,survivalRate:Y,deathRate:J}}if(l){const h={name:l.playerName,value:l.survivalRate,totalDeaths:l.totalDeaths,gamesPlayed:l.gamesPlayed,deathRate:l.deathRate,survivalRate:l.survivalRate,isHighlightedAddition:!0};S.forEach(f=>{const P=l.deathsByType[f]||0;h[f]=l.gamesPlayed>0?P/l.gamesPlayed*100:0}),R.push(h),k=!0}}return{totalDeathsData:D,survivalRateData:R,highlightedPlayerAddedToDeaths:L,highlightedPlayerAddedToSurvival:k}},[j,_,o.highlightedPlayer,d,S,i]);if(V)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."});if(K)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",K]});if(!j)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de mort disponible"});const he=({active:t,payload:m,label:c})=>{if(t&&m&&m.length){const a=m[0].payload,D=a.isHighlightedAddition,L=o.highlightedPlayer===a.name,O=S.reduce((u,N)=>u+(a[N]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:L?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",O]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill:"}),S.map(u=>{const N=a[u]||0;return N===0?null:e.jsxs("p",{style:{color:I[u],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:I[u],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(u),":"]})," ",N]},u)})]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),L&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},de=({active:t,payload:m,label:c})=>{if(t&&m&&m.length){const a=m[0].payload,D=a.isHighlightedAddition,L=o.highlightedPlayer===a.name,O=a.gamesPlayed>=d,u=j?.killerStats.find(y=>y.killerName===a.name),N=S.reduce((y,R)=>y+(a[R]||0),0),s=u?u.kills:Math.round(N*a.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:L?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",N.toFixed(2)," (",s," kills /",a.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill (moyenne):"}),S.map(y=>{const R=a[y]||0;if(R===0)return null;const k=u?u.killsByDeathType[y]||0:Math.round(R*a.gamesPlayed);return e.jsxs("p",{style:{color:I[y],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:I[y],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(y),":"]})," ",R.toFixed(2)," (",k," kills /",a.gamesPlayed," games)"]},y)})]}),D&&!O&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",d," parties)"]}),D&&O&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),L&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},me=({active:t,payload:m,label:c})=>{if(t&&m&&m.length){const a=m[0].payload,D=a.isHighlightedAddition,L=o.highlightedPlayer===a.name,O=S.reduce((u,N)=>u+(a[N]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:L?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",O]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",a.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort:"}),S.map(u=>{const N=a[u]||0;return N===0?null:e.jsxs("p",{style:{color:I[u],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:I[u],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ae(u),":"]})," ",N]},u)})]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),L&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},ge=({active:t,payload:m,label:c})=>{if(t&&m&&m.length){const a=m[0].payload,D=a.isHighlightedAddition,L=o.highlightedPlayer===a.name,O=a.gamesPlayed>=d;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:L?"var(--accent-primary)":"var(--text-primary)"},children:[c,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",a.survivalRate.toFixed(1),"% (",a.gamesPlayed-a.totalDeaths," survies / ",a.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",a.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort (taux %):"}),S.map(u=>{const N=a[u]||0;return N===0?null:e.jsxs("p",{style:{color:I[u],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:I[u],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ae(u),":"]})," ",N.toFixed(1),"%"]},u)})]}),D&&!O&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",d," parties)"]}),D&&O&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),L&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"Statistiques de Tueurs"}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:i,onChange:t=>g(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),F?.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:j.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiés"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:j.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrées"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:se})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:i==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${i} (Total)`}),H&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(U,{title:i==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${i} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:p,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:m,payload:c})=>e.jsx("text",{x:t,y:m,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${m})`,children:c.value})}),e.jsx(q,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(X,{content:e.jsx(he,{})}),S.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"kills",fill:I[t],onClick:m=>{const c={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};i!=="Tous les camps"&&(c.campFilter={selectedCamp:i,campFilterMode:"all-assignments"}),v(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,p.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:i==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${i} (Moyenne par partie)`}),Q&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:d,onChange:t=>E(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(U,{title:i==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${i} (Moyenne par partie)`,children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:A,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:m,payload:c})=>e.jsx("text",{x:t,y:m,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${m})`,children:c.value})}),e.jsx(q,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(X,{content:e.jsx(de,{})}),S.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"averageKills",fill:I[t],onClick:m=>{const c={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};i!=="Tous les camps"&&(c.campFilter={selectedCamp:i,campFilterMode:"all-assignments"}),v(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,A.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",ne," ayant au moins ",d," partie",d>1?"s":"",")"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:i==="Tous les camps"?"Morts (Total)":`Morts en ${i} (Total)`}),oe&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(U,{title:i==="Tous les camps"?"Morts (Total)":`Morts en ${i} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:ee,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:m,payload:c})=>e.jsx("text",{x:t,y:m,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${m})`,children:c.value})}),e.jsx(q,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(X,{content:e.jsx(me,{})}),S.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"deaths",fill:I[t],onClick:m=>{const c={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};i!=="Tous les camps"&&(c.campFilter={selectedCamp:i,campFilterMode:"all-assignments"}),v(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,ee.filter(t=>!t.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",i==="Tous les camps"?"(Total)":` en ${i}`]}),ce&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',o.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:d,onChange:t=>E(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(U,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:te,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:m,payload:c})=>e.jsx("text",{x:t,y:m,dy:16,textAnchor:"end",fill:o.highlightedPlayer===c.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===c.value?14:13,fontWeight:o.highlightedPlayer===c.value?"bold":"italic",transform:`rotate(-45 ${t} ${m})`,children:c.value})}),e.jsx(q,{label:{value:"Taux de mort (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(X,{content:e.jsx(ge,{})}),S.map(t=>e.jsx($,{dataKey:t,name:t,stackId:"survivalRate",fill:I[t],onClick:m=>{const c={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};i!=="Tous les camps"&&(c.campFilter={selectedCamp:i,campFilterMode:"all-assignments"}),v(c)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,te.filter(t=>!t.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",d," partie",d>1?"s":"",")"]})]})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"Données en cours de récupération (données partielles)."]})})]})}export{Ie as DeathStatisticsChart};
