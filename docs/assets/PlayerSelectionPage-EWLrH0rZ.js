import{a as Q,r as M,g as X,f as me,u as U,j as e,c as le,m as he}from"./index-krqhcvsp.js";import{u as ee}from"./useJoueursData-BD4LPbnI.js";import{u as oe}from"./baseStatsHook-CiiTSo4F.js";import{g as ge}from"./gameUtils-CCGRmivF.js";import{a as ce,g as Z,c as xe}from"./datasyncExport-D6_8Fmuy.js";import{u as se,g as fe,a as ae,l as de}from"./api-X4WezH_M.js";import{d as ve}from"./durationFormatters-C9UyWcKX.js";import{F as E,C as G,X as V,Y as B,a as K}from"./FullscreenChart-Dqk-TQ_k.js";import{R as W,T as L}from"./CategoricalChart-DKI6gYno.js";import{L as ye,a as je}from"./LineChart-DAsprqrS.js";import{B as _,a as O}from"./BarChart-dMu9FFVa.js";import{P as be,a as Ce}from"./PieChart-CkIQ7ClY.js";import{u as we}from"./useDeathStatisticsFromRaw-BfXkYaP3.js";import{R as re}from"./ReferenceLine-BbGU__uE.js";import{g as J}from"./deathTypes-CGUOTngO.js";import{e as ie,a as Re,b as Se,d as ke,R as Ne}from"./deathLocationUtils-BDbgKdt7.js";import{S as Te,a as Me}from"./ScatterChart-BCHEOhhz.js";import"./ActivePoints-DgPNeNdS.js";import"./PolarChart-GlpL_7t9.js";function De(l){const{settings:w}=Q(),{joueursData:j}=ee(),[y,R]=M.useState(null),[f,b]=M.useState(!1),[v,d]=M.useState(null);M.useEffect(()=>{let r=!0;return(async()=>{try{b(!0),d(null);const s=w.dataSource==="discord"?"/data/discord/playerAchievements.json":"/data/playerAchievements.json",c=await fetch(s);if(!c.ok)throw new Error(`Failed to load achievements: ${c.status} ${c.statusText}`);const n=await c.json();r&&R(n)}catch(s){r&&d(s instanceof Error?s.message:"Failed to load achievements")}finally{r&&b(!1)}})(),()=>{r=!1}},[w.dataSource]);const m=(()=>{if(!l||!y)return null;const t=j?.Players?.find(s=>s.Joueur===l)?.SteamID;return t?y.achievements[t]||null:(console.warn(`âš ï¸ No Steam ID found for player: ${l}`),null)})();return M.useEffect(()=>{l&&y&&j&&j.Players?.find(s=>s.Joueur===l)?.SteamID},[l,y,j,w.dataSource]),{data:m,isLoading:f,error:v,metadata:{generatedAt:y?.generatedAt||null,totalPlayers:y?.totalPlayers||0,totalGames:y?.totalGames||0,totalModdedGames:y?.totalModdedGames||0}}}function Pe(l,w,j){if(!l||l.trim()===""||w.length===0)return null;const y=[];let R=l;w.forEach(t=>{const s=t.PlayerStats.find(c=>X(c)===l||c.Username.toLowerCase()===l.toLowerCase());if(s){R=s.Username;const c=s.MainRoleInitial==="Louveteau"?s.MainRoleInitial:ce(s.MainRoleInitial,s.MainRoleChanges||[]),n=Z(c);if(j&&j!=="Tous les camps"&&n!==j)return;const g=ge(t),i=s.Victorious,C=me(new Date(t.StartDate)),S=xe(t.StartDate,t.EndDate)||0;y.push({gameId:t.Id,date:C,camp:n,won:i,winnerCamp:g,playersInGame:t.PlayerStats.length,mapName:t.MapName,duration:S})}}),y.sort((t,s)=>{const c=n=>{const g=n.split("/");return g.length===3?new Date(parseInt(g[2]),parseInt(g[1])-1,parseInt(g[0])):new Date(n)};return c(s.date).getTime()-c(t.date).getTime()});const f=y.length,b=y.filter(t=>t.won).length,v=f>0?(b/f*100).toFixed(2):"0.00",d={};y.forEach(t=>{d[t.camp]||(d[t.camp]={appearances:0,wins:0,winRate:"0.00"}),d[t.camp].appearances++,t.won&&d[t.camp].wins++}),Object.keys(d).forEach(t=>{const s=d[t];s.winRate=s.appearances>0?(s.wins/s.appearances*100).toFixed(2):"0.00"});const m={};y.forEach(t=>{m[t.mapName]||(m[t.mapName]={appearances:0,wins:0,winRate:"0.00"}),m[t.mapName].appearances++,t.won&&m[t.mapName].wins++}),Object.keys(m).forEach(t=>{const s=m[t];s.winRate=s.appearances>0?(s.wins/s.appearances*100).toFixed(2):"0.00"});const r=y.reduce((t,s)=>t+s.duration,0);return{playerName:R,totalGames:f,totalWins:b,winRate:v,totalPlayTime:r,games:y,campStats:d,mapStats:m}}function Fe(l){const w={};let j=0,y=0;return Object.entries(l).forEach(([R,f])=>{R==="Village"||R==="ChÃ¢teau"?w[R]={...f}:(j+=f.appearances,y+=f.wins)}),j>=10&&(w.Autres={appearances:j,wins:y,winRate:j>0?(y/j*100).toFixed(2):"0.00"}),w}function te(l,w){const{data:j,isLoading:y,error:R}=oe(f=>l?Pe(l,f,w):null);return{data:j,isLoading:y,error:R}}function Ae({achievements:l,title:w,emptyMessage:j,achievementType:y="all"}){const{navigateToTab:R,updateNavigationState:f,clearNavigation:b}=U(),{settings:v,updateSettings:d}=Q(),{joueursData:m}=ee(),r=se(m),t=(a,p)=>{if(p.stopPropagation(),!a.redirectTo)return;b();const k=v.highlightedPlayer;if(d(y==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:k,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:"all",playerFilter:{mode:"none",players:[]},highlightedPlayer:k,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!1,mapNameFilter:"all",playerFilter:{mode:"none",players:[]}}}),a.category==="comparison"&&a.redirectTo.subTab==="comparison"){const o=v.highlightedPlayer||"",u=s(a.description,o);u&&f({playerComparisonState:{selectedPlayer1:o,selectedPlayer2:u,showDetailedStats:!0}})}if(a.category==="comparison"&&a.redirectTo.subTab==="pairing"){const o=a.description.toLowerCase().includes("loup");f({selectedPairingTab:o?"wolves":"lovers"})}if(a.category==="kills"&&a.redirectTo.subTab==="deathStats"){const o=a.description.match(/(Villageois|Loups|Autres)/i);o&&f({deathStatsSelectedCamp:o[1]});let u=10;const x=a.description.match(/min\.\s*(\d+)/);x&&(u=parseInt(x[1],10));let N="totalKills",F="killers";const T=a.redirectTo.chartSection;T&&(T==="killers-total"?(N="totalKills",F="killers"):T==="killers-average"?(N="averageKills",F="killers"):T==="deaths-total"?(N="totalDeaths",F="deaths"):T==="survivors-average"?(N="survivalRate",F="deaths"):(T==="hunters-good"||T==="hunters-bad")&&(F="hunter",N="averageKills")),f({deathStatisticsState:{selectedCamp:o?.[1]||"Tous les camps",minGamesForAverage:u,selectedView:F,focusChart:N}})}if(a.category==="map"&&a.redirectTo.subTab==="playersGeneral"){const o=a.redirectTo.mapFilter||"all";let u=10;const x=a.description.match(/min\.\s*(\d+)/);x&&(u=parseInt(x[1])),d(y==="modded"?{gameFilter:"modded",dateRange:{start:null,end:null},mapNameFilter:o,playerFilter:{mode:"none",players:[]},highlightedPlayer:k,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!0,gameFilter:"modded",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:o,playerFilter:{mode:"none",players:[]}}}:{gameFilter:"all",dateRange:{start:null,end:null},mapNameFilter:o,playerFilter:{mode:"none",players:[]},highlightedPlayer:k,useIndependentFilters:!0,independentFilters:{gameTypeEnabled:!1,gameFilter:"all",dateRangeEnabled:!1,dateRange:{start:null,end:null},mapNameEnabled:!0,mapNameFilter:o,playerFilter:{mode:"none",players:[]}}}),f({playersGeneralState:{minGamesForWinRate:u,winRateOrder:"best",focusChart:"winRate"}}),R("players","playersGeneral");return}if(a.category==="history"&&a.redirectTo.subTab==="history"&&f({selectedPlayerName:v.highlightedPlayer||"",groupingMethod:"session"}),a.category==="series"&&a.redirectTo.subTab==="series"){let o="wins";const u=a.title.toLowerCase(),x=a.description.toLowerCase();u.includes("dÃ©faite")||x.includes("dÃ©faite")?o="losses":u.includes("loup")||x.includes("loup")?o="loup":u.includes("villageois")||x.includes("villageois")?o="villageois":(u.includes("victoire")||x.includes("victoire"))&&(o="wins"),f({selectedSeriesType:o})}if(a.category==="general"&&a.redirectTo.subTab==="playersGeneral"){let o=10;const u=a.description.match(/min\.\s*(\d+)/);u&&(o=parseInt(u[1],10));let x="winRate",N="best";const F=a.title.toLowerCase(),T=a.description.toLowerCase();F.includes("participation")||T.includes("participation")?x="participation":(F.includes("taux de victoire")||T.includes("taux de victoire"))&&(x="winRate",(F.includes("moins bon")||F.includes("mauvais")||T.includes("moins bon")||T.includes("mauvais"))&&(N="worst")),f({playersGeneralState:{minGamesForWinRate:o,winRateOrder:N,focusChart:x}})}if(a.category==="performance"&&a.redirectTo.subTab==="campPerformance"){const o=a.redirectTo.chartSection;let u="Villageois",x=1;o&&(o==="camp-loup"?u="Loup":o==="camp-villageois"?u="Villageois":o==="camp-idiot"?u="Idiot du Village":o==="camp-amoureux"?u="Amoureux":(o==="solo-roles"||o==="hall-of-fame")&&(u="Villageois"));const N=a.description.match(/min\.\s*(\d+)/);N&&(x=parseInt(N[1],10)),o==="solo-roles"?u="RÃ´les spÃ©ciaux":o==="hall-of-fame"&&(u="Tous les camps"),f({campPerformanceState:{selectedCampPerformanceCamp:u,selectedCampPerformanceMinGames:x}})}if(a.category==="voting"&&a.redirectTo.subTab==="votingStats"){const o=a.title.toLowerCase();let u="overview",x="behavior";o.includes("agressivitÃ©")?(u="overview",x="behavior"):o.includes("taux de vote")?(u="behavior",x="voteRate"):o.includes("prÃ©cision")&&(u="overview",x="accuracy"),f({votingStatsState:{selectedCategory:u,selectedView:x}})}R(a.redirectTo.tab,a.redirectTo.subTab)},s=(a,p)=>{const k=[/avec ([^:]+?):/,/contre ([^:]+?):/];for(const o of k){const u=a.match(o);if(u&&u[1]){const x=u[1].trim();if(x!==p)return x}}return null},c=a=>{if(!a.redirectTo)return"Aucune navigation disponible";switch(a.category){case"general":if(a.redirectTo.subTab==="playersGeneral"){const o=a.description.match(/min\.\s*(\d+)/),u=o?parseInt(o[1],10):10,x=a.title.toLowerCase(),N=y==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)";return x.includes("taux de victoire")?`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir les taux de victoire (min. ${u} parties)${N}`:x.includes("participation")?`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir les participations${N}`:`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir le classement gÃ©nÃ©ral des joueurs${N}`}break;case"map":if(a.redirectTo.subTab==="playersGeneral"){const o=a.redirectTo.mapFilter,u=o==="village"?"Village":o==="chateau"?"ChÃ¢teau":"map",x=y==="modded"?" (Filtres parties moddÃ©es + map activÃ©s)":" (Filtre map activÃ©)";return`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques gÃ©nÃ©rales filtrÃ©es sur ${u}${x}`}break;case"history":if(a.redirectTo.subTab==="history")return"Cliquez pour voir l'historique dÃ©taillÃ© du joueur par map";break;case"comparison":if(a.redirectTo.subTab==="comparison")return`Cliquez pour comparer avec ${s(a.description,v.highlightedPlayer||"")||"ce joueur"}`;if(a.redirectTo.subTab==="pairing")return"Cliquez pour voir les statistiques de paires";break;case"kills":if(a.redirectTo.subTab==="deathStats"){const o=a.description.match(/(Villageois|Loups|Autres)/i),u=a.description.match(/min\.\s*(\d+)/),x=u?parseInt(u[1],10):10,N=o?.[1]||"Tous les camps",F=a.redirectTo.chartSection;let T="kills et morts";return F==="killers-total"?T="total des kills":F==="killers-average"?T=`moyenne des kills (min. ${x} parties)`:F==="deaths-total"?T="total des morts":F==="survivors-average"&&(T=`taux de survie (min. ${x} parties)`),`Cliquez pour voir les statistiques de ${T} ${N!=="Tous les camps"?`en ${N}`:""}`}break;case"series":if(a.redirectTo.subTab==="series"){const o=a.title.toLowerCase(),u=a.description.toLowerCase();return o.includes("dÃ©faite")||u.includes("dÃ©faite")?"Cliquez pour voir les sÃ©ries de dÃ©faites":o.includes("loup")||u.includes("loup")?"Cliquez pour voir les sÃ©ries Loups":o.includes("villageois")||u.includes("villageois")?"Cliquez pour voir les sÃ©ries Villageois":o.includes("victoire")||u.includes("victoire")?"Cliquez pour voir les sÃ©ries de victoires":"Cliquez pour voir les sÃ©ries consÃ©cutives"}break;case"performance":if(a.redirectTo.subTab==="campPerformance"){const o=a.redirectTo.chartSection,u=y==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)";return o==="camp-loup"?`Cliquez pour voir les performances camp Loup${u}`:o==="camp-villageois"?`Cliquez pour voir les performances camp Villageois${u}`:o==="camp-idiot"?`Cliquez pour voir les performances camp Idiot du Village${u}`:o==="camp-amoureux"?`Cliquez pour voir les performances camp Amoureux${u}`:o==="solo-roles"?`Cliquez pour voir le classement (rÃ´les spÃ©ciaux)${u}`:o==="hall-of-fame"?`Cliquez pour voir le Hall of Fame (toutes performances)${u}`:`Cliquez pour voir les performances par camp${u}`}break;case"voting":if(a.redirectTo.subTab==="votingStats"){const o=a.description.match(/min\.\s*(\d+)/),u=o?parseInt(o[1],10):25,x=y==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)",N=a.title.toLowerCase();return N.includes("agressivitÃ©")?`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir le score d'agressivitÃ© (min. ${u} meetings)${x}`:N.includes("taux de vote")?`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir le taux de vote (min. ${u} meetings)${x}`:N.includes("prÃ©cision")?`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir la prÃ©cision des votes${x}`:`Classement: ${a.rank}${a.totalRanked?`/${a.totalRanked} joueurs`:""} - Cliquez pour voir les statistiques de vote${x}`}break}return`Cliquez pour voir ${a.redirectTo.subTab}`+(y==="modded"?" (Filtre parties moddÃ©es activÃ©)":" (Filtres rÃ©initialisÃ©s)")},n=a=>r[a]||fe(a),g=a=>{const p=[/avec ([^:]+?):/,/contre ([^:]+?):/];let k=a;return p.forEach(o=>{const u=a.match(o);if(u&&u[1]){const x=u[1].trim(),F=`<span class="player-name-highlight" style="color: ${n(x)};">${x}</span>`;k=k.replace(x,F)}}),k};if(l.length===0)return e.jsxs("div",{className:"achievements-empty",children:[e.jsx("h4",{children:w}),e.jsx("p",{children:j||"Aucun succÃ¨s dans cette catÃ©gorie"})]});const i=a=>a===1?"ðŸ¥‡":a===2?"ðŸ¥ˆ":a===3?"ðŸ¥‰":"",C=a=>a===1?"rank-1":a===2?"rank-2":a===3?"rank-3":a&&a<=10?"rank-top-10":"",S=l.filter(a=>a.category!=="comparison"&&(a.type==="good"||a.type==="neutral")).sort((a,p)=>(a.rank??999)-(p.rank??999)),P=l.filter(a=>a.category!=="comparison"&&a.type==="bad").sort((a,p)=>(a.rank??999)-(p.rank??999)),D=l.filter(a=>a.category==="comparison"),I=S.filter(a=>a.rank&&a.rank<=3).length;return e.jsxs("div",{className:"achievements-container",children:[e.jsx("h4",{children:w}),I>0&&e.jsxs("div",{className:"top3-showcase",children:[e.jsx("h5",{className:"top3-title",children:"âœ¨ Podium d'Excellence âœ¨"}),e.jsx("div",{className:"top3-grid",children:S.filter(a=>a.rank&&a.rank<=3).map((a,p)=>e.jsxs("div",{className:`top3-card ${C(a.rank)} animate-slide-in`,style:{animationDelay:`${p*.15}s`},onClick:k=>t(a,k),title:c(a),children:[e.jsx("div",{className:"top3-medal-container",children:e.jsx("span",{className:"top3-medal",children:i(a.rank)})}),e.jsxs("div",{className:"top3-content",children:[e.jsxs("div",{className:"top3-rank-badge",children:["#",a.rank,a.totalRanked?`/${a.totalRanked}`:""]}),e.jsx("h6",{className:"top3-achievement-title",children:a.title}),e.jsx("p",{className:"top3-achievement-description",children:a.description})]}),e.jsxs("div",{className:"top3-sparkles",children:[e.jsx("span",{className:"sparkle sparkle-1",children:"âœ¨"}),e.jsx("span",{className:"sparkle sparkle-2",children:"â­"}),e.jsx("span",{className:"sparkle sparkle-3",children:"âœ¨"})]})]},a.id))})]}),S.length>0&&e.jsxs("div",{className:"achievements-section good-achievements",children:[e.jsx("h5",{children:"ðŸ† Classements"}),e.jsx("div",{className:"achievements-grid",children:S.filter(a=>!a.rank||a.rank>3).map((a,p)=>e.jsxs("div",{className:`achievement-card good ${C(a.rank)}`,onClick:k=>t(a,k),title:c(a),style:{animationDelay:`${p*.05}s`},children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:a.title}),e.jsxs("span",{className:"achievement-rank",children:["#",a.rank,a.totalRanked?`/${a.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:a.description})]},a.id))})]}),P.length>0&&e.jsxs("div",{className:"achievements-section bad-achievements",children:[e.jsx("h5",{children:"ðŸ’€ Classements (InversÃ©s)"}),e.jsx("div",{className:"achievements-grid",children:P.map(a=>e.jsxs("div",{className:`achievement-card bad rank-${a.rank}`,onClick:p=>t(a,p),title:c(a),children:[e.jsxs("div",{className:"achievement-header",children:[e.jsx("span",{className:"achievement-title",children:a.title}),e.jsxs("span",{className:"achievement-rank",children:["#",a.rank,a.totalRanked?`/${a.totalRanked}`:""]})]}),e.jsx("p",{className:"achievement-description",children:a.description})]},a.id))})]}),D.length>0&&e.jsxs("div",{className:"achievements-section comparison-achievements",children:[e.jsx("h5",{children:"ðŸ“Š Statistiques Face-Ã -Face"}),e.jsx("div",{className:"achievements-grid",children:D.map(a=>e.jsxs("div",{className:"achievement-card comparison",onClick:p=>t(a,p),title:c(a),children:[e.jsx("div",{className:"achievement-header",children:e.jsx("span",{className:"achievement-title",children:a.title})}),e.jsx("p",{className:"achievement-description",dangerouslySetInnerHTML:{__html:g(a.description)}})]},a.id))})]})]})}function $e({selectedPlayerName:l,groupingMethod:w,campFilter:j="all"}){const{navigateToGameDetails:y}=U(),{data:R,isLoading:f,error:b}=te(l),v=M.useMemo(()=>{switch(w){case"month":return"par Mois";case"quarter":return"par Trimestre";case"year":return"par AnnÃ©e";default:return"par Session"}},[w]),d=M.useMemo(()=>{if(!R?.games)return new Map;const s=new Map;return R.games.forEach(c=>{if(!s.has(c.date)){const n=c.date.split("/");n.length===3?s.set(c.date,new Date(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0])).getTime()):s.set(c.date,new Date(c.date).getTime())}}),s},[R?.games]),m=M.useMemo(()=>{if(!R?.games)return[];const s={};return R.games.forEach(c=>{if(j!=="all"){if(j==="solo"){if(c.camp==="Villageois"||c.camp==="Loup")return}else if(c.camp!==j)return}let n;const g=c.date.split("/");if(w==="month")if(g.length===3)n=`${g[1].padStart(2,"0")}/${g[2]}`;else{const i=new Date(c.date);n=`${String(i.getMonth()+1).padStart(2,"0")}/${i.getFullYear()}`}else if(w==="quarter")if(g.length===3){const i=parseInt(g[1],10);n=`T${Math.floor((i-1)/3)+1}/${g[2]}`}else{const i=new Date(c.date);n=`T${Math.floor(i.getMonth()/3)+1}/${i.getFullYear()}`}else w==="year"?g.length===3?n=`${g[2]}`:n=`${new Date(c.date).getFullYear()}`:n=c.date;s[n]||(s[n]={games:[],wins:0,total:0}),s[n].games.push(c),s[n].total++,c.won&&s[n].wins++}),Object.entries(s).map(([c,n])=>({period:c,totalGames:n.total,victories:n.wins,defeats:n.total-n.wins,winRate:n.total>0?(n.wins/n.total*100).toFixed(1):"0.0",winRateNum:n.total>0?n.wins/n.total*100:0})).sort((c,n)=>{if(w==="month"){const[g,i]=c.period.split("/"),[C,S]=n.period.split("/"),P=new Date(parseInt(i),parseInt(g)-1,1),D=new Date(parseInt(S),parseInt(C)-1,1);return P.getTime()-D.getTime()}else if(w==="quarter"){const[g,i]=c.period.split("/"),[C,S]=n.period.split("/"),P=parseInt(g.replace(/\D/g,""),10)||1,D=parseInt(C.replace(/\D/g,""),10)||1,I=new Date(parseInt(i,10),(P-1)*3,1),a=new Date(parseInt(S,10),(D-1)*3,1);return I.getTime()-a.getTime()}else if(w==="year"){const g=parseInt(c.period,10),i=parseInt(n.period,10);return g-i}else{const g=d.get(c.period)||0,i=d.get(n.period)||0;return g-i}})},[R,w,d,j]),t=(s=>s<=15?{fontSize:12,angle:-45,height:80,interval:0}:s<=30?{fontSize:12,angle:-45,height:85,interval:1}:s<=50?{fontSize:12,angle:-60,height:95,interval:2}:{fontSize:12,angle:-75,height:105,interval:Math.floor(s/12)})(m.length);return f?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):b?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",b]}):R?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["Ã‰volution des Performances ",v]}),e.jsx(E,{title:`Ã‰volution des Performances ${v}`,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ye,{data:m,margin:{top:20,right:30,left:20,bottom:20},onClick:s=>{if(s&&s.activeLabel){const c=m.find(n=>n.period===s.activeLabel);c&&y({selectedPlayer:l,selectedDate:c.period,fromComponent:`Ã‰volution des Performances ${v}`})}},style:{cursor:"pointer"},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"period",angle:t.angle,textAnchor:"end",height:t.height,interval:t.interval,fontSize:t.fontSize}),e.jsx(B,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(L,{content:({active:s,payload:c})=>{if(s&&c&&c.length>0){const n=c[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:n.period})}),e.jsxs("div",{children:["Parties: ",n.totalGames]}),e.jsxs("div",{children:["Victoires: ",n.victories]}),e.jsxs("div",{children:["Taux: ",n.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(je,{type:"monotone",dataKey:"winRateNum",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:2,r:4}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["RÃ©partition Victoires/DÃ©faites ",v]}),e.jsx(E,{title:`RÃ©partition Victoires/DÃ©faites ${v}`,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:m,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"period",angle:t.angle,textAnchor:"end",height:t.height,interval:t.interval,fontSize:t.fontSize}),e.jsx(B,{label:{value:"Nombre de parties",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(L,{content:({active:s,payload:c})=>{if(s&&c&&c.length>0){const n=c[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:n.period})}),e.jsxs("div",{children:["Total: ",n.totalGames," parties"]}),e.jsxs("div",{children:["Victoires: ",n.victories]}),e.jsxs("div",{children:["DÃ©faites: ",n.defeats]}),e.jsxs("div",{children:["Taux: ",n.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(O,{dataKey:"victories",stackId:"games",fill:"var(--accent-tertiary)",name:"Victoires",children:m.map((s,c)=>e.jsx(K,{fill:"var(--accent-tertiary)",onClick:()=>{y({selectedPlayer:l,selectedDate:s.period,fromComponent:`Historique Joueur - Victoires ${v}`})},style:{cursor:"pointer"}},`cell-victories-${c}`))}),e.jsx(O,{dataKey:"defeats",stackId:"games",fill:"var(--chart-color-4)",name:"DÃ©faites",children:m.map((s,c)=>e.jsx(K,{fill:"var(--chart-color-4)",onClick:()=>{y({selectedPlayer:l,selectedDate:s.period,fromComponent:`Historique Joueur - DÃ©faites ${v}`})},style:{cursor:"pointer"}},`cell-defeats-${c}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function ze({selectedPlayerName:l}){const{navigateToGameDetails:w}=U(),{data:j,isLoading:y,error:R}=te(l),f=ae(),b=M.useMemo(()=>j?.campStats?Object.entries(j.campStats).map(([d,m])=>({name:d,value:m.appearances,winRate:m.winRate,winRateDisplay:Math.max(parseFloat(m.winRate),1),wins:m.wins,percentage:(m.appearances/j.totalGames*100).toFixed(1)})):[],[j]),v=M.useMemo(()=>{if(!b.length)return[];const d=5;let m=0;const r=[],t=[];if(b.forEach(s=>{parseFloat(s.percentage)<d?(m+=Number(s.value),r.push(s)):t.push(s)}),m>0){const s=b.reduce((c,n)=>c+Number(n.value),0);t.push({name:"Autres",value:m,winRate:"0.0",winRateDisplay:1,wins:r.reduce((c,n)=>c+n.wins,0),percentage:(m/s*100).toFixed(1),_details:r})}return t},[b]);return y?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):R?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",R]}):j?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Distribution par Camps"}),e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(be,{children:[e.jsx(Ce,{data:v,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",label:d=>{const m=d.percent!==void 0?d.percent:0;return d.name==="Autres"?`Autres : ${d.value} (${(m*100).toFixed(1)}%)`:`${d.name}: ${d.value} (${(m*100).toFixed(1)}%)`},children:v.map((d,m)=>e.jsx(K,{fill:d.name==="Autres"?de:f[d.name]||`var(--chart-color-${m%6+1})`,onClick:()=>{if(d.name==="Autres"){const r=d._details?.map(t=>t.name)||[];w({selectedPlayer:l,campFilter:{selectedCamp:"Autres",campFilterMode:"all-assignments",_smallCamps:r},fromComponent:"Distribution par Camps"})}else d.name==="TraÃ®tre"||d.name==="Louveteau"?w({selectedPlayer:l,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):d.name==="Loup"?w({selectedPlayer:l,campFilter:{selectedCamp:"Loup",campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Distribution par Camps"}):w({selectedPlayer:l,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments"},fromComponent:"Distribution par Camps"})},style:{cursor:"pointer"}},`cell-${m}`))}),e.jsx(L,{content:({active:d,payload:m})=>{if(d&&m&&m.length>0){const r=m[0].payload;if(r.name==="Autres"&&r._details){const t=[...r._details].sort((s,c)=>c.value-s.value);return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Autres - ",r.value," parties (",r.percentage,"%)"]})}),e.jsx("div",{children:t.map((s,c)=>e.jsxs("div",{children:[s.name,": ",s.value," parties (",s.percentage,"%)"]},c))}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--chart-color-1)",marginTop:"0.25rem",fontStyle:"italic"},children:"Cliquez pour voir toutes les parties de ces camps"})]})}return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:[r.name," - ",r.value," parties (",r.percentage,"%)"]})}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}})]})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Camp"}),e.jsx(E,{title:"Performance par Camp",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:b,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(B,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(L,{content:({active:d,payload:m})=>{if(d&&m&&m.length>0){const r=m[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.name})}),e.jsxs("div",{children:["Victoires: ",r.wins," / ",r.value]}),e.jsxs("div",{children:["Taux: ",r.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(O,{dataKey:"winRateDisplay",children:b.map((d,m)=>e.jsx(K,{fill:parseFloat(d.winRate)===0?`${f[d.name]||`var(--chart-color-${m%6+1})`}50`:f[d.name]||`var(--chart-color-${m%6+1})`,onClick:()=>{d.name==="TraÃ®tre"||d.name==="Louveteau"?w({selectedPlayer:l,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):d.name==="Loup"?w({selectedPlayer:l,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments",excludeWolfSubRoles:!0},fromComponent:"Performance par Camp"}):w({selectedPlayer:l,campFilter:{selectedCamp:d.name,campFilterMode:"all-assignments"},fromComponent:"Performance par Camp"})},style:{cursor:"pointer"}},`cell-${m}`))})]})})})})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function Ie({selectedPlayerName:l}){const{navigateToGameDetails:w,navigationState:j,updateNavigationState:y}=U(),[R,f]=M.useState(j.playerHistoryMapState?.selectedCamp||"Tous les camps"),{data:b}=we(),{data:v,isLoading:d,error:m}=te(l,R);M.useEffect(()=>{(!j.playerHistoryMapState||j.playerHistoryMapState.selectedCamp!==R)&&y({playerHistoryMapState:{selectedCamp:R}})},[R,j.playerHistoryMapState,y]);const r=s=>{f(s),y({playerHistoryMapState:{selectedCamp:s}})},t=M.useMemo(()=>{if(!v?.mapStats)return[];const s=Fe(v.mapStats);return Object.entries(s).map(([c,n])=>({name:c,value:n.appearances,winRate:n.winRate,winRateDisplay:Math.max(parseFloat(n.winRate),.1),wins:n.wins,percentage:(n.appearances/v.totalGames*100).toFixed(1)}))},[v]);return d?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):m?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",m]}):v?t.length===0?e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e de carte disponible"}),e.jsx("p",{children:"Aucune statistique de carte n'est disponible pour ce joueur."})]}):e.jsx("div",{className:"lycans-graphiques-groupe",children:e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["Performance par Carte",R!=="Tous les camps"?` (${R})`:""]}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select-map",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select-map",value:R,onChange:s=>r(s.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),b?.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx(E,{title:"Performance par Carte",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:t,margin:{top:20,right:140,left:20,bottom:20},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(B,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(re,{y:50,stroke:"var(--text-secondary)",strokeDasharray:"5 5",strokeOpacity:.5}),(()=>{if(t.length>0){const s=t.reduce((g,i)=>g+i.value,0),c=t.reduce((g,i)=>g+i.wins,0),n=s>0?c/s*100:0;if(n!==50)return e.jsx(re,{y:n,stroke:"var(--accent-primary)",strokeDasharray:"3 3",strokeOpacity:.7,label:{value:`Moyenne: ${n.toFixed(1)}%`,position:"right",offset:5,style:{fill:"var(--accent-primary)"}}})}return null})(),e.jsx(L,{content:({active:s,payload:c})=>{if(s&&c&&c.length>0){const n=c[0].payload,g=[];return t.forEach(i=>{if(i.name!==n.name&&i.value>=5){const C=parseFloat(n.winRate)-parseFloat(i.winRate);Math.abs(C)>=2&&g.push({map:i.name,diff:C,better:C>0})}}),e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)",maxWidth:"250px"},children:[e.jsx("div",{children:e.jsx("strong",{children:n.name})}),e.jsxs("div",{children:["Parties: ",n.value]}),e.jsxs("div",{children:["Victoires: ",n.wins]}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsxs("strong",{children:["Taux: ",n.winRate,"%"]})}),g.length>0&&e.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Comparaisons:"}),g.map((i,C)=>e.jsxs("div",{style:{fontSize:"0.75rem",color:i.better?"var(--accent-tertiary)":"var(--chart-color-4)"},children:[i.better?"â†—":"â†˜"," ",Math.abs(i.diff).toFixed(1),"% vs ",i.map]},C))]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(O,{dataKey:"winRateDisplay",label:s=>{const{x:c,y:n,width:g,payload:i}=s;if(c===void 0||n===void 0||g===void 0||!i)return null;const C=i.winRate||"0";return e.jsxs("text",{x:c+g/2,y:n-5,fill:"var(--text-primary)",textAnchor:"middle",fontSize:"12",fontWeight:"bold",children:[C,"%"]})},onClick:s=>{if(s&&s.name){const c={selectedPlayer:l,selectedMapName:s.name,fromComponent:"Performance par Carte"};R!=="Tous les camps"&&(c.campFilter={selectedCamp:R,campFilterMode:"all-assignments"}),w(c)}},children:t.map((s,c)=>{let n;s.name==="Village"?n="var(--accent-secondary)":s.name==="ChÃ¢teau"?n="var(--accent-tertiary)":s.name==="Autres"?n=de:n=`var(--chart-color-${c%6+1})`;const g=Math.max(...t.map(C=>parseFloat(C.winRate))),i=parseFloat(s.winRate)===g&&g>0;return e.jsx(K,{fill:parseFloat(s.winRate)===0?`${n}30`:n,stroke:"transparent",strokeWidth:i?3:1,style:{cursor:"pointer"}},`cell-map-${c}`)})})]})})})})]})}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e d'historique disponible"})}function We({selectedPlayerName:l}){const{gameData:w}=le(),{joueursData:j}=ee(),y=se(j),R=ae(),f=M.useMemo(()=>{if(!w||!l)return{playersKilled:[],killedBy:[],deathTypes:[],availableDeathTypes:[]};const v={},d={},m={},r=new Set;w.forEach(g=>{const i=g.PlayerStats.find(C=>C.Username.toLowerCase()===l.toLowerCase());if(i&&(g.PlayerStats.forEach(C=>{C.KillerName?.toLowerCase()===l.toLowerCase()&&(v[C.Username]=(v[C.Username]||0)+1)}),i.KillerName&&(d[i.KillerName]=(d[i.KillerName]||0)+1),i.DeathType)){const C=i.DeathType,S=J(C);m[S]||(m[S]={count:0,byDeathType:{}}),m[S].count+=1,m[S].byDeathType[C]=(m[S].byDeathType[C]||0)+1,r.add(C)}});const t=Object.entries(v).map(([g,i])=>({player:g,kills:i})).sort((g,i)=>i.kills-g.kills).slice(0,10),s=Object.entries(d).map(([g,i])=>({player:g,kills:i})).sort((g,i)=>i.kills-g.kills).slice(0,10),c=Object.entries(m).map(([g,i])=>{const C={deathType:g,count:i.count};return C[g]=i.count,C}).sort((g,i)=>i.count-g.count).slice(0,10),n=Object.keys(m);return{playersKilled:t,killedBy:s,deathTypes:c,availableDeathTypes:n}},[w,l]),b=M.useMemo(()=>{const v={};f.availableDeathTypes.forEach(r=>{r==="TuÃ© par Loup"?v[r]=R.Loup:r==="Mort aux votes"?v[r]="var(--chart-color-1)":r.includes("Chasseur")?v[r]=R.Chasseur:r==="TuÃ© par Zombie"?v[r]=R.Vaudou:r==="TuÃ© par potion assassin"?v[r]=R.Alchimiste:r==="TuÃ© par Vengeur"?v[r]="var(--chart-color-2)":r==="Amoureux mort"?v[r]=R.Amoureux:r==="TuÃ© par La BÃªte"?v[r]="var(--chart-color-3)":r==="TuÃ© par ShÃ©rif"&&(v[r]="var(--chart-color-4)")});const d=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let m=0;return f.availableDeathTypes.forEach(r=>{v[r]||(v[r]=d[m%d.length],m++)}),v},[f.availableDeathTypes,R]);return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[f.playersKilled.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Les Victimes"}),e.jsx(E,{title:"Les Victimes",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:f.playersKilled,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(B,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(L,{content:({active:v,payload:d})=>{if(v&&d&&d.length>0){const m=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:m.player})}),e.jsxs("div",{children:["TuÃ© ",m.kills," fois par ",l]})]})}return null}}),e.jsx(O,{dataKey:"kills",children:f.playersKilled.map((v,d)=>e.jsx(K,{fill:y[v.player]||"var(--chart-color-3)"},`cell-killed-${d}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucun kill enregistrÃ©"}),e.jsxs("p",{children:[l," n'a tuÃ© aucun joueur dans les parties enregistrÃ©es."]})]}),f.killedBy.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Les Tueurs"}),e.jsx(E,{title:"Les Tueurs",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:f.killedBy,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"player",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(B,{label:{value:"Nombre de kills",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(L,{content:({active:v,payload:d})=>{if(v&&d&&d.length>0){const m=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:m.player})}),e.jsxs("div",{children:["A tuÃ© ",l," ",m.kills," fois"]})]})}return null}}),e.jsx(O,{dataKey:"kills",children:f.killedBy.map((v,d)=>e.jsx(K,{fill:y[v.player]||"var(--chart-color-4)"},`cell-killer-${d}`))})]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune mort par kill"}),e.jsxs("p",{children:[l," n'a jamais Ã©tÃ© tuÃ© par un autre joueur dans les parties enregistrÃ©es."]})]}),f.deathTypes.length>0?e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Types de Mort les Plus FrÃ©quents"}),e.jsx(E,{title:"Types de Mort les Plus FrÃ©quents",children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:f.deathTypes,margin:{top:20,right:30,left:20,bottom:90},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"deathType",angle:-45,textAnchor:"end",height:120,interval:0,fontSize:12}),e.jsx(B,{label:{value:"Nombre de morts",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(L,{content:({active:v,payload:d})=>{if(v&&d&&d.length>0){const m=d[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:m.deathType})}),e.jsxs("div",{children:[l," est mort ",m.count," fois ainsi"]})]})}return null}}),f.availableDeathTypes.map(v=>e.jsx(O,{dataKey:v,name:v,stackId:"deaths",fill:b[v]||"var(--chart-color-5)"},v))]})})})})]}):e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e de mort"}),e.jsxs("p",{children:["Aucune information de mort disponible pour ",l,"."]})]})]})}function Le(l,w){if(!l||l.trim()===""||w.length===0)return null;const j=new Map,y=new Map,R=new Map;w.forEach(m=>{if(!m.Modded)return;const r=m.PlayerStats.find(t=>X(t)===l||t.Username.toLowerCase()===l.toLowerCase());if(r){if(r.MainRoleInitial==="Inconnu")return;const t=r.Victorious,c=ce(r.MainRoleInitial,r.MainRoleChanges||[])!==r.MainRoleInitial,n=Z(r.MainRoleInitial),g=n==="Loup"||n==="TraÃ®tre"||n==="Louveteau";if(n==="Villageois"&&(r.MainRoleInitial==="Chasseur"||r.MainRoleInitial==="Alchimiste")){const i=j.get(r.MainRoleInitial)||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0};j.set(r.MainRoleInitial,{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1)})}else if(r.Power&&r.Power.trim()!==""&&r.Power!=="Inconnu"){if(n==="Villageois"){const i=j.get(r.Power)||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0};j.set(r.Power,{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1)})}else if(g){const i=y.get(r.Power)||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0,roleBreakdown:new Map},C=i.roleBreakdown;C.set(r.MainRoleInitial,(C.get(r.MainRoleInitial)||0)+1),y.set(r.Power,{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1),roleBreakdown:C})}}else if((n==="Villageois"||g)&&r.Power!=="Inconnu")if(n==="Villageois"){const i=j.get("Aucun pouvoir")||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0};j.set("Aucun pouvoir",{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1)})}else{const i=y.get("Aucun pouvoir")||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0,roleBreakdown:new Map},C=i.roleBreakdown;C.set(r.MainRoleInitial,(C.get(r.MainRoleInitial)||0)+1),y.set("Aucun pouvoir",{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1),roleBreakdown:C})}if(r.SecondaryRole&&r.SecondaryRole.trim()!==""&&r.SecondaryRole!=="Inconnu"){const i=R.get(r.SecondaryRole)||{appearances:0,wins:0,winsWithoutRoleChange:0,gamesWithoutRoleChange:0};R.set(r.SecondaryRole,{appearances:i.appearances+1,wins:i.wins+(t?1:0),winsWithoutRoleChange:i.winsWithoutRoleChange+(!c&&t?1:0),gamesWithoutRoleChange:i.gamesWithoutRoleChange+(c?0:1)})}}});const f=new Map;w.forEach(m=>{const r=m.PlayerStats.find(t=>X(t)===l||t.Username.toLowerCase()===l.toLowerCase());if(r&&(r.MainRoleInitial==="Chasseur"||r.MainRoleInitial==="Alchimiste")){const t=r.MainRoleInitial;f.set(t,(f.get(t)||0)+1)}});const b=m=>Array.from(m.entries()).map(([r,t])=>({name:r,appearances:t.appearances,wins:t.wins,winsWithoutRoleChange:t.winsWithoutRoleChange,gamesWithoutRoleChange:t.gamesWithoutRoleChange,winRate:t.gamesWithoutRoleChange>0?(t.winsWithoutRoleChange/t.gamesWithoutRoleChange*100).toFixed(1):"0.0",camp:"Villageois",...f.has(r)&&{totalGamesAllModes:f.get(r)}})).sort((r,t)=>t.appearances-r.appearances),v=m=>Array.from(m.entries()).map(([r,t])=>({name:r,appearances:t.appearances,wins:t.wins,winsWithoutRoleChange:t.winsWithoutRoleChange,gamesWithoutRoleChange:t.gamesWithoutRoleChange,winRate:t.gamesWithoutRoleChange>0?(t.winsWithoutRoleChange/t.gamesWithoutRoleChange*100).toFixed(1):"0.0",camp:"Loup",roleBreakdown:Array.from(t.roleBreakdown.entries()).map(([s,c])=>({role:s,count:c})).sort((s,c)=>c.count-s.count)})).sort((r,t)=>t.appearances-r.appearances),d=m=>Array.from(m.entries()).map(([r,t])=>({name:r,appearances:t.appearances,wins:t.wins,winsWithoutRoleChange:t.winsWithoutRoleChange,gamesWithoutRoleChange:t.gamesWithoutRoleChange,winRate:t.gamesWithoutRoleChange>0?(t.winsWithoutRoleChange/t.gamesWithoutRoleChange*100).toFixed(1):"0.0"})).sort((r,t)=>t.appearances-r.appearances);return{villageoisPowers:b(j),loupPowers:v(y),secondaryRoles:d(R)}}function qe({selectedPlayerName:l}){const{navigateToGameDetails:w,navigationState:j,updateNavigationState:y}=U(),{settings:R}=Q(),f=ae(),[b,v]=M.useState(j.playerHistoryRolesState?.chartMode||"appearances"),{data:d,isLoading:m,error:r}=oe(S=>Le(l,S));M.useEffect(()=>{(!j.playerHistoryRolesState||j.playerHistoryRolesState.chartMode!==b)&&y({playerHistoryRolesState:{chartMode:b}})},[b,j.playerHistoryRolesState,y]);const t=S=>{v(S),y({playerHistoryRolesState:{chartMode:S}})},s=M.useMemo(()=>{if(!d)return{villageoisPowers:[],loupPowers:[],secondaryRoles:[]};const S=1,P=1,D=15,I=b==="winRate"?(p,k)=>parseFloat(k.winRate)-parseFloat(p.winRate):(p,k)=>k.appearances-p.appearances,a=p=>({...p,winRateDisplay:Math.max(parseFloat(p.winRate),1)});return{villageoisPowers:d.villageoisPowers.filter(p=>p.appearances>=S).map(a).sort(I).slice(0,D),loupPowers:d.loupPowers.filter(p=>p.appearances>=S).map(a).sort(I).slice(0,D),secondaryRoles:d.secondaryRoles.filter(p=>p.appearances>=P).map(a).sort(I).slice(0,D)}},[d,b]);if(m)return e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique des rÃ´les..."});if(r)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",r]});if(!d)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de rÃ´le disponible"});const c=s.villageoisPowers.length>0,n=s.loupPowers.length>0,g=s.secondaryRoles.length>0;if(!c&&!n&&!g)return e.jsx("div",{className:"donnees-manquantes",children:"Aucun pouvoir ou rÃ´le secondaire trouvÃ©"});const i=({active:S,payload:P})=>{if(S&&P&&P.length>0){const D=P[0].payload,I=D.gamesWithoutRoleChange<D.appearances;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:D.name})}),e.jsxs("div",{children:["Apparitions: ",D.appearances]}),I&&e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"0.25rem"},children:["dont ",D.appearances-D.gamesWithoutRoleChange," avec changement de rÃ´le (exclu du calcul)"]}),e.jsxs("div",{children:["Victoires: ",D.winsWithoutRoleChange]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de victoire: ",D.winRate,"%"]})}),D.totalGamesAllModes&&D.totalGamesAllModes!==D.appearances&&e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",fontStyle:"italic"},children:["(Total avec parties non moddÃ©es: ",D.totalGamesAllModes,")"]}),D.roleBreakdown&&D.roleBreakdown.length>0&&e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:[e.jsx("div",{style:{fontStyle:"italic"},children:"RÃ©partition par rÃ´le:"}),D.roleBreakdown.map((a,p)=>e.jsxs("div",{style:{marginLeft:"0.5rem"},children:["â€¢ ",a.role,": ",a.count]},p))]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},C=(S,P,D,I,a)=>{const p=b==="appearances"?"appearances":"winRateDisplay",k=b==="appearances"?"Nombre d'apparitions":"Taux de victoire (%)",o=b==="winRate"?[0,100]:void 0;return e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:P}),e.jsx(E,{title:P,children:e.jsx("div",{style:{height:400},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(_,{data:S,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:12,tick:({x:u,y:x,payload:N})=>e.jsx("text",{x:u,y:x,textAnchor:"end",transform:`rotate(-45, ${u}, ${x})`,fill:R.highlightedPlayer===l?"var(--text-primary)":"var(--text-secondary)",fontSize:12,children:N.value})}),e.jsx(B,{label:{value:k,angle:270,position:"left",style:{textAnchor:"middle"}},domain:o}),e.jsx(L,{content:e.jsx(i,{})}),e.jsx(O,{dataKey:p,label:b==="winRate"?u=>{const{x,y:N,width:F,payload:T}=u;if(x===void 0||N===void 0||F===void 0||!T)return null;const h=T.winRate||"0";return e.jsxs("text",{x:x+F/2,y:N-5,fill:"var(--text-primary)",textAnchor:"middle",fontSize:"12",fontWeight:"bold",children:[h,"%"]})}:void 0,children:S.map((u,x)=>e.jsx(K,{fill:a?a(u.name,x):D,onClick:()=>I(u.name),style:{cursor:"pointer"}},`cell-${x}`))})]})})})})]})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"chart-mode-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Affichage :"}),e.jsxs("select",{id:"chart-mode-select",value:b,onChange:S=>t(S.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"180px"},children:[e.jsx("option",{value:"appearances",children:"Apparitions"}),e.jsx("option",{value:"winRate",children:"Taux de victoire"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[c&&C(s.villageoisPowers,"Camp Villageois","var(--chart-color-1)",S=>{w({selectedPlayer:l,campFilter:{selectedCamp:"Villageois",campFilterMode:b==="winRate"?"wins-only":"all-assignments"},selectedPower:S,fromComponent:`Historique des RÃ´les - Pouvoir: ${S}`})},S=>S==="Chasseur"&&f.Chasseur?f.Chasseur:S==="Alchimiste"&&f.Alchimiste?f.Alchimiste:"var(--chart-color-1)"),n&&C(s.loupPowers,"Camp Loups","var(--chart-color-2)",S=>{w({selectedPlayer:l,campFilter:{selectedCamp:"Loup",campFilterMode:b==="winRate"?"wins-only":"all-assignments"},selectedPower:S,fromComponent:`Historique des RÃ´les - Pouvoir: ${S}`})},()=>f.Loup||"var(--chart-color-2)"),g&&C(s.secondaryRoles,"RÃ´les Secondaires","var(--chart-color-3)",S=>{w({selectedPlayer:l,selectedSecondaryRole:S,fromComponent:`Historique des RÃ´les - RÃ´le Secondaire: ${S}`})}),e.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"16px",padding:"8px",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",border:"1px solid var(--border-color)"},children:"â„¹ï¸ Les victoires et le taux de victoire excluent les parties oÃ¹ le rÃ´le principal a changÃ© en cours de partie (ex: Garde en Chasseur, rÃ©ssucitÃ© en Zombie par un Vaudou, etc...)."})]})]})}function ne(l){return l==="SURVIVALIST_NOT_SAVED"?"BY_WOLF":l}function Ee({selectedPlayerName:l}){const{navigateToGameDetails:w}=U(),{gameData:j,isLoading:y,error:R}=le(),f=ae(),[b,v]=M.useState("deaths"),[d,m]=M.useState(""),[r,t]=M.useState(0),s=M.useMemo(()=>{if(!j)return[];const a=new Set;return j.forEach(p=>{const k=p.PlayerStats.find(o=>o.Username.toLowerCase()===l.toLowerCase());k&&(k.DeathPosition!==null&&p.MapName&&a.add(p.MapName),p.PlayerStats.forEach(o=>{o.KillerName?.toLowerCase()===l.toLowerCase()&&o.DeathPosition!==null&&p.MapName&&a.add(p.MapName)}))}),Array.from(a).filter(p=>p==="Village"||p==="ChÃ¢teau").sort((p,k)=>p==="Village"?-1:k==="Village"?1:p.localeCompare(k))},[j,l]),c=s.length>0?s[0]:"";d===""&&c!==""&&m(c);const n=M.useMemo(()=>{if(!j||!l)return[];const a=[];return j.forEach(p=>{if(d&&p.MapName!==d)return;const k=p.PlayerStats.find(o=>o.Username.toLowerCase()===l.toLowerCase());if(k)if(b==="deaths"){if(k.DeathPosition){const o=Z(k.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0}),u=ie(k.DeathPosition.x,k.DeathPosition.z,p.MapName);a.push({x:u.x,z:u.z,victimName:k.Username,killerName:k.KillerName||null,deathType:ne(k.DeathType),mapName:p.MapName,camp:o,gameId:p.DisplayedId,displayedGameId:p.DisplayedId})}}else p.PlayerStats.forEach(o=>{if(o.KillerName?.toLowerCase()===l.toLowerCase()&&o.DeathPosition){const u=Z(o.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0}),x=ie(o.DeathPosition.x,o.DeathPosition.z,p.MapName);a.push({x:x.x,z:x.z,victimName:o.Username,killerName:l,deathType:ne(o.DeathType),mapName:p.MapName,camp:u,gameId:p.DisplayedId,displayedGameId:p.DisplayedId})}})}),a},[j,l,b,d]),g=M.useMemo(()=>Re(n,r).map((p,k)=>{const o=p.items[0],u=Se(p.items);return{x:p.centroidX,z:p.centroidZ,count:p.items.length,allLocations:p.items,victimName:p.items.length===1?o.victimName:null,killerName:p.items.length===1?o.killerName:null,deathType:u,mapName:o.mapName,camp:o.camp,gameId:p.items.length===1?o.gameId:null,displayedGameId:p.items.length===1?o.displayedGameId:null,clusterIndex:k}}),[n,r]),i=M.useMemo(()=>ke(d),[d]),{xDomain:C,zDomain:S}=M.useMemo(()=>{if(i)return{xDomain:[i.xMin,i.xMax],zDomain:[i.zMin,i.zMax]};if(g.length===0)return{xDomain:[0,100],zDomain:[0,100]};const a=g.map(T=>T.x),p=g.map(T=>T.z),k=Math.min(...a),o=Math.max(...a),u=Math.min(...p),x=Math.max(...p),N=(o-k)*.1||10,F=(x-u)*.1||10;return{xDomain:[k-N,o+N],zDomain:[u-F,x+F]}},[g,i]),P=a=>a?a==="BY_WOLF"||a==="SURVIVALIST_NOT_SAVED"?f.Loup:a==="VOTED"?"var(--chart-color-1)":a==="BULLET"||a==="BULLET_HUMAN"||a==="BULLET_WOLF"?f.Chasseur:a==="BY_ZOMBIE"?f.Vaudou:a==="ASSASSIN"?f.Alchimiste:a==="AVENGER"?"var(--chart-color-2)":a==="LOVER_DEATH"?f.Amoureux:a==="BY_BEAST"?"var(--chart-color-3)":a==="SHERIF_SUCCESS"?"var(--chart-color-4)":"var(--accent-primary)":"var(--text-secondary)",D=({active:a,payload:p})=>{if(!a||!p||p.length===0)return null;const k=p[0].payload,o=k.allLocations||[k];if(o.length>1){const N=new Map,F=new Map,T=new Set;o.forEach($=>{N.set($.victimName,(N.get($.victimName)||0)+1);const A=$.deathType?J($.deathType):"Inconnu";F.set(A,(F.get(A)||0)+1),T.add($.gameId)});const h=Array.from(N.entries()).sort(($,A)=>A[1]-$[1]).slice(0,3),z=Array.from(F.entries()).sort(($,A)=>A[1]-$[1]).slice(0,3);return e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",maxWidth:"350px"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"1rem",color:"var(--accent-primary)"},children:[b==="deaths"?"ðŸ’€":"âš”ï¸"," ",o.length," ",b==="deaths"?"morts":"kills"," Ã  cet endroit"]}),e.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:b==="deaths"?"Par:":"Victimes:"}),h.map(([$,A])=>e.jsxs("div",{style:{paddingLeft:"0.5rem"},children:["â€¢ ",$," (",A,"x)"]},$)),N.size>3&&e.jsxs("div",{style:{paddingLeft:"0.5rem",color:"var(--text-secondary)"},children:["+",N.size-3," autres..."]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Types de mort:"}),z.map(([$,A])=>e.jsxs("div",{style:{paddingLeft:"0.5rem"},children:["â€¢ ",$," (",A,"x)"]},$))]}),e.jsxs("div",{style:{marginTop:"8px",color:"var(--text-secondary)"},children:["ðŸ“ ",T.size," partie",T.size>1?"s":""," diffÃ©rente",T.size>1?"s":""]})]}),e.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border-color)",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Cliquez pour voir les parties concernÃ©es"})]})}const x=o[0];return e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",maxWidth:"300px"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"1rem",color:"var(--accent-primary)"},children:[b==="deaths"?"ðŸ’€":"âš”ï¸"," ",b==="deaths"?"Mort de":"Kill de"," ",l]}),e.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[b==="deaths"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["ðŸŽ¯ ",e.jsx("strong",{children:"TuÃ© par:"})," ",x.killerName||"Inconnu"]}),e.jsxs("div",{children:["âš°ï¸ ",e.jsx("strong",{children:"Cause:"})," ",x.deathType?J(x.deathType):"Inconnue"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["ðŸŽ¯ ",e.jsx("strong",{children:"Victime:"})," ",x.victimName]}),e.jsxs("div",{children:["âš°ï¸ ",e.jsx("strong",{children:"Cause:"})," ",x.deathType?J(x.deathType):"Inconnue"]}),e.jsxs("div",{children:["ðŸ‘¥ ",e.jsx("strong",{children:"Camp victime:"})," ",x.camp]})]}),e.jsxs("div",{children:["ðŸ—ºï¸ ",e.jsx("strong",{children:"Carte:"})," ",x.mapName]}),e.jsxs("div",{children:["ðŸŽ® ",e.jsx("strong",{children:"Partie:"})," #",x.gameId]})]}),e.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border-color)",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Cliquez pour voir les dÃ©tails de la partie"})]})},I=a=>{if(!a)return;const p=a.allLocations||[a];if(p.length===1)w({selectedGame:p[0].gameId,fromComponent:"Player Death Map"});else{const k=p.map(o=>o.gameId).filter(o=>o);w({selectedGameIds:k,fromComponent:"Player Death Map"})}};return y?e.jsx("div",{className:"donnees-attente",children:"Chargement des donnÃ©es..."}):R?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",R]}):j?e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{style:{flex:"1 1 100%",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Afficher :"}),e.jsxs("div",{style:{display:"flex",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",border:"1px solid var(--border-color)",overflow:"hidden"},children:[e.jsx("button",{onClick:()=>v("deaths"),style:{background:b==="deaths"?"var(--accent-primary)":"transparent",color:b==="deaths"?"white":"var(--text-primary)",border:"none",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:b==="deaths"?"bold":"normal",transition:"all 0.2s"},children:"ðŸ’€ Morts"}),e.jsx("button",{onClick:()=>v("kills"),style:{background:b==="kills"?"var(--accent-primary)":"transparent",color:b==="kills"?"white":"var(--text-primary)",border:"none",padding:"0.5rem 1rem",fontSize:"0.9rem",cursor:"pointer",fontWeight:b==="kills"?"bold":"normal",transition:"all 0.2s"},children:"âš”ï¸ Kills"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"player-map-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Carte :"}),e.jsx("select",{id:"player-map-select",value:d,onChange:a=>m(a.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"120px"},children:s.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"cluster-slider",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Groupement :"}),e.jsx("input",{id:"cluster-slider",type:"range",min:"0",max:"50",step:"5",value:r,onChange:a=>t(parseInt(a.target.value)),style:{width:"80px"}}),e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",minWidth:"60px"},children:r===0?"Aucun":`${r}u`})]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",style:{flex:"1 1 100%",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:b==="deaths"?"Morts localisÃ©es":"Kills localisÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:b==="deaths"?"var(--accent-secondary)":"var(--accent-primary)"},children:n.length}),r>0&&g.length<n.length&&e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"4px"},children:["â†’ ",g.length," points groupÃ©s"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Carte"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-2)",fontSize:"1.2rem"},children:d||"Aucune"})]})]}),e.jsx("div",{className:"lycans-graphique-section",style:{flex:"1 1 100%",minWidth:"100%"},children:n.length>0?e.jsx(E,{title:b==="deaths"?`Carte des Morts de ${l}`:`Carte des Kills de ${l}`,children:e.jsx("div",{style:{width:"100%",maxWidth:900,margin:"0 auto",aspectRatio:"1640 / 922"},children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(Te,{margin:{top:20,right:30,left:60,bottom:60},children:[i&&e.jsx(Ne,{x1:i.zMin,x2:i.zMax,y1:i.xMin,y2:i.xMax,fill:"transparent",stroke:"none",shape:a=>{const{x:p,y:k,width:o,height:u}=a;return e.jsx("image",{x:p,y:k,width:o,height:u,href:i.src,preserveAspectRatio:"xMidYMid slice",style:{opacity:.85}})}}),e.jsx(G,{strokeDasharray:"3 3",stroke:i?"rgba(255,255,255,0.3)":"var(--border-color)"}),e.jsx(V,{dataKey:"z",type:"number",name:"Position Z",label:{value:"Position Z",position:"bottom",offset:10,style:{fill:"var(--text-secondary)"}},domain:S,stroke:"var(--text-secondary)",tick:{fill:"var(--text-secondary)"},tickFormatter:a=>Math.round(a).toString()}),e.jsx(B,{dataKey:"x",type:"number",name:"Position X",label:{value:"Position X",angle:-90,position:"left",offset:20,style:{fill:"var(--text-secondary)"}},domain:C,stroke:"var(--text-secondary)",tick:{fill:"var(--text-secondary)"},tickFormatter:a=>Math.round(a).toString()}),e.jsx(L,{content:e.jsx(D,{}),cursor:{strokeDasharray:"3 3"}}),e.jsx(Me,{data:g,onClick:a=>I(a),style:{cursor:"pointer"},children:g.map((a,p)=>{const k=Math.min(Math.log2(a.count+1)*3+5,18),o=Math.round(k);return e.jsx(K,{fill:P(a.deathType),stroke:a.count>1?"white":"rgba(255,255,255,0.5)",strokeWidth:a.count>1?2:1,opacity:.85,r:o},`cell-${p}`)})})]})})})}):e.jsxs("div",{className:"donnees-manquantes",style:{padding:"2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:b==="deaths"?`Aucune mort localisÃ©e pour ${l} sur cette carte.`:`Aucun kill localisÃ© pour ${l} sur cette carte.`}),e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Les donnÃ©es de position ne sont disponibles que pour les parties rÃ©centes."})]})}),e.jsxs("div",{className:"lycans-section-description",style:{flex:"1 1 100%",marginTop:"1.5rem"},children:[e.jsx("h4",{children:"Ã€ propos de cette carte"}),e.jsxs("p",{children:["Cette carte affiche ",b==="deaths"?`les emplacements oÃ¹ ${l} est mort`:`les emplacements oÃ¹ ${l} a Ã©liminÃ© d'autres joueurs`," au cours des parties. Les couleurs indiquent le type de mort. Cliquez sur un point pour voir les dÃ©tails de la partie."]}),e.jsxs("p",{style:{marginTop:"0.5rem"},children:[e.jsx("strong",{children:"ðŸ’€ Morts:"})," OÃ¹ le joueur a Ã©tÃ© Ã©liminÃ©",e.jsx("br",{}),e.jsx("strong",{children:"âš”ï¸ Kills:"})," OÃ¹ le joueur a Ã©liminÃ© d'autres joueurs"]})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e disponible"})}function la(){const{settings:l,updateSettings:w}=Q(),{navigateToGameDetails:j,navigationState:y,updateNavigationState:R}=U(),{data:f,isLoading:b,error:v}=he(),{joueursData:d,isLoading:m}=ee(),{data:r,isLoading:t,error:s}=De(l.highlightedPlayer),c=se(d),[n,g]=M.useState(""),[i,C]=M.useState(()=>l.useIndependentFilters&&l.independentFilters?.gameTypeEnabled?l.independentFilters.gameFilter==="modded"?"modded":"all":l.gameFilter==="modded"?"modded":"all"),S=M.useMemo(()=>l.useIndependentFilters&&l.independentFilters?.gameTypeEnabled?l.independentFilters.gameFilter==="modded":l.gameFilter==="modded",[l.useIndependentFilters,l.independentFilters?.gameTypeEnabled,l.independentFilters?.gameFilter,l.gameFilter]),[P,D]=M.useState(y.selectedPlayerSelectionView||"achievements"),[I,a]=M.useState("session"),[p,k]=M.useState("all");M.useEffect(()=>{if(l.useIndependentFilters&&l.independentFilters?.gameTypeEnabled){const h=l.independentFilters.gameFilter==="modded"?"modded":"all";C(h)}else if(!l.useIndependentFilters){const h=l.gameFilter==="modded"?"modded":"all";C(h)}},[l.gameFilter,l.useIndependentFilters,l.independentFilters?.gameTypeEnabled,l.independentFilters?.gameFilter]),M.useEffect(()=>{S&&i!=="modded"&&C("modded")},[S,i]),M.useEffect(()=>{y.selectedPlayerSelectionView&&D(y.selectedPlayerSelectionView)},[y.selectedPlayerSelectionView]);const{data:o}=te(l.highlightedPlayer||""),u=M.useMemo(()=>{if(!f||!f.GameStats)return[];const h=S?f.GameStats.filter($=>$.Modded===!0):f.GameStats,z=new Map;return h.forEach($=>{const A=new Date($.StartDate);$.PlayerStats.forEach(q=>{const H=X(q),ue=d?.Players?.find(pe=>pe.SteamID===H)?.Joueur||q.Username;z.has(H)||z.set(H,{games:0,wins:0,firstDate:A,lastDate:A,displayName:ue});const Y=z.get(H);Y.games++,q.Victorious&&Y.wins++,A<Y.firstDate&&(Y.firstDate=A),A>Y.lastDate&&(Y.lastDate=A)})}),Array.from(z.entries()).map(([$,A])=>{let q=d?.Players?.find(H=>H.SteamID===$);return q||(q=d?.Players?.find(H=>H.Joueur===A.displayName)),{id:$,name:A.displayName,totalGames:A.games,totalWins:A.wins,winRate:A.games>0?A.wins/A.games*100:0,firstGameDate:A.firstDate.toLocaleDateString("fr-FR"),lastGameDate:A.lastDate.toLocaleDateString("fr-FR"),isHighlighted:A.displayName===l.highlightedPlayer,image:q?.Image||null,twitch:q?.Twitch||null,youtube:q?.Youtube||null}})},[f,l.highlightedPlayer,d,S]),x=M.useMemo(()=>{if(!n.trim())return u;const h=n.toLowerCase();return u.filter(z=>z.name.toLowerCase().includes(h))},[u,n]),N=M.useMemo(()=>[...x].sort((h,z)=>z.totalGames-h.totalGames),[x]),F=h=>{w({highlightedPlayer:h}),g("")},T=h=>{D(h),R({selectedPlayerSelectionView:h})};return b||m?e.jsxs("div",{className:"player-selection-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des joueurs..."})]}):v?e.jsxs("div",{className:"player-selection-error",children:[e.jsx("h2",{children:"Erreur"}),e.jsxs("p",{children:["Impossible de charger les donnÃ©es des joueurs: ",v]})]}):!f||u.length===0?e.jsxs("div",{className:"player-selection-empty",children:[e.jsx("h2",{children:"Aucune donnÃ©e disponible"}),e.jsx("p",{children:"Aucun joueur trouvÃ© dans les donnÃ©es."})]}):e.jsxs("div",{className:"player-selection-container",children:[!l.highlightedPlayer&&e.jsxs("div",{className:"search-controls-header",children:[e.jsxs("div",{className:"selection-prompt-content",children:[e.jsx("h2",{children:"SÃ©lectionnez un joueur"}),e.jsx("p",{children:"Choisissez un joueur pour le mettre en Ã©vidence dans tous les graphiques."})]}),e.jsxs("div",{className:"search-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un joueur...",value:n,onChange:h=>g(h.target.value),className:"search-input"}),e.jsx("span",{className:"search-icon",children:"ðŸ”"})]}),e.jsxs("div",{className:"player-count",children:[x.length," joueur",x.length!==1?"s":"",n&&` (filtrÃ©${x.length!==1?"s":""} de ${u.length})`]})]})]}),e.jsx("div",{className:"player-display",children:n?x.length>0?e.jsxs("div",{className:"search-results",children:[e.jsxs("div",{className:"search-results-header",children:[e.jsx("h3",{children:"RÃ©sultats de recherche:"}),e.jsx("button",{className:"clear-search-btn",onClick:()=>g(""),children:"Effacer la recherche"})]}),e.jsx("div",{className:"suggestion-list",children:N.map(h=>e.jsxs("button",{className:`suggestion-btn ${h.isHighlighted?"highlighted":""}`,onClick:()=>F(h.name),children:[h.image?e.jsx("img",{src:h.image,alt:h.name,className:"player-avatar"}):e.jsx("div",{className:"player-avatar-default",style:{"--player-color":c[h.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"suggestion-btn-content",children:[e.jsxs("div",{className:"suggestion-btn-name",children:[h.name,h.isHighlighted&&e.jsx("span",{className:"highlight-indicator",children:" â˜…"})]}),e.jsxs("div",{className:"suggestion-btn-stats",children:[h.totalGames," parties â€¢ ",h.winRate.toFixed(1),"% victoires"]})]})]},h.id))})]}):e.jsxs("div",{className:"no-results",children:[e.jsxs("p",{children:['Aucun joueur trouvÃ© pour "',n,'"']}),e.jsx("button",{className:"clear-search-btn",onClick:()=>g(""),children:"Effacer la recherche"})]}):l.highlightedPlayer?(()=>{const h=u.find(z=>z.name===l.highlightedPlayer);return h?e.jsxs("div",{className:"single-player-card highlighted",children:[e.jsxs("div",{className:"player-card-header",children:[e.jsx("h3",{className:"player-name",children:h.name}),e.jsx("span",{className:"highlight-badge",children:"â˜… Mis en Ã©vidence"})]}),e.jsxs("div",{className:"player-info-row",children:[h.image?e.jsx("img",{src:h.image,alt:h.name,className:"player-avatar large"}):e.jsx("div",{className:"player-avatar-default large",style:{"--player-color":c[h.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"player-avatar-overlay"})}),e.jsxs("div",{className:"player-info-text",children:[e.jsxs("div",{className:"player-stats-summary",children:[h.totalGames," parties â€¢ ",h.totalWins," victoires â€¢ ",h.winRate.toFixed(1),"% taux de victoire"]}),(h.twitch||h.youtube)&&e.jsxs("div",{className:"social-links",children:[h.twitch&&e.jsx("a",{href:h.twitch,target:"_blank",rel:"noopener noreferrer",className:"social-link twitch",children:"ðŸ“º Twitch"}),h.youtube&&e.jsx("a",{href:h.youtube,target:"_blank",rel:"noopener noreferrer",className:"social-link youtube",children:"ðŸŽ¬ YouTube"})]})]})]}),e.jsxs("div",{className:"player-actions",children:[e.jsxs("div",{className:"lycans-categories-selection",style:{marginBottom:"1rem"},children:[e.jsx("button",{className:`lycans-categorie-btn ${P==="achievements"?"active":""}`,onClick:()=>T("achievements"),children:"Classement"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="evolution"?"active":""}`,onClick:()=>T("evolution"),children:"Ã‰volution"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="camps"?"active":""}`,onClick:()=>T("camps"),children:"Camps"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="roles"?"active":""}`,onClick:()=>T("roles"),children:"RÃ´les"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="maps"?"active":""}`,onClick:()=>T("maps"),children:"Maps"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="kills"?"active":""}`,onClick:()=>T("kills"),children:"Kills"}),e.jsx("button",{className:`lycans-categorie-btn ${P==="deathmap"?"active":""}`,onClick:()=>T("deathmap"),children:"ðŸ—ºï¸ Carte"})]}),P==="achievements"&&e.jsxs("div",{className:"achievements-section",children:[t?e.jsxs("div",{className:"achievements-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Chargement des classements..."})]}):s?e.jsx("div",{className:"achievements-error",children:e.jsxs("p",{children:["âŒ Erreur lors du chargement des classements: ",s]})}):r?e.jsx(Ae,{achievements:i==="all"?r.allGamesAchievements:r.moddedOnlyAchievements,title:i==="all"?"Classements - Toutes les parties":"Classements - Parties moddÃ©es",emptyMessage:"Aucun classement dans cette catÃ©gorie",achievementType:i}):e.jsx("div",{className:"achievements-empty",children:e.jsx("p",{children:"Aucun classement disponible pour ce joueur"})}),e.jsxs("div",{className:"achievements-filter",children:[!S&&e.jsx("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:z=>{z.stopPropagation(),C("all")},children:"Toutes les parties"}),e.jsx("button",{className:`filter-btn ${i==="modded"?"active":""}`,onClick:z=>{z.stopPropagation(),C("modded")},disabled:S,children:"Parties moddÃ©es"})]})]}),P==="evolution"&&e.jsxs("div",{className:"player-history-section",children:[o&&e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Total Parties"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{j({selectedPlayer:h.name,fromComponent:"Historique Joueur - Total Parties"})},title:`Cliquer pour voir toutes les parties de ${h.name}`,style:{fontSize:"1.3rem"},children:o.totalGames}),e.jsx("p",{children:"parties jouÃ©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Temps de jeu cumulÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{fontSize:"1.3rem"},children:ve(o.totalPlayTime)}),e.jsx("p",{children:"temps total de jeu"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Victoires"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{j({selectedPlayer:h.name,selectedPlayerWinMode:"wins-only",fromComponent:"Historique Joueur - Victoires"})},title:`Cliquer pour voir toutes les victoires de ${h.name}`,style:{fontSize:"1.3rem"},children:o.totalWins}),e.jsx("p",{children:"parties gagnÃ©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",style:{fontSize:"0.9rem"},children:[e.jsx("h3",{children:"Taux de Victoire"}),e.jsxs("div",{className:"lycans-valeur-principale",style:{fontSize:"1.3rem"},children:[o.winRate,"%"]}),e.jsx("p",{children:"pourcentage global"})]})]}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"grouping-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Groupement:"}),e.jsxs("select",{id:"grouping-select",value:I,onChange:z=>a(z.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"160px"},children:[e.jsx("option",{value:"session",children:"Par session"}),e.jsx("option",{value:"month",children:"Par mois"}),e.jsx("option",{value:"quarter",children:"Par trimestre"}),e.jsx("option",{value:"year",children:"Par annÃ©e"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-filter-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),e.jsxs("select",{id:"camp-filter-select",value:p,onChange:z=>k(z.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"160px"},children:[e.jsx("option",{value:"all",children:"Tous les camps"}),e.jsx("option",{value:"Villageois",children:"Villageois"}),e.jsx("option",{value:"Loup",children:"Loups"}),e.jsx("option",{value:"solo",children:"RÃ´les solo"})]})]})]}),e.jsx($e,{selectedPlayerName:h.name,groupingMethod:I,campFilter:p})]}),P==="camps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(ze,{selectedPlayerName:h.name})}),P==="maps"&&e.jsx("div",{className:"player-history-section",children:e.jsx(Ie,{selectedPlayerName:h.name})}),P==="roles"&&e.jsx("div",{className:"player-history-section",children:e.jsx(qe,{selectedPlayerName:h.name})}),P==="kills"&&e.jsx("div",{className:"player-history-section",children:e.jsx(We,{selectedPlayerName:h.name})}),P==="deathmap"&&e.jsx("div",{className:"player-history-section",children:e.jsx(Ee,{selectedPlayerName:h.name})}),e.jsx("button",{className:"highlight-btn active",onClick:z=>{z.stopPropagation(),w({highlightedPlayer:null})},children:"â˜… Retirer la mise en Ã©vidence"})]}),e.jsxs("div",{className:"player-period",children:[e.jsx("span",{className:"period-label",children:"PÃ©riode d'activitÃ©:"}),e.jsxs("span",{className:"period-range",children:[h.firstGameDate," - ",h.lastGameDate]})]})]}):e.jsxs("div",{className:"no-player-found",children:[e.jsxs("p",{children:['Le joueur "',l.highlightedPlayer,`" n'a pas Ã©tÃ© trouvÃ© dans les donnÃ©es.`]}),e.jsx("button",{className:"clear-selection-btn",onClick:()=>w({highlightedPlayer:null}),children:"Effacer la sÃ©lection"})]})})():e.jsx("div",{className:"player-selection-prompt",children:e.jsx("div",{className:"character-selection-grid",children:N.map(h=>e.jsxs("div",{className:`character-card ${h.isHighlighted?"highlighted":""}`,onClick:()=>F(h.name),title:`${h.name} - ${h.totalGames} parties, ${h.winRate.toFixed(1)}% victoires`,children:[e.jsx("div",{className:"character-avatar-container",children:h.image?e.jsx("img",{src:h.image,alt:h.name,className:"character-avatar"}):e.jsx("div",{className:"character-avatar-default",style:{"--player-color":c[h.name]||"var(--accent-primary)"},children:e.jsx("div",{className:"character-avatar-overlay"})})}),e.jsx("div",{className:"character-name",children:h.name}),(h.twitch||h.youtube)&&e.jsxs("div",{className:"character-social-indicators",children:[h.twitch&&e.jsx("div",{className:"social-indicator twitch",title:"Twitch",children:"T"}),h.youtube&&e.jsx("div",{className:"social-indicator youtube",title:"YouTube",children:"Y"})]})]},h.id))})})})]})}export{la as PlayerSelectionPage};
