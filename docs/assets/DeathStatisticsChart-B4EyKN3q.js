import{g as w,u as J,a as Z,r as M,j as e,d as de}from"./index-Bmik-H42.js";import{g as z,a as Q,u as X,D as V}from"./datasyncExport-Ci3oNmVZ.js";import{i as le,D as T,g as he}from"./deathTypes-CGUOTngO.js";import{b as ae,m as ee,a as ne,u as oe}from"./api-BKCsxjgk.js";import{F as I,B as W,C as O,X as F,Y as U,a as G,b as Y}from"./FullscreenChart-BZfRGQji.js";import{R as _,T as q}from"./CategoricalChart-8NvXATq1.js";import{u as ce}from"./useJoueursData-DzXyU5iU.js";function ge(r,y){if(!r||!y)return!1;const c=r.split(".").map(Number),g=y.split(".").map(Number);for(let n=0;n<Math.max(c.length,g.length);n++){const u=c[n]||0,v=g[n]||0;if(u>v)return!0;if(u<v)return!1}return!0}function te(r){return r===T.SURVIVALIST_NOT_SAVED?T.BY_WOLF:r}function me(r){const y=new Set;r.filter(u=>!u.LegacyData||u.LegacyData.deathInformationFilled===!0).forEach(u=>{u.PlayerStats.forEach(v=>{const s=z(v.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});y.add(s)})});const g=Array.from(y);return[...ae.filter(u=>g.includes(u)),...g.filter(u=>!ae.includes(u)).sort()]}function ie(r){return he(r)}function re(r){switch(r){case T.VOTED:return"Mort aux votes";case T.BY_WOLF:case T.SURVIVALIST_NOT_SAVED:return"Kill en Loup";case T.BY_ZOMBIE:return"Kill en Zombie";case T.BY_BEAST:return"Kill en B√™te";case T.BY_AVATAR_CHAIN:return"Mort d'Avatar";case T.BULLET:return"Tir de Chasseur";case T.BULLET_HUMAN:return"Kill de Chasseur (sur humain)";case T.BULLET_WOLF:return"Kill de Chasseur (sur loup)";case T.SHERIF_SUCCESS:return"Kill de Sh√©rif";case T.OTHER_AGENT:return"Kill d'Agent";case T.AVENGER:return"Kill de Vengeur";case T.SEER:return"Kill de Devin";case T.HANTED:return"Kill avec Potion hant√©e";case T.ASSASSIN:return"Kill avec Potion (Assassin)";case T.LOVER_DEATH:return"Kill d'amoureux";case T.BOMB:return"Explosion";case T.CRUSHED:return"√âcrasement";case T.STARVATION:return"Famine";case T.STARVATION_AS_BEAST:return"Tuerie bestiale";case T.FALL:return"Chute mortelle";case T.UNKNOWN:return"Kill inconnu";default:return""}}function ue(r){const y=new Set;r.forEach(n=>{n.PlayerStats.forEach(u=>{if(u.DeathType&&le(u.DeathType)){const v=te(u.DeathType);v&&y.add(v)}})});const c=Array.from(y),g=[T.BY_WOLF,T.VOTED,T.BULLET,T.BULLET_HUMAN,T.BULLET_WOLF,T.BY_ZOMBIE,T.ASSASSIN,T.AVENGER,T.LOVER_DEATH];return[...g.filter(n=>c.includes(n)),...c.filter(n=>!g.includes(n)).sort()]}function ye(r,y){return r.PlayerStats.filter(c=>c.DeathType&&le(c.DeathType)&&(c.DeathTiming||c.DeathType)).map(c=>{let g=null,n=null;if(c.KillerName){const u=r.PlayerStats.find(v=>v.Username===c.KillerName);if(u){n=w(u);const v=Q(u.MainRoleInitial,u.MainRoleChanges||[]);g=z(v,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1}),v&&v!==u.MainRoleInitial&&(v==="Loup"?g="Loup":v==="Zombie"&&(g="Vaudou"))}}return{playerId:w(c),playerName:c.Username,deathType:te(c.DeathType),killerId:n,killerName:c.KillerName,killerCamp:g}}).filter(c=>{if(!y||y==="Tous les camps")return!0;const g=r.PlayerStats.find(u=>u.Username===c.playerName);return g?z(g.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y:!1})}function pe(r,y,c){const g=[];r.PlayerStats.forEach(u=>{if(u.KillerName&&u.DeathType){if(u.DeathType===T.VOTED||u.DeathType===T.STARVATION||u.DeathType===T.FALL||u.DeathType===T.BY_AVATAR_CHAIN)return;const v=r.PlayerStats.find(k=>k.Username===u.KillerName);if(!v)return;let s=z(v.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});const x=Q(v.MainRoleInitial,v.MainRoleChanges||[]);x&&x!==v.MainRoleInitial&&(x==="Loup"?s="Loup":x==="Zombie"&&(s="Vaudou"));const j=z(u.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0});g.push({killerId:w(v),killerName:v.Username,victimId:w(u),victimName:u.Username,deathType:te(u.DeathType),killerCamp:s,victimCamp:j})}});let n=g;return y&&y!=="Tous les camps"&&(n=n.filter(u=>u.killerCamp===y)),c&&c!=="Tous les camps"&&(n=n.filter(u=>c==="Roles solo"?u.victimCamp!=="Villageois"&&u.victimCamp!=="Loup":u.victimCamp===c)),n}function ve(r,y,c){if(r.length===0)return null;const g=r.filter(o=>!o.LegacyData||o.LegacyData.deathInformationFilled===!0);if(g.length===0)return null;const n=[],u={},v={};g.forEach(o=>{ye(o,y).forEach(a=>{n.push({...a,gameId:o.Id})}),o.PlayerStats.forEach(a=>{const t=w(a),i=a.Username;v[t]=i,(!y||y==="Tous les camps"||z(a.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y)&&(u[t]=(u[t]||0)+1)})});const s=n.length,x=g.length,j=x>0?s/x:0,k={};n.forEach(o=>{k[o.deathType]=(k[o.deathType]||0)+1});const S=Object.entries(k).map(([o,P])=>({type:o,count:P||0,percentage:s>0?(P||0)/s*100:0})).sort((o,P)=>P.count-o.count),L={};g.forEach(o=>{pe(o,y,c).forEach(a=>{v[a.killerId]=a.killerName,v[a.victimId]=a.victimName,L[a.killerId]||(L[a.killerId]={kills:0,victims:new Set,killsByDeathType:{}}),L[a.killerId].kills++,L[a.killerId].victims.add(a.victimId),L[a.killerId].killsByDeathType[a.deathType]=(L[a.killerId].killsByDeathType[a.deathType]||0)+1})});const N=Object.entries(L).map(([o,P])=>{const a=u[o]||0,t=a>0?P.kills/a:0;return{killerName:v[o]||o,kills:P.kills,victims:Array.from(P.victims).map(i=>v[i]||i),percentage:s>0?P.kills/s*100:0,gamesPlayed:a,averageKillsPerGame:t,killsByDeathType:P.killsByDeathType}}).sort((o,P)=>P.kills-o.kills),p={};n.forEach(o=>{p[o.playerId]||(p[o.playerId]={totalDeaths:0,deathsByType:{},killedById:{},deathDays:[]});const P=p[o.playerId];P.totalDeaths++,P.deathsByType[o.deathType]=(P.deathsByType[o.deathType]||0)+1,o.killerId&&(P.killedById[o.killerId]=(P.killedById[o.killerId]||0)+1)});const m=[];Object.entries(p).forEach(([o,P])=>{const a=v[o]||o,t={};Object.entries(P.killedById).forEach(([i,d])=>{const b=v[i]||i;t[b]=(t[b]||0)+d}),m.push({playerName:a,totalDeaths:P.totalDeaths,deathsByType:P.deathsByType,killedBy:t,deathRate:u[o]>0?P.totalDeaths/u[o]:0,gamesPlayed:u[o]||0})}),Object.entries(u).forEach(([o,P])=>{p[o]||m.push({playerName:v[o]||o,totalDeaths:0,deathsByType:{},killedBy:{},deathRate:0,gamesPlayed:P})});const h=m.sort((o,P)=>P.totalDeaths-o.totalDeaths),f=S.length>0?S[0].type:null,A=N.length>0?N[0].killerName:null;return{totalDeaths:s,totalGames:x,averageDeathsPerGame:j,deathsByType:S,killerStats:N,playerDeathStats:h,mostCommonDeathType:f,mostDeadlyKiller:A}}function xe(r,y){const c=r.filter(k=>!k.LegacyData||k.LegacyData.deathInformationFilled===!0),g={},n={},u=c.length,v=[T.BULLET,T.BULLET_HUMAN,T.BULLET_WOLF];c.forEach(k=>{const S=new Set;k.PlayerStats.forEach(L=>{const N=L.MainRoleInitial,p=Q(L.MainRoleInitial,L.MainRoleChanges||[]);if(N==="Chasseur"||p==="Chasseur"){const m=w(L);n[m]=L.Username,S.add(m),g[m]||(g[m]={kills:[],gamesPlayed:0,victimsCamps:[],gameVersions:[],gameModded:[]}),g[m].gamesPlayed++}}),k.PlayerStats.forEach(L=>{const N=L.DeathType,p=L.KillerName,m=p?k.PlayerStats.find(f=>f.Username===p):null,h=m?w(m):null;if(h&&m&&(n[h]=m.Username),N&&v.includes(N)&&h&&S.has(h)){const f=z(L.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});g[h].kills.push(N),g[h].victimsCamps.push(f),g[h].gameVersions.push(k.Version),g[h].gameModded.push(k.Modded)}})});const s=Object.entries(g).map(([k,S])=>{const L=S.kills.length,N={};S.kills.forEach(a=>{N[a]=(N[a]||0)+1});const p={};S.victimsCamps.forEach(a=>{p[a]=(p[a]||0)+1});let m=0,h=0;const f={},A={};S.victimsCamps.forEach((a,t)=>{const i=S.gameVersions[t],d=S.gameModded[t];a==="Idiot du Village"?d&&ge(i,"0.202")?(h++,A[a]=(A[a]||0)+1):(m++,f[a]=(f[a]||0)+1):a==="Villageois"?(h++,A[a]=(A[a]||0)+1):(m++,f[a]=(f[a]||0)+1)});const o=S.gamesPlayed>0?L/S.gamesPlayed:0,P=S.gamesPlayed>0?m/S.gamesPlayed:0;return{hunterName:n[k]||k,totalKills:L,nonVillageoisKills:m,villageoisKills:h,gamesPlayedAsHunter:S.gamesPlayed,averageKillsPerGame:o,averageNonVillageoisKillsPerGame:P,killsByDeathType:N,victimsByCamp:p,goodVictimsByCamp:f,badVictimsByCamp:A}}).sort((k,S)=>S.totalKills-k.totalKills),x=s.length>0?s[0].hunterName:null,j=s.length>0?s.sort((k,S)=>S.averageNonVillageoisKillsPerGame-k.averageNonVillageoisKillsPerGame)[0].hunterName:null;return{totalHunters:s.length,totalGames:u,hunterStats:s,bestHunter:x,bestAverageHunter:j}}function fe(r,y){return X(c=>ve(c,r,y))}function je(){return X(r=>me(r))}function Se(r){return X(y=>xe(y))}function se(r){if(!r||r.trim()==="")return null;const c=r.trim().slice(1),g=parseInt(c,10);return isNaN(g)||g<1?null:g}function Pe(r,y){if(r.length===0)return null;const c=r.filter(s=>!s.LegacyData||s.LegacyData.deathInformationFilled===!0);if(c.length===0)return null;const g={},n={};c.forEach(s=>{let x=1;if(s.EndTiming){const j=se(s.EndTiming);j&&(x=j)}s.PlayerStats.forEach(j=>{if(y&&y!=="Tous les camps"&&z(j.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})!==y)return;const k=j.Username;g[k]||(g[k]={playerName:k,totalGames:0,survivalsByDay:{},survivalRatesByDay:{},gamesPlayedByDay:{}});const S=g[k];S.totalGames++;let L=null;j.DeathTiming&&(L=se(j.DeathTiming));for(let N=1;N<=x;N++)S.gamesPlayedByDay[N]||(S.gamesPlayedByDay[N]=0,S.survivalsByDay[N]=0),n[N]||(n[N]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),S.gamesPlayedByDay[N]++,n[N].playersOnDay++,(!L||L>N)&&(S.survivalsByDay[N]++,n[N].survivorsOnDay++)});for(let j=1;j<=x;j++)n[j]||(n[j]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),n[j].gamesReachingDay++}),Object.values(g).forEach(s=>{Object.keys(s.gamesPlayedByDay).forEach(x=>{const j=parseInt(x),k=s.gamesPlayedByDay[j],S=s.survivalsByDay[j];k>0?s.survivalRatesByDay[j]=S/k*100:s.survivalRatesByDay[j]=0})});const u=Object.values(g).filter(s=>s.totalGames>0).sort((s,x)=>x.totalGames-s.totalGames),v=Object.entries(n).map(([s,x])=>({dayNumber:parseInt(s),totalGamesReachingDay:x.gamesReachingDay,totalPlayersOnDay:x.playersOnDay,averageSurvivalRate:x.playersOnDay>0?x.survivorsOnDay/x.playersOnDay*100:0})).sort((s,x)=>s.dayNumber-x.dayNumber);return{totalGames:c.length,totalPlayersAnalyzed:u.length,playerSurvivalStats:u,dayStats:v}}function De(r,y,c=10){return r.playerSurvivalStats.filter(g=>(g.gamesPlayedByDay[y]||0)>=c).map(g=>({playerName:g.playerName,survivalRate:g.survivalRatesByDay[y]||0,gamesPlayed:g.totalGames,timesReachedDay:g.gamesPlayedByDay[y]||0,timesSurvivedDay:g.survivalsByDay[y]||0})).sort((g,n)=>n.survivalRate-g.survivalRate).slice(0,15)}function Te(r,y,c=10){return r.playerSurvivalStats.filter(g=>(g.gamesPlayedByDay[y]||0)>=c).map(g=>({playerName:g.playerName,survivalRate:g.survivalRatesByDay[y]||0,gamesPlayed:g.totalGames,timesReachedDay:g.gamesPlayedByDay[y]||0,timesSurvivedDay:g.survivalsByDay[y]||0})).sort((g,n)=>g.survivalRate-n.survivalRate).slice(0,15)}function be(r){return X(y=>Pe(y,r))}function Be({deathStats:r,selectedCamp:y,victimCampFilter:c,minGamesForAverage:g,onMinGamesChange:n,availableDeathTypes:u,deathTypeColors:v,totalEligibleForAverage:s}){const{navigateToGameDetails:x}=J(),{settings:j}=Z(),k=a=>{if(c==="Tous les camps"){const t=a.filter(i=>i!==T.BULLET_HUMAN&&i!==T.BULLET_WOLF);return(a.includes(T.BULLET_HUMAN)||a.includes(T.BULLET_WOLF))&&!t.includes(T.BULLET)&&t.push(T.BULLET),t}return a},S=M.useMemo(()=>k(u),[u,c]),L=M.useMemo(()=>{const a={...v};if(c==="Tous les camps"&&!a[T.BULLET]){const t=v[T.BULLET_HUMAN]||v[T.BULLET_WOLF];t&&(a[T.BULLET]=t)}return a},[v,c]),N=a=>{if(c==="Tous les camps"){const t=a.killsByDeathType[T.BULLET_HUMAN]||0,i=a.killsByDeathType[T.BULLET_WOLF]||0,d=a.killsByDeathType[T.BULLET]||0,b={...a.killsByDeathType};return b[T.BULLET]=t+i+d,delete b[T.BULLET_HUMAN],delete b[T.BULLET_WOLF],{...a,killsByDeathType:b}}return a},p=a=>{let t="Top Tueurs";return y!=="Tous les camps"&&(t+=` en ${y}`),c!=="Tous les camps"&&(c==="Roles solo"?t+=" (victimes: Roles solo)":t+=` (victimes: ${c})`),a==="total"?t+=" (Total)":t+=" (Moyenne par Partie)",t},{totalKillsData:m,averageKillsData:h,highlightedPlayerAddedToTotal:f,highlightedPlayerAddedToAverage:A}=M.useMemo(()=>{if(!r)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1};const a=r.killerStats.sort((D,B)=>B.kills-D.kills).slice(0,15),t=j.highlightedPlayer&&a.some(D=>D.killerName===j.highlightedPlayer),i=a.map(D=>{const B=N(D),K={name:B.killerName,value:B.kills,victims:B.victims.length,percentage:B.percentage,gamesPlayed:B.gamesPlayed,averageKillsPerGame:B.averageKillsPerGame,isHighlightedAddition:!1};return S.forEach(R=>{K[R]=B.killsByDeathType[R]||0}),K});let d=!1;if(j.highlightedPlayer&&!t){const D=r.killerStats.find(B=>B.killerName===j.highlightedPlayer);if(D){const B=N(D),K={name:B.killerName,value:B.kills,victims:B.victims.length,percentage:B.percentage,gamesPlayed:B.gamesPlayed,averageKillsPerGame:B.averageKillsPerGame,isHighlightedAddition:!0};S.forEach(R=>{K[R]=B.killsByDeathType[R]||0}),i.push(K),d=!0}}const l=r.killerStats.filter(D=>D.gamesPlayed>=g).sort((D,B)=>B.averageKillsPerGame-D.averageKillsPerGame).slice(0,15),C=j.highlightedPlayer&&l.some(D=>D.killerName===j.highlightedPlayer),E=l.map(D=>{const B=N(D),K={name:B.killerName,value:B.averageKillsPerGame,victims:B.victims.length,percentage:B.percentage,gamesPlayed:B.gamesPlayed,averageKillsPerGame:B.averageKillsPerGame,isHighlightedAddition:!1};return S.forEach(R=>{const $=B.killsByDeathType[R]||0;K[R]=B.gamesPlayed>0?$/B.gamesPlayed:0}),K});let H=!1;if(j.highlightedPlayer&&!C){const D=r.killerStats.find(B=>B.killerName===j.highlightedPlayer);if(D){const B=N(D),K={name:B.killerName,value:B.averageKillsPerGame,victims:B.victims.length,percentage:B.percentage,gamesPlayed:B.gamesPlayed,averageKillsPerGame:B.averageKillsPerGame,isHighlightedAddition:!0};S.forEach(R=>{const $=B.killsByDeathType[R]||0;K[R]=B.gamesPlayed>0?$/B.gamesPlayed:0}),E.push(K),H=!0}}return{totalKillsData:i,averageKillsData:E,highlightedPlayerAddedToTotal:d,highlightedPlayerAddedToAverage:H}},[r,j.highlightedPlayer,g,S,c]),o=({active:a,payload:t,label:i})=>{if(a&&t&&t.length){const d=t[0].payload,b=d.isHighlightedAddition,l=j.highlightedPlayer===d.name,C=S.reduce((E,H)=>E+(d[H]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:l?"var(--accent-primary)":"var(--text-primary)"},children:[i,b&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",C]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jou√©es:"})," ",d.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"R√©partition par type de kill:"}),S.map(E=>({deathType:E,count:d[E]||0})).filter(E=>E.count>0).sort((E,H)=>H.count-E.count).map(({deathType:E,count:H})=>e.jsxs("p",{style:{color:L[E],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[re(E),":"]})," ",H]},E))]}),b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection personnelle"}),l&&!b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null},P=({active:a,payload:t,label:i})=>{if(a&&t&&t.length){const d=t[0].payload,b=d.isHighlightedAddition,l=j.highlightedPlayer===d.name,C=d.gamesPlayed>=g,E=r?.killerStats.find(K=>K.killerName===d.name),H=E?N(E):null,D=S.reduce((K,R)=>K+(d[R]||0),0),B=H?H.kills:Math.round(D*d.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:l?"var(--accent-primary)":"var(--text-primary)"},children:[i,b&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",D.toFixed(2)," (",B," kills /",d.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jou√©es:"})," ",d.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"R√©partition par type de kill (moyenne):"}),S.map(K=>({deathType:K,avgCount:d[K]||0,totalKillsForDeathType:H?H.killsByDeathType[K]||0:Math.round((d[K]||0)*d.gamesPlayed)})).filter(K=>K.avgCount>0).sort((K,R)=>R.avgCount-K.avgCount).map(({deathType:K,avgCount:R,totalKillsForDeathType:$})=>e.jsxs("p",{style:{color:L[K],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[re(K),":"]})," ",R.toFixed(2)," (",$," kills /",d.gamesPlayed," games)"]},K))]}),b&&!C&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["üéØ Affich√© via s√©lection (< ",g," parties)"]}),b&&C&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection (hors top 15)"}),l&&!b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p("total")}),f&&j.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',j.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:p("total"),children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:m,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:a,y:t,payload:i})=>e.jsx("text",{x:a,y:t,dy:10,fill:j.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:j.highlightedPlayer===i.value?14:12,fontWeight:j.highlightedPlayer===i.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${a} ${t})`,children:i.value})}),e.jsx(U,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(o,{})}),S.map(a=>e.jsx(G,{dataKey:a,name:a,stackId:"kills",fill:L[a],onClick:t=>{const i={selectedPlayer:t?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(i.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),x(i)}},a))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,m.filter(a=>!a.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p("average")}),A&&j.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',j.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:g,onChange:a=>n(Number(a.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ee.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsx(I,{title:p("average"),children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:h,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:a,y:t,payload:i})=>e.jsx("text",{x:a,y:t,dy:10,fill:j.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:j.highlightedPlayer===i.value?14:12,fontWeight:j.highlightedPlayer===i.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${a} ${t})`,children:i.value})}),e.jsx(U,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(P,{})}),S.map(a=>e.jsx(G,{dataKey:a,name:a,stackId:"averageKills",fill:L[a],onClick:t=>{const i={selectedPlayer:t?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(i.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),x(i)}},a))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,h.filter(a=>!a.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",s," ayant au moins ",g," partie",g>1?"s":"",")"]})]})]})}function Ae({deathStats:r,selectedCamp:y,minGamesForAverage:c,onMinGamesChange:g,availableDeathTypes:n,deathTypeColors:u}){const{navigateToGameDetails:v}=J(),{settings:s}=Z(),{totalDeathsData:x,survivalRateData:j,highlightedPlayerAddedToDeaths:k,highlightedPlayerAddedToSurvival:S}=M.useMemo(()=>{if(!r)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const p=r.playerDeathStats.sort((i,d)=>d.totalDeaths-i.totalDeaths).slice(0,15),m=s.highlightedPlayer&&p.some(i=>i.playerName===s.highlightedPlayer),h=p.map(i=>{const d=i.gamesPlayed,b=d>0?(d-i.totalDeaths)/d*100:0,l={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:d,deathRate:i.deathRate,survivalRate:b,isHighlightedAddition:!1};return n.forEach(C=>{l[C]=i.deathsByType[C]||0}),l});let f=!1;if(s.highlightedPlayer&&!m){const i=r.playerDeathStats.find(d=>d.playerName===s.highlightedPlayer);if(i){const d=i.gamesPlayed,b=d>0?(d-i.totalDeaths)/d*100:0,l={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:d,deathRate:i.deathRate,survivalRate:b,isHighlightedAddition:!0};n.forEach(C=>{l[C]=i.deathsByType[C]||0}),h.push(l),f=!0}}const o=r.playerDeathStats.filter(i=>i.gamesPlayed>=c).map(i=>({...i,survivalRate:i.gamesPlayed>0?(i.gamesPlayed-i.totalDeaths)/i.gamesPlayed*100:0})).sort((i,d)=>d.survivalRate-i.survivalRate).slice(0,15),P=s.highlightedPlayer&&o.some(i=>i.playerName===s.highlightedPlayer),a=o.map(i=>{const d={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!1};return n.forEach(b=>{const l=i.deathsByType[b]||0;d[b]=i.gamesPlayed>0?l/i.gamesPlayed*100:0}),d});let t=!1;if(s.highlightedPlayer&&!P){const i=r.playerDeathStats.find(d=>d.playerName===s.highlightedPlayer);if(i){const d=i.gamesPlayed>0?(i.gamesPlayed-i.totalDeaths)/i.gamesPlayed*100:0,b={name:i.playerName,value:d,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:d,isHighlightedAddition:!0};n.forEach(l=>{const C=i.deathsByType[l]||0;b[l]=i.gamesPlayed>0?C/i.gamesPlayed*100:0}),a.push(b),t=!0}}return{totalDeathsData:h,survivalRateData:a,highlightedPlayerAddedToDeaths:f,highlightedPlayerAddedToSurvival:t}},[r,s.highlightedPlayer,c,n]),L=({active:p,payload:m,label:h})=>{if(p&&m&&m.length){const f=m[0].payload,A=f.isHighlightedAddition,o=s.highlightedPlayer===f.name,P=n.reduce((a,t)=>a+(f[t]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:o?"var(--accent-primary)":"var(--text-primary)"},children:[h,A&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",P]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jou√©es:"})," ",f.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",f.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"R√©partition par type de mort:"}),n.map(a=>{const t=f[a]||0;return t===0?null:e.jsxs("p",{style:{color:u[a],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ie(a),":"]})," ",t]},a)})]}),A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection personnelle"}),o&&!A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null},N=({active:p,payload:m,label:h})=>{if(p&&m&&m.length){const f=m[0].payload,A=f.isHighlightedAddition,o=s.highlightedPlayer===f.name,P=f.gamesPlayed>=c;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:o?"var(--accent-primary)":"var(--text-primary)"},children:[h,A&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",f.survivalRate.toFixed(1),"% (",f.gamesPlayed-f.totalDeaths," survies / ",f.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",f.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jou√©es:"})," ",f.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"R√©partition par type de mort (taux %):"}),n.map(a=>{const t=f[a]||0;return t===0?null:e.jsxs("p",{style:{color:u[a],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ie(a),":"]})," ",t.toFixed(1),"%"]},a)})]}),A&&!P&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["üéØ Affich√© via s√©lection (< ",c," parties)"]}),A&&P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection (hors top 15)"}),o&&!A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`}),k&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',s.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:x,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:p,y:m,payload:h})=>e.jsx("text",{x:p,y:m,dy:10,fill:s.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===h.value?14:12,fontWeight:s.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${p} ${m})`,children:h.value})}),e.jsx(U,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(L,{})}),n.map(p=>e.jsx(G,{dataKey:p,name:p,stackId:"deaths",fill:u[p],onClick:m=>{const h={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(h.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),v(h)}},p))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,x.filter(p=>!p.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",y==="Tous les camps"?"(Total)":` en ${y}`]}),S&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',s.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:c,onChange:p=>g(Number(p.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ee.map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsx(I,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:j,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:p,y:m,payload:h})=>e.jsx("text",{x:p,y:m,dy:10,fill:s.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===h.value?14:12,fontWeight:s.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${p} ${m})`,children:h.value})}),e.jsx(U,{label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(N,{})}),n.map(p=>e.jsx(G,{dataKey:p,name:p,stackId:"survivalRate",fill:u[p],onClick:m=>{const h={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(h.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),v(h)}},p))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(p=>!p.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",c," partie",c>1?"s":"",")"]})]})]})}function Ne({hunterStats:r,isLoading:y,error:c}){const{navigateToGameDetails:g}=J(),{settings:n}=Z(),u=ne(),{joueursData:v}=ce(),s=oe(v),[x,j]=M.useState(null);if(y)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."});if(c)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",c]});if(!r||r.hunterStats.length===0)return e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donn√©e Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]});const{finalBestHuntersData:k,highlightedPlayerAddedToBest:S,finalBadHuntersData:L,highlightedPlayerAddedToBad:N}=(()=>{const f=r.hunterStats.filter(l=>l.gamesPlayedAsHunter>=5).sort((l,C)=>C.averageNonVillageoisKillsPerGame-l.averageNonVillageoisKillsPerGame).slice(0,15),A=n.highlightedPlayer&&f.some(l=>l.hunterName===n.highlightedPlayer);let o=[...f],P=!1;if(n.highlightedPlayer&&!A){const l=r.hunterStats.find(C=>C.hunterName===n.highlightedPlayer);l&&(o.push({...l,isHighlightedAddition:!0}),P=!0)}const a=r.hunterStats.filter(l=>l.gamesPlayedAsHunter>=5).map(l=>({name:l.hunterName,averageVillageoisKills:Number((l.villageoisKills/l.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:l.villageoisKills,totalNonVillageoisKills:l.nonVillageoisKills,totalKills:l.totalKills,gamesPlayed:l.gamesPlayedAsHunter,victimsByCamp:l.victimsByCamp,goodVictimsByCamp:l.goodVictimsByCamp,badVictimsByCamp:l.badVictimsByCamp,hunterName:l.hunterName})),t=a.sort((l,C)=>C.averageVillageoisKills-l.averageVillageoisKills).slice(0,15),i=n.highlightedPlayer&&t.some(l=>l.hunterName===n.highlightedPlayer);let d=[...t],b=!1;if(n.highlightedPlayer&&!i){const l=a.find(C=>C.hunterName===n.highlightedPlayer);l&&(d.push({...l,isHighlightedAddition:!0}),b=!0)}return{finalBestHuntersData:o,highlightedPlayerAddedToBest:P,finalBadHuntersData:d,highlightedPlayerAddedToBad:b}})(),p=({active:h,payload:f,label:A})=>{if(h&&f&&f.length){const o=f[0].payload,P=o.isHighlightedAddition,a=n.highlightedPlayer===o.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:a?"var(--accent-primary)":"var(--text-primary)"},children:[A,P&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Kills non-Villageois/partie:"})," ",o.averageNonVillageoisKillsPerGame.toFixed(2)]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tu√©s:"})," ",o.nonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",o.gamesPlayedAsHunter]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",o.totalKills]}),o.goodVictimsByCamp&&Object.keys(o.goodVictimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Bonnes victimes:"}),Object.entries(o.goodVictimsByCamp).map(([t,i])=>e.jsxs("p",{style:{color:u[t]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[t,":"]})," ",i]},t))]}),P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection personnelle"}),a&&!P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null},m=({active:h,payload:f,label:A})=>{if(h&&f&&f.length){const o=f[0].payload,P=o.isHighlightedAddition,a=n.highlightedPlayer===o.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:a?"var(--accent-primary)":"var(--text-primary)"},children:[A,P&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (üéØ)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Villageois tu√©s/partie:"})," ",o.averageVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total Villageois tu√©s:"})," ",o.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tu√©s:"})," ",o.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",o.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",o.totalKills]}),o.badVictimsByCamp&&Object.keys(o.badVictimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Mauvaises victimes:"}),Object.entries(o.badVictimsByCamp).map(([t,i])=>e.jsxs("p",{style:{color:u[t]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[t,":"]})," ",i]},t))]}),P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection personnelle"}),a&&!P&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Bons Chasseurs"}),S&&n.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',n.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:"Bons Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:k,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:f,payload:A})=>e.jsx("text",{x:h,y:f,dy:10,fill:n.highlightedPlayer===A.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:n.highlightedPlayer===A.value?14:12,fontWeight:n.highlightedPlayer===A.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${f})`,children:A.value})}),e.jsx(U,{label:{value:"Moyenne kills non-Villageois/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(p,{})}),e.jsx(G,{dataKey:"averageNonVillageoisKillsPerGame",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&g({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Bons Chasseurs"})},onMouseEnter:h=>j(h?.hunterName||null),onMouseLeave:()=>j(null),style:{cursor:"pointer"},children:k.map((h,f)=>{const A=n.highlightedPlayer===h.hunterName,o=h.isHighlightedAddition;return e.jsx(Y,{fill:s[h.hunterName]||u.Chasseur||"#8884d8",stroke:A?"var(--accent-primary)":x===h.hunterName?"var(--text-primary)":"none",strokeWidth:A?3:x===h.hunterName?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1},`cell-${f}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,k.filter(h=>!h.isHighlightedAddition).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs"}),N&&n.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',n.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:L,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:f,payload:A})=>e.jsx("text",{x:h,y:f,dy:10,fill:n.highlightedPlayer===A.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:n.highlightedPlayer===A.value?14:12,fontWeight:n.highlightedPlayer===A.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${f})`,children:A.value})}),e.jsx(U,{label:{value:"Moyenne Villageois tu√©s/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(m,{})}),e.jsx(G,{dataKey:"averageVillageoisKills",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&g({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Mauvais Chasseurs"})},onMouseEnter:h=>j(h?.hunterName||null),onMouseLeave:()=>j(null),style:{cursor:"pointer"},children:L.map((h,f)=>{const A=n.highlightedPlayer===h.hunterName,o=h.isHighlightedAddition;return e.jsx(Y,{fill:s[h.hunterName]||u.Chasseur||"#8884d8",stroke:A?"var(--accent-primary)":x===h.hunterName?"var(--text-primary)":"none",strokeWidth:A?3:x===h.hunterName?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1},`cell-${f}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,L.filter(h=>!h.isHighlightedAddition).length)," des chasseurs ayant le plus tu√© de Villageois (minimum 5 parties en Chasseur)"]})]})]})}function ke({survivalStats:r,selectedCamp:y,minGamesForAverage:c,onMinGamesChange:g,isLoading:n,error:u}){const{navigateToGameDetails:v}=J(),{settings:s}=Z(),{joueursData:x}=ce(),j=oe(x),[k,S]=M.useState(1),[L,N]=M.useState(null),p=M.useMemo(()=>r?r.dayStats.filter(i=>i.totalGamesReachingDay>0).map(i=>i.dayNumber).sort((i,d)=>i-d):[],[r]),m=M.useMemo(()=>p.includes(k)?k:p.length>0?p[0]:1,[k,p]),{highestSurvivalData:h,highlightedPlayerAddedToHighest:f}=M.useMemo(()=>{if(!r)return{highestSurvivalData:[],highlightedPlayerAddedToHighest:!1};const t=De(r,m,c),i=s.highlightedPlayer&&t.some(l=>l.playerName===s.highlightedPlayer),d=t.map(l=>({name:l.playerName,value:l.survivalRate,gamesPlayed:l.gamesPlayed,timesReachedDay:l.timesReachedDay,timesSurvivedDay:l.timesSurvivedDay,isHighlightedAddition:!1}));let b=!1;if(s.highlightedPlayer&&!i){const l=r.playerSurvivalStats.find(C=>C.playerName===s.highlightedPlayer);if(l&&(l.gamesPlayedByDay[m]||0)>=1){const C=l.survivalRatesByDay[m]||0;d.push({name:s.highlightedPlayer,value:C,gamesPlayed:l.totalGames,timesReachedDay:l.gamesPlayedByDay[m]||0,timesSurvivedDay:l.survivalsByDay[m]||0,isHighlightedAddition:!0}),b=!0}}return{highestSurvivalData:d,highlightedPlayerAddedToHighest:b}},[r,m,c,s.highlightedPlayer]),{lowestSurvivalData:A,highlightedPlayerAddedToLowest:o}=M.useMemo(()=>{if(!r)return{lowestSurvivalData:[],highlightedPlayerAddedToLowest:!1};const t=Te(r,m,c),i=s.highlightedPlayer&&t.some(l=>l.playerName===s.highlightedPlayer),d=t.map(l=>({name:l.playerName,value:l.survivalRate,gamesPlayed:l.gamesPlayed,timesReachedDay:l.timesReachedDay,timesSurvivedDay:l.timesSurvivedDay,isHighlightedAddition:!1}));let b=!1;if(s.highlightedPlayer&&!i){const l=r.playerSurvivalStats.find(C=>C.playerName===s.highlightedPlayer);if(l&&(l.gamesPlayedByDay[m]||0)>=1){const C=l.survivalRatesByDay[m]||0;d.push({name:s.highlightedPlayer,value:C,gamesPlayed:l.totalGames,timesReachedDay:l.gamesPlayedByDay[m]||0,timesSurvivedDay:l.survivalsByDay[m]||0,isHighlightedAddition:!0}),b=!0}}return{lowestSurvivalData:d,highlightedPlayerAddedToLowest:b}},[r,m,c,s.highlightedPlayer]),P=t=>{v({selectedPlayer:t,fromComponent:"Statistiques de Survie"})},a=({active:t,payload:i,label:d})=>{if(t&&i&&i.length>0){const b=i[0].payload,l=b.isHighlightedAddition,C=s.highlightedPlayer===b.name,E=b.timesReachedDay>=c;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:d})}),e.jsx("div",{children:e.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Taux de survie Jour ",m,": ",b.value.toFixed(1),"%"]})}),e.jsxs("div",{children:["Parties atteignant le Jour ",m,": ",b.timesReachedDay]}),e.jsxs("div",{children:["A surv√©cu au Jour ",m,": ",b.timesSurvivedDay]}),e.jsxs("div",{children:["Total de parties: ",b.gamesPlayed]}),l&&!E&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["üéØ Affich√© via s√©lection (< ",c," parties ce jour)"]}),l&&E&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Affich√© via s√©lection (hors top 15)"}),C&&!l&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"üéØ Joueur s√©lectionn√©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null};return n?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de survie..."}):u?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",u]}):r?e.jsxs("div",{className:"lycans-survival-stats",children:[e.jsx("div",{className:"lycans-graphique-controles",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"day-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Jour :"}),e.jsx("select",{id:"day-select",value:m,onChange:t=>S(parseInt(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Min. parties :"}),e.jsx("select",{id:"min-games-select",value:c,onChange:t=>g(parseInt(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:ee.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),m&&r.dayStats.find(t=>t.dayNumber===m)&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Parties atteignant le Jour ",m]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:r.dayStats.find(t=>t.dayNumber===m)?.totalGamesReachingDay||0})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Taux de survie moyen Jour ",m]}),e.jsxs("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:[(r.dayStats.find(t=>t.dayNumber===m)?.averageSurvivalRate||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Joueurs √©ligibles (min. ",c," parties)"]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:r.playerSurvivalStats.filter(t=>(t.gamesPlayedByDay[m]||0)>=c).length})]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["üõ°Ô∏è Meilleurs Taux de Survie - Jour ",m]}),f&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',s.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:`üõ°Ô∏è Meilleurs Taux de Survie - Jour ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:h,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:t,y:i,payload:d})=>e.jsx("text",{x:t,y:i,dy:16,textAnchor:"end",transform:`rotate(-45, ${t}, ${i})`,fill:s.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===d.value?14:12,fontWeight:s.highlightedPlayer===d.value?"bold":"normal",children:d.value})}),e.jsx(U,{tickFormatter:t=>`${t.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(a,{})}),e.jsx(G,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:h.map((t,i)=>{const d=s.highlightedPlayer===t.name,b=L===t.name,l=t.isHighlightedAddition;return e.jsx(Y,{fill:j[t.name]||"var(--chart-primary)",stroke:d?"var(--accent-primary)":b?"var(--text-primary)":"none",strokeWidth:d?3:b?2:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1,onClick:()=>P(t.name),onMouseEnter:()=>N(t.name),onMouseLeave:()=>N(null),style:{cursor:"pointer"}},`cell-highest-${i}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["‚ö∞Ô∏è Plus Faibles Taux de Survie - Jour ",m]}),o&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['üéØ "',s.highlightedPlayer,'" affich√© en plus du top 15']})]}),e.jsx(I,{title:`‚ö∞Ô∏è Plus Faibles Taux de Survie - Jour ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:A,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:t,y:i,payload:d})=>e.jsx("text",{x:t,y:i,dy:16,textAnchor:"end",transform:`rotate(-45, ${t}, ${i})`,fill:s.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===d.value?14:12,fontWeight:s.highlightedPlayer===d.value?"bold":"normal",children:d.value})}),e.jsx(U,{tickFormatter:t=>`${t.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(a,{})}),e.jsx(G,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:A.map((t,i)=>{const d=s.highlightedPlayer===t.name,b=L===t.name,l=t.isHighlightedAddition;return e.jsx(Y,{fill:j[t.name]||"var(--chart-color-4)",stroke:d?"var(--accent-primary)":b?"var(--text-primary)":"none",strokeWidth:d?3:b?2:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1,onClick:()=>P(t.name),onMouseEnter:()=>N(t.name),onMouseLeave:()=>N(null),style:{cursor:"pointer"}},`cell-lowest-${i}`)})})]})})})})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note :"})," Les statistiques de survie montrent le pourcentage de fois qu'un joueur survit au Jour ",m," parmi toutes les parties qu'il a jou√©es et qui ont atteint ce jour. ",f||o?"Les joueurs mis en √©vidence apparaissent m√™me s'ils ne sont pas dans le top 15.":""]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e de survie disponible"})}function Ve(){const{navigationState:r,updateNavigationState:y}=J(),[c,g]=M.useState(r.deathStatisticsState?.selectedCamp||r.deathStatsSelectedCamp||"Tous les camps"),[n,u]=M.useState(r.deathStatisticsState?.victimCampFilter||"Tous les camps"),[v,s]=M.useState(r.deathStatisticsState?.minGamesForAverage||25),[x,j]=M.useState(r.deathStatisticsState?.selectedView||"killers"),{data:k}=je(),{data:S,isLoading:L,error:N}=fe(c,n),{data:p,isLoading:m,error:h}=Se(),{data:f,isLoading:A,error:o}=be(c),{data:P}=de(),a=ne();M.useEffect(()=>{(!r.deathStatisticsState||r.deathStatisticsState.selectedCamp!==c||r.deathStatisticsState.victimCampFilter!==n||r.deathStatisticsState.minGamesForAverage!==v||r.deathStatisticsState.selectedView!==x)&&y({deathStatisticsState:{selectedCamp:c,victimCampFilter:n,minGamesForAverage:v,selectedView:x,focusChart:r.deathStatisticsState?.focusChart}})},[c,n,v,x,r.deathStatisticsState,y]);const t=M.useMemo(()=>P?ue(P):[],[P]),i=M.useMemo(()=>{const D={};t.forEach(R=>{R===V.BY_WOLF?D[R]=a.Loup:R===V.VOTED?D[R]="var(--chart-color-1)":R===V.BULLET||R===V.BULLET_HUMAN||R===V.BULLET_WOLF?D[R]=a.Chasseur:R===V.BY_ZOMBIE?D[R]=a.Vaudou:R===V.ASSASSIN?D[R]=a.Alchimiste:R===V.AVENGER?D[R]="var(--chart-color-2)":R===V.LOVER_DEATH?D[R]=a.Amoureux:R===V.BY_BEAST?D[R]="var(--chart-color-3)":R===V.SHERIF_SUCCESS&&(D[R]="var(--chart-color-4)")});const B=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let K=0;return t.forEach(R=>{D[R]||(D[R]=B[K%B.length],K++)}),D},[t,a]),d=D=>{g(D),y({deathStatsSelectedCamp:D,deathStatisticsState:{selectedCamp:D,victimCampFilter:n,minGamesForAverage:v,selectedView:x,focusChart:r.deathStatisticsState?.focusChart}})},b=D=>{u(D),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:D,minGamesForAverage:v,selectedView:x,focusChart:r.deathStatisticsState?.focusChart}})},l=D=>{s(D),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:n,minGamesForAverage:D,selectedView:x,focusChart:r.deathStatisticsState?.focusChart}})},C=D=>{j(D),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:n,minGamesForAverage:v,selectedView:D,focusChart:r.deathStatisticsState?.focusChart}})},{gamesWithKillers:E,totalEligibleForAverage:H}=M.useMemo(()=>{if(!S)return{gamesWithKillers:0,totalEligibleForAverage:0};const D=S.killerStats.filter(B=>B.gamesPlayed>=v);return{gamesWithKillers:S.totalGames,totalEligibleForAverage:D.length}},[S,v]);return L?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."}):N?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]}):S?e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"üíÄ Statistiques de Morts & Kills"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${x==="killers"?"active":""}`,onClick:()=>C("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${x==="deaths"?"active":""}`,onClick:()=>C("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${x==="survival"?"active":""}`,onClick:()=>C("survival"),children:"Survie"}),e.jsx("button",{className:`lycans-categorie-btn ${x==="hunter"?"active":""}`,onClick:()=>C("hunter"),children:"Chasseur"})]}),(x==="killers"||x==="deaths"||x==="survival")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:c,onChange:D=>d(D.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),k?.map(D=>e.jsx("option",{value:D,children:D},D))]})]}),x==="killers"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"victim-camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp de la victime :"}),e.jsxs("select",{id:"victim-camp-select",value:n,onChange:D=>b(D.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),e.jsx("option",{value:"Villageois",children:"Villageois"}),e.jsx("option",{value:"Loup",children:"Loup"}),e.jsx("option",{value:"Roles solo",children:"Roles solo"})]})]})]}),(x==="killers"||x==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:S.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifi√©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:S.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistr√©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:E})]})]}),x==="killers"&&e.jsx(Be,{deathStats:S,selectedCamp:c,victimCampFilter:n,minGamesForAverage:v,onMinGamesChange:l,availableDeathTypes:t,deathTypeColors:i,totalEligibleForAverage:H}),x==="deaths"&&e.jsx(Ae,{deathStats:S,selectedCamp:c,minGamesForAverage:v,onMinGamesChange:l,availableDeathTypes:t,deathTypeColors:i}),x==="hunter"&&e.jsx(Ne,{hunterStats:p,isLoading:m,error:h}),x==="survival"&&e.jsx(ke,{survivalStats:f,selectedCamp:c,minGamesForAverage:v,onMinGamesChange:l,isLoading:A,error:o}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"Donn√©es en cours de r√©cup√©ration (donn√©es partielles)."]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e de mort disponible"})}export{Ve as DeathStatisticsChart};
