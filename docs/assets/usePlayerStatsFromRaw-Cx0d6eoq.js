import{u as d}from"./baseStatsHook-DH41hxrD.js";import{b as u,s as g,g as P,a as f}from"./index-fQGPSwzF.js";function S(n,i){if(n.length===0||i.length===0)return null;const l=u(i),e={};let r=0;n.forEach(a=>{const t=a.Game?.toString(),y=a["Liste des joueurs"],c=a["Liste des gagnants"];t&&y&&(r++,g(y.toString()).forEach(m=>{const s=m.trim();if(s){e[s]||(e[s]={gamesPlayed:0,gamesPlayedPercent:"0",wins:0,winPercent:"0",camps:{Villageois:0,Loups:0,Traître:0,"Idiot du Village":0,Cannibale:0,Agent:0,Espion:0,Scientifique:0,Amoureux:0,"La Bête":0,"Chasseur de primes":0,Vaudou:0}}),e[s].gamesPlayed++;const p=P(l,t,s);e[s].camps[p]++,f(s,c?.toString())&&e[s].wins++}}))}),Object.keys(e).forEach(a=>{const t=e[a];t.gamesPlayedPercent=(t.gamesPlayed/r*100).toFixed(2),t.winPercent=(t.wins/t.gamesPlayed*100).toFixed(2)});const o=Object.keys(e).map(a=>({player:a,...e[a]}));return o.sort((a,t)=>t.gamesPlayed-a.gamesPlayed),{totalGames:r,playerStats:o}}function w(){const{data:n,isLoading:i,error:l}=d((e,r)=>S(e,r));return{data:n,isLoading:i,error:l}}export{w as u};
