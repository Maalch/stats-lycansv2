import{r as o}from"./index-CLXMneFp.js";import{w as z,bu as C,bv as L,ar as T,H as V,u as M,au as w,L as _,c as F,s as X,aw as W,ax as Z,az as m,bw as k}from"./CategoricalChart-Bd3sO-Ti.js";import{c as K,j as U}from"./FullscreenChart-pFQm9FV8.js";import{g as S}from"./datasyncExport-Sk8THFwE.js";function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?D(Object(a),!0).forEach(function(r){P(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function P(e,t,a){return(t=G(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G(e){var t=H(e,"string");return typeof t=="symbol"?t:t+""}function H(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},b.apply(null,arguments)}var Y=(e,t,a,r,n,i,l)=>{var{x1:u,x2:h,y1:x,y2:d}=l;if(n==null||i==null)return null;var s=K({x:n,y:i}),c={x:e?s.x.apply(u,{position:"start"}):s.x.rangeMin,y:a?s.y.apply(x,{position:"start"}):s.y.rangeMin},f={x:t?s.x.apply(h,{position:"end"}):s.x.rangeMax,y:r?s.y.apply(d,{position:"end"}):s.y.rangeMax};return l.ifOverflow==="discard"&&(!s.isInRange(c)||!s.isInRange(f))?null:U(c,f)},q=(e,t)=>{var a;return o.isValidElement(e)?a=o.cloneElement(e,t):typeof e=="function"?a=e(t):a=o.createElement(k,b({},t,{className:"recharts-reference-area-rect"})),a};function B(e){var t=z();return o.useEffect(()=>(t(C(e)),()=>{t(L(e))})),null}function J(e){var{x1:t,x2:a,y1:r,y2:n,className:i,shape:l,xAxisId:u,yAxisId:h}=e,x=T(),d=V(),s=M(g=>w(g,"xAxis",u,d)),c=M(g=>w(g,"yAxis",h,d));if(s==null||!c==null)return null;var f=m(t),O=m(a),A=m(r),E=m(n);if(!f&&!O&&!A&&!E&&!l)return null;var v=Y(f,O,A,E,s,c,e);if(!v&&!l)return null;var N=e.ifOverflow==="hidden",R=N?"url(#".concat(x,")"):void 0;return o.createElement(_,{className:F("recharts-reference-area",i)},q(l,I(I({clipPath:R},X(e)),v)),o.createElement(W,v,o.createElement(Z,{label:e.label}),e.children))}function Q(e){return o.createElement(o.Fragment,null,o.createElement(B,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),o.createElement(J,e))}class j extends o.Component{render(){return o.createElement(Q,this.props)}}P(j,"displayName","ReferenceArea");P(j,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});const $={Village:{src:"/Village.webp",zMin:-820,zMax:820,xMin:-461,xMax:461},Château:{src:"/Château.webp",zMin:-820,zMax:820,xMin:-461,xMax:461}},p={x:166.35,z:176.22,multiplier:5.45},y={x:403.32,z:-121.11,multiplier:18.4};function ee(e,t,a){let r=e,n=t;return a==="Village"?(r=(e-p.x)*p.multiplier,n=(t-p.z)*p.multiplier*-1):a==="Château"&&(r=(e-y.x)*y.multiplier,n=(t-y.z)*y.multiplier*-1),{x:r,z:n}}function se(e){return $[e]||null}function te(e){return e?e==="SURVIVALIST_NOT_SAVED"?"BY_WOLF":e:"UNKNOWN"}function oe(e,t){if(t===0)return e.map(r=>({centroidX:r.x,centroidZ:r.z,items:[r]}));const a=[];return e.forEach(r=>{let n=!1;for(const i of a)if(Math.sqrt(Math.pow(r.x-i.centroidX,2)+Math.pow(r.z-i.centroidZ,2))<=t){const u=i.items.length;i.centroidX=(i.centroidX*u+r.x)/(u+1),i.centroidZ=(i.centroidZ*u+r.z)/(u+1),i.items.push(r),n=!0;break}n||a.push({centroidX:r.x,centroidZ:r.z,items:[r]})}),a}function le(e){if(e.length===0)return null;const t=new Map;e.forEach(n=>{t.set(n.deathType,(t.get(n.deathType)||0)+1)});let a=e[0].deathType,r=0;return t.forEach((n,i)=>{n>r&&(r=n,a=i)}),a}function ue(e,t){const a=[];return e.forEach(r=>{r.PlayerStats.filter(n=>n.DeathPosition!==null).filter(n=>!t||t==="Tous les camps"?!0:S(n.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0})===t).forEach(n=>{if(n.DeathPosition){const i=S(n.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0}),l=ee(n.DeathPosition.x,n.DeathPosition.z,r.MapName);a.push({x:l.x,z:l.z,playerName:n.Username,deathType:te(n.DeathType),mapName:r.MapName,killerName:n.KillerName||null,camp:i,gameId:r.DisplayedId,displayedGameId:r.DisplayedId})}})}),a}function ce(e){const t=new Set;return e.forEach(a=>{a.PlayerStats.some(n=>n.DeathPosition!==null)&&a.MapName&&t.add(a.MapName)}),Array.from(t).sort()}export{j as R,oe as a,le as b,ue as c,se as d,ee as e,ce as g};
