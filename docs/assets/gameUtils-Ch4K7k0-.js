function a(e){if(!e)return{videoId:null,timestamp:null};try{const t=new URL(e);let n=null,r=null;t.hostname==="youtu.be"?n=t.pathname.slice(1):(t.hostname==="www.youtube.com"||t.hostname==="youtube.com")&&(n=t.searchParams.get("v"));const o=t.searchParams.get("t");if(o)if(/^\d+$/.test(o))r=parseInt(o,10);else{const u=o.match(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?/);if(u){const i=parseInt(u[1]||"0",10),s=parseInt(u[2]||"0",10),l=parseInt(u[3]||"0",10);r=i*3600+s*60+l}}return{videoId:n,timestamp:r}}catch{return console.warn("Failed to parse YouTube URL:",e),{videoId:null,timestamp:null}}}function c(e,t){if(!e||!t)return null;try{const u=new Date(e),i=new Date(t);if(!isNaN(u.getTime())&&!isNaN(i.getTime())){const s=i.getTime()-u.getTime();return s>0?Math.round(s/1e3):null}}catch{}const n=a(e),r=a(t);if(n.timestamp===null||r.timestamp===null)return null;const o=r.timestamp-n.timestamp;return o>0?o:null}function m(e){const t=Math.floor(e/60),n=Math.round(e%60);return`${t}:${n.toString().padStart(2,"0")}`}function f(e,t){if(!e)return"Villageois";let n;n=t||{};const{regroupLovers:r=!0,regroupVillagers:o=!0,regroupTraitor:u=!1}=n;return e==="Amoureux Loup"||e==="Amoureux Villageois"?r?"Amoureux":e:e==="Chasseur"||e==="Alchimiste"?o?"Villageois":e:e==="Zombie"?"Vaudou":e==="Traître"&&u?"Loup":e}function p(e){const t=e.PlayerStats.filter(r=>r.Victorious);let n="";if(t.length>0){const r=t.map(o=>o.MainRoleFinal);if(r.includes("Loup")||r.includes("Traître"))n="Loup";else if(r.includes("Amoureux Loup")||r.includes("Amoureux Villageois")||r.includes("Amoureux"))n="Amoureux";else if(r.includes("Villageois")||r.includes("Chasseur")||r.includes("Alchimiste"))n="Villageois";else{const o=r.filter(u=>!["Villageois","Loup","Traître","Chasseur","Alchimiste","Amoureux Loup","Amoureux Villageois"].includes(u));o.length>0?n=o[0]:n="Villageois"}return n}return"Villageois"}function d(e){if(!e)return"";const t=e.charAt(0),n=e.slice(1),o={J:"Jour",N:"Nuit",M:"Meeting",U:"Journée"}[t]||"Moment inconnu",u=i=>{const s=parseInt(i);return s===1?"1ère":`${s}ème`};return t==="U"?`${u(n)} journée`:`${o} de la ${u(n)} journée`}export{p as a,d as b,c,m as f,f as g};
