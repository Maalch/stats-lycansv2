import{u as $,r as B,j as e}from"./index-UF0U1jcU.js";import{a as E,u as W}from"./baseStatsHook-D2OOtkmU.js";import{g as q}from"./gameUtils-DYpUb-C5.js";import{a as w,c as z}from"./datasyncExport-CjB7UYqV.js";import{a as K,l as O,g as k}from"./api-DeKKq9oW.js";import{F as x,C as v,X as b,Y as N,a as P}from"./FullscreenChart-BDXQiRDc.js";import{a as Y,b as R,f as J}from"./durationFormatters-C9UyWcKX.js";import{R as f,T as j,a6 as V}from"./CategoricalChart-CEZbNucO.js";import{B as G,a as C}from"./BarChart-BN8az_fJ.js";import{L as U,a as X}from"./LineChart-D5DIianx.js";import{P as H,a as Q}from"./PieChart-1VqO0hBd.js";import"./ActivePoints-CzWV3YjS.js";import"./PolarChart-C--GOLQ2.js";function D(a){const n=Math.floor(a/3600),i=Math.floor(a%3600/60),r=a%60;return n>0?`${n}h${i.toString().padStart(2,"0")}m${r.toString().padStart(2,"0")}s`:i>0?`${i}m${r.toString().padStart(2,"0")}s`:`${r}s`}function Z(a,n=10){const i=Math.round(a/60);return Math.round(i/n)*n}function _(){return{averageDuration:"0s",maxDuration:0,minDuration:1/0,maxDurationGameId:null,minDurationGameId:null,durationDistribution:{},durationsByWinnerCamp:{},durationsByPlayerCount:{},durationsByWolfRatio:{},totalGameTime:"0s",totalPlayerTime:"0s"}}function ee(a,n,i){a>i.maxDuration&&(i.maxDuration=a,i.maxDurationGameId=n),a<i.minDuration&&(i.minDuration=a,i.minDurationGameId=n)}function te(a,n){const i=Z(a,2);n[i]||(n[i]=0),n[i]++}function ae(a,n,i){a&&a.trim()!==""&&(i[a]||(i[a]={totalDuration:0,count:0,average:"0s"}),i[a].totalDuration+=n,i[a].count++)}function re(a,n,i){if(a&&!isNaN(a)&&a>0){const r=a.toString();i[r]||(i[r]={totalDuration:0,count:0,average:"0s"}),i[r].totalDuration+=n,i[r].count++}}function ne(a,n,i,r){if(a&&n&&!isNaN(a)&&!isNaN(n)&&a>0){const l=a-n;if(l>0){const m=Math.round(n/l*100),d=(Math.round(m/1)*1).toString();r[d]||(r[d]={totalDuration:0,count:0,average:"0s"}),r[d].totalDuration+=i,r[d].count++}}}function ie(a,n,i){const r=a.PlayerStats.length,l=a.PlayerStats.filter(d=>w(d.MainRoleInitial,d.MainRoleChanges||[])==="Loup").length;let m=q(a);const c=z(a.StartDate,a.EndDate);c&&!isNaN(c)&&c>0&&(i.gamesWithDuration++,i.totalDuration+=c,i.totalPlayerTime+=c*r,ee(c,a.DisplayedId,n),te(c,n.durationDistribution),ae(m,c,n.durationsByWinnerCamp),re(r,c,n.durationsByPlayerCount),ne(r,l,c,n.durationsByWolfRatio))}function se(a,n){if(n.gamesWithDuration>0){const i=n.totalDuration/n.gamesWithDuration;a.averageDuration=D(Math.round(i)),a.totalGameTime=D(Math.round(n.totalDuration)),a.totalPlayerTime=D(Math.round(n.totalPlayerTime)),Object.keys(a.durationsByWinnerCamp).forEach(r=>{const l=a.durationsByWinnerCamp[r];if(l.count>0){const m=l.totalDuration/l.count;l.average=D(Math.round(m))}}),Object.keys(a.durationsByPlayerCount).forEach(r=>{const l=a.durationsByPlayerCount[r];if(l.count>0){const m=l.totalDuration/l.count;l.average=D(Math.round(m))}}),Object.keys(a.durationsByWolfRatio).forEach(r=>{const l=a.durationsByWolfRatio[r];if(l.count>0){const m=l.totalDuration/l.count;l.average=D(Math.round(m))}})}}function oe(a){const n=Object.keys(a).map(i=>({duration:parseInt(i),count:a[parseInt(i)]}));return n.sort((i,r)=>i.duration-r.duration),n}function le(a){if(a.length===0)return null;const n=_(),i={totalDuration:0,gamesWithDuration:0,totalPlayerTime:0};a.forEach(l=>{ie(l,n,i)}),se(n,i);const r=oe(n.durationDistribution);return{averageDuration:n.averageDuration,maxDuration:n.maxDuration,minDuration:n.minDuration===1/0?0:n.minDuration,maxDurationGameId:n.maxDurationGameId,minDurationGameId:n.minDurationGameId,durationDistribution:r,durationsByWinnerCamp:n.durationsByWinnerCamp,durationsByPlayerCount:n.durationsByPlayerCount,durationsByWolfRatio:n.durationsByWolfRatio,totalGameTime:n.totalGameTime,totalPlayerTime:n.totalPlayerTime}}function ce(){const{data:a,isLoading:n,error:i}=E(le);return{durationAnalysis:a,fetchingData:n,apiError:i}}function M(a){if(!a||a.trim()==="")return null;const n=a.trim(),i=n.charAt(0).toUpperCase(),r=n.slice(1),l=parseInt(r,10);return!["J","N","M"].includes(i)||isNaN(l)||l<1?null:{phase:i,dayNumber:l,originalTiming:n,phaseLabel:{J:"Jour",N:"Nuit",M:"Meeting"}[i]}}function L(a){const n={J:0,N:.33,M:.67};return a.dayNumber+n[a.phase]}function ue(a){if(!a||a.length===0)return{totalGames:0,gamesWithEndTiming:0,averageGameLength:0,endTimingDistribution:[],phaseDistribution:[],dayDistribution:[],longestGame:null,shortestGame:null};const n=a.length;let i=0,r=0,l=null,m=null;const c={},d={},g={};a.forEach(u=>{const t=M(u.EndTiming);if(t){i++,r+=t.dayNumber;const s=L(t);(!l||s>L(M(l.endTiming)))&&(l={gameId:u.DisplayedId,endTiming:t.originalTiming,dayNumber:t.dayNumber}),(!m||s<L(M(m.endTiming)))&&(m={gameId:u.DisplayedId,endTiming:t.originalTiming,dayNumber:t.dayNumber});const o=t.originalTiming;c[o]=(c[o]||0)+1;const h=t.phaseLabel;d[h]||(d[h]={count:0,totalDays:0}),d[h].count++,d[h].totalDays+=t.dayNumber;const p=t.dayNumber;g[p]||(g[p]={count:0,phases:{}}),g[p].count++,g[p].phases[h]=(g[p].phases[h]||0)+1}});const A=i>0?r/i:0,y=Object.entries(c).map(([u,t])=>{const s=M(u);return{timing:u,phase:s?.phaseLabel||"Unknown",dayNumber:s?.dayNumber||0,count:t,percentage:t/i*100}}).sort((u,t)=>{if(u.dayNumber!==t.dayNumber)return u.dayNumber-t.dayNumber;const s={Jour:0,Nuit:1,Meeting:2};return(s[u.phase]||3)-(s[t.phase]||3)}),T=Object.entries(d).map(([u,t])=>({phase:u,count:t.count,percentage:t.count/i*100,averageDay:t.count>0?t.totalDays/t.count:0})).sort((u,t)=>t.count-u.count),I=Object.entries(g).map(([u,t])=>({dayNumber:parseInt(u,10),count:t.count,percentage:t.count/i*100,phases:t.phases})).sort((u,t)=>u.dayNumber-t.dayNumber);return{totalGames:n,gamesWithEndTiming:i,averageGameLength:A,endTimingDistribution:y,phaseDistribution:T,dayDistribution:I,longestGame:l,shortestGame:m}}function me(){const{data:a,isLoading:n,error:i}=W(r=>ue(r));return{gameTimeAnalysis:a,fetchingData:n,apiError:i}}function Ge(){const{durationAnalysis:a,fetchingData:n,apiError:i}=ce(),{gameTimeAnalysis:r,fetchingData:l,apiError:m}=me(),{navigateToGameDetails:c}=$(),[d,g]=B.useState("real"),A=K(),y=t=>{if(!t)return t;const s=t.match(/^([JNM])(\d+)$/);if(!s)return t;const[,o,h]=s;return`${{J:"Jour",N:"Nuit",M:"Meeting"}[o]||o} ${h}`};if(n||l)return e.jsx("div",{className:"statistiques-attente",children:"Analyse des durÃ©es en cours..."});if(i||m)return e.jsxs("div",{className:"statistiques-echec",children:["ProblÃ¨me rencontrÃ©: ",i||m]});if(!a||!r)return e.jsx("div",{className:"statistiques-indisponibles",children:"DonnÃ©es d'analyse non disponibles"});const T=t=>{const s=t.match(/(\d+)h/),o=t.match(/(\d+)m/),h=t.match(/(\d+)s/),p=s?parseInt(s[1]):0,F=o?parseInt(o[1]):0,S=h?parseInt(h[1]):0;return p*60+F+S/60},I=a?Object.entries(a.durationsByWolfRatio).map(([t,s])=>({ratio:parseFloat(t),moyenne:T(s.average),parties:s.count,dureeFormatee:s.average})).sort((t,s)=>t.ratio-s.ratio):[],u=a?Object.entries(a.durationsByWinnerCamp).map(([t,s])=>({camp:t,moyenne:T(s.average),parties:s.count,dureeFormatee:s.average})).sort((t,s)=>s.moyenne-t.moyenne):[];return e.jsxs("div",{className:"lycans-duree-analyse",children:[e.jsx("h2",{children:"Analyse des DurÃ©es"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{type:"button",className:`lycans-categorie-btn ${d==="real"?"active":""}`,onClick:()=>g("real"),children:"DurÃ©e en jeu"}),e.jsx("button",{type:"button",className:`lycans-categorie-btn ${d==="gametime"?"active":""}`,onClick:()=>g("gametime"),children:"Temps de jeu"})]}),d==="real"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"DurÃ©e Moyenne"}),e.jsx("p",{className:"lycans-valeur-principale",children:Y(a.averageDuration)||"N/A"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Temps de jeu cumulÃ©s des parties"}),e.jsx("p",{className:"lycans-valeur-principale",children:R(a.totalGameTime)||"N/A"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Temps de jeu cumulÃ©s par les joueurs"}),e.jsx("p",{className:"lycans-valeur-principale",children:R(a.totalPlayerTime)||"N/A"})]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{a.minDurationGameId&&c({selectedGame:a.minDurationGameId,fromComponent:"Analyse des DurÃ©es"})},style:{cursor:a.minDurationGameId?"pointer":"default",opacity:a.minDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{a.minDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{a.minDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:a.minDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvÃ©e",children:[e.jsx("h3",{children:"Partie la plus courte"}),e.jsx("p",{className:"lycans-valeur-principale",children:J(a.minDuration)}),a.minDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["ðŸ–±ï¸ Partie #",a.minDurationGameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{a.maxDurationGameId&&c({selectedGame:a.maxDurationGameId,fromComponent:"Analyse des DurÃ©ee"})},style:{cursor:a.maxDurationGameId?"pointer":"default",opacity:a.maxDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{a.maxDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{a.maxDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:a.maxDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvÃ©e",children:[e.jsx("h3",{children:"Partie la plus longue"}),e.jsx("p",{className:"lycans-valeur-principale",children:J(a.maxDuration)}),a.maxDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["ðŸ–±ï¸ Partie #",a.maxDurationGameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution des DurÃ©es"}),e.jsx(x,{title:"Distribution des DurÃ©es",children:e.jsx("div",{style:{height:300},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(G,{data:a?.durationDistribution||[],margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"duration",label:{value:"DurÃ©e (minutes)",position:"insideBottom",offset:-5},tickFormatter:t=>`${t}min`}),e.jsx(N,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["~",o.duration," minutes"]})}),e.jsxs("div",{children:[o.count," parties"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"DurÃ©es regroupÃ©es par intervalles de 2 minutes"})]})}return null}}),e.jsx(C,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-2)"})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"DurÃ©e Moyenne par Ratio Loups/Villageois"}),e.jsx(x,{title:"DurÃ©e Moyenne par Ratio Loups/Villageois",children:e.jsx("div",{style:{height:300},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(U,{data:I,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"ratio",type:"number",domain:["auto","auto"],allowDecimals:!1,tickFormatter:t=>`${t}%`,label:{value:"Ratio Loups/Joueurs (%)",position:"insideBottom",offset:-5}}),e.jsx(N,{label:{value:"DurÃ©e Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Pourcentage de loups : ",o.ratio,"%"]})}),e.jsxs("div",{children:["DurÃ©e moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]})]})}return null}}),e.jsx(X,{type:"monotone",dataKey:"moyenne",name:"DurÃ©e Moyenne",stroke:"var(--chart-color-5)",strokeWidth:2,activeDot:{r:8}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"DurÃ©e Moyenne par Camp Victorieux"}),e.jsx(x,{title:"DurÃ©e Moyenne par Camp Victorieux",children:e.jsx("div",{style:{height:300},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(G,{data:u,margin:{top:20,right:30,left:20,bottom:40},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(N,{label:{value:"DurÃ©e Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.camp})}),e.jsxs("div",{children:["DurÃ©e moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsxs(C,{dataKey:"moyenne",name:"moyenne",isAnimationActive:!1,onClick:t=>{t&&t.camp&&c({campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only"},fromComponent:"DurÃ©e Moyenne par Camp Victorieux"})},style:{cursor:"pointer"},children:[u.map(t=>e.jsx(P,{fill:A[t.camp]||O},`cell-${t.camp}`)),e.jsx(V,{dataKey:"moyenne",position:"top",formatter:t=>{const s=typeof t=="number"?t:Number(t);return isNaN(s)?"":`${Math.round(s)}min`},fill:"var(--text-primary)",fontSize:12})]})]})})})})]})]})]}),d==="gametime"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lycans-section-description",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Analyse du temps de jeu :"})," Ces graphiques montrent Ã  quels moments les parties se terminent en fonction du cycle jour/nuit/meeting.",e.jsx("br",{}),'Le chiffre indique le numÃ©ro du jour (Jour 3 = Phase "Jour" de la 3Ã¨me journÃ©e, Nuit 2 = Phase "Nuit" de la 2Ã¨me journÃ©e, Meeting 4 = 4Ã¨me meeting).',e.jsx("br",{}),"BasÃ© sur ",r.gamesWithEndTiming," parties avec donnÃ©es de timing sur ",r.totalGames," parties totales."]})}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Longueur Moyenne"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[r.averageGameLength.toFixed(1)," jours"]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.shortestGame&&c({selectedGame:r.shortestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:r.shortestGame?"pointer":"default",opacity:r.shortestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.shortestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.shortestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.shortestGame?"Cliquez pour voir cette partie":"Aucune partie trouvÃ©e",children:[e.jsx("h3",{children:"Partie la plus courte"}),e.jsx("p",{className:"lycans-valeur-principale",children:r.shortestGame?y(r.shortestGame.endTiming):"N/A"}),r.shortestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["ðŸ–±ï¸ Partie #",r.shortestGame.gameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.longestGame&&c({selectedGame:r.longestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:r.longestGame?"pointer":"default",opacity:r.longestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.longestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.longestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.longestGame?"Cliquez pour voir cette partie":"Aucune partie trouvÃ©e",children:[e.jsx("h3",{children:"Partie la plus longue"}),e.jsx("p",{className:"lycans-valeur-principale",children:r.longestGame?y(r.longestGame.endTiming):"N/A"}),r.longestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["ðŸ–±ï¸ Partie #",r.longestGame.gameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Phase de Fin"}),e.jsx(x,{title:"Distribution par Phase de Fin",children:e.jsx("div",{style:{height:300},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(H,{children:[e.jsx(Q,{data:r.phaseDistribution,cx:"50%",cy:"50%",labelLine:!1,label:t=>`${t.phase} (${t.percentage.toFixed(1)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:r.phaseDistribution.map((t,s)=>e.jsx(P,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":k(t.phase)},`cell-${s}`))}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.phase})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["Jour moyen: ",o.averageDay.toFixed(1)]})]})}return null}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Nombre de Jours"}),e.jsx(x,{title:"Distribution par Nombre de Jours",children:e.jsx("div",{style:{height:300},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(G,{data:r.dayDistribution,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"dayNumber",label:{value:"Nombre de Jours",position:"insideBottom",offset:-5}}),e.jsx(N,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload,h=Object.entries(o.phases).map(([p,F])=>`${p}: ${F}`).join(", ");return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Jour ",o.dayNumber]})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["DÃ©tail: ",h]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-3)",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Jour ${t.dayNumber}`})},style:{cursor:"pointer"}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"DÃ©tail par Timing de Fin"}),e.jsx(x,{title:"DÃ©tail par Timing de Fin",children:e.jsx("div",{style:{height:400},children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(G,{data:r.endTimingDistribution,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"timing",angle:-45,textAnchor:"end",height:80,interval:0,tickFormatter:t=>y(t),label:{value:"Timing de Fin",position:"insideBottom",offset:-40}}),e.jsx(N,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(j,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:y(o.timing)})}),e.jsxs("div",{children:["Phase: ",o.phase]}),e.jsxs("div",{children:["Jour: ",o.dayNumber]}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null}}),e.jsx(C,{dataKey:"count",name:"Nombre de Parties",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Timing ${y(t.timing)}`})},style:{cursor:"pointer"},children:r.endTimingDistribution.map((t,s)=>e.jsx(P,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":k(t.timing)},`cell-${s}`))})]})})})})]})]})]})]})}export{Ge as GameDurationInsights};
