import{u as p,j as e}from"./index-BHkrPGKf.js";import{R as o,B as m,C as l,X as d,Y as c,T as u,o as x,a7 as v}from"./BarChart-CjSu6RLh.js";import{L as g,a as f}from"./LineChart-8T3AUSxa.js";import{L as j}from"./Legend-D_3Valbk.js";function b(){const{combinedData:a,isLoading:t,error:i}=p();return{durationAnalysis:a&&a.gameDurationAnalysis?a.gameDurationAnalysis:null,fetchingData:t,apiError:i}}function C(){const{durationAnalysis:a,fetchingData:t,apiError:i}=b();if(t)return e.jsx("div",{className:"statistiques-attente",children:"Analyse des durées de partie en cours..."});if(i)return e.jsxs("div",{className:"statistiques-echec",children:["Problème rencontré: ",i]});if(!a)return e.jsx("div",{className:"statistiques-indisponibles",children:"Données d'analyse non disponibles"});const h=Object.entries(a.daysByWolfRatio).map(([r,s])=>({ratio:`${parseFloat(r).toFixed(0)}%`,moyenne:parseFloat(s.average),parties:s.count})).sort((r,s)=>parseFloat(r.ratio)-parseFloat(s.ratio)),y=Object.entries(a.daysByWinnerCamp).map(([r,s])=>({camp:r,moyenne:parseFloat(s.average),parties:s.count})).sort((r,s)=>s.moyenne-r.moyenne);return e.jsxs("div",{className:"lycans-duree-analyse",children:[e.jsx("h2",{children:"Analyse des Durées de Partie"}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Durée Moyenne"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[a.averageDays," jours"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Durée Minimum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[a.minDays," jours"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Durée Maximum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[a.maxDays," jours"]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution des Durées de Partie"}),e.jsx("div",{style:{height:300},children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(m,{data:a.dayDistribution,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(l,{strokeDasharray:"3 3"}),e.jsx(d,{dataKey:"days",label:{value:"Nombre de Jours",position:"insideBottom",offset:-5}}),e.jsx(c,{label:{value:"Nombre de Parties",angle:-90,position:"insideLeft"}}),e.jsx(u,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const n=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:[n.days," jours"]})}),e.jsxs("div",{children:[n.count," parties"]})]})}return null}}),e.jsx(x,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-2)"})]})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Ratio Loups/Joueurs"}),e.jsx("div",{style:{height:300},children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(g,{data:h,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(l,{strokeDasharray:"3 3"}),e.jsx(d,{dataKey:"ratio",label:{value:"Ratio Loups/Joueurs (%)",position:"insideBottom",offset:-5}}),e.jsx(c,{label:{value:"Durée Moyenne (jours)",angle:-90,position:"insideLeft"}}),e.jsx(u,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const n=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Pourcentage de loups : ",n.ratio]})}),e.jsxs("div",{children:["Durée moyenne : ",n.moyenne," jours"]}),e.jsxs("div",{children:["Nombre de parties : ",n.parties]})]})}return null}}),e.jsx(j,{}),e.jsx(f,{type:"monotone",dataKey:"moyenne",name:"Durée Moyenne",stroke:"var(--chart-color-5)",activeDot:{r:8}})]})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Camp Victorieux"}),e.jsx("div",{style:{height:300},children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(m,{data:y,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(l,{strokeDasharray:"3 3"}),e.jsx(d,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(c,{label:{value:"Durée Moyenne (jours)",angle:-90,position:"insideLeft"}}),e.jsx(u,{content:({active:r,payload:s})=>{if(r&&s&&s.length>0){const n=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:n.camp})}),e.jsxs("div",{children:["Durée moyenne : ",n.moyenne," jours"]}),e.jsxs("div",{children:["Nombre de parties : ",n.parties]})]})}return null}}),e.jsx(j,{formatter:r=>r==="moyenne"?"Durée Moyenne":r}),e.jsx(x,{dataKey:"moyenne",name:"moyenne",fill:"var(--chart-color-4)",children:e.jsx(v,{dataKey:"moyenne",position:"top",formatter:r=>{const s=typeof r=="number"?r:Number(r);return isNaN(s)?"":`${s.toFixed(1)}j`},fill:"var(--text-primary)",fontSize:12})})]})})})]})]})]})}export{C as GameDurationInsights};
