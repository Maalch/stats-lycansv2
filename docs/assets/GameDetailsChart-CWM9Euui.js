import{s as p,a as O,u as F,r as L,j as s}from"./index-DCpoS_oe.js";import{b as Y}from"./baseStatsHook-CJib86J1.js";import{a as M}from"./api-beq3FXpM.js";function z(e,t){if(!e)return null;try{const n=new URL(e);let i="",r=0;if(n.hostname==="youtu.be"){i=n.pathname.slice(1);const c=n.searchParams.get("t");c&&(r=parseInt(c,10)||0)}else if(n.hostname==="www.youtube.com"||n.hostname==="youtube.com"){i=n.searchParams.get("v")||"";const c=n.searchParams.get("t");c&&(r=parseInt(c,10)||0)}if(!i)return null;const l=`https://www.youtube.com/embed/${i}?start=${r}`;if(t)try{const c=new URL(t);let o=0;if(c.hostname==="youtu.be"){const d=c.searchParams.get("t");d&&(o=parseInt(d,10)||0)}else if(c.hostname==="www.youtube.com"||c.hostname==="youtube.com"){const d=c.searchParams.get("t");d&&(o=parseInt(d,10)||0)}if(o>r)return`${l}&end=${o}`}catch(c){console.warn("Failed to parse end URL:",t,c)}return l}catch(n){return console.warn("Failed to create YouTube embed URL:",e,n),null}}function K(e,t){if(!e||!t)return null;try{const n=l=>{const c=new URL(l);let o=0;if(c.hostname==="youtu.be"){const d=c.searchParams.get("t");d&&(o=parseInt(d,10)||0)}else if(c.hostname==="www.youtube.com"||c.hostname==="youtube.com"){const d=c.searchParams.get("t");d&&(o=parseInt(d,10)||0)}return o},i=n(e),r=n(t);return r>i?r-i:null}catch(n){return console.warn("Failed to calculate game duration:",e,t,n),null}}function G(e,t,n=!1){const i=e.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(i)?"Loups":t.Traître&&t.Traître.toLowerCase().includes(i)?n?"Traître":"Loups":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(i)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(i)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(i)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(i)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(i)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(i)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(i)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(i)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(i)?"Vaudou":"Villageois"}function _(e,t,n,i){const r=e.toLowerCase();switch(t){case"Traître":return!!(n.Traître&&n.Traître.toLowerCase().includes(r));case"Idiot du Village":return!!(n["Idiot du village"]&&n["Idiot du village"].toLowerCase().includes(r));case"Cannibale":return!!(n.Cannibale&&n.Cannibale.toLowerCase().includes(r));case"Agent":return!!(n.Agent&&n.Agent.toLowerCase().includes(r));case"Espion":return!!(n.Espion&&n.Espion.toLowerCase().includes(r));case"Scientifique":return!!(n.Scientifique&&n.Scientifique.toLowerCase().includes(r));case"Amoureux":return!!(n.Amoureux&&n.Amoureux.toLowerCase().includes(r));case"La Bête":return!!(n["La Bête"]&&n["La Bête"].toLowerCase().includes(r));case"Chasseur de primes":return!!(n["Chasseur de primes"]&&n["Chasseur de primes"].toLowerCase().includes(r));case"Vaudou":return!!(n.Vaudou&&n.Vaudou.toLowerCase().includes(r));case"Villageois":const l=i["Liste des joueurs"].toLowerCase().includes(r),c=[...n.Loups?p(n.Loups):[],...n.Traître?[n.Traître.trim()]:[],...n["Idiot du village"]?[n["Idiot du village"].trim()]:[],...n.Cannibale?[n.Cannibale.trim()]:[],...n.Agent?p(n.Agent):[],...n.Espion?[n.Espion.trim()]:[],...n.Scientifique?[n.Scientifique.trim()]:[],...n.Amoureux?p(n.Amoureux):[],...n["La Bête"]?[n["La Bête"].trim()]:[],...n["Chasseur de primes"]?[n["Chasseur de primes"].trim()]:[],...n.Vaudou?[n.Vaudou.trim()]:[]].map(o=>o.toLowerCase());return l&&!c.includes(r);default:return!1}}function Q(e,t,n){const i=e.filter(r=>r["Liste des joueurs"].toLowerCase().includes(t.toLowerCase()));return!n||n==="all-assignments"?i:n==="wins-only"?i.filter(r=>O(t,r["Liste des gagnants"])):i}function X(e,t){return e.filter(n=>n.Game===t)}function Z(e,t){return e.filter(n=>t.includes(n.Game))}function D(e,t){return e.filter(n=>n["Type de victoire"]===t)}function ee(e,t){return e.filter(n=>{const i=n.Date;if(t.includes("/")&&t.split("/").length===2){const[r,l]=t.split("/"),c=i.split("/");if(c.length===3){const[,o,d]=c;return o===r&&d===l}}else return i===t;return!1})}function se(e,t){return e.filter(n=>{const i=n["Pourcentage de récolte"];if(i==null)return!1;const r=i*100;switch(t){case"0-25%":return r>=0&&r<=25;case"26-50%":return r>25&&r<=50;case"51-75%":return r>50&&r<=75;case"76-99%":return r>75&&r<=99;case"100%":return r>=100;default:return!0}})}function ne(e,t){return e.filter(n=>n["Nombre de journées"]===t)}function te(e,t,n,i){const{selectedCamp:r,campFilterMode:l,_smallCamps:c,excludeTraitor:o}=n;return e.filter(d=>{const a=t.find(h=>h.Game===d.Game);if(!a)return!1;if(i){if(r==="Autres"&&c)return c.some(m=>_(i,m,a,d));const h=G(i,a,o);return r==="Loups"&&o?h==="Loups"&&!(a.Traître&&a.Traître.toLowerCase().includes(i.toLowerCase())):h==="Agent"&&r==="Agent"&&d["Camp victorieux"]==="Agent"?p(d["Liste des gagnants"]?.toString()||"").some(v=>v.toLowerCase()===i.toLowerCase()):h===r}else{if(l==="wins-only")return r==="Autres"&&c?c.includes(d["Camp victorieux"]):d["Camp victorieux"]===r;if(r==="Autres"&&c)return c.some(h=>{switch(h){case"Traître":return!!(a.Traître&&a.Traître.trim());case"Idiot du Village":return!!(a["Idiot du village"]&&a["Idiot du village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());case"Villageois":return p(d["Liste des joueurs"]).length>0;default:return!1}});switch(r){case"Loups":return!!(a.Loups&&a.Loups.trim());case"Traître":return!!(a.Traître&&a.Traître.trim());case"Villageois":const h=p(d["Liste des joueurs"]),m=[...p(a.Loups||""),...a.Traître?[a.Traître.trim()]:[],...a["Idiot du village"]?[a["Idiot du village"].trim()]:[],...a.Cannibale?[a.Cannibale.trim()]:[],...a.Agent?p(a.Agent):[],...a.Espion?[a.Espion.trim()]:[],...a.Scientifique?[a.Scientifique.trim()]:[],...p(a.Amoureux||""),...a["La Bête"]?[a["La Bête"].trim()]:[],...a["Chasseur de primes"]?[a["Chasseur de primes"].trim()]:[],...a.Vaudou?[a.Vaudou.trim()]:[]];return h.some(v=>!m.includes(v));case"Idiot du Village":return!!(a["Idiot du village"]&&a["Idiot du village"].trim());case"Cannibale":return!!(a.Cannibale&&a.Cannibale.trim());case"Agent":return!!(a.Agent&&a.Agent.trim());case"Espion":return!!(a.Espion&&a.Espion.trim());case"Scientifique":return!!(a.Scientifique&&a.Scientifique.trim());case"Amoureux":return!!(a.Amoureux&&a.Amoureux.trim());case"La Bête":return!!(a["La Bête"]&&a["La Bête"].trim());case"Chasseur de primes":return!!(a["Chasseur de primes"]&&a["Chasseur de primes"].trim());case"Vaudou":return!!(a.Vaudou&&a.Vaudou.trim());default:return d["Camp victorieux"]===r}}})}function ie(e,t,n,i){const{selectedPlayers:r,playersFilterMode:l,winnerPlayer:c}=n;return e.filter(o=>{const d=p(o["Liste des joueurs"]);if(!r.every(v=>d.some(I=>I.toLowerCase()===v.toLowerCase())))return!1;const h=t.find(v=>v.Game===o.Game);if(!h)return!1;const m=r.map(v=>G(v,h));switch(l){case"all-common-games":return c?p(o["Liste des gagnants"]?.toString()||"").some(g=>g.toLowerCase()===c.toLowerCase()):!0;case"opposing-camps":const v=m.map(C=>C==="Traître"?"Loups":C);if(!([...new Set(v)].length>1))return!1;if(c){const C=r.findIndex(g=>g.toLowerCase()===c.toLowerCase());if(C!==-1){const g=v[C],j=o["Camp victorieux"]==="Traître"?"Loups":o["Camp victorieux"];return g==="Agent"&&j==="Agent"?p(o["Liste des gagnants"]?.toString()||"").some(A=>A.toLowerCase()===c.toLowerCase()):g===j}}return!0;case"same-camp":const b=m.map(C=>C==="Traître"?"Loups":C);if(!([...new Set(b)].length===1))return!1;const P=b[0];if(i&&i.selectedCamp){const C=i.selectedCamp;if(C==="Loups"&&i.excludeTraitor&&(!r.every(w=>m[r.indexOf(w)]==="Loups")||r.some(w=>p(h.Traître||"").some(B=>B.toLowerCase()===w.toLowerCase())))||P!==C)return!1}if(c){const C=o["Camp victorieux"]==="Traître"?"Loups":o["Camp victorieux"];if(P==="Agent"&&C==="Agent"){const g=p(o["Liste des gagnants"]?.toString()||"");return r.every(j=>g.some(w=>w.toLowerCase()===j.toLowerCase()))}return P===C}return!0;default:return!0}})}function ae(e,t,n){const{selectedPlayerPair:i,selectedPairRole:r}=n;return i.length!==2?e:e.filter(l=>{const c=p(l["Liste des joueurs"]);if(!i.every(a=>c.some(h=>h.toLowerCase()===a.toLowerCase())))return!1;const d=t.find(a=>a.Game===l.Game);if(!d)return!1;switch(r){case"wolves":const a=p(d.Loups||"");return i.every(m=>a.some(v=>v.toLowerCase()===m.toLowerCase()));case"lovers":const h=p(d.Amoureux||"");return i.every(m=>h.some(v=>v.toLowerCase()===m.toLowerCase()));default:return!0}})}function re(e,t,n){if(!n)return e;let i=[...e];return n.selectedPlayer&&(i=Q(i,n.selectedPlayer,n.selectedPlayerWinMode)),n.selectedGame&&(i=X(i,n.selectedGame)),n.selectedGameIds&&(i=Z(i,n.selectedGameIds)),n.campFilter&&(i=te(i,t,n.campFilter,n.selectedPlayer)),n.selectedVictoryType&&(i=D(i,n.selectedVictoryType)),n.selectedDate&&(i=ee(i,n.selectedDate)),n.selectedHarvestRange&&(i=se(i,n.selectedHarvestRange)),n.selectedGameDuration&&(i=ne(i,n.selectedGameDuration)),n.multiPlayerFilter&&(i=ie(i,t,n.multiPlayerFilter,n.campFilter)),n.playerPairFilter&&(i=ae(i,t,n.playerPairFilter)),i}function le(e){const t={};return e&&(e.Loups&&(t.wolves=p(e.Loups)),e.Traître&&(t.traitor=e.Traître),e["Idiot du village"]&&(t.villageIdiot=e["Idiot du village"]),e.Cannibale&&(t.cannibal=e.Cannibale),e.Agent&&(t.agent=p(e.Agent)),e.Espion&&(t.spy=e.Espion),e.Scientifique&&(t.scientist=e.Scientifique),e.Amoureux&&(t.lovers=p(e.Amoureux)),e["La Bête"]&&(t.beast=e["La Bête"]),e["Chasseur de primes"]&&(t.bountyHunter=e["Chasseur de primes"]),e.Vaudou&&(t.voodoo=e.Vaudou)),t}function ce(e,t){const n=[];return p(e["Liste des joueurs"]).forEach(r=>{let l="Villageois",c="Villageois";t&&(t.Loups&&p(t.Loups).includes(r)?(l="Loups",c="Loups"):t.Traître&&p(t.Traître).includes(r)?(l="Traître",c="Loups"):t["Idiot du village"]&&p(t["Idiot du village"]).includes(r)?(l="Idiot du Village",c="Idiot du Village"):t.Cannibale&&p(t.Cannibale).includes(r)?(l="Cannibale",c="Cannibale"):t.Agent&&p(t.Agent).includes(r)?(l="Agent",c="Agent"):t.Espion&&p(t.Espion).includes(r)?(l="Espion",c="Espion"):t.Scientifique&&p(t.Scientifique).includes(r)?(l="Scientifique",c="Scientifique"):t["La Bête"]&&p(t["La Bête"]).includes(r)?(l="La Bête",c="La Bête"):t["Chasseur de primes"]&&p(t["Chasseur de primes"]).includes(r)?(l="Chasseur de primes",c="Chasseur de primes"):t.Vaudou&&p(t.Vaudou).includes(r)?(l="Vaudou",c="Vaudou"):t.Amoureux&&p(t.Amoureux).includes(r)&&(l="Amoureux",c="Amoureux")),n.push({player:r,role:l,camp:c})}),n}function ue(e){return e.map(t=>({player:"Ponce",camp:t.Camp||"Unknown",isTraitor:t.Traître||!1,secondaryRole:t["Rôle secondaire"]==="N/A"?null:t["Rôle secondaire"],wolfPower:t["Pouvoir de loup"]==="N/A"?null:t["Pouvoir de loup"],villagerJob:t["Métier villageois"]==="N/A"?null:t["Métier villageois"],playersKilled:t["Joueurs tués"],deathDay:t["Jour de mort"],deathType:t["Type de mort"],killers:t["Joueurs tueurs"]}))}function oe(e,t,n,i){return e.length===0?null:re(e,t,i).map(l=>{const c=t.find(m=>m.Game===l.Game),o=n.filter(m=>m.Game===l.Game),d=le(c),a=ce(l,c),h=ue(o);return{gameId:l.Game,date:l.Date,isModded:l["Game Moddée"],playerCount:l["Nombre de joueurs"],wolfCount:l["Nombre de loups"],hasTraitor:l["Rôle Traître"],hasLovers:l["Rôle Amoureux"],soloRoles:l["Rôles solo"],winningCamp:l["Camp victorieux"],victoryType:l["Type de victoire"],dayCount:l["Nombre de journées"],villagerSurvivors:l["Survivants villageois"],wolfSurvivors:l["Survivants loups (traître inclus)"],loverSurvivors:l["Survivants amoureux"],soloSurvivors:l["Survivants solo"],winners:l["Liste des gagnants"],harvest:l.Récolte,totalHarvest:l["Total récolte"],harvestPercentage:l["Pourcentage de récolte"],playersList:l["Liste des joueurs"],versions:l.Versions,map:l.Map,youtubeEmbedUrl:z(l.Début,l.Fin),gameDuration:K(l.Début,l.Fin),roles:d,playerRoles:a,playerDetails:h}})}function de(e){const{data:t,isLoading:n,error:i}=Y((r,l,c)=>oe(r,l,c,e));return{data:t||[],isLoading:n,error:i}}function ye(){const{navigationFilters:e,navigateBack:t}=F(),{data:n,isLoading:i,error:r}=de(e),[l,c]=L.useState("date"),[o,d]=L.useState("desc"),[a,h]=L.useState(null),[m,v]=L.useState(1),[I,$]=L.useState(25),b=L.useRef(!1),q=e.selectedPlayer?[e.selectedPlayer]:e.playerPairFilter?.selectedPlayerPair?e.playerPairFilter.selectedPlayerPair:e.multiPlayerFilter?.selectedPlayers?e.multiPlayerFilter.selectedPlayers:[],P=q.length>0,C=u=>P?(u.winners?u.winners.split(",").map(y=>y.trim()):[]).filter(y=>q.some(N=>N.toLowerCase()===y.toLowerCase())).join(", "):"",g=L.useMemo(()=>n?[...n].sort((u,x)=>{let f,y;switch(l){case"date":f=new Date(u.date.split("/").reverse().join("-")).getTime(),y=new Date(x.date.split("/").reverse().join("-")).getTime();break;case"gameId":f=u.gameId,y=x.gameId;break;case"playerCount":f=u.playerCount,y=x.playerCount;break;case"gameDuration":f=u.gameDuration||0,y=x.gameDuration||0;break;case"winningCamp":f=u.winningCamp,y=x.winningCamp;break;case"victoryType":f=u.victoryType,y=x.victoryType;break;case"winner":f=C(u),y=C(x);break;default:return 0}let N;return o==="asc"?N=f>y?1:f<y?-1:0:N=f<y?1:f>y?-1:0,N===0?o==="asc"?u.gameId-x.gameId:x.gameId-u.gameId:N}):[],[n,l,o]),j=Math.ceil(g.length/I),w=(m-1)*I,A=w+I,B=g.slice(w,A);L.useEffect(()=>{if(b.current){b.current=!1;return}v(1),h(null)},[n]),L.useEffect(()=>{v(1),h(null)},[l,o]);const T=u=>{b.current=!0,v(u),h(null)},H=u=>{b.current=!0,$(u),v(1),h(null)},J=u=>{b.current=!0,h(a===u?null:u)},S=u=>{l===u?d(o==="asc"?"desc":"asc"):(c(u),d("desc"))},V=u=>l!==u?"↕️":o==="asc"?"↗️":"↘️",k=()=>{const u=[];if(e.selectedPlayer&&e.campFilter){const x=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",f=e.campFilter.excludeTraitor&&e.campFilter.selectedCamp==="Loups"?"Loups sans Traître":e.campFilter.selectedCamp;u.push(`${e.selectedPlayer} jouant ${f}${x}`)}else{if(e.selectedPlayer){const x=e.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":e.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";u.push(`Joueur: ${e.selectedPlayer}${x}`)}if(e.campFilter){const{selectedCamp:x,campFilterMode:f,excludeTraitor:y}=e.campFilter,R=`Camp: ${y&&x==="Loups"?"Loups sans Traître":x}`,E=f==="wins-only"?" (victoires uniquement)":f==="all-assignments"?" (toutes assignations)":"";u.push(R+E)}}if(e.playerPairFilter){const{selectedPlayerPair:x,selectedPairRole:f}=e.playerPairFilter,y=x.join(" & "),N=f==="wolves"?"loups":"amoureux";u.push(`Paire ${N}: ${y}`)}if(e.multiPlayerFilter){const{selectedPlayers:x,playersFilterMode:f,winnerPlayer:y}=e.multiPlayerFilter,N=x.join(" & ");let R="";f==="all-common-games"?R="toutes les parties communes":f==="opposing-camps"?R="affrontements uniquement":f==="same-camp"&&(R="parties en équipe (même camp)");const E=y?` (victoires de ${y})`:"";u.push(`${N} (${R}${E})`)}return e.selectedVictoryType&&u.push(`Victoire: ${e.selectedVictoryType}`),e.selectedHarvestRange&&u.push(`Récolte: ${e.selectedHarvestRange}`),e.selectedGameDuration&&u.push(`Durée: ${e.selectedGameDuration} jour${e.selectedGameDuration>1?"s":""}`),e.selectedGame&&u.push(`Partie #${e.selectedGame}`),e.selectedDate&&(e.selectedDate.includes("/")&&e.selectedDate.split("/").length===2?u.push(`Mois: ${e.selectedDate}`):u.push(`Date: ${e.selectedDate}`)),e.selectedGameIds&&e.selectedGameIds.length>0&&u.push(`${e.selectedGameIds.length} parties sélectionnée${e.selectedGameIds.length>1?"s":""}`),u};return i?s.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):r?s.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",r]}):!n||n.length===0?s.jsxs("div",{className:"lycans-empty-section",children:[s.jsx("h2",{children:"Aucune partie trouvée"}),s.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",e.fromComponent]})]}):s.jsxs("div",{className:"lycans-game-details",children:[s.jsxs("div",{className:"lycans-game-details-header",children:[s.jsxs("div",{className:"lycans-game-details-navigation",children:[e.fromComponent&&s.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",e.fromComponent]}),s.jsxs("h2",{children:["Détails des Parties (",n.length," partie",n.length>1?"s":"",")"]})]}),k().length>0&&s.jsxs("div",{className:"lycans-active-filters",children:[s.jsx("strong",{children:"Filtres actifs:"})," ",k().join(", ")]})]}),j>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",w+1," à ",Math.min(A,g.length)," sur ",g.length," parties"]}),s.jsxs("div",{className:"lycans-pagination-controls",children:[s.jsxs("select",{value:I,onChange:u=>H(Number(u.target.value)),className:"lycans-pagination-select",children:[s.jsx("option",{value:10,children:"10 par page"}),s.jsx("option",{value:25,children:"25 par page"}),s.jsx("option",{value:50,children:"50 par page"}),s.jsx("option",{value:100,children:"100 par page"})]}),s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>T(1),disabled:m===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>T(m-1),disabled:m===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",m," sur ",j]}),s.jsx("button",{onClick:()=>T(m+1),disabled:m===j,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>T(j),disabled:m===j,className:"lycans-pagination-btn",children:"»»"})]})]})]}),s.jsx("div",{className:"lycans-games-table-container",children:s.jsxs("table",{className:"lycans-games-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{onClick:()=>S("gameId"),className:"sortable",children:["Partie ",V("gameId")]}),s.jsxs("th",{onClick:()=>S("date"),className:"sortable",children:["Date ",V("date")]}),s.jsxs("th",{onClick:()=>S("playerCount"),className:"sortable",children:["Joueurs ",V("playerCount")]}),s.jsxs("th",{onClick:()=>S("gameDuration"),className:"sortable",children:["Durée ",V("gameDuration")]}),s.jsxs("th",{onClick:()=>S("winningCamp"),className:"sortable",children:["Camp Vainqueur ",V("winningCamp")]}),s.jsxs("th",{onClick:()=>S("victoryType"),className:"sortable",children:["Type de Victoire ",V("victoryType")]}),P&&s.jsxs("th",{onClick:()=>S("winner"),className:"sortable",children:["Vainqueur ",V("winner")]}),s.jsx("th",{children:"Détails"})]})}),s.jsx("tbody",{children:B.map(u=>s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:a===u.gameId?"selected":"",children:[s.jsxs("td",{children:["#",u.gameId]}),s.jsx("td",{children:u.date}),s.jsx("td",{children:u.playerCount}),s.jsx("td",{children:W(u.gameDuration)}),s.jsx("td",{style:{color:M[u.winningCamp]||"#fff"},children:u.winningCamp}),s.jsx("td",{children:u.victoryType}),P&&s.jsx("td",{children:C(u)}),s.jsx("td",{children:s.jsx("button",{onClick:()=>J(u.gameId),className:"lycans-details-btn",children:a===u.gameId?"Masquer":"Voir"})})]},u.gameId),a===u.gameId&&s.jsx("tr",{className:"game-details-row",children:s.jsx("td",{colSpan:P?8:7,children:s.jsx(me,{game:u})})},`${u.gameId}-details`)]}))})]})}),j>1&&s.jsxs("div",{className:"lycans-pagination-container",children:[s.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",w+1," à ",Math.min(A,g.length)," sur ",g.length," parties"]}),s.jsx("div",{className:"lycans-pagination-controls",children:s.jsxs("div",{className:"lycans-pagination-buttons",children:[s.jsx("button",{onClick:()=>T(1),disabled:m===1,className:"lycans-pagination-btn",children:"««"}),s.jsx("button",{onClick:()=>T(m-1),disabled:m===1,className:"lycans-pagination-btn",children:"‹"}),s.jsxs("span",{className:"lycans-pagination-current",children:["Page ",m," sur ",j]}),s.jsx("button",{onClick:()=>T(m+1),disabled:m===j,className:"lycans-pagination-btn",children:"›"}),s.jsx("button",{onClick:()=>T(j),disabled:m===j,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function W(e){if(e===null||e<=0)return"N/A";const t=Math.floor(e/60),n=e%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}function me({game:e}){const[t,n]=L.useState(!1);return s.jsx("div",{className:"lycans-game-detail-view",children:s.jsxs("div",{className:"lycans-game-detail-grid",children:[s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Générales"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de joueurs:"}),s.jsx("span",{className:"value",children:e.playerCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Nombre de loups:"}),s.jsx("span",{className:"value",children:e.wolfCount})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Traître:"}),s.jsx("span",{className:"value",children:e.hasTraitor?"Oui":"Non"})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Amoureux:"}),s.jsx("span",{className:"value",children:e.hasLovers?"Oui":"Non"})]}),e.soloRoles&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Rôles solo:"}),s.jsx("span",{className:"value",children:e.soloRoles})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Informations Supplémentaires"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Jours de jeu:"}),s.jsx("span",{className:"value",children:e.dayCount})]}),e.gameDuration!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Durée de la partie:"}),s.jsx("span",{className:"value",children:W(e.gameDuration)})]}),e.versions&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Version:"}),s.jsxs("span",{className:"value",children:[e.versions,e.isModded?" (moddée)":""]})]}),e.map&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Map:"}),s.jsx("span",{className:"value",children:e.map})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Résultats"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Camp vainqueur:"}),s.jsx("span",{className:"value",children:e.winningCamp})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Type de victoire:"}),s.jsx("span",{className:"value",children:e.victoryType})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants villageois:"}),s.jsx("span",{className:"value",children:e.villagerSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants loups:"}),s.jsx("span",{className:"value",children:e.wolfSurvivors})]}),e.loverSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants amoureux:"}),s.jsx("span",{className:"value",children:e.loverSurvivors})]}),e.soloSurvivors!==null&&s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Survivants solo:"}),s.jsx("span",{className:"value",children:e.soloSurvivors})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Gagnants:"}),s.jsx("span",{className:"value",children:e.winners})]})]})]}),e.harvest!==null&&s.jsxs("div",{className:"lycans-game-detail-section",children:[s.jsx("h4",{children:"Récolte"}),s.jsxs("div",{className:"lycans-game-detail-stats",children:[s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Récolte:"}),s.jsx("span",{className:"value",children:e.harvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Total possible:"}),s.jsx("span",{className:"value",children:e.totalHarvest})]}),s.jsxs("div",{className:"lycans-stat-item",children:[s.jsx("span",{className:"label",children:"Pourcentage:"}),s.jsx("span",{className:"value",children:typeof e.harvestPercentage=="number"?(e.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Rôles des Joueurs"}),s.jsx("div",{className:"lycans-player-roles-grid",children:e.playerRoles.map((i,r)=>{let l=i.role===i.camp?i.camp:`${i.camp} (${i.role})`;return s.jsxs("div",{className:"lycans-player-role-item",children:[s.jsx("div",{className:"lycans-player-name",style:{color:M[i.camp]||"#fff",textAlign:"left"},children:i.player}),s.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:l})]},r)})})]}),e.youtubeEmbedUrl&&s.jsx("div",{className:"lycans-game-detail-section full-width",children:s.jsx("button",{onClick:()=>n(!t),className:"lycans-video-toggle-btn",children:t?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),e.youtubeEmbedUrl&&t&&s.jsxs("div",{className:"lycans-game-detail-section full-width",children:[s.jsx("h4",{children:"Vidéo de la Partie"}),s.jsx("div",{className:"lycans-youtube-container",children:s.jsx("iframe",{src:e.youtubeEmbedUrl,title:`Partie Lycans #${e.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{ye as GameDetailsChart};
