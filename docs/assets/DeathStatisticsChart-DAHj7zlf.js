import{u as De,r as O,c as be,a as Ne,j as e}from"./index-DOavIGBR.js";import{u as re}from"./baseStatsHook-BvFwnyBk.js";import{D as a,g as I}from"./datasyncExport-Drm4NSNA.js";import{c as ce,a as Be,u as Ke,m as he}from"./api-U5AXZQBd.js";import{F as U,B as W,C as w,X as Y,Y as $,a as q,b as de}from"./FullscreenChart-BQupfdjW.js";import{R as Z,T as J}from"./CategoricalChart-Ou8PnHvK.js";function Re(S){const p=new Set;S.filter(h=>!h.LegacyData||h.LegacyData.deathInformationFilled===!0).forEach(h=>{h.PlayerStats.forEach(k=>{const A=I(k.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});p.add(A)})});const s=Array.from(p);return[...ce.filter(h=>s.includes(h)),...s.filter(h=>!ce.includes(h)).sort()]}function me(S){switch(S){case a.SURVIVOR:return"Survivant";case a.VOTED:return"Mort aux votes";case a.BY_WOLF:return"Tué par un loup";case a.BY_WOLF_REZ:return"Tué par un loup ressuscité";case a.BY_WOLF_LOVER:return"Tué par un loup amoureux";case a.BY_ZOMBIE:return"Tué par un zombie";case a.BY_BEAST:return"Dévoré par la Bête";case a.BY_AVATAR_CHAIN:return"Mort liée à l'Avatar";case a.BULLET:return"Abattu par un chasseur";case a.BULLET_HUMAN:return"Tué par un chasseur en humain";case a.BULLET_WOLF:return"Tué par un chasseur en loup";case a.BULLET_BOUNTYHUNTER:return"Tué par un chasseur de primes";case a.SHERIF:return"Abattu par le Shérif";case a.OTHER_AGENT:return"Éliminé par l'Agent";case a.AVENGER:return"Tué par un vengeur";case a.SEER:return"Rôle deviné par un loup";case a.HANTED:return"Tué par une potion hantée";case a.ASSASSIN:return"Tué par une potion (Assassin)";case a.LOVER_DEATH:return"Mort par amoureux";case a.LOVER_DEATH_OWN:return"Tué par son amoureux";case a.BOMB:return"Mort dans une explosion";case a.CRUSHED:return"Écrasé";case a.STARVATION:return"Mort de faim";case a.STARVATION_AS_BEAST:return"Mort bestiale";case a.FALL:return"Mort de chute";case a.UNKNOWN:default:return"Mort inconnue"}}function ge(S){switch(S){case a.SURVIVOR:return"Survivant";case a.VOTED:return"Mort aux votes";case a.BY_WOLF:return"Kill en Loup";case a.BY_WOLF_REZ:return"Kill en Loup ressuscité";case a.BY_WOLF_LOVER:return"Kill en Loup amoureux";case a.BY_ZOMBIE:return"Kill en Zombie";case a.BY_BEAST:return"Kill en Bête";case a.BY_AVATAR_CHAIN:return"Mort d'Avatar";case a.BULLET:return"Tir de Chasseur";case a.BULLET_HUMAN:return"Kill en Chasseur (sur humain)";case a.BULLET_WOLF:return"Kill en Chasseur (sur loup)";case a.BULLET_BOUNTYHUNTER:return"Kill en Chasseur de primes";case a.SHERIF:return"Kill en Shérif";case a.OTHER_AGENT:return"Kill en Agent";case a.AVENGER:return"Kill en Vengeur";case a.SEER:return"Kill en Devin";case a.HANTED:return"Kill avec Potion hantée";case a.ASSASSIN:return"Kill avec Potion (Assassin)";case a.LOVER_DEATH:return"Kill de son amoureux";case a.LOVER_DEATH_OWN:return"Kill de son propre amoureux";case a.BOMB:return"Explosion";case a.CRUSHED:return"Écrasement";case a.STARVATION:return"Famine";case a.STARVATION_AS_BEAST:return"Tuerie bestiale";case a.FALL:return"Chute mortelle";case a.UNKNOWN:default:return"Kill inconnu"}}function Ee(S){const p=new Set;S.forEach(x=>{x.PlayerStats.forEach(h=>{h.DeathType&&h.DeathType!==a.SURVIVOR&&h.DeathType!==""&&p.add(h.DeathType)})});const v=Array.from(p),s=[a.BY_WOLF,a.VOTED,a.BULLET,a.BULLET_HUMAN,a.BULLET_WOLF,a.BY_ZOMBIE,a.ASSASSIN,a.AVENGER,a.LOVER_DEATH,a.SURVIVOR];return[...s.filter(x=>v.includes(x)),...v.filter(x=>!s.includes(x)).sort()]}function ke(S,p){return S.PlayerStats.filter(v=>v.DeathType&&v.DeathType!==a.SURVIVOR&&v.DeathType!==""&&(v.DeathTiming||v.DeathType)).map(v=>{let s=null;if(v.KillerName){const x=S.PlayerStats.find(h=>h.Username===v.KillerName);x&&(s=I(x.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1}),x.MainRoleFinal&&x.MainRoleFinal!==x.MainRoleInitial&&(x.MainRoleFinal==="Loup"?s="Loup":x.MainRoleFinal==="Zombie"&&(s="Vaudou")))}return{playerName:v.Username,deathType:v.DeathType,killerName:v.KillerName,killerCamp:s}}).filter(v=>{if(!p||p==="Tous les camps")return!0;const s=S.PlayerStats.find(h=>h.Username===v.playerName);return s?I(s.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===p:!1})}function Le(S,p){const v=[];return S.PlayerStats.forEach(s=>{if(s.KillerName&&s.DeathType){if(s.DeathType===a.SURVIVOR||s.DeathType===a.VOTED||s.DeathType===a.STARVATION||s.DeathType===a.FALL||s.DeathType===a.BY_AVATAR_CHAIN||s.DeathType==="")return;const x=S.PlayerStats.find(k=>k.Username===s.KillerName);if(!x)return;let h=I(x.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});x.MainRoleFinal&&x.MainRoleFinal!==x.MainRoleInitial&&(x.MainRoleFinal==="Loup"?h="Loup":x.MainRoleFinal==="Zombie"&&(h="Vaudou")),v.push({killerName:s.KillerName,victimName:s.Username,deathType:s.DeathType,killerCamp:h})}}),p&&p!=="Tous les camps"?v.filter(s=>s.killerCamp===p):v}function Ve(S,p){if(S.length===0)return null;const v=S.filter(m=>!m.LegacyData||m.LegacyData.deathInformationFilled===!0);if(v.length===0)return null;const s=[],x={};v.forEach(m=>{ke(m,p).forEach(u=>{s.push({...u,gameId:m.Id})}),m.PlayerStats.forEach(u=>{const F=u.Username;(!p||p==="Tous les camps"||I(u.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===p)&&(x[F]=(x[F]||0)+1)})});const h=s.length,k=v.length,A=k>0?h/k:0,G={};s.forEach(m=>{G[m.deathType]=(G[m.deathType]||0)+1});const E=Object.entries(G).map(([m,r])=>({type:m,count:r||0,percentage:h>0?(r||0)/h*100:0})).sort((m,r)=>r.count-m.count),g={};v.forEach(m=>{Le(m,p).forEach(u=>{g[u.killerName]||(g[u.killerName]={kills:0,victims:new Set,killsByDeathType:{}}),g[u.killerName].kills++,g[u.killerName].victims.add(u.victimName),g[u.killerName].killsByDeathType[u.deathType]=(g[u.killerName].killsByDeathType[u.deathType]||0)+1})});const R=Object.entries(g).map(([m,r])=>{const u=x[m]||0,F=u>0?r.kills/u:0;return{killerName:m,kills:r.kills,victims:Array.from(r.victims),percentage:h>0?r.kills/h*100:0,gamesPlayed:u,averageKillsPerGame:F,killsByDeathType:r.killsByDeathType}}).sort((m,r)=>r.kills-m.kills),L={};s.forEach(m=>{L[m.playerName]||(L[m.playerName]={totalDeaths:0,deathsByType:{},killedBy:{},deathDays:[]});const r=L[m.playerName];r.totalDeaths++,r.deathsByType[m.deathType]=(r.deathsByType[m.deathType]||0)+1,m.killerName&&(r.killedBy[m.killerName]=(r.killedBy[m.killerName]||0)+1)});const b=Object.entries(L).map(([m,r])=>({playerName:m,totalDeaths:r.totalDeaths,deathsByType:r.deathsByType,killedBy:r.killedBy,averageDeathDay:r.deathDays.length>0?r.deathDays.reduce((u,F)=>u+F,0)/r.deathDays.length:null,deathRate:x[m]>0?r.totalDeaths/x[m]:0})).sort((m,r)=>r.totalDeaths-m.totalDeaths),H=E.length>0?E[0].type:null,z=R.length>0?R[0].killerName:null;return{totalDeaths:h,totalGames:k,averageDeathsPerGame:A,deathsByType:E,killerStats:R,playerDeathStats:b,mostCommonDeathType:H,mostDeadlyKiller:z}}function Ce(S,p){const v=S.filter(E=>!E.LegacyData||E.LegacyData.deathInformationFilled===!0),s={},x=v.length,h=[a.BULLET,a.BULLET_HUMAN,a.BULLET_WOLF,a.BULLET_BOUNTYHUNTER];v.forEach(E=>{const g=new Set;E.PlayerStats.forEach(R=>{R.MainRoleInitial==="Chasseur"&&(g.add(R.Username),s[R.Username]||(s[R.Username]={kills:[],gamesPlayed:0,victimsCamps:[]}),s[R.Username].gamesPlayed++)}),E.PlayerStats.forEach(R=>{const L=R.DeathType,b=R.KillerName;if(L&&h.includes(L)&&b&&g.has(b)){const H=I(R.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});s[b].kills.push(L),s[b].victimsCamps.push(H)}})});const k=Object.entries(s).map(([E,g])=>{const R=g.kills.length,L={};g.kills.forEach(u=>{L[u]=(L[u]||0)+1});const b={};g.victimsCamps.forEach(u=>{b[u]=(b[u]||0)+1});const H=g.victimsCamps.filter(u=>u!=="Villageois").length,z=g.victimsCamps.filter(u=>u==="Villageois").length,m=g.gamesPlayed>0?R/g.gamesPlayed:0,r=g.gamesPlayed>0?H/g.gamesPlayed:0;return{hunterName:E,totalKills:R,nonVillageoisKills:H,villageoisKills:z,gamesPlayedAsHunter:g.gamesPlayed,averageKillsPerGame:m,averageNonVillageoisKillsPerGame:r,killsByDeathType:L,victimsByCamp:b}}).sort((E,g)=>g.totalKills-E.totalKills),A=k.length>0?k[0].hunterName:null,G=k.length>0?k.sort((E,g)=>g.averageNonVillageoisKillsPerGame-E.averageNonVillageoisKillsPerGame)[0].hunterName:null;return{totalHunters:k.length,totalGames:x,hunterStats:k,bestHunter:A,bestAverageHunter:G}}function Me(S){return re(p=>Ve(p,S))}function Fe(){return re(S=>Re(S))}function He(S){return re(p=>Ce(p))}function We(){const{navigateToGameDetails:S,navigationState:p,updateNavigationState:v}=De(),[s,x]=O.useState(p.deathStatisticsState?.selectedCamp||p.deathStatsSelectedCamp||"Tous les camps"),[h,k]=O.useState(p.deathStatisticsState?.minGamesForAverage||10),[A,G]=O.useState(p.deathStatisticsState?.selectedView||"killers"),{data:E}=Fe(),{data:g,isLoading:R,error:L}=Me(s),{data:b,isLoading:H,error:z}=He(),{data:m}=be(),{settings:r}=Ne(),u=Be(),F=Ke(),[Q,X]=O.useState(null);O.useEffect(()=>{(!p.deathStatisticsState||p.deathStatisticsState.selectedCamp!==s||p.deathStatisticsState.minGamesForAverage!==h||p.deathStatisticsState.selectedView!==A)&&v({deathStatisticsState:{selectedCamp:s,minGamesForAverage:h,selectedView:A,focusChart:p.deathStatisticsState?.focusChart}})},[s,h,A,p.deathStatisticsState,v]);const P=O.useMemo(()=>m?Ee(m):[],[m]),C=O.useMemo(()=>{const t={};P.forEach(l=>{l===a.BY_WOLF||l===a.BY_WOLF_REZ||l===a.BY_WOLF_LOVER?t[l]=u.Loup:l===a.VOTED?t[l]="var(--chart-color-1)":l===a.BULLET||l===a.BULLET_BOUNTYHUNTER||l===a.BULLET_HUMAN||l===a.BULLET_WOLF?t[l]=u.Chasseur:l===a.BY_ZOMBIE?t[l]=u.Vaudou:l===a.ASSASSIN?t[l]=u.Alchimiste:l===a.AVENGER?t[l]="var(--chart-color-2)":l===a.LOVER_DEATH||l===a.LOVER_DEATH_OWN?t[l]=u.Amoureux:l===a.BY_BEAST?t[l]="var(--chart-color-3)":l===a.SURVIVOR?t[l]="var(--chart-color-4)":l===a.SHERIF&&(t[l]="var(--chart-color-5)")});const n=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let i=0;return P.forEach(l=>{t[l]||(t[l]=n[i%n.length],i++)}),t},[P,u]),ue=t=>{x(t),v({deathStatsSelectedCamp:t,deathStatisticsState:{selectedCamp:t,minGamesForAverage:h,selectedView:A,focusChart:p.deathStatisticsState?.focusChart}})},ie=t=>{k(t),v({deathStatisticsState:{selectedCamp:s,minGamesForAverage:t,selectedView:A,focusChart:p.deathStatisticsState?.focusChart}})},ee=t=>{G(t),v({deathStatisticsState:{selectedCamp:s,minGamesForAverage:h,selectedView:t,focusChart:p.deathStatisticsState?.focusChart}})},{totalKillsData:le,averageKillsData:se,highlightedPlayerAddedToTotal:pe,highlightedPlayerAddedToAverage:ye,gamesWithKillers:ve,totalEligibleForAverage:xe}=O.useMemo(()=>{if(!g)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1,gamesWithKillers:0,totalEligibleForAverage:0};const t=g.killerStats.sort((c,f)=>f.kills-c.kills).slice(0,15),n=r.highlightedPlayer&&t.some(c=>c.killerName===r.highlightedPlayer),i=t.map(c=>{const f={name:c.killerName,value:c.kills,victims:c.victims.length,percentage:c.percentage,gamesPlayed:c.gamesPlayed,averageKillsPerGame:c.averageKillsPerGame,isHighlightedAddition:!1};return P.forEach(N=>{f[N]=c.killsByDeathType[N]||0}),f});let l=!1;if(r.highlightedPlayer&&!n){const c=g.killerStats.find(f=>f.killerName===r.highlightedPlayer);if(c){const f={name:c.killerName,value:c.kills,victims:c.victims.length,percentage:c.percentage,gamesPlayed:c.gamesPlayed,averageKillsPerGame:c.averageKillsPerGame,isHighlightedAddition:!0};P.forEach(N=>{f[N]=c.killsByDeathType[N]||0}),i.push(f),l=!0}}const T=g.killerStats.filter(c=>c.gamesPlayed>=h),D=T.sort((c,f)=>f.averageKillsPerGame-c.averageKillsPerGame).slice(0,15),V=r.highlightedPlayer&&D.some(c=>c.killerName===r.highlightedPlayer),y=D.map(c=>{const f={name:c.killerName,value:c.averageKillsPerGame,victims:c.victims.length,percentage:c.percentage,gamesPlayed:c.gamesPlayed,averageKillsPerGame:c.averageKillsPerGame,isHighlightedAddition:!1};return P.forEach(N=>{const _=c.killsByDeathType[N]||0;f[N]=c.gamesPlayed>0?_/c.gamesPlayed:0}),f});let B=!1;if(r.highlightedPlayer&&!V){const c=g.killerStats.find(f=>f.killerName===r.highlightedPlayer);if(c){const f={name:c.killerName,value:c.averageKillsPerGame,victims:c.victims.length,percentage:c.percentage,gamesPlayed:c.gamesPlayed,averageKillsPerGame:c.averageKillsPerGame,isHighlightedAddition:!0};P.forEach(N=>{const _=c.killsByDeathType[N]||0;f[N]=c.gamesPlayed>0?_/c.gamesPlayed:0}),y.push(f),B=!0}}return{totalKillsData:i,averageKillsData:y,highlightedPlayerAddedToTotal:l,highlightedPlayerAddedToAverage:B,gamesWithKillers:g.totalGames,totalEligibleForAverage:T.length}},[g,r.highlightedPlayer,h,P]),{totalDeathsData:ne,survivalRateData:oe,highlightedPlayerAddedToDeaths:fe,highlightedPlayerAddedToSurvival:je}=O.useMemo(()=>{if(!g||!m)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const t={},n=m.filter(o=>!o.LegacyData||o.LegacyData.deathInformationFilled===!0);n.forEach(o=>{o.PlayerStats.forEach(d=>{const j=d.Username;(!s||s==="Tous les camps"||I(d.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===s)&&(t[j]=(t[j]||0)+1)})});const i=g.playerDeathStats.sort((o,d)=>d.totalDeaths-o.totalDeaths).slice(0,15),l=r.highlightedPlayer&&i.some(o=>o.playerName===r.highlightedPlayer),T=i.map(o=>{const d=t[o.playerName]||0,j=d>0?(d-o.totalDeaths)/d*100:0,K={name:o.playerName,value:o.totalDeaths,totalDeaths:o.totalDeaths,gamesPlayed:d,deathRate:o.deathRate,survivalRate:j,isHighlightedAddition:!1};return P.forEach(M=>{K[M]=o.deathsByType[M]||0}),K});let D=!1;if(r.highlightedPlayer&&!l){const o=g.playerDeathStats.find(d=>d.playerName===r.highlightedPlayer);if(o){const d=t[o.playerName]||0,j=d>0?(d-o.totalDeaths)/d*100:0,K={name:o.playerName,value:o.totalDeaths,totalDeaths:o.totalDeaths,gamesPlayed:d,deathRate:o.deathRate,survivalRate:j,isHighlightedAddition:!0};P.forEach(M=>{K[M]=o.deathsByType[M]||0}),T.push(K),D=!0}}const V={},y={};n.forEach(o=>{o.PlayerStats.forEach(d=>{const j=d.Username;if((!s||s==="Tous les camps"||I(d.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===s)&&d.DeathType&&d.DeathType!=="N/A"){y[j]||(y[j]={totalDeaths:0,deathsByType:{}}),y[j].totalDeaths++;const M=d.DeathType;y[j].deathsByType[M]=(y[j].deathsByType[M]||0)+1}})}),Object.entries(t).forEach(([o,d])=>{if(d>=h){const j=y[o],K=j?j.totalDeaths:0,M=j?j.deathsByType:{},te=d>0?(d-K)/d*100:0,ae=d>0?K/d:0;V[o]={playerName:o,totalDeaths:K,deathsByType:M,gamesPlayed:d,survivalRate:te,deathRate:ae}}});const c=Object.values(V).sort((o,d)=>d.survivalRate-o.survivalRate).slice(0,15),f=r.highlightedPlayer&&c.some(o=>o.playerName===r.highlightedPlayer),N=c.map(o=>{const d={name:o.playerName,value:o.survivalRate,totalDeaths:o.totalDeaths,gamesPlayed:o.gamesPlayed,deathRate:o.deathRate,survivalRate:o.survivalRate,isHighlightedAddition:!1};return P.forEach(j=>{const K=o.deathsByType[j]||0;d[j]=o.gamesPlayed>0?K/o.gamesPlayed*100:0}),d});let _=!1;if(r.highlightedPlayer&&!f){let o=V[r.highlightedPlayer];if(!o){const d=t[r.highlightedPlayer]||0,j=y[r.highlightedPlayer],K=j?j.totalDeaths:0,M=j?j.deathsByType:{},te=d>0?(d-K)/d*100:0,ae=d>0?K/d:0;o={playerName:r.highlightedPlayer,totalDeaths:K,deathsByType:M,gamesPlayed:d,survivalRate:te,deathRate:ae}}if(o){const d={name:o.playerName,value:o.survivalRate,totalDeaths:o.totalDeaths,gamesPlayed:o.gamesPlayed,deathRate:o.deathRate,survivalRate:o.survivalRate,isHighlightedAddition:!0};P.forEach(j=>{const K=o.deathsByType[j]||0;d[j]=o.gamesPlayed>0?K/o.gamesPlayed*100:0}),N.push(d),_=!0}}return{totalDeathsData:T,survivalRateData:N,highlightedPlayerAddedToDeaths:D,highlightedPlayerAddedToSurvival:_}},[g,m,r.highlightedPlayer,h,P,s]);if(R)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."});if(L)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",L]});if(!g)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de mort disponible"});const Se=({active:t,payload:n,label:i})=>{if(t&&n&&n.length){const l=n[0].payload,T=l.isHighlightedAddition,D=r.highlightedPlayer===l.name,V=P.reduce((y,B)=>y+(l[B]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:D?"var(--accent-primary)":"var(--text-primary)"},children:[i,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",V]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",l.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill:"}),P.map(y=>{const B=l[y]||0;return B===0?null:e.jsxs("p",{style:{color:C[y],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:C[y],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ge(y),":"]})," ",B]},y)})]}),T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),D&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},Te=({active:t,payload:n,label:i})=>{if(t&&n&&n.length){const l=n[0].payload,T=l.isHighlightedAddition,D=r.highlightedPlayer===l.name,V=l.gamesPlayed>=h,y=g?.killerStats.find(f=>f.killerName===l.name),B=P.reduce((f,N)=>f+(l[N]||0),0),c=y?y.kills:Math.round(B*l.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:D?"var(--accent-primary)":"var(--text-primary)"},children:[i,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",B.toFixed(2)," (",c," kills /",l.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",l.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill (moyenne):"}),P.map(f=>{const N=l[f]||0;if(N===0)return null;const _=y?y.killsByDeathType[f]||0:Math.round(N*l.gamesPlayed);return e.jsxs("p",{style:{color:C[f],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:C[f],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ge(f),":"]})," ",N.toFixed(2)," (",_," kills /",l.gamesPlayed," games)"]},f)})]}),T&&!V&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",h," parties)"]}),T&&V&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),D&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},Pe=({active:t,payload:n,label:i})=>{if(t&&n&&n.length){const l=n[0].payload,T=l.isHighlightedAddition,D=r.highlightedPlayer===l.name,V=P.reduce((y,B)=>y+(l[B]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:D?"var(--accent-primary)":"var(--text-primary)"},children:[i,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",V]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",l.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",l.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort:"}),P.map(y=>{const B=l[y]||0;return B===0?null:e.jsxs("p",{style:{color:C[y],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:C[y],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[me(y),":"]})," ",B]},y)})]}),T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),D&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},Ae=({active:t,payload:n,label:i})=>{if(t&&n&&n.length){const l=n[0].payload,T=l.isHighlightedAddition,D=r.highlightedPlayer===l.name,V=l.gamesPlayed>=h;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:D?"var(--accent-primary)":"var(--text-primary)"},children:[i,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",l.survivalRate.toFixed(1),"% (",l.gamesPlayed-l.totalDeaths," survies / ",l.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",l.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",l.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort (taux %):"}),P.map(y=>{const B=l[y]||0;return B===0?null:e.jsxs("p",{style:{color:C[y],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:C[y],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[me(y),":"]})," ",B.toFixed(1),"%"]},y)})]}),T&&!V&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",h," parties)"]}),T&&V&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),D&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"Statistiques de Tueurs"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${A==="killers"?"active":""}`,onClick:()=>ee("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${A==="deaths"?"active":""}`,onClick:()=>ee("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${A==="hunter"?"active":""}`,onClick:()=>ee("hunter"),children:"Chasseur"})]}),(A==="killers"||A==="deaths")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:s,onChange:t=>ue(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),E?.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),(A==="killers"||A==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:g.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiés"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:g.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrées"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:ve})]})]}),A==="killers"&&e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:s==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${s} (Total)`}),pe&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(U,{title:s==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${s} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:le,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(Se,{})}),P.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"kills",fill:C[t],onClick:n=>{const i={selectedPlayer:n?.name,fromComponent:"Statistiques de Mort"};s!=="Tous les camps"&&(i.campFilter={selectedCamp:s,campFilterMode:"all-assignments"}),S(i)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,le.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:s==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${s} (Moyenne par partie)`}),ye&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:h,onChange:t=>ie(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:he.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(U,{title:s==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${s} (Moyenne par partie)`,children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:se,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(Te,{})}),P.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"averageKills",fill:C[t],onClick:n=>{const i={selectedPlayer:n?.name,fromComponent:"Statistiques de Mort"};s!=="Tous les camps"&&(i.campFilter={selectedCamp:s,campFilterMode:"all-assignments"}),S(i)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,se.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",xe," ayant au moins ",h," partie",h>1?"s":"",")"]})]})]}),A==="deaths"&&e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:s==="Tous les camps"?"Morts (Total)":`Morts en ${s} (Total)`}),fe&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(U,{title:s==="Tous les camps"?"Morts (Total)":`Morts en ${s} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:ne,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(Pe,{})}),P.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"deaths",fill:C[t],onClick:n=>{const i={selectedPlayer:n?.name,fromComponent:"Statistiques de Mort"};s!=="Tous les camps"&&(i.campFilter={selectedCamp:s,campFilterMode:"all-assignments"}),S(i)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,ne.filter(t=>!t.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",s==="Tous les camps"?"(Total)":` en ${s}`]}),je&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',r.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:h,onChange:t=>ie(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:he.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(U,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:oe,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Taux de mort (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(J,{content:e.jsx(Ae,{})}),P.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"survivalRate",fill:C[t],onClick:n=>{const i={selectedPlayer:n?.name,fromComponent:"Statistiques de Mort"};s!=="Tous les camps"&&(i.campFilter={selectedCamp:s,campFilterMode:"all-assignments"}),S(i)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,oe.filter(t=>!t.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",h," partie",h>1?"s":"",")"]})]})]}),A==="hunter"&&e.jsxs(e.Fragment,{children:[H&&e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."}),z&&e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",z]}),!H&&!z&&b&&e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Meilleurs Chasseurs (Tueurs de Non-Villageois)"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:"Classement basé sur la moyenne de kills de joueurs non-Villageois (minimum 5 parties jouées en Chasseur)"})]}),e.jsx(U,{title:"Meilleurs Chasseurs",children:e.jsx("div",{style:{height:500},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).sort((t,n)=>n.averageNonVillageoisKillsPerGame-t.averageNonVillageoisKillsPerGame).slice(0,15).map(t=>({name:t.hunterName,averageNonVillageoisKills:Number(t.averageNonVillageoisKillsPerGame.toFixed(2)),totalNonVillageoisKills:t.nonVillageoisKills,totalKills:t.totalKills,gamesPlayed:t.gamesPlayedAsHunter,villageoisKills:t.villageoisKills,victimsByCamp:t.victimsByCamp})),margin:{top:20,right:30,left:20,bottom:120},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:120,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Kills moyens (Non-Villageois)",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(J,{content:({active:t,payload:n})=>{if(!t||!n||n.length===0)return null;const i=n[0].payload,l=r.highlightedPlayer===i.name;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsx("p",{style:{fontWeight:"bold",marginBottom:"8px"},children:i.name}),e.jsxs("p",{style:{color:"var(--accent-primary)",margin:"4px 0"},children:["Moyenne kills non-Villageois : ",e.jsx("strong",{children:i.averageNonVillageoisKills})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills non-Villageois : ",i.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills Villageois : ",i.villageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills : ",i.totalKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Parties jouées : ",i.gamesPlayed]}),i.victimsByCamp&&Object.keys(i.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"bold",marginBottom:"4px"},children:"Kills par camp :"}),Object.entries(i.victimsByCamp).map(([T,D])=>e.jsxs("p",{style:{fontSize:"0.8rem",margin:"2px 0",paddingLeft:"8px"},children:["• ",T," : ",D]},T))]}),l&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"🎯 Joueur sélectionné"})]})}}),e.jsx(q,{dataKey:"averageNonVillageoisKills",name:"Kills moyens (Non-Villageois)",fill:u.Chasseur||"#8884d8",children:b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).sort((t,n)=>n.averageNonVillageoisKillsPerGame-t.averageNonVillageoisKillsPerGame).slice(0,15).map((t,n)=>{const i=r.highlightedPlayer===t.hunterName,l=Q===t.hunterName;return e.jsx(de,{fill:F[t.hunterName]||u.Chasseur||"#8884d8",stroke:i?"var(--accent-primary)":l?"var(--text-primary)":"none",strokeWidth:i?3:l?2:0,onMouseEnter:()=>X(t.hunterName),onMouseLeave:()=>X(null),style:{cursor:"pointer"}},`cell-best-hunter-${n}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs (Tueurs de Villageois)"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:"Classement basé sur la moyenne de kills de joueurs Villageois (minimum 5 parties jouées en Chasseur)"})]}),e.jsx(U,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:500},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(W,{data:b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).map(t=>({name:t.hunterName,averageVillageoisKills:Number((t.villageoisKills/t.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:t.villageoisKills,totalNonVillageoisKills:t.nonVillageoisKills,totalKills:t.totalKills,gamesPlayed:t.gamesPlayedAsHunter,victimsByCamp:t.victimsByCamp})).sort((t,n)=>n.averageVillageoisKills-t.averageVillageoisKills).slice(0,15),margin:{top:20,right:30,left:20,bottom:120},children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:120,interval:0,tick:({x:t,y:n,payload:i})=>e.jsx("text",{x:t,y:n,dy:16,textAnchor:"end",fill:r.highlightedPlayer===i.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===i.value?14:13,fontWeight:r.highlightedPlayer===i.value?"bold":"italic",transform:`rotate(-45 ${t} ${n})`,children:i.value})}),e.jsx($,{label:{value:"Kills moyens (Villageois)",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(J,{content:({active:t,payload:n})=>{if(!t||!n||n.length===0)return null;const i=n[0].payload,l=r.highlightedPlayer===i.name;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsx("p",{style:{fontWeight:"bold",marginBottom:"8px"},children:i.name}),e.jsxs("p",{style:{color:"#dc3545",margin:"4px 0"},children:["Moyenne kills Villageois : ",e.jsx("strong",{children:i.averageVillageoisKills})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills Villageois : ",i.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills non-Villageois : ",i.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Total kills : ",i.totalKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:["Parties jouées : ",i.gamesPlayed]}),i.victimsByCamp&&Object.keys(i.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"bold",marginBottom:"4px"},children:"Kills par camp :"}),Object.entries(i.victimsByCamp).map(([T,D])=>e.jsxs("p",{style:{fontSize:"0.8rem",margin:"2px 0",paddingLeft:"8px"},children:["• ",T," : ",D]},T))]}),l&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontStyle:"italic",textAlign:"center"},children:"🎯 Joueur sélectionné"})]})}}),e.jsx(q,{dataKey:"averageVillageoisKills",name:"Kills moyens (Villageois)",fill:"#dc3545",children:b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).map(t=>({name:t.hunterName,averageVillageoisKills:Number((t.villageoisKills/t.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:t.villageoisKills,totalNonVillageoisKills:t.nonVillageoisKills,totalKills:t.totalKills,gamesPlayed:t.gamesPlayedAsHunter,victimsByCamp:t.victimsByCamp})).sort((t,n)=>n.averageVillageoisKills-t.averageVillageoisKills).slice(0,15).map((t,n)=>{const i=r.highlightedPlayer===t.name,l=Q===t.name;return e.jsx(de,{fill:F[t.name]||"#dc3545",stroke:i?"var(--accent-primary)":l?"var(--text-primary)":"none",strokeWidth:i?3:l?2:0,onMouseEnter:()=>X(t.name),onMouseLeave:()=>X(null),style:{cursor:"pointer"}},`cell-bad-hunter-${n}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,b.hunterStats.filter(t=>t.gamesPlayedAsHunter>=5).length)," des chasseurs ayant le plus tué de Villageois (minimum 5 parties en Chasseur)"]})]})]}),!H&&!z&&(!b||b.hunterStats.length===0)&&e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnée Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"Données en cours de récupération (données partielles)."]})})]})}export{We as DeathStatisticsChart};
