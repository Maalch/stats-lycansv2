import{f as L,u as H,a as K,r as R,j as e}from"./index-ik0w3zCM.js";import{u as O}from"./baseStatsHook-Dm9U5sRU.js";import{g as J}from"./gameUtils-YAghv5YU.js";import{g as _}from"./datasyncExport-DNugpht-.js";import{u as X}from"./usePlayerStatsFromRaw-rBNx0Hsy.js";import{a as Y,l as I}from"./api-DBFAV0XL.js";import{F as A,C as T,X as M,Y as k,B as $,a as N,b as S}from"./FullscreenChart-ngywYAvU.js";import{R as D,T as F}from"./CategoricalChart-DOhEKz7k.js";import{L as U,a as Q}from"./LineChart-DCrUxStS.js";import{P as Z,a as ee}from"./PieChart-2mxhG9ds.js";import{R as V}from"./ReferenceLine-Cs7PWLCI.js";import"./ActivePoints-C-hydmr5.js";import"./PolarChart-Bjd-O_wW.js";function re(d,u){if(!d||d.trim()===""||u.length===0)return null;const p=[];u.forEach(s=>{const o=s.PlayerStats.find(j=>j.Username.toLowerCase()===d.toLowerCase());if(o){const j=_(o.MainRoleFinal),w=J(s),c=o.Victorious,z=L(new Date(s.StartDate));p.push({gameId:s.Id,date:z,camp:j,won:c,winnerCamp:w,playersInGame:s.PlayerStats.length,mapName:s.MapName})}}),p.sort((s,o)=>{const j=w=>{const c=w.split("/");return c.length===3?new Date(parseInt(c[2]),parseInt(c[1])-1,parseInt(c[0])):new Date(w)};return j(o.date).getTime()-j(s.date).getTime()});const m=p.length,g=p.filter(s=>s.won).length,f=m>0?(g/m*100).toFixed(2):"0.00",x={};p.forEach(s=>{x[s.camp]||(x[s.camp]={appearances:0,wins:0,winRate:"0.00"}),x[s.camp].appearances++,s.won&&x[s.camp].wins++}),Object.keys(x).forEach(s=>{const o=x[s];o.winRate=o.appearances>0?(o.wins/o.appearances*100).toFixed(2):"0.00"});const y={};return p.forEach(s=>{y[s.mapName]||(y[s.mapName]={appearances:0,wins:0,winRate:"0.00"}),y[s.mapName].appearances++,s.won&&y[s.mapName].wins++}),Object.keys(y).forEach(s=>{const o=y[s];o.winRate=o.appearances>0?(o.wins/o.appearances*100).toFixed(2):"0.00"}),{playerName:d,totalGames:m,totalWins:g,winRate:f,games:p,campStats:x,mapStats:y}}function te(d){const u={};let p=0,m=0;return Object.entries(d).forEach(([g,f])=>{g==="Village"||g==="Ch√¢teau"?u[g]={...f}:(p+=f.appearances,m+=f.wins)}),p>=10&&(u.Autres={appearances:p,wins:m,winRate:p>0?(m/p*100).toFixed(2):"0.00"}),u}function ae(d){const{data:u,isLoading:p,error:m}=O(g=>d?re(d,g):null);return{data:u,isLoading:p,error:m}}function fe(){const{navigateToGameDetails:d,navigationState:u,updateNavigationState:p}=H(),{settings:m}=K(),g=Y(),{data:f}=X(),x=R.useMemo(()=>{if(!f?.playerStats)return["Ponce"];const t=f.playerStats.filter(a=>a.gamesPlayed>0).map(a=>a.player).sort();return m.highlightedPlayer&&!t.includes(m.highlightedPlayer)&&f.playerStats.some(a=>a.player===m.highlightedPlayer&&a.gamesPlayed>0)&&(t.push(m.highlightedPlayer),t.sort()),t},[f,m.highlightedPlayer]),s=u.selectedPlayerName&&x.includes(u.selectedPlayerName)?u.selectedPlayerName:m.highlightedPlayer&&x.includes(m.highlightedPlayer)?m.highlightedPlayer:x.includes("Ponce")?"Ponce":x[0]||"",o=u.groupingMethod||"session",j=t=>{p({selectedPlayerName:t})},w=t=>{p({groupingMethod:t})},{data:c,isLoading:z,error:q}=ae(s),W=R.useMemo(()=>{if(!c?.games)return new Map;const t=new Map;return c.games.forEach(a=>{if(!t.has(a.date)){const r=a.date.split("/");r.length===3?t.set(a.date,new Date(parseInt(r[2]),parseInt(r[1])-1,parseInt(r[0])).getTime()):t.set(a.date,new Date(a.date).getTime())}}),t},[c?.games]),C=R.useMemo(()=>{if(!c?.games)return[];const t={};return c.games.forEach(a=>{let r;if(o==="month"){const i=a.date.split("/");i.length===3?r=`${i[1]}/${i[2]}`:r=a.date}else r=a.date;t[r]||(t[r]={games:[],wins:0,total:0}),t[r].games.push(a),t[r].total++,a.won&&t[r].wins++}),Object.entries(t).map(([a,r])=>({period:a,totalGames:r.total,victories:r.wins,defeats:r.total-r.wins,winRate:r.total>0?(r.wins/r.total*100).toFixed(1):"0.0",winRateNum:r.total>0?r.wins/r.total*100:0})).sort((a,r)=>{if(o==="month"){const[i,n]=a.period.split("/"),[l,v]=r.period.split("/"),E=new Date(parseInt(n),parseInt(i)-1,1),B=new Date(parseInt(v),parseInt(l)-1,1);return E.getTime()-B.getTime()}else{const i=W.get(a.period)||0,n=W.get(r.period)||0;return i-n}})},[c,o,W]),P=R.useMemo(()=>c?.campStats?Object.entries(c.campStats).map(([t,a])=>({name:t,value:a.appearances,winRate:a.winRate,winRateDisplay:Math.max(parseFloat(a.winRate),1),wins:a.wins,percentage:(a.appearances/c.totalGames*100).toFixed(1)})):[],[c]),G=R.useMemo(()=>{if(!P.length)return[];const t=5;let a=0;const r=[],i=[];if(P.forEach(n=>{parseFloat(n.percentage)<t?(a+=Number(n.value),r.push(n)):i.push(n)}),a>0){const n=P.reduce((l,v)=>l+Number(v.value),0);i.push({name:"Autres",value:a,winRate:"0.0",wins:r.reduce((l,v)=>l+v.wins,0),percentage:(a/n*100).toFixed(1),_details:r})}return i},[P]),h=R.useMemo(()=>{if(!c?.mapStats)return[];const t=te(c.mapStats);return Object.entries(t).map(([a,r])=>({name:a,value:r.appearances,winRate:r.winRate,winRateDisplay:Math.max(parseFloat(r.winRate),.1),wins:r.wins,percentage:(r.appearances/c.totalGames*100).toFixed(1)}))},[c]),b=(t=>t<=15?{fontSize:12,angle:-45,height:80,interval:0}:t<=30?{fontSize:12,angle:-45,height:85,interval:1}:t<=50?{fontSize:12,angle:-60,height:95,interval:2}:{fontSize:12,angle:-75,height:105,interval:Math.floor(t/12)})(C.length);return z?e.jsx("div",{className:"donnees-attente",children:"Chargement de l'historique du joueur..."}):q?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",q]}):c?e.jsxs("div",{className:"lycans-player-history",children:[e.jsx("h2",{children:"Historique D√©taill√© d'un Joueur"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"player-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Joueur:"}),e.jsx("select",{id:"player-select",value:s,onChange:t=>j(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"120px"},children:x.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"grouping-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Groupement:"}),e.jsxs("select",{id:"grouping-select",value:o,onChange:t=>w(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"120px"},children:[e.jsx("option",{value:"session",children:"Par session"}),e.jsx("option",{value:"month",children:"Par mois"})]})]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total Parties"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{d({selectedPlayer:s,fromComponent:"Historique Joueur - Total Parties"})},title:`Cliquer pour voir toutes les parties de ${s}`,children:c.totalGames}),e.jsx("p",{children:"parties jou√©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Victoires"}),e.jsx("div",{className:"lycans-valeur-principale lycans-clickable",onClick:()=>{d({selectedPlayer:s,selectedPlayerWinMode:"wins-only",fromComponent:"Historique Joueur - Victoires"})},title:`Cliquer pour voir toutes les victoires de ${s}`,children:c.totalWins}),e.jsx("p",{children:"parties gagn√©es"})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Taux de Victoire"}),e.jsxs("div",{className:"lycans-valeur-principale",children:[c.winRate,"%"]}),e.jsx("p",{children:"pourcentage global"})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["√âvolution des Performances ",o==="month"?"par Mois":"par Session"]}),e.jsx(A,{title:`√âvolution des Performances ${o==="month"?"par Mois":"par Session"}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(U,{data:C,margin:{top:20,right:30,left:20,bottom:20},onClick:t=>{if(t&&t.activeLabel){const a=C.find(r=>r.period===t.activeLabel);a&&d({selectedPlayer:s,selectedDate:a.period,fromComponent:`√âvolution des Performances ${o==="month"?"par Mois":"par Session"}`})}},style:{cursor:"pointer"},children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"period",angle:b.angle,textAnchor:"end",height:b.height,interval:b.interval,fontSize:b.fontSize}),e.jsx(k,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(F,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.period})}),e.jsxs("div",{children:["Parties: ",r.totalGames]}),e.jsxs("div",{children:["Victoires: ",r.victories]}),e.jsxs("div",{children:["Taux: ",r.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(Q,{type:"monotone",dataKey:"winRateNum",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:2,r:4}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("h3",{children:["R√©partition Victoires/D√©faites ",o==="month"?"par Mois":"par Session"]}),e.jsx(A,{title:`R√©partition Victoires/D√©faites ${o==="month"?"par Mois":"par Session"}`,children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:C,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"period",angle:b.angle,textAnchor:"end",height:b.height,interval:b.interval,fontSize:b.fontSize}),e.jsx(k,{label:{value:"Nombre de parties",angle:270,position:"left",style:{textAnchor:"middle"}},allowDecimals:!1}),e.jsx(F,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.period})}),e.jsxs("div",{children:["Total: ",r.totalGames," parties"]}),e.jsxs("div",{children:["Victoires: ",r.victories]}),e.jsxs("div",{children:["D√©faites: ",r.defeats]}),e.jsxs("div",{children:["Taux: ",r.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(N,{dataKey:"victories",stackId:"games",fill:"var(--accent-tertiary)",name:"Victoires",children:C.map((t,a)=>e.jsx(S,{fill:"var(--accent-tertiary)",onClick:()=>{d({selectedPlayer:s,selectedDate:t.period,fromComponent:`Historique Joueur - Victoires ${o==="month"?"par Mois":"par Session"}`})},style:{cursor:"pointer"}},`cell-victories-${a}`))}),e.jsx(N,{dataKey:"defeats",stackId:"games",fill:"var(--chart-color-4)",name:"D√©faites",children:C.map((t,a)=>e.jsx(S,{fill:"var(--chart-color-4)",onClick:()=>{d({selectedPlayer:s,selectedDate:t.period,fromComponent:`Historique Joueur - D√©faites ${o==="month"?"par Mois":"par Session"}`})},style:{cursor:"pointer"}},`cell-defeats-${a}`))})]})})})})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Distribution par Camps"}),e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(Z,{children:[e.jsx(ee,{data:G,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",label:({name:t,value:a,percent:r})=>{const i=r!==void 0?r:0;return t==="Autres"?`Autres : ${a} (${(i*100).toFixed(1)}%)`:`${t}: ${a} (${(i*100).toFixed(1)}%)`},children:G.map((t,a)=>e.jsx(S,{fill:t.name==="Autres"?I:g[t.name]||`var(--chart-color-${a%6+1})`,onClick:()=>{if(t.name==="Autres"){const r=t._details?.map(i=>i.name)||[];d({selectedPlayer:s,campFilter:{selectedCamp:"Autres",campFilterMode:"all-assignments",_smallCamps:r},fromComponent:"Distribution par Camps"})}else t.name==="Tra√Ætre"?d({selectedPlayer:s,campFilter:{selectedCamp:"Tra√Ætre",campFilterMode:"all-assignments",excludeTraitor:!0},fromComponent:"Distribution par Camps"}):t.name==="Loup"?d({selectedPlayer:s,campFilter:{selectedCamp:"Loup",campFilterMode:"all-assignments",excludeTraitor:!0},fromComponent:"Distribution par Camps"}):d({selectedPlayer:s,campFilter:{selectedCamp:t.name,campFilterMode:"all-assignments"},fromComponent:"Distribution par Camps"})},style:{cursor:"pointer"}},`cell-${a}`))}),e.jsx(F,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload;if(r.name==="Autres"&&r._details){const i=[...r._details].sort((n,l)=>l.value-n.value);return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Autres - ",r.value," parties (",r.percentage,"%)"]})}),e.jsx("div",{children:i.map((n,l)=>e.jsxs("div",{children:[n.name,": ",n.value," parties (",n.percentage,"%)"]},l))}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--chart-color-1)",marginTop:"0.25rem",fontStyle:"italic"},children:"Cliquez pour voir toutes les parties de ces camps"})]})}return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsxs("strong",{children:[r.name," (",r.percentage,"%)"]})}),e.jsxs("div",{children:["Apparitions: ",r.value]}),e.jsxs("div",{children:["Victoires: ",r.wins," (",r.winRate,"%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}})]})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Camp"}),e.jsx(A,{title:"Performance par Camp",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:P,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(k,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(F,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.name})}),e.jsxs("div",{children:["Victoires: ",r.wins," / ",r.value]}),e.jsxs("div",{children:["Taux: ",r.winRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(N,{dataKey:"winRateDisplay",children:P.map((t,a)=>e.jsx(S,{fill:parseFloat(t.winRate)===0?`${g[t.name]||`var(--chart-color-${a%6+1})`}50`:g[t.name]||`var(--chart-color-${a%6+1})`,onClick:()=>{t.name==="Tra√Ætre"?d({selectedPlayer:s,campFilter:{selectedCamp:t.name,campFilterMode:"all-assignments",excludeTraitor:!0},fromComponent:"Performance par Camp"}):t.name==="Loup"?d({selectedPlayer:s,campFilter:{selectedCamp:t.name,campFilterMode:"all-assignments",excludeTraitor:!0},fromComponent:"Performance par Camp"}):d({selectedPlayer:s,campFilter:{selectedCamp:t.name,campFilterMode:"all-assignments"},fromComponent:"Performance par Camp"})},style:{cursor:"pointer"}},`cell-${a}`))})]})})})})]}),h.length>0&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsx("h3",{children:"Performance par Carte"}),e.jsx(A,{title:"Performance par Carte",children:e.jsx("div",{style:{height:400},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:h,margin:{top:20,right:140,left:20,bottom:20},children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:90,interval:0,fontSize:14}),e.jsx(k,{label:{value:"Taux de victoire (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx(V,{y:50,stroke:"var(--text-secondary)",strokeDasharray:"5 5",strokeOpacity:.5}),(()=>{if(h.length>0){const t=h.reduce((i,n)=>i+n.value,0),a=h.reduce((i,n)=>i+n.wins,0),r=t>0?a/t*100:0;if(r!==50)return e.jsx(V,{y:r,stroke:"var(--accent-primary)",strokeDasharray:"3 3",strokeOpacity:.7,label:{value:`Moyenne: ${r.toFixed(1)}%`,position:"right",offset:5,style:{fill:"var(--accent-primary)"}}})}return null})(),e.jsx(F,{content:({active:t,payload:a})=>{if(t&&a&&a.length>0){const r=a[0].payload,i=[];return h.forEach(n=>{if(n.name!==r.name&&n.value>=5){const l=parseFloat(r.winRate)-parseFloat(n.winRate);Math.abs(l)>=2&&i.push({map:n.name,diff:l,better:l>0})}}),e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)",maxWidth:"250px"},children:[e.jsx("div",{children:e.jsx("strong",{children:r.name})}),e.jsxs("div",{children:["Parties: ",r.value]}),e.jsxs("div",{children:["Victoires: ",r.wins]}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsxs("strong",{children:["Taux: ",r.winRate,"%"]})}),i.length>0&&e.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",paddingTop:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Comparaisons:"}),i.map((n,l)=>e.jsxs("div",{style:{fontSize:"0.75rem",color:n.better?"var(--accent-tertiary)":"var(--chart-color-4)"},children:[n.better?"‚Üó":"‚Üò"," ",Math.abs(n.diff).toFixed(1),"% vs ",n.map]},l))]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"üñ±Ô∏è Cliquez pour voir les parties"})]})}return null}}),e.jsx(N,{dataKey:"winRateDisplay",label:({name:t,x:a,y:r,width:i})=>{const n=h.find(l=>l.name===t)?.winRate||"0";return e.jsxs("text",{x:a+i/2,y:r-5,fill:"var(--text-primary)",textAnchor:"middle",fontSize:"12",fontWeight:"bold",children:[n,"%"]})},onClick:t=>{t&&t.name&&d({selectedPlayer:s,selectedMapName:t.name,fromComponent:"Performance par Carte"})},children:h.map((t,a)=>{let r,i="transparent";t.name==="Village"?(r="var(--accent-secondary)",i="var(--accent-primary)"):t.name==="Ch√¢teau"?(r="var(--accent-tertiary)",i="var(--accent-primary)"):t.name==="Autres"?(r=I,i="var(--text-secondary)"):r=`var(--chart-color-${a%6+1})`;const n=Math.max(...h.map(v=>parseFloat(v.winRate))),l=parseFloat(t.winRate)===n&&n>0;return e.jsx(S,{fill:parseFloat(t.winRate)===0?`${r}30`:r,stroke:l?"var(--accent-primary)":i,strokeWidth:l?3:1,style:{cursor:"pointer"}},`cell-map-${a}`)})})]})})})}),h.length>=2&&e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--bg-tertiary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"1rem",color:"var(--text-primary)"},children:"Tableau Comparatif D√©taill√©"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left",color:"var(--text-primary)"},children:"Carte"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-primary)"},children:"Parties"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-primary)"},children:"Victoires"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-primary)"},children:"Taux de Victoire"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-primary)"},children:"Diff√©rence vs Moyenne"})]})}),e.jsx("tbody",{children:(()=>{const t=h.reduce((i,n)=>i+n.value,0),a=h.reduce((i,n)=>i+n.wins,0),r=t>0?a/t*100:0;return h.sort((i,n)=>parseFloat(n.winRate)-parseFloat(i.winRate)).map((i,n)=>{const l=parseFloat(i.winRate)-r,v=n===0;return e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)",background:v?"var(--accent-primary)15":"transparent",cursor:"pointer"},onClick:()=>{d({selectedPlayer:s,selectedMapName:i.name,fromComponent:"Tableau Comparatif Cartes"})},children:[e.jsxs("td",{style:{padding:"0.5rem",fontWeight:v?"bold":"normal",color:v?"var(--accent-primary)":"var(--text-primary)"},children:[v&&"üëë ",i.name]}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-secondary)"},children:i.value}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"center",color:"var(--text-secondary)"},children:i.wins}),e.jsxs("td",{style:{padding:"0.5rem",textAlign:"center",fontWeight:"bold",color:"var(--text-primary)"},children:[i.winRate,"%"]}),e.jsxs("td",{style:{padding:"0.5rem",textAlign:"center",fontWeight:"bold",color:l>0?"var(--accent-tertiary)":l<0?"var(--chart-color-4)":"var(--text-secondary)"},children:[l>0?"+":"",l.toFixed(1),"%",Math.abs(l)>=10&&" ‚≠ê"]})]},i.name)})})()})]})}),e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:["üí° Cliquez sur une ligne pour voir toutes les parties sur cette carte",h.some(t=>Math.abs(parseFloat(t.winRate)-h.reduce((a,r)=>a+r.value*parseFloat(r.winRate),0)/h.reduce((a,r)=>a+r.value,0))>=10)&&" ‚Ä¢ ‚≠ê Diff√©rence significative (‚â•10%)"]})]})]})]})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donn√©e d'historique disponible"})}export{fe as PlayerGameHistoryChart};
