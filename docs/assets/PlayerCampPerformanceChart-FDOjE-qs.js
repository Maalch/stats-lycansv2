import{r as f,u as je,a as Re,j as l}from"./index-BBSU1q7i.js";import{g as H,a as W,b as ue,u as we}from"./datasyncExport-mhwtf5No.js";import{u as Te}from"./useJoueursData-B41PBvMD.js";import{a as Se,u as Ee,m as Ie}from"./api-r02ndAev.js";import{S as ae,d as Fe,u as Oe,b as de,G as Me,e as Le,f as Ne,g as _e,h as De,i as Ke,F as re,B as ze,C as te,X as se,Y as ie,a as We}from"./FullscreenChart-CnipQAjh.js";import{m as _,u as ke,n as Ge,o as Ve,S as $e,p as fe,q as Be,t as he,v as ye,w as Je,x as He,y as qe,z as ve,A as Ze,B as Ue,b as Xe,d as ge,C as Ye,G as Qe,D as ea,i as aa,E as D,L as k,F as $,H as ne,I as ra,J as ta,K as V,h as q,M as sa,N as ia,O as na,P as oa,Q as la,U as ca,V as ma,W as pa,R as oe,T as le}from"./CategoricalChart-CEfMaXiq.js";function xe(e,a,r){return(a=ua(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ua(e){var a=da(e,"string");return typeof a=="symbol"?a:a+""}function da(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function fa(e){var a=ke();return f.useEffect(()=>(a(Ge(e)),()=>{a(Ve(e))}),[e,a]),null}class Z extends f.Component{render(){return f.createElement(fa,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:_.allowDuplicatedCategory,allowDataOverflow:_.allowDataOverflow,reversed:_.reversed,includeHidden:_.includeHidden})}}xe(Z,"displayName","ZAxis");xe(Z,"defaultProps",{zAxisId:0,range:_.range,scale:_.scale,type:_.type});var ha=["option","isActive"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},z.apply(null,arguments)}function ya(e,a){if(e==null)return{};var r,t,n=va(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function va(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function ga(e){var{option:a,isActive:r}=e,t=ya(e,ha);return typeof a=="string"?f.createElement(ae,z({option:f.createElement($e,z({type:a},t)),isActive:r,shapeType:"symbols"},t)):f.createElement(ae,z({option:a,isActive:r,shapeType:"symbols"},t))}var xa=(e,a,r,t,n,o,m)=>he(e,"xAxis",a,m),Pa=(e,a,r,t,n,o,m)=>ye(e,"xAxis",a,m),Ca=(e,a,r,t,n,o,m)=>he(e,"yAxis",r,m),Aa=(e,a,r,t,n,o,m)=>ye(e,"yAxis",r,m),ba=(e,a,r,t)=>Je(e,"zAxis",t,!1),ja=(e,a,r,t,n)=>n,Ra=(e,a,r,t,n,o)=>o,wa=(e,a,r,t,n,o,m)=>Be(e,a,r,m),Ta=fe([He,ja],(e,a)=>{if(e.some(r=>r.type==="scatter"&&a.dataKey===r.dataKey&&a.data===r.data))return a}),Sa=fe([wa,xa,Pa,Ca,Aa,ba,Ta,Ra],(e,a,r,t,n,o,m,s)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:P}=e;if(m!=null){var y;if(m?.data!=null&&m.data.length>0?y=m.data:y=u?.slice(d,P+1),!(y==null||a==null||t==null||r==null||n==null||r?.length===0||n?.length===0))return za({displayedData:y,xAxis:a,yAxis:t,zAxis:o,scatterSettings:m,xAxisTicks:r,yAxisTicks:n,cells:s})}}),Ea=["onMouseEnter","onClick","onMouseLeave"],Ia=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Pe(e,a){if(e==null)return{};var r,t,n=Fa(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fa(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},K.apply(null,arguments)}function ce(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function w(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ce(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,a,r){return(a=Oa(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Oa(e){var a=Ma(e,"string");return typeof a=="symbol"?a:a+""}function Ma(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var La=e=>{var{dataKey:a,name:r,fill:t,legendType:n,hide:o}=e;return[{inactive:o,dataKey:a,type:n,color:t,value:ve(r,a),payload:e}]};function Na(e){var{points:a,props:r}=e,{line:t,lineType:n,lineJointType:o}=r;if(!t)return null;var m=q(r,!1),s=q(t,!1),u,d;if(n==="joint")u=a.map(h=>({x:h.cx,y:h.cy}));else if(n==="fitting"){var{xmin:P,xmax:y,a:v,b:T}=ca(a),I=h=>v*h+T;u=[{x:P,y:I(P)},{x:y,y:I(y)}]}var C=w(w(w({},m),{},{fill:"none",stroke:m&&m.fill},s),{},{points:u});return f.isValidElement(t)?d=f.cloneElement(t,C):typeof t=="function"?d=t(C):d=f.createElement(ma,K({},C,{type:o})),f.createElement(k,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}function Ce(e){var{points:a,showLabels:r,allOtherScatterProps:t}=e,{shape:n,activeShape:o,dataKey:m}=t,s=q(t,!1),u=ge(sa),{onMouseEnter:d,onClick:P,onMouseLeave:y}=t,v=Pe(t,Ea),T=Ne(d,t.dataKey),I=_e(y),C=De(P,t.dataKey);return a==null?null:f.createElement(f.Fragment,null,f.createElement(Na,{points:a,props:t}),a.map((h,x)=>{var i=o&&u===String(x),c=i?o:n,p=w(w(w({key:"symbol-".concat(x)},s),h),{},{[na]:x,[ia]:String(m)});return f.createElement(k,K({className:"recharts-scatter-symbol"},oa(v,h,x),{onMouseEnter:T(h,x),onMouseLeave:I(h,x),onClick:C(h,x),key:"symbol-".concat(h?.cx,"-").concat(h?.cy,"-").concat(h?.size,"-").concat(x)}),f.createElement(ga,K({option:c,isActive:i},p)))}),r&&la.renderCallByParent(t,a))}function _a(e){var{previousPointsRef:a,props:r}=e,{points:t,isAnimationActive:n,animationBegin:o,animationDuration:m,animationEasing:s}=r,u=a.current,d=ra(r,"recharts-scatter-"),[P,y]=f.useState(!1),v=f.useCallback(()=>{y(!1)},[]),T=f.useCallback(()=>{y(!0)},[]);return f.createElement(ta,{begin:o,duration:m,isActive:n,easing:s,from:{t:0},to:{t:1},onAnimationEnd:v,onAnimationStart:T,key:d},I=>{var{t:C}=I,h=C===1?t:t.map((x,i)=>{var c=u&&u[i];if(c){var p=V(c.cx,x.cx),j=V(c.cy,x.cy),R=V(c.size,x.size);return w(w({},x),{},{cx:p(C),cy:j(C),size:R(C)})}var F=V(0,x.size);return w(w({},x),{},{size:F(C)})});return C>0&&(a.current=h),f.createElement(k,null,f.createElement(Ce,{points:h,allOtherScatterProps:r,showLabels:!P}))})}function Da(e){var{points:a,isAnimationActive:r}=e,t=f.useRef(null),n=t.current;return r&&a&&a.length&&(!n||n!==a)?f.createElement(_a,{props:e,previousPointsRef:t}):f.createElement(Ce,{points:a,allOtherScatterProps:e,showLabels:!0})}function Ka(e){var{dataKey:a,points:r,stroke:t,strokeWidth:n,fill:o,name:m,hide:s,tooltipType:u}=e;return{dataDefinedOnItem:r?.map(d=>d.tooltipPayload),positions:r?.map(d=>d.tooltipPosition),settings:{stroke:t,strokeWidth:n,fill:o,nameKey:void 0,dataKey:a,name:ve(m,a),hide:s,type:u,color:o,unit:""}}}function za(e){var{displayedData:a,xAxis:r,yAxis:t,zAxis:n,scatterSettings:o,xAxisTicks:m,yAxisTicks:s,cells:u}=e,d=D(r.dataKey)?o.dataKey:r.dataKey,P=D(t.dataKey)?o.dataKey:t.dataKey,y=n&&n.dataKey,v=n?n.range:Z.defaultProps.range,T=v&&v[0],I=r.scale.bandwidth?r.scale.bandwidth():0,C=t.scale.bandwidth?t.scale.bandwidth():0;return a.map((h,x)=>{var i=$(h,d),c=$(h,P),p=!D(y)&&$(h,y)||"-",j=[{name:D(r.dataKey)?o.name:r.name||r.dataKey,unit:r.unit||"",value:i,payload:h,dataKey:d,type:o.tooltipType},{name:D(t.dataKey)?o.name:t.name||t.dataKey,unit:t.unit||"",value:c,payload:h,dataKey:P,type:o.tooltipType}];p!=="-"&&j.push({name:n.name||n.dataKey,unit:n.unit||"",value:p,payload:h,dataKey:y,type:o.tooltipType});var R=ne({axis:r,ticks:m,bandSize:I,entry:h,index:x,dataKey:d}),F=ne({axis:t,ticks:s,bandSize:C,entry:h,index:x,dataKey:P}),M=p!=="-"?n.scale(p):T,L=Math.sqrt(Math.max(M,0)/Math.PI);return w(w({},h),{},{cx:R,cy:F,x:R-L,y:F-L,width:2*L,height:2*L,size:M,node:{x:i,y:c,z:p},tooltipPayload:j,tooltipPosition:{x:R,y:F},payload:h},u&&u[x]&&u[x].props)})}var Wa=(e,a,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:$(e,a)});function ka(e){var a=f.useRef(ea("recharts-scatter-")),{hide:r,points:t,className:n,needClip:o,xAxisId:m,yAxisId:s,id:u,children:d}=e;if(r)return null;var P=aa("recharts-scatter",n),y=D(u)?a.current:u;return f.createElement(k,{className:P,clipPath:o?"url(#clipPath-".concat(y,")"):null},o&&f.createElement("defs",null,f.createElement(Me,{clipPathId:y,xAxisId:m,yAxisId:s})),f.createElement(Le,{xAxisId:m,yAxisId:s,data:t,dataPointFormatter:Wa,errorBarOffset:0},d),f.createElement(k,{key:"recharts-scatter-symbols"},f.createElement(Da,e)))}var Ae={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Qe.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function Ga(e){var a=Ze(e,Ae),{animationBegin:r,animationDuration:t,animationEasing:n,hide:o,isAnimationActive:m,legendType:s,lineJointType:u,lineType:d,shape:P,xAxisId:y,yAxisId:v,zAxisId:T}=a,I=Pe(a,Ia),{needClip:C}=Oe(y,v),h=f.useMemo(()=>Ue(e.children,de),[e.children]),x=f.useMemo(()=>({name:e.name,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey}),[e.data,e.dataKey,e.name,e.tooltipType]),i=Xe(),c=ge(p=>Sa(p,y,v,T,x,h,i));return C==null?null:f.createElement(f.Fragment,null,f.createElement(Ye,{fn:Ka,args:w(w({},e),{},{points:c})}),f.createElement(ka,K({},I,{xAxisId:y,yAxisId:v,zAxisId:T,lineType:d,lineJointType:u,legendType:s,shape:P,hide:o,isAnimationActive:m,animationBegin:r,animationDuration:t,animationEasing:n,points:c,needClip:C})))}class X extends f.Component{render(){return f.createElement(Fe,{type:"scatter",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:this.props.zAxisId,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},f.createElement(qe,{legendPayload:La(this.props)}),f.createElement(Ga,this.props))}}U(X,"displayName","Scatter");U(X,"defaultProps",Ae);var Va=["item"],$a=f.forwardRef((e,a)=>f.createElement(Ke,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Va,tooltipPayloadSearcher:pa,categoricalChartProps:e,ref:a}));function me(e,a=!1,r=!1){const t={};return e.forEach(n=>{const o=new Set;n.PlayerStats.forEach(s=>{const u=H(W(s.MainRoleInitial,s.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});o.add(u)}),o.forEach(s=>{t[s]||(t[s]={totalGames:0,wins:0,winRate:0,players:{}}),t[s].totalGames++});const m=new Set;n.PlayerStats.forEach(s=>{if(s.Victorious){const u=H(W(s.MainRoleInitial,s.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});m.add(u)}}),m.forEach(s=>{t[s]&&t[s].wins++})}),t}function pe(e,a,r=!1,t=!1){const n={};return e.forEach(o=>{o.PlayerStats.forEach(m=>{const s=m.Username.trim();if(!s)return;const u=H(W(m.MainRoleInitial,m.MainRoleChanges||[]),{regroupWolfSubRoles:r,regroupVillagers:t}),d=u==="Autres"?"Rôles spéciaux":u;a[d].players[s]||(a[d].players[s]={games:0,wins:0,winRate:0}),a[d].players[s].games++,m.Victorious&&a[d].players[s].wins++,n[s]||(n[s]={totalGames:0,camps:{}}),n[s].camps[d]||(n[s].camps[d]={games:0,wins:0,winRate:0,performance:0}),n[s].totalGames++,n[s].camps[d].games++,m.Victorious&&n[s].camps[d].wins++})}),n}function Ba(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(t=>{ue(W(t.MainRoleInitial,t.MainRoleChanges||[]))==="Autres"&&(a["Rôles spéciaux"].totalGames++,t.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function Ja(e,a){const r={};return e.forEach(t=>{t.PlayerStats.forEach(n=>{const o=n.Username.trim();if(!o)return;if(ue(W(n.MainRoleInitial,n.MainRoleChanges||[]))==="Autres"){const s="Rôles spéciaux";a[s].players[o]||(a[s].players[o]={games:0,wins:0,winRate:0}),a[s].players[o].games++,n.Victorious&&a[s].players[o].wins++,r[o]||(r[o]={totalGames:0,camps:{}}),r[o].camps[s]||(r[o].camps[s]={games:0,wins:0,winRate:0,performance:0}),r[o].totalGames++,r[o].camps[s].games++,n.Victorious&&r[o].camps[s].wins++}})}),r}function B(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(r=>{const t=e[a].players[r];t.games>0&&(t.winRate=parseFloat((t.wins/t.games*100).toFixed(2)))})})}function J(e,a){Object.keys(e).forEach(r=>{Object.keys(e[r].camps).forEach(t=>{const n=e[r].camps[t];n.games>0&&(n.winRate=parseFloat((n.wins/n.games*100).toFixed(2)),a[t]&&a[t].winRate!==void 0?n.performance=parseFloat((n.winRate-a[t].winRate).toFixed(2)):n.performance=0)})})}function Ha(e,a,r){const t=[];return Object.keys(e).forEach(o=>{const m=e[o],s=[];Object.keys(m.camps).forEach(u=>{const d=m.camps[u];if(d.games>=r){const P=a[u]&&a[u].winRate!==void 0?a[u].winRate.toFixed(2):"0.00";s.push({camp:u,games:d.games,wins:d.wins,winRate:d.winRate.toFixed(2),campAvgWinRate:P,performance:d.performance.toFixed(2)})}}),s.sort((u,d)=>parseFloat(d.performance)-parseFloat(u.performance)),s.length>0&&t.push({player:o,totalGames:m.totalGames,campPerformance:s})}),t.sort((o,m)=>m.totalGames-o.totalGames),{campAverages:Object.keys(a).map(o=>({camp:o,totalGames:a[o].totalGames,wins:a[o].wins,winRate:a[o].winRate.toFixed(2)})),playerPerformanceArray:t}}function qa(e){if(e.length===0)return null;const a=me(e,!1,!1),r=me(e,!0,!0),t=Ba(e),n=pe(e,a,!1,!1),o=pe(e,r,!0,!0),m=Ja(e,t);B(a),B(r),B(t),J(n,a),J(o,r),J(m,t);const s={...a},u={...n};r.Loup&&(s["Camp Loup"]=r.Loup,Object.keys(o).forEach(v=>{u[v]||(u[v]=o[v]),o[v].camps.Loup&&(u[v].camps["Camp Loup"]=o[v].camps.Loup)})),r.Villageois&&(s["Camp Villageois"]=r.Villageois,Object.keys(o).forEach(v=>{u[v]||(u[v]=o[v]),o[v].camps.Villageois&&(u[v].camps["Camp Villageois"]=o[v].camps.Villageois)})),t["Rôles spéciaux"]&&(s["Rôles spéciaux"]=t["Rôles spéciaux"],Object.keys(m).forEach(v=>{u[v]||(u[v]=m[v]),m[v].camps["Rôles spéciaux"]&&(u[v].camps["Rôles spéciaux"]=m[v].camps["Rôles spéciaux"])}));const d=3,{campAverages:P,playerPerformanceArray:y}=Ha(u,s,d);return{campAverages:P,playerPerformance:y,minGamesRequired:d}}function Za(){const{data:e,isLoading:a,error:r}=we(qa);return{playerCampPerformance:e,isLoading:a,error:r}}function rr(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:r}=je(),{settings:t}=Re(),n=Se(),{joueursData:o}=Te(),m=Ee(o),[s,u]=f.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[d,P]=f.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:y,isLoading:v,error:T}=Za();f.useEffect(()=>{a.campPerformanceState||r({campPerformanceState:{selectedCampPerformanceCamp:s,selectedCampPerformanceMinGames:d}})},[s,d,a.campPerformanceState,r]);const I=f.useMemo(()=>{if(!y?.campAverages)return["Tous les camps"];const i=y.campAverages.map(M=>M.camp),c=["Tous les camps"];i.includes("Camp Villageois")&&c.push("Camp Villageois"),i.includes("Chasseur")&&c.push("Chasseur"),i.includes("Alchimiste")&&c.push("Alchimiste"),i.includes("Villageois")&&c.push("Villageois"),i.includes("Camp Loup")&&c.push("Camp Loup"),i.includes("Loup")&&c.push("Loup"),i.includes("Traître")&&c.push("Traître"),i.includes("Louveteau")&&c.push("Louveteau"),i.includes("Rôles spéciaux")&&c.push("Rôles spéciaux");const p=["Camp Villageois","Camp Loup","Rôles spéciaux"],R=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Traître","Louveteau"],...p],F=i.filter(M=>!R.includes(M)).sort();return[...c,...F]},[y]),{campPlayerData:C,topPerformersData:h}=f.useMemo(()=>{if(!y?.playerPerformance)return{campPlayerData:[],topPerformersData:[]};const{playerPerformance:i}=y,c=[],p=[],j=new Map;for(const b of i)for(const g of b.campPerformance)if(g.games>=d){const O=`${b.player}-${g.camp}`,G={player:b.player,camp:g.camp,games:g.games,wins:g.wins,winRate:g.winRate,performance:g.performance,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:O,playerCamp:O},S=j.get(b.player);(!S||G.performanceNum>S.performanceNum)&&j.set(b.player,G),s!=="Tous les camps"&&g.camp===s&&c.push({player:b.player,...g,winRateNum:parseFloat(g.winRate),performanceNum:parseFloat(g.performance),campAvgWinRateNum:parseFloat(g.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:O,playerCamp:O})}p.push(...j.values());const R=(b,g,O=!1)=>{if(!t.highlightedPlayer||b.some(A=>A.player===t.highlightedPlayer&&(!g||A.camp===g)))return b;const S=i.find(A=>A.player===t.highlightedPlayer);if(!S)return b;if(O){let A=null;for(const E of S.campPerformance)if(E.games>=1){const Q=`${S.player}-${E.camp}`,ee={player:S.player,camp:E.camp,games:E.games,wins:E.wins,winRate:E.winRate,performance:E.performance,winRateNum:parseFloat(E.winRate),performanceNum:parseFloat(E.performance),campAvgWinRateNum:parseFloat(E.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:Q,playerCamp:Q};(!A||ee.performanceNum>A.performanceNum)&&(A=ee)}return A?[...b,A]:b}const N=[];for(const A of S.campPerformance)if((!g||A.camp===g)&&A.games>=1){const E=`${S.player}-${A.camp}`;N.push({player:S.player,camp:A.camp,games:A.games,wins:A.wins,winRate:A.winRate,performance:A.performance,winRateNum:parseFloat(A.winRate),performanceNum:parseFloat(A.performance),campAvgWinRateNum:parseFloat(A.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:E,playerCamp:E})}return[...b,...N]},F=s!=="Tous les camps"?R(c,s,!1):[],M=R(p,void 0,!0),L=F.sort((b,g)=>g.performanceNum-b.performanceNum),be=M.sort((b,g)=>g.performanceNum-b.performanceNum),Y=(b,g)=>{const O=b.slice(0,g);if(O.some(N=>N.player===t.highlightedPlayer)||!t.highlightedPlayer)return O;const S=b.find(N=>N.player===t.highlightedPlayer);if(S){const N={...S,isHighlightedAddition:!0};return[...O,N]}return O};return{campPlayerData:Y(L,15),topPerformersData:Y(be,15)}},[y,s,d,t.highlightedPlayer]),x=i=>{i&&i.player&&(s!=="Tous les camps"?e(s==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${s}`}:s==="Camp Villageois"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${s}`}:s==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Performance des Joueurs - ${s}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:s,campFilterMode:"wins-only",excludeWolfSubRoles:s==="Traître"||s==="Louveteau",excludeVillagers:s==="Chasseur"||s==="Alchimiste"},fromComponent:`Performance des Joueurs - ${s}`}):i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Camp Villageois"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau",excludeVillagers:i.camp==="Chasseur"||i.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return v?l.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):T?l.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",T]}):y?l.jsxs("div",{className:"lycans-player-camp-performance",children:[l.jsx("h2",{children:"Meilleurs Performances par Camp"}),l.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),l.jsx("select",{id:"camp-select",value:s,onChange:i=>{const c=i.target.value;u(c),r({campPerformanceState:{selectedCampPerformanceCamp:c,selectedCampPerformanceMinGames:d}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:I.map(i=>{let c=i,p=!1,j=!1,R=!1;return i==="Tous les camps"?(c="📊 Hall of Fame",R=!0):i==="Camp Villageois"?(c="   🏘️ Camp Villageois",p=!0,j=!0):i==="Villageois"?(c="   Villageois",p=!0):i==="Chasseur"?(c="     Chasseur",p=!0):i==="Alchimiste"?(c="     Alchimiste",p=!0):i==="Camp Loup"?(c="   🐺 Camp Loup",p=!0,j=!0):i==="Loup"?(c="     Loup",p=!0):i==="Traître"?(c="     Traître",p=!0):i==="Louveteau"?(c="     Louveteau",p=!0):i==="Rôles spéciaux"?(c="   ⭐ Rôles spéciaux",p=!0,j=!0):(c=`     ${i}`,p=!0),l.jsx("option",{value:i,style:{fontFamily:"monospace",fontSize:p?"0.85rem":"0.9rem",fontWeight:j?"bold":"normal",color:j?"var(--accent-primary)":R?"var(--accent-secondary)":"inherit"},children:c},i)})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),l.jsx("select",{id:"min-games-select",value:d,onChange:i=>{const c=Number(i.target.value);P(c),r({campPerformanceState:{selectedCampPerformanceCamp:s,selectedCampPerformanceMinGames:c}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Ie.map(i=>l.jsx("option",{value:i,children:i},i))})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:l.jsx("span",{children:"📊 = Tous les camps • 🏘️ = Villageois groupés • 🐺 = Loups groupés • ⭐ = Rôles spéciaux groupés"})}),l.jsxs("div",{className:"lycans-resume-conteneur",children:[l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Camps Analysés"}),l.jsx("div",{className:"lycans-valeur-principale",children:y.campAverages.length}),l.jsx("p",{children:"camps différents"})]}),l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Joueurs Évalués"}),l.jsx("div",{className:"lycans-valeur-principale",children:y.playerPerformance.length}),l.jsx("p",{children:"joueurs analysés"})]})]}),l.jsxs("div",{className:"lycans-graphiques-groupe",children:[l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:s==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${s}`}),l.jsx(re,{title:s==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${s}`,children:l.jsx("div",{style:{height:s==="Tous les camps"?600:500},children:l.jsx(oe,{width:"100%",height:"100%",children:l.jsxs(ze,{data:s==="Tous les camps"?h:C,margin:{top:20,right:30,left:20,bottom:s==="Tous les camps"?20:0},children:[l.jsx(te,{strokeDasharray:"3 3"}),l.jsx(se,{dataKey:s==="Tous les camps"?"uniqueKey":"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:i,y:c,payload:p,index:j})=>{const F=(s==="Tous les camps"?h:C)[j],M=F?.player||p.value,L=t.highlightedPlayer===(F?.player||p.value);return l.jsx("text",{x:i,y:c,dy:16,textAnchor:"end",fill:L?"var(--accent-primary)":"var(--text-secondary)",fontSize:L?14:13,fontWeight:L?"bold":"italic",transform:`rotate(-45 ${i} ${c})`,children:M})}}),l.jsx(ie,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(le,{content:({active:i,payload:c})=>{if(i&&c&&c.length>0){const p=c[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:s==="Tous les camps"?`${p.player} - ${p.camp}`:p.player})}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Victoires: ",p.wins]}),l.jsxs("div",{children:["Taux personnel: ",p.winRate,"%"]}),s!=="Tous les camps"&&l.jsxs("div",{children:["Moyenne camp: ",p.campAvgWinRate,"%"]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(We,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:x,children:(s==="Tous les camps"?h:C).map((i,c)=>{const p=t.highlightedPlayer===i.player,j=i.isHighlightedAddition;return l.jsx(de,{fill:s==="Tous les camps"?n[i.camp]||`var(--chart-color-${c%6+1})`:m[i.player]||(i.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:p?"var(--accent-primary)":"transparent",strokeWidth:p?3:0,strokeDasharray:j?"5,5":"none",opacity:j?.8:1},`cell-${c}`)})})]})})})})]}),l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:s==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${s} sur nombre de parties jouées`}),l.jsx(re,{title:s==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${s}`,children:l.jsx("div",{style:{height:400},children:l.jsx(oe,{width:"100%",height:"100%",children:l.jsxs($a,{data:s==="Tous les camps"?h:C,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(te,{strokeDasharray:"3 3"}),l.jsx(se,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),l.jsx(ie,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(le,{content:({active:i,payload:c})=>{if(i&&c&&c.length>0){const p=c[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:p.player})}),s==="Tous les camps"&&l.jsxs("div",{children:["Camp: ",p.camp]}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(X,{dataKey:"performanceNum",name:"Performance",onClick:i=>{i&&i.player&&(s==="Tous les camps"?i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(s==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${s}`}:s==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Relation Parties Jouées vs Performance - ${s}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:s,campFilterMode:"wins-only",excludeWolfSubRoles:s==="Traître"||s==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${s}`}))},shape:i=>{const c=t.highlightedPlayer===i.payload?.player,p=i.payload?.isHighlightedAddition;return l.jsxs("g",{style:{cursor:"pointer"},children:[l.jsx("circle",{cx:i.cx,cy:i.cy,r:c?15:12,fill:s==="Tous les camps"?n[i.payload?.camp]||"var(--accent-primary)":m[i.payload?.player]||"var(--accent-primary)",stroke:c?"var(--accent-primary)":"#222",strokeWidth:c?3:1,strokeDasharray:p?"5,5":"none",opacity:p?.8:1}),l.jsx("text",{x:i.cx,y:i.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:c?"12":"10",fontWeight:"bold",pointerEvents:"none",children:i.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):l.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{rr as PlayerCampPerformanceChart};
