import{u as $,r as E,j as e}from"./index-By-Ij0nM.js";import{a as J,u as R}from"./baseStatsHook-BiAvn4ER.js";import{g as B}from"./gameUtils-B-knZiHd.js";import{c as S}from"./datasyncExport-BEMYPrh7.js";import{a as W,l as q,g as L}from"./api-Cg9_zcJL.js";import{F as x,B as G,C as j,X as D,Y as v,a as T,b as F}from"./FullscreenChart-DkF-kG5S.js";import{R as y,T as f,Q as w}from"./CategoricalChart-NWDB6nuR.js";import{L as z,a as K}from"./LineChart-CTxWY8PN.js";import{P as O,a as Y}from"./PieChart-DqKyt3Rq.js";import"./ActivePoints-DTSwlVVV.js";import"./PolarChart-HlmvO-X6.js";function C(r){const i=Math.floor(r/3600),n=Math.floor(r%3600/60),a=r%60;return i>0?`${i}h${n.toString().padStart(2,"0")}m${a.toString().padStart(2,"0")}s`:n>0?`${n}m${a.toString().padStart(2,"0")}s`:`${a}s`}function V(r,i=10){const n=Math.round(r/60);return Math.round(n/i)*i}function U(){return{averageDuration:"0s",maxDuration:0,minDuration:1/0,maxDurationGameId:null,minDurationGameId:null,durationDistribution:{},durationsByWinnerCamp:{},durationsByPlayerCount:{},durationsByWolfRatio:{}}}function X(r,i,n){r>n.maxDuration&&(n.maxDuration=r,n.maxDurationGameId=i),r<n.minDuration&&(n.minDuration=r,n.minDurationGameId=i)}function Q(r,i){const n=V(r,2);i[n]||(i[n]=0),i[n]++}function H(r,i,n){r&&r.trim()!==""&&(n[r]||(n[r]={totalDuration:0,count:0,average:"0s"}),n[r].totalDuration+=i,n[r].count++)}function Z(r,i,n){if(r&&!isNaN(r)&&r>0){const a=r.toString();n[a]||(n[a]={totalDuration:0,count:0,average:"0s"}),n[a].totalDuration+=i,n[a].count++}}function _(r,i,n,a){if(r&&i&&!isNaN(r)&&!isNaN(i)&&r>0){const l=r-i;if(l>0){const d=Math.round(i/l*100),m=(Math.round(d/1)*1).toString();a[m]||(a[m]={totalDuration:0,count:0,average:"0s"}),a[m].totalDuration+=n,a[m].count++}}}function ee(r,i,n){const a=r.PlayerStats.length,l=r.PlayerStats.filter(m=>m.MainRoleFinal==="Loup").length;let d=B(r);const c=S(r.StartDate,r.EndDate);c&&!isNaN(c)&&c>0&&(n.gamesWithDuration++,n.totalDuration+=c,X(c,r.DisplayedId,i),Q(c,i.durationDistribution),H(d,c,i.durationsByWinnerCamp),Z(a,c,i.durationsByPlayerCount),_(a,l,c,i.durationsByWolfRatio))}function te(r,i){if(i.gamesWithDuration>0){const n=i.totalDuration/i.gamesWithDuration;r.averageDuration=C(Math.round(n)),Object.keys(r.durationsByWinnerCamp).forEach(a=>{const l=r.durationsByWinnerCamp[a];if(l.count>0){const d=l.totalDuration/l.count;l.average=C(Math.round(d))}}),Object.keys(r.durationsByPlayerCount).forEach(a=>{const l=r.durationsByPlayerCount[a];if(l.count>0){const d=l.totalDuration/l.count;l.average=C(Math.round(d))}}),Object.keys(r.durationsByWolfRatio).forEach(a=>{const l=r.durationsByWolfRatio[a];if(l.count>0){const d=l.totalDuration/l.count;l.average=C(Math.round(d))}})}}function re(r){const i=Object.keys(r).map(n=>({duration:parseInt(n),count:r[parseInt(n)]}));return i.sort((n,a)=>n.duration-a.duration),i}function ae(r){if(r.length===0)return null;const i=U(),n={totalDuration:0,gamesWithDuration:0};r.forEach(l=>{ee(l,i,n)}),te(i,n);const a=re(i.durationDistribution);return{averageDuration:i.averageDuration,maxDuration:i.maxDuration,minDuration:i.minDuration===1/0?0:i.minDuration,maxDurationGameId:i.maxDurationGameId,minDurationGameId:i.minDurationGameId,durationDistribution:a,durationsByWinnerCamp:i.durationsByWinnerCamp,durationsByPlayerCount:i.durationsByPlayerCount,durationsByWolfRatio:i.durationsByWolfRatio}}function ne(){const{data:r,isLoading:i,error:n}=J(ae);return{durationAnalysis:r,fetchingData:i,apiError:n}}function P(r){if(!r||r.trim()==="")return null;const i=r.trim(),n=i.charAt(0).toUpperCase(),a=i.slice(1),l=parseInt(a,10);return["J","N","M"].includes(n)?isNaN(l)||l<1?(console.warn(`Invalid day number in EndTiming: ${r}`),null):{phase:n,dayNumber:l,originalTiming:i,phaseLabel:{J:"Jour",N:"Nuit",M:"Meeting"}[n]}:(console.warn(`Invalid game phase in EndTiming: ${r}`),null)}function ie(r){if(!r||r.length===0)return{totalGames:0,gamesWithEndTiming:0,averageGameLength:0,endTimingDistribution:[],phaseDistribution:[],dayDistribution:[],longestGame:null,shortestGame:null};const i=r.length;let n=0,a=0,l=null,d=null;const c={},m={},p={};r.forEach(u=>{const t=P(u.EndTiming);if(t){n++,a+=t.dayNumber,(!l||t.dayNumber>l.dayNumber)&&(l={gameId:u.DisplayedId,endTiming:t.originalTiming,dayNumber:t.dayNumber}),(!d||t.dayNumber<d.dayNumber)&&(d={gameId:u.DisplayedId,endTiming:t.originalTiming,dayNumber:t.dayNumber});const s=t.originalTiming;c[s]=(c[s]||0)+1;const o=t.phaseLabel;m[o]||(m[o]={count:0,totalDays:0}),m[o].count++,m[o].totalDays+=t.dayNumber;const h=t.dayNumber;p[h]||(p[h]={count:0,phases:{}}),p[h].count++,p[h].phases[o]=(p[h].phases[o]||0)+1}});const M=n>0?a/n:0,g=Object.entries(c).map(([u,t])=>{const s=P(u);return{timing:u,phase:s?.phaseLabel||"Unknown",dayNumber:s?.dayNumber||0,count:t,percentage:t/n*100}}).sort((u,t)=>{if(u.dayNumber!==t.dayNumber)return u.dayNumber-t.dayNumber;const s={Jour:0,Nuit:1,Meeting:2};return(s[u.phase]||3)-(s[t.phase]||3)}),b=Object.entries(m).map(([u,t])=>({phase:u,count:t.count,percentage:t.count/n*100,averageDay:t.count>0?t.totalDays/t.count:0})).sort((u,t)=>t.count-u.count),I=Object.entries(p).map(([u,t])=>({dayNumber:parseInt(u,10),count:t.count,percentage:t.count/n*100,phases:t.phases})).sort((u,t)=>u.dayNumber-t.dayNumber);return{totalGames:i,gamesWithEndTiming:n,averageGameLength:M,endTimingDistribution:g,phaseDistribution:b,dayDistribution:I,longestGame:l,shortestGame:d}}function se(){const{data:r,isLoading:i,error:n}=R(a=>ie(a));return{gameTimeAnalysis:r,fetchingData:i,apiError:n}}function fe(){const{durationAnalysis:r,fetchingData:i,apiError:n}=ne(),{gameTimeAnalysis:a,fetchingData:l,apiError:d}=se(),{navigateToGameDetails:c}=$(),[m,p]=E.useState("real"),M=W(),g=t=>{if(!t)return t;const s=t.match(/^([JNM])(\d+)$/);if(!s)return t;const[,o,h]=s;return`${{J:"Jour",N:"Nuit",M:"Meeting"}[o]||o} ${h}`};if(i||l)return e.jsx("div",{className:"statistiques-attente",children:"Analyse des durées de partie en cours..."});if(n||d)return e.jsxs("div",{className:"statistiques-echec",children:["Problème rencontré: ",n||d]});if(!r||!a)return e.jsx("div",{className:"statistiques-indisponibles",children:"Données d'analyse non disponibles"});const b=t=>{const s=t.match(/(\d+)h/),o=t.match(/(\d+)m/),h=t.match(/(\d+)s/),N=s?parseInt(s[1]):0,A=o?parseInt(o[1]):0,k=h?parseInt(h[1]):0;return N*60+A+k/60},I=r?Object.entries(r.durationsByWolfRatio).map(([t,s])=>({ratio:parseFloat(t),moyenne:b(s.average),parties:s.count,dureeFormatee:s.average})).sort((t,s)=>t.ratio-s.ratio):[],u=r?Object.entries(r.durationsByWinnerCamp).map(([t,s])=>({camp:t,moyenne:b(s.average),parties:s.count,dureeFormatee:s.average})).sort((t,s)=>s.moyenne-t.moyenne):[];return e.jsxs("div",{className:"lycans-duree-analyse",children:[e.jsx("h2",{children:"Analyse des Durées de Partie"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${m==="real"?"active":""}`,onClick:()=>p("real"),children:"Durée réelle"}),e.jsx("button",{className:`lycans-categorie-btn ${m==="gametime"?"active":""}`,onClick:()=>p("gametime"),children:"Temps de jeu"})]}),m==="real"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Durée Moyenne"}),e.jsx("p",{className:"lycans-valeur-principale",children:r.averageDuration||"N/A"})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.minDurationGameId&&c({selectedGame:r.minDurationGameId,fromComponent:"Analyse des Durées de Partie"})},style:{cursor:r.minDurationGameId?"pointer":"default",opacity:r.minDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.minDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.minDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.minDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Durée Minimum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[Math.floor(r.minDuration/60),"min ",r.minDuration%60,"s"]}),r.minDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",r.minDurationGameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{r.maxDurationGameId&&c({selectedGame:r.maxDurationGameId,fromComponent:"Analyse des Durées de Partie"})},style:{cursor:r.maxDurationGameId?"pointer":"default",opacity:r.maxDurationGameId?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{r.maxDurationGameId&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{r.maxDurationGameId&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:r.maxDurationGameId?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Durée Maximum"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[Math.floor(r.maxDuration/60),"min ",r.maxDuration%60,"s"]}),r.maxDurationGameId&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",r.maxDurationGameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution des Durées de Partie"}),e.jsx(x,{title:"Distribution des Durées de Partie",children:e.jsx("div",{style:{height:300},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(G,{data:r?.durationDistribution||[],margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"duration",label:{value:"Durée (minutes)",position:"insideBottom",offset:-5},tickFormatter:t=>`${t}min`}),e.jsx(v,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["~",o.duration," minutes"]})}),e.jsxs("div",{children:[o.count," parties"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Durées regroupées par intervalles de 2 minutes"})]})}return null}}),e.jsx(T,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-2)"})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Ratio Loups/Villageois"}),e.jsx(x,{title:"Durée Moyenne par Ratio Loups/Villageois",children:e.jsx("div",{style:{height:300},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(z,{data:I,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"ratio",type:"number",domain:["auto","auto"],allowDecimals:!1,tickFormatter:t=>`${t}%`,label:{value:"Ratio Loups/Joueurs (%)",position:"insideBottom",offset:-5}}),e.jsx(v,{label:{value:"Durée Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Pourcentage de loups : ",o.ratio,"%"]})}),e.jsxs("div",{children:["Durée moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]})]})}return null}}),e.jsx(K,{type:"monotone",dataKey:"moyenne",name:"Durée Moyenne",stroke:"var(--chart-color-5)",strokeWidth:2,activeDot:{r:8}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Durée Moyenne par Camp Victorieux"}),e.jsx(x,{title:"Durée Moyenne par Camp Victorieux",children:e.jsx("div",{style:{height:300},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(G,{data:u,margin:{top:20,right:30,left:20,bottom:40},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"camp",angle:-45,textAnchor:"end",height:80,interval:0}),e.jsx(v,{label:{value:"Durée Moyenne (minutes)",angle:270,position:"left",style:{textAnchor:"middle"}},tickFormatter:t=>`${Math.round(t)}min`}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.camp})}),e.jsxs("div",{children:["Durée moyenne : ",o.dureeFormatee]}),e.jsxs("div",{children:["Nombre de parties : ",o.parties]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsxs(T,{dataKey:"moyenne",name:"moyenne",isAnimationActive:!1,onClick:t=>{t&&t.camp&&c({campFilter:{selectedCamp:t.camp,campFilterMode:"wins-only"},fromComponent:"Durée Moyenne par Camp Victorieux"})},style:{cursor:"pointer"},children:[u.map(t=>e.jsx(F,{fill:M[t.camp]||q},`cell-${t.camp}`)),e.jsx(w,{dataKey:"moyenne",position:"top",formatter:t=>{const s=typeof t=="number"?t:Number(t);return isNaN(s)?"":`${Math.round(s)}min`},fill:"var(--text-primary)",fontSize:12})]})]})})})})]})]})]}),m==="gametime"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lycans-section-description",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Analyse du temps de jeu :"})," Ces graphiques montrent à quels moments les parties se terminent en fonction du cycle jour/nuit/meeting.",e.jsx("br",{}),'Le chiffre indique le numéro du jour (Jour 3 = Phase "Jour" de la 3ème journée, Nuit 2 = Phase "Nuit" de la 2ème journée, Meeting 4 = 4ème meeting).',e.jsx("br",{}),"Basé sur ",a.gamesWithEndTiming," parties avec données de timing sur ",a.totalGames," parties totales."]})}),e.jsxs("div",{className:"lycans-resume-conteneur",children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Longueur Moyenne"}),e.jsxs("p",{className:"lycans-valeur-principale",children:[a.averageGameLength.toFixed(1)," jours"]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{a.shortestGame&&c({selectedGame:a.shortestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:a.shortestGame?"pointer":"default",opacity:a.shortestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{a.shortestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{a.shortestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:a.shortestGame?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Partie Plus Courte"}),e.jsx("p",{className:"lycans-valeur-principale",children:a.shortestGame?g(a.shortestGame.endTiming):"N/A"}),a.shortestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",a.shortestGame.gameId]})]}),e.jsxs("div",{className:"lycans-stat-carte",onClick:()=>{a.longestGame&&c({selectedGame:a.longestGame.gameId,fromComponent:"Analyse des Temps de Jeu"})},style:{cursor:a.longestGame?"pointer":"default",opacity:a.longestGame?1:.7,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:t=>{a.longestGame&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)")},onMouseLeave:t=>{a.longestGame&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="")},title:a.longestGame?"Cliquez pour voir cette partie":"Aucune partie trouvée",children:[e.jsx("h3",{children:"Partie Plus Longue"}),e.jsx("p",{className:"lycans-valeur-principale",children:a.longestGame?g(a.longestGame.endTiming):"N/A"}),a.longestGame&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["🖱️ Partie #",a.longestGame.gameId]})]})]}),e.jsxs("div",{className:"lycans-graphiques-section",children:[e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Phase de Fin"}),e.jsx(x,{title:"Distribution par Phase de Fin",children:e.jsx("div",{style:{height:300},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(O,{children:[e.jsx(Y,{data:a.phaseDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({phase:t,percentage:s})=>`${t} (${s.toFixed(1)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:a.phaseDistribution.map((t,s)=>e.jsx(F,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":L(t.phase)},`cell-${s}`))}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:o.phase})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["Jour moyen: ",o.averageDay.toFixed(1)]})]})}return null}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Distribution par Nombre de Jours"}),e.jsx(x,{title:"Distribution par Nombre de Jours",children:e.jsx("div",{style:{height:300},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(G,{data:a.dayDistribution,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"dayNumber",label:{value:"Nombre de Jours",position:"insideBottom",offset:-5}}),e.jsx(v,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload,h=Object.entries(o.phases).map(([N,A])=>`${N}: ${A}`).join(", ");return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsxs("strong",{children:["Jour ",o.dayNumber]})}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsxs("div",{children:["Détail: ",h]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"count",name:"Nombre de Parties",fill:"var(--chart-color-3)",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Jour ${t.dayNumber}`})},style:{cursor:"pointer"}})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-element",children:[e.jsx("h3",{children:"Détail par Timing de Fin"}),e.jsx(x,{title:"Détail par Timing de Fin",children:e.jsx("div",{style:{height:400},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(G,{data:a.endTimingDistribution,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"timing",angle:-45,textAnchor:"end",height:80,interval:0,tickFormatter:t=>g(t),label:{value:"Timing de Fin",position:"insideBottom",offset:-40}}),e.jsx(v,{label:{value:"Nombre de Parties",angle:270,position:"insideLeft",style:{textAnchor:"middle"}}}),e.jsx(f,{content:({active:t,payload:s})=>{if(t&&s&&s.length>0){const o=s[0].payload;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:g(o.timing)})}),e.jsxs("div",{children:["Phase: ",o.phase]}),e.jsxs("div",{children:["Jour: ",o.dayNumber]}),e.jsxs("div",{children:[o.count," parties (",o.percentage.toFixed(1),"%)"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(T,{dataKey:"count",name:"Nombre de Parties",onClick:t=>{c({fromComponent:`Analyse des Temps de Jeu - Timing ${g(t.timing)}`})},style:{cursor:"pointer"},children:a.endTimingDistribution.map((t,s)=>e.jsx(F,{fill:t.phase==="Jour"?"#FFD700":t.phase==="Nuit"?"#4169E1":t.phase==="Meeting"?"#FF6347":L(t.timing)},`cell-${s}`))})]})})})})]})]})]})]})}export{fe as GameDurationInsights};
