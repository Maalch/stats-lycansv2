import{a as m,r as c}from"./index-DTCg4HuA.js";function y(e){if(!e)return null;const[n,l,i]=e.split("/");return!n||!l||!i?null:new Date(Number(i),Number(l)-1,Number(n))}function f(e){const[n,l]=c.useState(null),[i,o]=c.useState(!0),[u,r]=c.useState(null);return c.useEffect(()=>{(async()=>{try{o(!0),r(null);const a=await fetch(`/stats-lycansv2/data/${e}.json`);if(!a.ok)throw new Error(`Failed to fetch ${e}`);const t=await a.json();l(t.data||[])}catch(a){console.error(`Error fetching raw ${e}:`,a),r(a instanceof Error?a.message:"Unknown error")}finally{o(!1)}})()},[e]),{data:n,isLoading:i,error:u}}function D(){const{settings:e}=m(),{data:n,isLoading:l,error:i}=f("rawGameData");function o(r){if(!r)return null;const[s,a,t]=r.split("/");return!s||!a||!t?null:new Date(Number(t),Number(a)-1,Number(s))}return{data:n?.filter(r=>{if(e.filterMode==="gameType"){if(e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&r["Game Moddée"])return!1}}else if(e.filterMode==="dateRange"&&(e.dateRange.start||e.dateRange.end)){const s=o(r.Date);if(!s)return!1;if(e.dateRange.start){const a=new Date(e.dateRange.start);if(s<a)return!1}if(e.dateRange.end){const a=new Date(e.dateRange.end);if(s>a)return!1}}if(e.playerFilter.mode!=="none"&&e.playerFilter.players.length>0){const s=r["Liste des joueurs"].toLowerCase();if(e.playerFilter.mode==="include"){if(!e.playerFilter.players.every(t=>s.includes(t.toLowerCase())))return!1}else if(e.playerFilter.mode==="exclude"&&e.playerFilter.players.some(t=>s.includes(t.toLowerCase())))return!1}return!0})||null,isLoading:l,error:i}}function w(){const{settings:e}=m(),{data:n,isLoading:l,error:i}=f("rawRoleData"),{data:o}=f("rawGameData");return{data:n?.filter(r=>{const s=o?.find(a=>a.Game===r.Game);if(!s)return!1;if(e.filterMode==="gameType"){if(e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&r["Game Moddée"])return!1}}else if(e.filterMode==="dateRange"&&(e.dateRange.start||e.dateRange.end)){const a=y(s.Date);if(!a)return!1;if(e.dateRange.start){const t=new Date(e.dateRange.start);if(a<t)return!1}if(e.dateRange.end){const t=new Date(e.dateRange.end);if(a>t)return!1}}if(e.playerFilter.mode!=="none"&&e.playerFilter.players.length>0){const a=s["Liste des joueurs"].toLowerCase();if(e.playerFilter.mode==="include"){if(!e.playerFilter.players.every(d=>a.includes(d.toLowerCase())))return!1}else if(e.playerFilter.mode==="exclude"&&e.playerFilter.players.some(d=>a.includes(d.toLowerCase())))return!1}return!0})||null,isLoading:l,error:i}}function p(){const{settings:e}=m(),{data:n,isLoading:l,error:i}=f("rawPonceData"),{data:o}=f("rawGameData");return{data:n?.filter(r=>{const s=o?.find(a=>a.Game===r.Game);if(!s)return!1;if(e.filterMode==="gameType"){if(e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&r["Game Moddée"])return!1}}else if(e.filterMode==="dateRange"&&(e.dateRange.start||e.dateRange.end)){const a=y(s.Date);if(!a)return!1;if(e.dateRange.start){const t=new Date(e.dateRange.start);if(a<t)return!1}if(e.dateRange.end){const t=new Date(e.dateRange.end);if(a>t)return!1}}if(e.playerFilter.mode!=="none"&&e.playerFilter.players.length>0){const a=s["Liste des joueurs"].toLowerCase();if(e.playerFilter.mode==="include"){if(!e.playerFilter.players.every(d=>a.includes(d.toLowerCase())))return!1}else if(e.playerFilter.mode==="exclude"&&e.playerFilter.players.some(d=>a.includes(d.toLowerCase())))return!1}return!0})||null,isLoading:l,error:i}}export{w as a,p as b,D as u};
