import{r as u,j as e}from"./index-DsxT0PBg.js";function f(s){if(!s)return null;try{const n=new URL(s);let l=null;if(n.hostname==="clips.twitch.tv")l=n.pathname.split("/")[1];else if(n.hostname.includes("twitch.tv")){const i=n.pathname.split("/"),r=i.indexOf("clip");r!==-1&&i[r+1]&&(l=i[r+1])}if(l)return`https://clips.twitch.tv/embed?clip=${l}&parent=${window.location.hostname}`}catch(n){console.warn("Failed to parse Twitch clip URL:",s,n)}return null}function o(s){return s.NewName?s.NewName:s.ClipName?s.ClipName:`Clip ${s.ClipId}`}function y(s){return s?s.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function x(s){return s?s.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function w(s){const n=[s.POVPlayer],l=y(s.OthersPlayers);return[...n,...l]}function j(s,n){const l=n.toLowerCase();return s.filter(i=>w(i).map(c=>c.toLowerCase()).includes(l))}function v(s){const n=new Set;return s.forEach(l=>{Array.isArray(l.Tags)&&l.Tags.forEach(i=>n.add(i))}),Array.from(n).sort()}function g(s,n){const l=x(s.RelatedClips);return n.filter(i=>l.includes(i.ClipId))}function C(s,n){return s.NextClip&&n.find(l=>l.ClipId===s.NextClip)||null}function P({clip:s,onClose:n,onNextClip:l,onRelatedClip:i,relatedClips:r=[],nextClip:c=null}){u.useEffect(()=>{const a=t=>{t.key==="Escape"&&n()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[n]);const d=f(s.ClipUrl),p=o(s),h=y(s.OthersPlayers),m=Array.isArray(s.Tags)&&s.Tags.some(a=>a.toLowerCase().includes("warning sonore"));return e.jsx("div",{className:"lycans-clip-viewer-overlay",onClick:n,children:e.jsxs("div",{className:"lycans-clip-viewer-container",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"lycans-clip-viewer-header",children:[e.jsxs("div",{className:"lycans-clip-viewer-title",children:[e.jsx("h2",{children:p}),Array.isArray(s.Tags)&&s.Tags.filter(a=>!a.toLowerCase().includes("warning")).length>0&&e.jsx("div",{className:"lycans-clip-tags",children:s.Tags.filter(a=>!a.toLowerCase().includes("warning")).map((a,t)=>e.jsx("span",{className:"lycans-clip-tag",children:a},t))})]}),e.jsx("button",{className:"lycans-clip-viewer-close",onClick:n,children:"âœ•"})]}),m&&e.jsxs("div",{className:"lycans-clip-warning-banner",children:[e.jsx("span",{className:"lycans-clip-warning-icon",children:"âš ï¸ ðŸ”Š"}),e.jsx("span",{className:"lycans-clip-warning-text",children:"Attention : Ce clip contient un son fort"})]}),e.jsxs("div",{className:"lycans-clip-viewer-content",children:[e.jsx("div",{className:"lycans-clip-player",children:d?e.jsx("iframe",{src:d,frameBorder:"0",allowFullScreen:!0,scrolling:"no",title:p}):e.jsxs("div",{className:"lycans-clip-no-video",children:[e.jsx("p",{children:"VidÃ©o non disponible"}),s.ClipUrl&&e.jsx("a",{href:s.ClipUrl,target:"_blank",rel:"noopener noreferrer",children:"Voir sur Twitch"})]})}),e.jsxs("div",{className:"lycans-clip-metadata",children:[e.jsxs("div",{className:"lycans-clip-info-section",children:[e.jsx("h3",{children:"Joueurs"}),e.jsxs("div",{className:"lycans-clip-players",children:[e.jsxs("div",{className:"lycans-clip-pov-player",children:[e.jsx("span",{className:"lycans-clip-pov-badge",children:"POV"}),e.jsx("span",{className:"lycans-clip-player-name",children:s.POVPlayer})]}),h.length>0&&e.jsx("div",{className:"lycans-clip-other-players",children:h.map((a,t)=>e.jsx("span",{className:"lycans-clip-player-name",children:a},t))})]})]}),s.AdditionalInfo&&e.jsxs("div",{className:"lycans-clip-info-section",children:[e.jsx("h3",{children:"PrÃ©cision"}),e.jsx("p",{className:"lycans-clip-description",children:s.AdditionalInfo})]}),(c||r.length>0)&&e.jsxs("div",{className:"lycans-clip-info-section",children:[e.jsx("h3",{children:"Clips liÃ©s"}),e.jsxs("div",{className:"lycans-clip-navigation",children:[c&&l&&e.jsxs("button",{className:"lycans-clip-nav-btn lycans-clip-next-btn",onClick:l,children:["â–¶ Suivant: ",o(c)]}),r.length>0&&i&&e.jsxs("div",{className:"lycans-clip-related-clips",children:[e.jsx("p",{className:"lycans-clip-related-label",children:"Autres POV:"}),r.map(a=>e.jsxs("button",{className:"lycans-clip-nav-btn lycans-clip-related-btn",onClick:()=>i(a.ClipId),children:[o(a)," (",a.POVPlayer,")"]},a.ClipId))]})]})]})]})]})]})})}export{P as C,g as a,j as b,v as c,w as d,C as f,o as g,y as p};
