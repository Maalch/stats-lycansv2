import{r as R,j as e,u as Z,a as ee}from"./index-D_kCv5ZH.js";import{b as ae}from"./baseStatsHook-BvZqdY2J.js";import{b,a as W,g as A}from"./gameUtils-BuNbDi0M.js";import{a as q,b as se}from"./api-BxTIG1S7.js";function te(a,t){if(!a)return null;try{const n=new URL(a);let l="",s=0;if(n.hostname==="youtu.be"){l=n.pathname.slice(1);const o=n.searchParams.get("t");o&&(s=parseInt(o,10)||0)}else if(n.hostname==="www.youtube.com"||n.hostname==="youtube.com"){l=n.searchParams.get("v")||"";const o=n.searchParams.get("t");o&&(s=parseInt(o,10)||0)}if(!l)return null;const r=`https://www.youtube.com/embed/${l}?start=${s}`;if(t)try{const o=new URL(t);let c=0;if(o.hostname==="youtu.be"){const d=o.searchParams.get("t");d&&(c=parseInt(d,10)||0)}else if(o.hostname==="www.youtube.com"||o.hostname==="youtube.com"){const d=o.searchParams.get("t");d&&(c=parseInt(d,10)||0)}if(c>s)return`${r}&end=${c}`}catch(o){console.warn("Failed to parse end URL:",t,o)}return r}catch(n){return console.warn("Failed to create YouTube embed URL:",a,n),null}}function ne(a,t){if(!a||!t)return null;try{const n=new Date(a),l=new Date(t);if(isNaN(n.getTime())||isNaN(l.getTime()))return console.warn("Invalid date format:",a,t),null;const s=l.getTime()-n.getTime();return s>0?Math.round(s/1e3):null}catch(n){return console.warn("Failed to calculate game duration:",a,t,n),null}}function Y(a,t,n=!1){const l=t.PlayerStats.find(r=>r.Username.toLowerCase()===a.toLowerCase());if(!l)return"Villageois";const s=b(l.MainRoleInitial);return s==="Tra√Ætre"?n?"Tra√Ætre":"Loup":s}function re(a,t,n){const l=a.toLowerCase(),s=n.PlayerStats.find(o=>o.Username.toLowerCase()===l);return s?b(s.MainRoleInitial)===t:!1}function J(a,t,n){const l=a.filter(s=>s.PlayerStats.some(r=>r.Username.toLowerCase()===t.toLowerCase()));return!n||n==="all-assignments"?l:n==="wins-only"?l.filter(s=>s.PlayerStats.some(r=>r.Username.toLowerCase()===t.toLowerCase()&&r.Victorious)):l}function le(a,t){return a.filter(n=>n.DisplayedId===t)}function ie(a,t){return a.filter(n=>t.includes(n.DisplayedId))}function oe(a,t){return a.filter(n=>{const s=new Date(n.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});if(t.includes("/")&&t.split("/").length===2){const[r,o]=t.split("/"),c=s.split("/");if(c.length===3){const[,d,u]=c;return d===r&&u===o}}else return s===t;return!1})}function ce(a,t){return a.filter(n=>{const l=n.HarvestGoal,s=n.HarvestDone;if(l==null||s===null||s===void 0||l===0)return!1;const r=s/l*100;switch(t){case"0-25%":return r>=0&&r<=25;case"26-50%":return r>25&&r<=50;case"51-75%":return r>50&&r<=75;case"76-99%":return r>75&&r<=99;case"100%":return r>=100;default:return!0}})}function de(a,t){return a.filter(n=>{if(!n.EndTiming)return!1;const l=n.EndTiming.match(/(?:Nuit|Jour)\s+(\d+)/);return l?parseInt(l[1],10)===t:!1})}function ue(a,t,n){const{selectedCamp:l,campFilterMode:s,_smallCamps:r,excludeTraitor:o}=t;return a.filter(c=>{if(n){if(l==="Autres"&&r)return r.some(y=>re(n,y,c))?s==="wins-only"?c.PlayerStats.find(h=>h.Username.toLowerCase()===n.toLowerCase())?.Victorious===!0:!0:!1;const d=Y(n,c,o);let u=!1;return l==="Loup"&&o?u=d==="Loup"&&!c.PlayerStats.some(m=>m.Username.toLowerCase()===n.toLowerCase()&&m.MainRoleInitial==="Tra√Ætre"):u=d===l,u?s==="wins-only"?c.PlayerStats.find(y=>y.Username.toLowerCase()===n.toLowerCase())?.Victorious===!0:!0:!1}else if(s==="wins-only"){const d=W(c);return l==="Autres"&&r?r.includes(d):d===l}else return l==="Autres"&&r?r.some(d=>c.PlayerStats.some(u=>b(u.MainRoleInitial)===d)):c.PlayerStats.some(d=>b(d.MainRoleInitial)===l)})}function me(a,t,n){const{selectedPlayers:l,playersFilterMode:s,winnerPlayer:r}=t;return a.filter(o=>{const c=o.PlayerStats.map(m=>m.Username.toLowerCase());if(!l.every(m=>c.includes(m.toLowerCase())))return!1;const u=l.map(m=>Y(m,o));switch(s){case"all-common-games":return r?o.PlayerStats.find(N=>N.Username.toLowerCase()===r.toLowerCase())?.Victorious===!0:!0;case"opposing-camps":const m=u.map(f=>f==="Tra√Ætre"?"Loup":f);if(!([...new Set(m)].length>1))return!1;if(r){const f=l.findIndex(N=>N.toLowerCase()===r.toLowerCase());if(f!==-1){const N=m[f],p=W(o),S=p==="Tra√Ætre"?"Loup":p;return N==="Agent"&&S==="Agent"?o.PlayerStats.find(T=>T.Username.toLowerCase()===r.toLowerCase())?.Victorious===!0:N===S}}return!0;case"same-camp":const v=u.map(f=>f==="Tra√Ætre"?"Loup":f);if(!([...new Set(v)].length===1))return!1;const I=v[0];if(n&&n.selectedCamp){const f=n.selectedCamp;if(f==="Loup"&&n.excludeTraitor&&(!l.every(S=>u[l.indexOf(S)]==="Loup")||l.some(S=>{const w=o.PlayerStats.find(T=>T.Username.toLowerCase()===S.toLowerCase());return b(w?.MainRoleInitial)==="Tra√Ætre"}))||I!==f)return!1}if(r){const f=W(o),N=f==="Tra√Ætre"?"Loup":f;return I==="Agent"&&N==="Agent"?l.every(p=>o.PlayerStats.find(w=>w.Username.toLowerCase()===p.toLowerCase())?.Victorious===!0):I===N}return!0;default:return!0}})}function pe(a,t){const{selectedPlayerPair:n,selectedPairRole:l}=t;return n.length!==2?a:a.filter(s=>{const r=s.PlayerStats.map(c=>c.Username.toLowerCase());if(!n.every(c=>r.includes(c.toLowerCase())))return!1;switch(l){case"wolves":return n.every(c=>{const d=s.PlayerStats.find(u=>u.Username.toLowerCase()===c.toLowerCase());return b(d?.MainRoleInitial)==="Loup"});case"lovers":return n.every(c=>{const d=s.PlayerStats.find(u=>u.Username.toLowerCase()===c.toLowerCase());return b(d?.MainRoleInitial)==="Amoureux"});default:return!0}})}function he(a,t,n){const l=t&&(t.selectedPlayer||t.selectedGame||t.selectedVictoryType||t.selectedDate||t.selectedHarvestRange||t.selectedGameDuration||t.selectedGameIds&&t.selectedGameIds.length>0||t.campFilter||t.playerPairFilter||t.multiPlayerFilter);if(!l&&n)return J(a,n,"all-assignments");if(!l)return a;let s=[...a];return t.selectedPlayer&&(s=J(s,t.selectedPlayer,t.selectedPlayerWinMode)),t.selectedGame&&(s=le(s,t.selectedGame)),t.selectedGameIds&&(s=ie(s,t.selectedGameIds)),t.campFilter&&(s=ue(s,t.campFilter,t.selectedPlayer)),t.selectedDate&&(s=oe(s,t.selectedDate)),t.selectedHarvestRange&&(s=ce(s,t.selectedHarvestRange)),t.selectedGameDuration&&(s=de(s,t.selectedGameDuration)),t.multiPlayerFilter&&(s=me(s,t.multiPlayerFilter,t.campFilter)),t.playerPairFilter&&(s=pe(s,t.playerPairFilter)),s}function ye(a,t,n){return a.length===0?null:he(a,t,n).map(s=>{const r=s.PlayerStats.length,o=s.PlayerStats.filter(p=>b(p.MainRoleInitial)==="Loup"),c=s.PlayerStats.filter(p=>b(p.MainRoleInitial)==="Tra√Ætre"),d=s.PlayerStats.filter(p=>b(p.MainRoleInitial)==="Amoureux"),u=s.PlayerStats.filter(p=>p.Victorious),m=o.length+c.length,y=W(s),h=["Loup","Villageois","Amoureux"],v=s.PlayerStats.filter(p=>!h.includes(b(p.MainRoleInitial))),D=v.length>0?v.map(p=>b(p.MainRoleInitial)).join(", "):null,I=new Date(s.StartDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});let f=0;if(s.EndTiming){const p=s.EndTiming.match(/[UNJMC](\d+)/);p&&(f=parseInt(p[1],10))}let N=null;return s.HarvestGoal&&s.HarvestGoal>0&&(N=s.HarvestDone/s.HarvestGoal),{gameId:s.DisplayedId,date:I,isModded:s.Modded||!1,playerCount:r,wolfCount:m,hasTraitor:c.length>0,hasLovers:d.length>0,soloRoles:D,winningCamp:y,dayCount:f,winners:u.map(p=>p.Username).join(", "),harvest:s.HarvestDone,totalHarvest:s.HarvestGoal,harvestPercentage:N,playersList:s.PlayerStats.map(p=>p.Username).join(", "),versions:s.Version||null,map:s.MapName,youtubeEmbedUrl:te(s.LegacyData?.VODLink||null,s.LegacyData?.VODLinkEnd||null),gameDuration:ne(s.StartDate,s.EndDate),playerData:s.PlayerStats}})}function fe(a,t){const{data:n,isLoading:l,error:s}=ae(r=>ye(r,a,t));return{data:n||[],isLoading:l,error:s}}const ge=({playerData:a})=>{const t=q(),n=se(),l=a.reduce((o,c)=>{const d=A(c.MainRoleInitial);return o[d]||(o[d]=[]),o[d].push(c),o},{}),s=["Villageois","Loup","Amoureux"],r=Object.entries(l).sort(([o,c],[d,u])=>{const m=s.includes(o),y=s.includes(d);return m&&!y?-1:!m&&y?1:u.length-c.length});return e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"Composition des Camps"}),e.jsx("div",{className:"camps-grid",children:r.map(([o,c])=>{const d=c,u=t[o]||"#666",y=d.filter(h=>h.Victorious).length>0;return e.jsxs("div",{className:`camp-group ${y?"winning-camp":""}`,style:{borderColor:u,backgroundColor:`${u}15`,boxShadow:y?`0 0 10px ${u}40`:"none"},children:[e.jsx("div",{className:"camp-header",style:{backgroundColor:`${u}25`},children:e.jsxs("h5",{style:{color:u},children:[o," (",d.length,")",y&&e.jsx("span",{className:"victory-crown",children:"üëë"})]})}),e.jsx("div",{className:"camp-players",children:d.sort((h,v)=>h.Username.localeCompare(v.Username)).map(h=>{let v=u;return h.Color&&n[h.Color]&&(v=n[h.Color]),e.jsxs("div",{className:`player-badge ${h.Victorious?"winner":""} ${h.DeathTiming?"dead":"alive"}`,style:{borderColor:v},title:`${h.Username} - ${b(h.MainRoleInitial)}${h.DeathTiming?` (Mort ${h.DeathTiming})`:""}`,children:[e.jsx("span",{className:"player-name",children:h.Username}),h.DeathTiming&&e.jsx("span",{className:"death-indicator",children:"üíÄ"}),h.Victorious&&e.jsx("span",{className:"victory-indicator",children:"‚≠ê"})]},h.Username)})})]},o)})})]})};function xe(a){if(a===null||a<=0)return"N/A";const t=Math.floor(a/60),n=a%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}function Ce({game:a}){const[t,n]=R.useState(!1),l=q();return e.jsx("div",{className:"lycans-game-detail-view",children:e.jsxs("div",{className:"lycans-game-detail-grid",children:[e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"Informations G√©n√©rales"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Nombre de joueurs:"}),e.jsx("span",{className:"value",children:a.playerCount})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Nombre de loups:"}),e.jsx("span",{className:"value",children:a.wolfCount})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Tra√Ætre:"}),e.jsx("span",{className:"value",children:a.hasTraitor?"Oui":"Non"})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Amoureux:"}),e.jsx("span",{className:"value",children:a.hasLovers?"Oui":"Non"})]}),a.soloRoles&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"R√¥les solo:"}),e.jsx("span",{className:"value",children:a.soloRoles})]})]})]}),e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"Informations Suppl√©mentaires"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Jours de jeu:"}),e.jsx("span",{className:"value",children:a.dayCount})]}),a.gameDuration!==null&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Dur√©e de la partie:"}),e.jsx("span",{className:"value",children:xe(a.gameDuration)})]}),a.versions&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Version:"}),e.jsxs("span",{className:"value",children:[a.versions,a.isModded?" (modd√©e)":""]})]}),a.map&&e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Map:"}),e.jsx("span",{className:"value",children:a.map})]})]})]}),a.harvest!==null&&e.jsxs("div",{className:"lycans-game-detail-section",children:[e.jsx("h4",{children:"R√©colte"}),e.jsxs("div",{className:"lycans-game-detail-stats",children:[e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"R√©colte:"}),e.jsx("span",{className:"value",children:a.harvest})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Total possible:"}),e.jsx("span",{className:"value",children:a.totalHarvest})]}),e.jsxs("div",{className:"lycans-stat-item",children:[e.jsx("span",{className:"label",children:"Pourcentage:"}),e.jsx("span",{className:"value",children:typeof a.harvestPercentage=="number"?(a.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),e.jsx(ge,{playerData:a.playerData}),e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"R√¥les des Joueurs"}),e.jsx("div",{className:"lycans-player-roles-grid",children:a.playerData.sort((s,r)=>{const o=A(s.MainRoleInitial),c=A(r.MainRoleInitial),d=["Villageois","Loup","Tra√Ætre","Amoureux"],u=d.indexOf(o),m=d.indexOf(c);return u!==-1&&m!==-1?u-m:u!==-1?-1:m!==-1?1:o!==c?o.localeCompare(c):s.Username.localeCompare(r.Username)}).map(s=>{const r=b(s.MainRoleInitial),o=A(s.MainRoleInitial),c=s.MainRoleInitial,d=s.Power,u=s.SecondaryRole;let m=o;r!==o&&(m+=` (${r})`),c&&c!==r&&(m+=` - ${c}`),d&&d.trim()&&(m+=` - ${d}`),u&&u.trim()&&(m+=` + ${u}`);let y=l[s.MainRoleInitial]||"#666";y==="#666"&&(y=l[o]||"#666");const h=l[r]||"#666",v=s.DeathTiming,D=s.Victorious;return e.jsxs("div",{className:`lycans-player-role-item ${D?"victorious":""}`,style:{borderColor:h},children:[e.jsxs("div",{className:"lycans-player-name",style:{color:y,textAlign:"left"},children:[s.Username,v&&e.jsx("span",{className:"death-skull",children:"üíÄ"})]}),e.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:m})]},s.Username)})})]}),a.youtubeEmbedUrl&&e.jsx("div",{className:"lycans-game-detail-section full-width",children:e.jsx("button",{onClick:()=>n(!t),className:"lycans-video-toggle-btn",children:t?"üìπ Masquer la vid√©o":"üé• Voir la vid√©o"})}),a.youtubeEmbedUrl&&t&&e.jsxs("div",{className:"lycans-game-detail-section full-width",children:[e.jsx("h4",{children:"Vid√©o de la Partie"}),e.jsx("div",{className:"lycans-youtube-container",children:e.jsx("iframe",{src:a.youtubeEmbedUrl,title:`Partie Lycans #${a.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}function be(){const{navigationFilters:a,navigateBack:t}=Z(),{settings:n}=ee(),l=!!(a.selectedPlayer||a.selectedGame||a.selectedVictoryType||a.selectedDate||a.selectedHarvestRange||a.selectedGameDuration||a.selectedGameIds&&a.selectedGameIds.length>0||a.campFilter||a.playerPairFilter||a.multiPlayerFilter),s=l?null:n.highlightedPlayer,{data:r,isLoading:o,error:c}=fe(a,s),d=q(),[u,m]=R.useState("date"),[y,h]=R.useState("desc"),[v,D]=R.useState(null),[P,I]=R.useState(1),[f,N]=R.useState(25),p=R.useRef(!1),w=a.selectedPlayer?[a.selectedPlayer]:a.playerPairFilter?.selectedPlayerPair?a.playerPairFilter.selectedPlayerPair:a.multiPlayerFilter?.selectedPlayers?a.multiPlayerFilter.selectedPlayers:n.highlightedPlayer?[n.highlightedPlayer]:[],T=w.length>0,_=()=>w.length===0?"Vainqueur":w.length===1?w[0]+" (victoire)":w.length===2?w.join(" & ")+" (victoires)":`${w.slice(0,2).join(" & ")} (+${w.length-2}) (victoires)`,B=i=>{if(!T)return"";if(!l&&s)return(i.winners?i.winners.split(",").map(H=>H.trim()):[]).filter(H=>w.some(X=>X.toLowerCase()===H.toLowerCase())).length>0?"‚úÖ":"‚ùå";const g=i.playersList?i.playersList.split(",").map(j=>j.trim()):[];return w.filter(j=>g.some(L=>L.toLowerCase()===j.toLowerCase())).length===0?"Pas dans la partie":(i.winners?i.winners.split(",").map(j=>j.trim()):[]).filter(j=>w.some(L=>L.toLowerCase()===j.toLowerCase())).length>0?"‚úÖ":"‚ùå"},$=R.useMemo(()=>r?[...r].sort((i,g)=>{let x,C;switch(u){case"date":x=new Date(i.date.split("/").reverse().join("-")).getTime(),C=new Date(g.date.split("/").reverse().join("-")).getTime();break;case"gameId":x=parseInt(i.gameId,10),C=parseInt(g.gameId,10);break;case"playerCount":x=i.playerCount,C=g.playerCount;break;case"gameDuration":x=i.gameDuration||0,C=g.gameDuration||0;break;case"winningCamp":x=i.winningCamp,C=g.winningCamp;break;case"winner":x=B(i),C=B(g);break;default:return 0}let G;if(y==="asc"?G=x>C?1:x<C?-1:0:G=x<C?1:x>C?-1:0,G===0){const j=parseInt(i.gameId,10),L=parseInt(g.gameId,10);return y==="asc"?j-L:L-j}return G}):[],[r,u,y]),F=Math.ceil($.length/f),k=(P-1)*f,E=k+f,K=$.slice(k,E);R.useEffect(()=>{if(p.current){p.current=!1;return}I(1),D(null)},[r]),R.useEffect(()=>{I(1),D(null)},[u,y]);const M=i=>{p.current=!0,I(i),D(null)},Q=i=>{p.current=!0,N(i),I(1),D(null)},O=i=>{p.current=!0,D(v===i?null:i)},U=i=>{u===i?h(y==="asc"?"desc":"asc"):(m(i),h("desc"))},V=i=>u!==i?"‚ÜïÔ∏è":y==="asc"?"‚ÜóÔ∏è":"‚ÜòÔ∏è",z=()=>{const i=[];if(a.selectedPlayer&&a.campFilter){const g=a.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":"",x=a.campFilter.excludeTraitor&&a.campFilter.selectedCamp==="Loup"?"Loups sans Tra√Ætre":a.campFilter.selectedCamp;i.push(`${a.selectedPlayer} jouant ${x}${g}`)}else{if(a.selectedPlayer){const g=a.selectedPlayerWinMode==="wins-only"?" (victoires uniquement)":a.selectedPlayerWinMode==="all-assignments"?" (toutes parties)":"";i.push(`Joueur: ${a.selectedPlayer}${g}`)}if(a.campFilter){const{selectedCamp:g,campFilterMode:x,excludeTraitor:C}=a.campFilter,j=`Camp: ${C&&g==="Loup"?"Loups sans Tra√Ætre":g}`,L=x==="wins-only"?" (victoires uniquement)":x==="all-assignments"?" (toutes assignations)":"";i.push(j+L)}}if(a.playerPairFilter){const{selectedPlayerPair:g,selectedPairRole:x}=a.playerPairFilter,C=g.join(" & "),G=x==="wolves"?"loups":"amoureux";i.push(`Paire ${G}: ${C}`)}if(a.multiPlayerFilter){const{selectedPlayers:g,playersFilterMode:x,winnerPlayer:C}=a.multiPlayerFilter,G=g.join(" & ");let j="";x==="all-common-games"?j="toutes les parties communes":x==="opposing-camps"?j="affrontements uniquement":x==="same-camp"&&(j="parties en √©quipe (m√™me camp)");const L=C?` (victoires de ${C})`:"";i.push(`${G} (${j}${L})`)}return a.selectedHarvestRange&&i.push(`R√©colte: ${a.selectedHarvestRange}`),a.selectedGameDuration&&i.push(`Dur√©e: ${a.selectedGameDuration} jour${a.selectedGameDuration>1?"s":""}`),a.selectedGame&&i.push(`Partie ${a.selectedGame}`),a.selectedDate&&(a.selectedDate.includes("/")&&a.selectedDate.split("/").length===2?i.push(`Mois: ${a.selectedDate}`):i.push(`Date: ${a.selectedDate}`)),a.selectedGameIds&&a.selectedGameIds.length>0&&i.push(`${a.selectedGameIds.length} parties s√©lectionn√©e${a.selectedGameIds.length>1?"s":""}`),i};return o?e.jsx("div",{className:"statistiques-chargement",children:"Chargement des d√©tails des parties..."}):c?e.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",c]}):!r||r.length===0?e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h2",{children:"Aucune partie trouv√©e"}),e.jsx("p",{children:"Aucune partie ne correspond aux crit√®res s√©lectionn√©s."}),a.fromComponent&&e.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["‚Üê Retour √† ",a.fromComponent]})]}):e.jsxs("div",{className:"lycans-game-details",children:[e.jsxs("div",{className:"lycans-game-details-header",children:[e.jsxs("div",{className:"lycans-game-details-navigation",children:[a.fromComponent&&e.jsxs("button",{onClick:t,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["‚Üê Retour √† ",a.fromComponent]}),e.jsxs("h2",{children:["D√©tails des Parties (",r.length," partie",r.length>1?"s":"",")"]})]}),z().length>0&&e.jsxs("div",{className:"lycans-active-filters",children:[e.jsx("strong",{children:"Filtres actifs:"})," ",z().join(", ")]})]}),F>1&&e.jsxs("div",{className:"lycans-pagination-container",children:[e.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",k+1," √† ",Math.min(E,$.length)," sur ",$.length," parties"]}),e.jsxs("div",{className:"lycans-pagination-controls",children:[e.jsxs("select",{value:f,onChange:i=>Q(Number(i.target.value)),className:"lycans-pagination-select",children:[e.jsx("option",{value:10,children:"10 par page"}),e.jsx("option",{value:25,children:"25 par page"}),e.jsx("option",{value:50,children:"50 par page"}),e.jsx("option",{value:100,children:"100 par page"})]}),e.jsxs("div",{className:"lycans-pagination-buttons",children:[e.jsx("button",{onClick:()=>M(1),disabled:P===1,className:"lycans-pagination-btn",children:"¬´¬´"}),e.jsx("button",{onClick:()=>M(P-1),disabled:P===1,className:"lycans-pagination-btn",children:"‚Äπ"}),e.jsxs("span",{className:"lycans-pagination-current",children:["Page ",P," sur ",F]}),e.jsx("button",{onClick:()=>M(P+1),disabled:P===F,className:"lycans-pagination-btn",children:"‚Ä∫"}),e.jsx("button",{onClick:()=>M(F),disabled:P===F,className:"lycans-pagination-btn",children:"¬ª¬ª"})]})]})]}),e.jsx("div",{className:"lycans-games-table-container",children:e.jsxs("table",{className:"lycans-games-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>U("gameId"),className:"sortable",children:["Partie ",V("gameId")]}),e.jsxs("th",{onClick:()=>U("date"),className:"sortable",children:["Date ",V("date")]}),e.jsxs("th",{onClick:()=>U("playerCount"),className:"sortable",children:["Joueurs ",V("playerCount")]}),e.jsxs("th",{onClick:()=>U("gameDuration"),className:"sortable",children:["Dur√©e ",V("gameDuration")]}),e.jsxs("th",{onClick:()=>U("winningCamp"),className:"sortable",children:["Camp Vainqueur ",V("winningCamp")]}),T&&e.jsxs("th",{onClick:()=>U("winner"),className:"sortable",children:[_()," ",V("winner")]}),e.jsx("th",{children:"D√©tails"})]})}),e.jsx("tbody",{children:K.map(i=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`${v===i.gameId?"selected":""} clickable-row`,onClick:()=>O(i.gameId),style:{cursor:"pointer"},children:[e.jsxs("td",{children:["#",i.gameId]}),e.jsx("td",{children:i.date}),e.jsx("td",{children:i.playerCount}),e.jsx("td",{children:je(i.gameDuration)}),e.jsx("td",{style:{color:d[i.winningCamp]||"#fff"},children:i.winningCamp}),T&&e.jsx("td",{style:{textAlign:"left",fontSize:"1.2rem",verticalAlign:"middle"},children:B(i)}),e.jsx("td",{children:e.jsx("button",{onClick:g=>{g.stopPropagation(),O(i.gameId)},className:"lycans-details-btn",children:v===i.gameId?"Masquer":"Voir"})})]},i.gameId),v===i.gameId&&e.jsx("tr",{className:"game-details-row",children:e.jsx("td",{colSpan:T?8:7,children:e.jsx(Ce,{game:i})})},`${i.gameId}-details`)]}))})]})}),F>1&&e.jsxs("div",{className:"lycans-pagination-container",children:[e.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",k+1," √† ",Math.min(E,$.length)," sur ",$.length," parties"]}),e.jsx("div",{className:"lycans-pagination-controls",children:e.jsxs("div",{className:"lycans-pagination-buttons",children:[e.jsx("button",{onClick:()=>M(1),disabled:P===1,className:"lycans-pagination-btn",children:"¬´¬´"}),e.jsx("button",{onClick:()=>M(P-1),disabled:P===1,className:"lycans-pagination-btn",children:"‚Äπ"}),e.jsxs("span",{className:"lycans-pagination-current",children:["Page ",P," sur ",F]}),e.jsx("button",{onClick:()=>M(P+1),disabled:P===F,className:"lycans-pagination-btn",children:"‚Ä∫"}),e.jsx("button",{onClick:()=>M(F),disabled:P===F,className:"lycans-pagination-btn",children:"¬ª¬ª"})]})})]})]})}function je(a){if(a===null||a<=0)return"N/A";const t=Math.floor(a/60),n=a%60;return t===0?`${n}s`:n===0?`${t}m`:`${t}m ${n}s`}export{be as GameDetailsChart};
