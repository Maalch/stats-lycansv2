import{r as u,g as ue,b as de,u as Ee,a as Se,j as p}from"./index-TKEKv-o7.js";import{g as Z,a as K,b as fe,u as Ie}from"./datasyncExport-T8WED8O2.js";import{u as Fe}from"./useJoueursData-BRta7aeo.js";import{a as Le,u as Me,m as Ne}from"./api-pZdyOU17.js";import{S as ae,u as Oe,f as _e,b as ye,G as De,c as ke,d as ze,e as We,g as Ke,h as Ge,F as re,B as Ve,C as se,X as te,Y as ie,a as $e}from"./FullscreenChart-D5ZT1a6p.js";import{i as _,u as Be,a as Je,r as He,S as qe,c as he,s as Ze,b as ve,d as ge,e as Ue,f as Xe,g as xe,h as Pe,j as Ye,k as Qe,l as ea,G as aa,m as Ce,n as be,o as ra,p as sa,L as G,q as z,t as B,v as ne,w as ta,J as ia,x as $,y as na,z as oa,C as la,A as ca,B as Ae,D as ma,E as pa,F as ua,H as da,I as fa,K as ya,M as ha,R as oe,T as le}from"./CategoricalChart-BNqQottb.js";function we(e,a,r){return(a=va(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function va(e){var a=ga(e,"string");return typeof a=="symbol"?a:a+""}function ga(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function xa(e){var a=Be();return u.useEffect(()=>(a(Je(e)),()=>{a(He(e))}),[e,a]),null}class X extends u.Component{render(){return u.createElement(xa,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:_.allowDuplicatedCategory,allowDataOverflow:_.allowDataOverflow,reversed:_.reversed,includeHidden:_.includeHidden})}}we(X,"displayName","ZAxis");we(X,"defaultProps",{zAxisId:0,range:_.range,scale:_.scale,type:_.type});var Pa=["option","isActive"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},W.apply(null,arguments)}function Ca(e,a){if(e==null)return{};var r,s,n=ba(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ba(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Aa(e){var{option:a,isActive:r}=e,s=Ca(e,Pa);return typeof a=="string"?u.createElement(ae,W({option:u.createElement(qe,W({type:a},s)),isActive:r,shapeType:"symbols"},s)):u.createElement(ae,W({option:a,isActive:r,shapeType:"symbols"},s))}var wa=(e,a,r,s,n,o,l)=>ve(e,"xAxis",a,l),Ra=(e,a,r,s,n,o,l)=>ge(e,"xAxis",a,l),ja=(e,a,r,s,n,o,l)=>ve(e,"yAxis",r,l),Ta=(e,a,r,s,n,o,l)=>ge(e,"yAxis",r,l),Ea=(e,a,r,s)=>Ue(e,"zAxis",s,!1),Sa=(e,a,r,s,n)=>n,Ia=(e,a,r,s,n,o)=>o,Fa=(e,a,r,s,n,o,l)=>Ze(e,a,r,l),La=he([Xe,Sa],(e,a)=>e.filter(r=>r.type==="scatter").find(r=>r.id===a)),Ma=he([Fa,wa,Ra,ja,Ta,Ea,La,Ia],(e,a,r,s,n,o,l,t)=>{var{chartData:c,dataStartIndex:f,dataEndIndex:h}=e;if(l!=null){var g;if(l?.data!=null&&l.data.length>0?g=l.data:g=c?.slice(f,h+1),!(g==null||a==null||s==null||r==null||n==null||r?.length===0||n?.length===0))return Ha({displayedData:g,xAxis:a,yAxis:s,zAxis:o,scatterSettings:l,xAxisTicks:r,yAxisTicks:n,cells:t})}}),Na=["onMouseEnter","onClick","onMouseLeave"],Oa=["id"],_a=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function U(e,a){if(e==null)return{};var r,s,n=Da(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Da(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},D.apply(null,arguments)}function ce(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function j(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ce(Object(r),!0).forEach(function(s){ka(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ka(e,a,r){return(a=za(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function za(e){var a=Wa(e,"string");return typeof a=="symbol"?a:a+""}function Wa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Ka=e=>{var{dataKey:a,name:r,fill:s,legendType:n,hide:o}=e;return[{inactive:o,dataKey:a,type:n,color:s,value:Ce(r,a),payload:e}]};function Ga(e){var{points:a,props:r}=e,{line:s,lineType:n,lineJointType:o}=r;if(!s)return null;var l=Ae(r),t=da(s),c,f;if(n==="joint")c=a.map(x=>({x:x.cx,y:x.cy}));else if(n==="fitting"){var{xmin:h,xmax:g,a:y,b:E}=fa(a),F=x=>y*x+E;c=[{x:h,y:F(h)},{x:g,y:F(g)}]}var C=j(j(j({},l),{},{fill:"none",stroke:l&&l.fill},t),{},{points:c});return u.isValidElement(s)?f=u.cloneElement(s,C):typeof s=="function"?f=s(C):f=u.createElement(ya,D({},C,{type:o})),u.createElement(G,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}function Va(e){var{showLabels:a,points:r,children:s}=e,n=oa(),o=u.useMemo(()=>r?.map(l=>{var t={x:l.x,y:l.y,width:l.width,height:l.height};return j(j({},t),{},{value:void 0,payload:l.payload,viewBox:t,parentViewBox:n,fill:void 0})}),[n,r]);return u.createElement(la,{value:a?o:null},s)}function $a(e){var{points:a,allOtherScatterProps:r}=e,{shape:s,activeShape:n,dataKey:o}=r,l=be(ca),{onMouseEnter:t,onClick:c,onMouseLeave:f}=r,h=U(r,Na),g=ze(t,r.dataKey),y=We(f),E=Ke(c,r.dataKey);if(a==null)return null;var{id:F}=r,C=U(r,Oa),x=Ae(C);return u.createElement(u.Fragment,null,u.createElement(Ga,{points:a,props:C}),a.map((v,R)=>{var i=n&&l===String(R),m=i?n:s,d=j(j(j({key:"symbol-".concat(R)},x),v),{},{[pa]:R,[ma]:String(o)});return u.createElement(G,D({key:"symbol-".concat(v?.cx,"-").concat(v?.cy,"-").concat(v?.size,"-").concat(R),className:"recharts-scatter-symbol"},ua(h,v,R),{onMouseEnter:g(v,R),onMouseLeave:y(v,R),onClick:E(v,R)}),u.createElement(Aa,D({option:m,isActive:i},d)))}))}function Ba(e){var{previousPointsRef:a,props:r}=e,{points:s,isAnimationActive:n,animationBegin:o,animationDuration:l,animationEasing:t}=r,c=a.current,f=ta(r,"recharts-scatter-"),[h,g]=u.useState(!1),y=u.useCallback(()=>{g(!1)},[]),E=u.useCallback(()=>{g(!0)},[]),F=!h;return u.createElement(Va,{showLabels:F,points:s},r.children,u.createElement(ia,{animationId:f,begin:o,duration:l,isActive:n,easing:t,onAnimationEnd:y,onAnimationStart:E,key:f},C=>{var x=C===1?s:s?.map((v,R)=>{var i=c&&c[R];if(i){var m=$(i.cx,v.cx),d=$(i.cy,v.cy),b=$(i.size,v.size);return j(j({},v),{},{cx:m(C),cy:d(C),size:b(C)})}var T=$(0,v.size);return j(j({},v),{},{size:T(C)})});return C>0&&(a.current=x),u.createElement(G,null,u.createElement($a,{points:x,allOtherScatterProps:r,showLabels:F}))}),u.createElement(na,{label:r.label}))}function Ja(e){var{dataKey:a,points:r,stroke:s,strokeWidth:n,fill:o,name:l,hide:t,tooltipType:c}=e;return{dataDefinedOnItem:r?.map(f=>f.tooltipPayload),positions:r?.map(f=>f.tooltipPosition),settings:{stroke:s,strokeWidth:n,fill:o,nameKey:void 0,dataKey:a,name:Ce(l,a),hide:t,type:c,color:o,unit:""}}}function Ha(e){var{displayedData:a,xAxis:r,yAxis:s,zAxis:n,scatterSettings:o,xAxisTicks:l,yAxisTicks:t,cells:c}=e,f=z(r.dataKey)?o.dataKey:r.dataKey,h=z(s.dataKey)?o.dataKey:s.dataKey,g=n&&n.dataKey,y=n?n.range:X.defaultProps.range,E=y&&y[0],F=r.scale.bandwidth?r.scale.bandwidth():0,C=s.scale.bandwidth?s.scale.bandwidth():0;return a.map((x,v)=>{var R=B(x,f),i=B(x,h),m=!z(g)&&B(x,g)||"-",d=[{name:z(r.dataKey)?o.name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:x,dataKey:f,type:o.tooltipType},{name:z(s.dataKey)?o.name:s.name||s.dataKey,unit:s.unit||"",value:i,payload:x,dataKey:h,type:o.tooltipType}];m!=="-"&&d.push({name:n.name||n.dataKey,unit:n.unit||"",value:m,payload:x,dataKey:g,type:o.tooltipType});var b=ne({axis:r,ticks:l,bandSize:F,entry:x,index:v,dataKey:f}),T=ne({axis:s,ticks:t,bandSize:C,entry:x,index:v,dataKey:h}),N=m!=="-"?n.scale(m):E,L=Math.sqrt(Math.max(N,0)/Math.PI);return j(j({},x),{},{cx:b,cy:T,x:b-L,y:T-L,width:2*L,height:2*L,size:N,node:{x:R,y:i,z:m},tooltipPayload:d,tooltipPosition:{x:b,y:T},payload:x},c&&c[v]&&c[v].props)})}var qa=(e,a,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:B(e,a)});function Za(e){var{hide:a,points:r,className:s,needClip:n,xAxisId:o,yAxisId:l,id:t}=e,c=u.useRef(null);if(a)return null;var f=sa("recharts-scatter",s),h=t;return u.createElement(G,{className:f,clipPath:n?"url(#clipPath-".concat(h,")"):null,id:t},n&&u.createElement("defs",null,u.createElement(De,{clipPathId:h,xAxisId:o,yAxisId:l})),u.createElement(ke,{xAxisId:o,yAxisId:l,data:r,dataPointFormatter:qa,errorBarOffset:0},u.createElement(G,{key:"recharts-scatter-symbols"},u.createElement(Ba,{props:e,previousPointsRef:c}))))}var Re={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!aa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function Ua(e){var a=xe(e,Re),{animationBegin:r,animationDuration:s,animationEasing:n,hide:o,isAnimationActive:l,legendType:t,lineJointType:c,lineType:f,shape:h,xAxisId:g,yAxisId:y,zAxisId:E}=a,F=U(a,_a),{needClip:C}=Oe(g,y),x=u.useMemo(()=>_e(e.children,ye),[e.children]),v=Pe(),R=be(i=>Ma(i,g,y,E,e.id,x,v));return C==null||R==null?null:u.createElement(u.Fragment,null,u.createElement(ra,{fn:Ja,args:j(j({},e),{},{points:R})}),u.createElement(Za,D({},F,{xAxisId:g,yAxisId:y,zAxisId:E,lineType:f,lineJointType:c,legendType:t,shape:h,hide:o,isAnimationActive:l,animationBegin:r,animationDuration:s,animationEasing:n,points:R,needClip:C})))}function Xa(e){var a=xe(e,Re),r=Pe();return u.createElement(Ye,{id:a.id,type:"scatter"},s=>u.createElement(u.Fragment,null,u.createElement(Qe,{legendPayload:Ka(a)}),u.createElement(ea,{type:"scatter",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:a.zAxisId,dataKey:a.dataKey,hide:a.hide,name:a.name,tooltipType:a.tooltipType,isPanorama:r}),u.createElement(Ua,D({},a,{id:s}))))}var je=u.memo(Xa);je.displayName="Scatter";var Ya=["item"],Qa=u.forwardRef((e,a)=>u.createElement(Ge,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ya,tooltipPayloadSearcher:ha,categoricalChartProps:e,ref:a}));function me(e,a=!1,r=!1){const s={};return e.forEach(n=>{const o=new Set;n.PlayerStats.forEach(t=>{const c=Z(K(t.MainRoleInitial,t.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});o.add(c)}),o.forEach(t=>{s[t]||(s[t]={totalGames:0,wins:0,winRate:0,players:{}}),s[t].totalGames++});const l=new Set;n.PlayerStats.forEach(t=>{if(t.Victorious){const c=Z(K(t.MainRoleInitial,t.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});l.add(c)}}),l.forEach(t=>{s[t]&&s[t].wins++})}),s}function pe(e,a,r=!1,s=!1){const n={};return e.forEach(o=>{o.PlayerStats.forEach(l=>{const t=ue(l),c=de(l),f=Z(K(l.MainRoleInitial,l.MainRoleChanges||[]),{regroupWolfSubRoles:r,regroupVillagers:s}),h=f==="Autres"?"Rôles spéciaux":f;a[h].players[t]||(a[h].players[t]={games:0,wins:0,winRate:0,displayName:c}),a[h].players[t].games++,a[h].players[t].displayName=c,l.Victorious&&a[h].players[t].wins++,n[t]||(n[t]={totalGames:0,camps:{},displayName:c}),n[t].displayName=c,n[t].camps[h]||(n[t].camps[h]={games:0,wins:0,winRate:0,performance:0}),n[t].totalGames++,n[t].camps[h].games++,l.Victorious&&n[t].camps[h].wins++})}),n}function er(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(s=>{fe(K(s.MainRoleInitial,s.MainRoleChanges||[]))==="Autres"&&(a["Rôles spéciaux"].totalGames++,s.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function ar(e,a){const r={};return e.forEach(s=>{s.PlayerStats.forEach(n=>{const o=ue(n),l=de(n);if(fe(K(n.MainRoleInitial,n.MainRoleChanges||[]))==="Autres"){const c="Rôles spéciaux";a[c].players[o]||(a[c].players[o]={games:0,wins:0,winRate:0,displayName:l}),a[c].players[o].games++,a[c].players[o].displayName=l,n.Victorious&&a[c].players[o].wins++,r[o]||(r[o]={totalGames:0,camps:{},displayName:l}),r[o].displayName=l,r[o].camps[c]||(r[o].camps[c]={games:0,wins:0,winRate:0,performance:0}),r[o].totalGames++,r[o].camps[c].games++,n.Victorious&&r[o].camps[c].wins++}})}),r}function H(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(r=>{const s=e[a].players[r];s.games>0&&(s.winRate=parseFloat((s.wins/s.games*100).toFixed(2)))})})}function q(e,a){Object.keys(e).forEach(r=>{Object.keys(e[r].camps).forEach(s=>{const n=e[r].camps[s];n.games>0&&(n.winRate=parseFloat((n.wins/n.games*100).toFixed(2)),a[s]&&a[s].winRate!==void 0?n.performance=parseFloat((n.winRate-a[s].winRate).toFixed(2)):n.performance=0)})})}function rr(e,a,r){const s=[];return Object.keys(e).forEach(o=>{const l=e[o],t=[];Object.keys(l.camps).forEach(c=>{const f=l.camps[c];if(f.games>=r){const h=a[c]&&a[c].winRate!==void 0?a[c].winRate.toFixed(2):"0.00";t.push({camp:c,games:f.games,wins:f.wins,winRate:f.winRate.toFixed(2),campAvgWinRate:h,performance:f.performance.toFixed(2)})}}),t.sort((c,f)=>parseFloat(f.performance)-parseFloat(c.performance)),t.length>0&&s.push({player:l.displayName,totalGames:l.totalGames,campPerformance:t})}),s.sort((o,l)=>l.totalGames-o.totalGames),{campAverages:Object.keys(a).map(o=>({camp:o,totalGames:a[o].totalGames,wins:a[o].wins,winRate:a[o].winRate.toFixed(2)})),playerPerformanceArray:s}}function sr(e){if(e.length===0)return null;const a=me(e,!1,!1),r=me(e,!0,!0),s=er(e),n=pe(e,a,!1,!1),o=pe(e,r,!0,!0),l=ar(e,s);H(a),H(r),H(s),q(n,a),q(o,r),q(l,s);const t={...a},c={...n};r.Loup&&(t["Camp Loup"]=r.Loup,Object.keys(o).forEach(y=>{c[y]||(c[y]=o[y]),o[y].camps.Loup&&(c[y].camps["Camp Loup"]=o[y].camps.Loup)})),r.Villageois&&(t["Camp Villageois"]=r.Villageois,Object.keys(o).forEach(y=>{c[y]||(c[y]=o[y]),o[y].camps.Villageois&&(c[y].camps["Camp Villageois"]=o[y].camps.Villageois)})),s["Rôles spéciaux"]&&(t["Rôles spéciaux"]=s["Rôles spéciaux"],Object.keys(l).forEach(y=>{c[y]||(c[y]=l[y]),l[y].camps["Rôles spéciaux"]&&(c[y].camps["Rôles spéciaux"]=l[y].camps["Rôles spéciaux"])}));const f=3,{campAverages:h,playerPerformanceArray:g}=rr(c,t,f);return{campAverages:h,playerPerformance:g,minGamesRequired:f}}function tr(){const{data:e,isLoading:a,error:r}=Ie(sr);return{playerCampPerformance:e,isLoading:a,error:r}}function pr(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:r}=Ee(),{settings:s}=Se(),n=Le(),{joueursData:o}=Fe(),l=Me(o),[t,c]=u.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[f,h]=u.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:g,isLoading:y,error:E}=tr();u.useEffect(()=>{a.campPerformanceState||r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:f}})},[t,f,a.campPerformanceState,r]);const F=u.useMemo(()=>{if(!g?.campAverages)return["Tous les camps"];const i=g.campAverages.map(L=>L.camp),m=["Tous les camps"];i.includes("Camp Villageois")&&m.push("Camp Villageois"),i.includes("Chasseur")&&m.push("Chasseur"),i.includes("Alchimiste")&&m.push("Alchimiste"),i.includes("Villageois")&&m.push("Villageois"),i.includes("Camp Loup")&&m.push("Camp Loup"),i.includes("Loup")&&m.push("Loup"),i.includes("Traître")&&m.push("Traître"),i.includes("Louveteau")&&m.push("Louveteau"),i.includes("Rôles spéciaux")&&m.push("Rôles spéciaux");const d=["Camp Villageois","Camp Loup","Rôles spéciaux"],T=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Traître","Louveteau"],...d],N=i.filter(L=>!T.includes(L)).sort();return[...m,...N]},[g]),{campPlayerData:C,topPerformersData:x,totalMatchingPlayers:v}=u.useMemo(()=>{if(!g?.playerPerformance)return{campPlayerData:[],topPerformersData:[],totalMatchingPlayers:0};const{playerPerformance:i}=g,m=[],d=[],b=new Map;for(const w of i)for(const P of w.campPerformance)if(P.games>=f){const M=`${w.player}-${P.camp}`,V={player:w.player,camp:P.camp,games:P.games,wins:P.wins,winRate:P.winRate,performance:P.performance,winRateNum:parseFloat(P.winRate),performanceNum:parseFloat(P.performance),campAvgWinRateNum:parseFloat(P.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:M,playerCamp:M},S=b.get(w.player);(!S||V.performanceNum>S.performanceNum)&&b.set(w.player,V),t!=="Tous les camps"&&P.camp===t&&m.push({player:w.player,...P,winRateNum:parseFloat(P.winRate),performanceNum:parseFloat(P.performance),campAvgWinRateNum:parseFloat(P.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:M,playerCamp:M})}d.push(...b.values());const T=(w,P,M=!1)=>{if(!s.highlightedPlayer||w.some(A=>A.player===s.highlightedPlayer&&(!P||A.camp===P)))return w;const S=i.find(A=>A.player===s.highlightedPlayer);if(!S)return w;if(M){let A=null;for(const I of S.campPerformance)if(I.games>=1){const Q=`${S.player}-${I.camp}`,ee={player:S.player,camp:I.camp,games:I.games,wins:I.wins,winRate:I.winRate,performance:I.performance,winRateNum:parseFloat(I.winRate),performanceNum:parseFloat(I.performance),campAvgWinRateNum:parseFloat(I.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:Q,playerCamp:Q};(!A||ee.performanceNum>A.performanceNum)&&(A=ee)}return A?[...w,A]:w}const O=[];for(const A of S.campPerformance)if((!P||A.camp===P)&&A.games>=1){const I=`${S.player}-${A.camp}`;O.push({player:S.player,camp:A.camp,games:A.games,wins:A.wins,winRate:A.winRate,performance:A.performance,winRateNum:parseFloat(A.winRate),performanceNum:parseFloat(A.performance),campAvgWinRateNum:parseFloat(A.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:I,playerCamp:I})}return[...w,...O]},N=t!=="Tous les camps"?T(m,t,!1):[],L=T(d,void 0,!0),k=N.sort((w,P)=>P.performanceNum-w.performanceNum),Te=L.sort((w,P)=>P.performanceNum-w.performanceNum),Y=(w,P)=>{const M=w.slice(0,P);if(M.some(O=>O.player===s.highlightedPlayer)||!s.highlightedPlayer)return M;const S=w.find(O=>O.player===s.highlightedPlayer);if(S){const O={...S,isHighlightedAddition:!0};return[...M,O]}return M};let J=0;return t==="Tous les camps"?J=b.size:J=m.length,{campPlayerData:Y(k,15),topPerformersData:Y(Te,15),totalMatchingPlayers:J}},[g,t,f,s.highlightedPlayer]),R=i=>{i&&i.player&&(t!=="Tous les camps"?e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Camp Villageois"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Performance des Joueurs - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau",excludeVillagers:t==="Chasseur"||t==="Alchimiste"},fromComponent:`Performance des Joueurs - ${t}`}):i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Camp Villageois"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau",excludeVillagers:i.camp==="Chasseur"||i.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return y?p.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):E?p.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",E]}):g?p.jsxs("div",{className:"lycans-player-camp-performance",children:[p.jsx("h2",{children:"Meilleurs Performances par Camp"}),p.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),p.jsx("select",{id:"camp-select",value:t,onChange:i=>{const m=i.target.value;c(m),r({campPerformanceState:{selectedCampPerformanceCamp:m,selectedCampPerformanceMinGames:f}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:F.map(i=>{let m=i,d=!1,b=!1,T=!1;return i==="Tous les camps"?(m="📊 Tous les camps",T=!0):i==="Camp Villageois"?(m="   🏘️ Camp Villageois",d=!0,b=!0):i==="Villageois"?(m="   Villageois",d=!0):i==="Chasseur"?(m="     Chasseur",d=!0):i==="Alchimiste"?(m="     Alchimiste",d=!0):i==="Camp Loup"?(m="   🐺 Camp Loup",d=!0,b=!0):i==="Loup"?(m="     Loup",d=!0):i==="Traître"?(m="     Traître",d=!0):i==="Louveteau"?(m="     Louveteau",d=!0):i==="Rôles spéciaux"?(m="   ⭐ Rôles spéciaux",d=!0,b=!0):(m=`     ${i}`,d=!0),p.jsx("option",{value:i,style:{fontFamily:"monospace",fontSize:d?"0.85rem":"0.9rem",fontWeight:b?"bold":"normal",color:b?"var(--accent-primary)":T?"var(--accent-secondary)":"inherit"},children:m},i)})})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),p.jsx("select",{id:"min-games-select",value:f,onChange:i=>{const m=Number(i.target.value);h(m),r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:m}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Ne.map(i=>p.jsx("option",{value:i,children:i},i))})]})]}),p.jsx("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:p.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.95rem",fontWeight:"500"},children:[v," joueur",v!==1?"s":""," ",v!==1?"correspondent":"correspond"," aux critères"]})}),p.jsxs("div",{className:"lycans-graphiques-groupe",children:[p.jsxs("div",{className:"lycans-graphique-section",children:[p.jsx("h3",{children:t==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${t}`}),p.jsx(re,{title:t==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${t}`,children:p.jsx("div",{style:{height:t==="Tous les camps"?600:500},children:p.jsx(oe,{width:"100%",height:"100%",children:p.jsxs(Ve,{data:t==="Tous les camps"?x:C,margin:{top:20,right:30,left:20,bottom:t==="Tous les camps"?20:0},children:[p.jsx(se,{strokeDasharray:"3 3"}),p.jsx(te,{dataKey:t==="Tous les camps"?"uniqueKey":"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:i,y:m,payload:d,index:b})=>{const N=(t==="Tous les camps"?x:C)[b],L=N?.player||d.value,k=s.highlightedPlayer===(N?.player||d.value);return p.jsx("text",{x:i,y:m,dy:16,textAnchor:"end",fill:k?"var(--accent-primary)":"var(--text-secondary)",fontSize:k?14:13,fontWeight:k?"bold":"italic",transform:`rotate(-45 ${i} ${m})`,children:L})}}),p.jsx(ie,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),p.jsx(le,{content:({active:i,payload:m})=>{if(i&&m&&m.length>0){const d=m[0].payload;return p.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[p.jsx("div",{children:p.jsx("strong",{children:t==="Tous les camps"?`${d.player} - ${d.camp}`:d.player})}),p.jsxs("div",{children:["Parties: ",d.games]}),p.jsxs("div",{children:["Victoires: ",d.wins]}),p.jsxs("div",{children:["Taux personnel: ",d.winRate,"%"]}),t!=="Tous les camps"&&p.jsxs("div",{children:["Moyenne camp: ",d.campAvgWinRate,"%"]}),p.jsxs("div",{children:["Performance: ",d.performance>0?"+":"",d.performance]}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),p.jsx($e,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:R,children:(t==="Tous les camps"?x:C).map((i,m)=>{const d=s.highlightedPlayer===i.player,b=i.isHighlightedAddition;return p.jsx(ye,{fill:t==="Tous les camps"?n[i.camp]||`var(--chart-color-${m%6+1})`:l[i.player]||(i.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:d?"var(--accent-primary)":"transparent",strokeWidth:d?3:0,strokeDasharray:b?"5,5":"none",opacity:b?.8:1},`cell-${m}`)})})]})})})})]}),p.jsxs("div",{className:"lycans-graphique-section",children:[p.jsx("h3",{children:t==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${t} sur nombre de parties jouées`}),p.jsx(re,{title:t==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${t}`,children:p.jsx("div",{style:{height:400},children:p.jsx(oe,{width:"100%",height:"100%",children:p.jsxs(Qa,{data:t==="Tous les camps"?x:C,margin:{top:20,right:30,left:20,bottom:20},children:[p.jsx(se,{strokeDasharray:"3 3"}),p.jsx(te,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),p.jsx(ie,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),p.jsx(le,{content:({active:i,payload:m})=>{if(i&&m&&m.length>0){const d=m[0].payload;return p.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[p.jsx("div",{children:p.jsx("strong",{children:d.player})}),t==="Tous les camps"&&p.jsxs("div",{children:["Camp: ",d.camp]}),p.jsxs("div",{children:["Parties: ",d.games]}),p.jsxs("div",{children:["Performance: ",d.performance>0?"+":"",d.performance]}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),p.jsx(je,{dataKey:"performanceNum",name:"Performance",onClick:i=>{i&&i.player&&(t==="Tous les camps"?i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}))},shape:i=>{const m=s.highlightedPlayer===i.payload?.player,d=i.payload?.isHighlightedAddition;return p.jsxs("g",{style:{cursor:"pointer"},children:[p.jsx("circle",{cx:i.cx,cy:i.cy,r:m?15:12,fill:t==="Tous les camps"?n[i.payload?.camp]||"var(--accent-primary)":l[i.payload?.player]||"var(--accent-primary)",stroke:m?"var(--accent-primary)":"#222",strokeWidth:m?3:1,strokeDasharray:d?"5,5":"none",opacity:d?.8:1}),p.jsx("text",{x:i.cx,y:i.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:m?"12":"10",fontWeight:"bold",pointerEvents:"none",children:i.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):p.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{pr as PlayerCampPerformanceChart};
