import{r as w,u as E,j as a}from"./index-CQQ22x8H.js";import{u as q,a as k,b as B}from"./useRawGameData-DFJx8DAW.js";import{c as R,a as M}from"./gameUtils-eJjgb3Fr.js";import{a as G}from"./api-beq3FXpM.js";function F(s){const{data:y,isLoading:v,error:j}=q(),{data:L,isLoading:N,error:I}=k(),{data:A,isLoading:T,error:P}=B();return{data:w.useMemo(()=>{if(!y||!L||!A)return[];let h=[...y];return s&&(s.selectedPlayer&&(h=h.filter(r=>r["Liste des joueurs"].toLowerCase().includes(s.selectedPlayer.toLowerCase()))),s.selectedGame&&(h=h.filter(r=>r.Game===s.selectedGame)),s.selectedCamp&&(h=h.filter(r=>{if(s.selectedPlayer){const t=L.find(C=>C.Game===r.Game);if(!t)return!1;const e=s.selectedPlayer.toLowerCase();if(s.selectedCamp==="Autres"&&s._smallCamps){const C=s._smallCamps;for(const i of C){let u=!1;switch(i){case"Traître":u=!!(t.Traître&&t.Traître.toLowerCase().includes(e));break;case"Idiot du Village":u=!!(t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e));break;case"Cannibale":u=!!(t.Cannibale&&t.Cannibale.toLowerCase().includes(e));break;case"Agent":u=!!(t.Agent&&t.Agent.toLowerCase().includes(e));break;case"Espion":u=!!(t.Espion&&t.Espion.toLowerCase().includes(e));break;case"Scientifique":u=!!(t.Scientifique&&t.Scientifique.toLowerCase().includes(e));break;case"Amoureux":u=!!(t.Amoureux&&t.Amoureux.toLowerCase().includes(e));break;case"La Bête":u=!!(t["La Bête"]&&t["La Bête"].toLowerCase().includes(e));break;case"Chasseur de primes":u=!!(t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e));break;case"Vaudou":u=!!(t.Vaudou&&t.Vaudou.toLowerCase().includes(e));break;case"Villageois":const n=r["Liste des joueurs"].toLowerCase().includes(e),o=t.Loups&&t.Loups.toLowerCase().includes(e)||t.Traître&&t.Traître.toLowerCase().includes(e)||t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e)||t.Cannibale&&t.Cannibale.toLowerCase().includes(e)||t.Agent&&t.Agent.toLowerCase().includes(e)||t.Espion&&t.Espion.toLowerCase().includes(e)||t.Scientifique&&t.Scientifique.toLowerCase().includes(e)||t.Amoureux&&t.Amoureux.toLowerCase().includes(e)||t["La Bête"]&&t["La Bête"].toLowerCase().includes(e)||t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e)||t.Vaudou&&t.Vaudou.toLowerCase().includes(e);u=n&&!o;break}if(u)return!0}return!1}return t.Loups&&t.Loups.toLowerCase().includes(e)?s.selectedCamp==="Loups":t.Traître&&t.Traître.toLowerCase().includes(e)?s.selectedCamp==="Traître":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(e)?s.selectedCamp==="Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(e)?s.selectedCamp==="Cannibale":t.Agent&&t.Agent.toLowerCase().includes(e)?s.selectedCamp==="Agent":t.Espion&&t.Espion.toLowerCase().includes(e)?s.selectedCamp==="Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(e)?s.selectedCamp==="Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(e)?s.selectedCamp==="Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(e)?s.selectedCamp==="La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(e)?s.selectedCamp==="Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(e)?s.selectedCamp==="Vaudou":r["Liste des joueurs"].toLowerCase().includes(e)?s.selectedCamp==="Villageois":!1}else{if((s.campFilterMode||"wins-only")==="wins-only")return s.selectedCamp==="Autres"&&s._smallCamps?s._smallCamps.includes(r["Camp victorieux"]):r["Camp victorieux"]===s.selectedCamp;{const e=L.find(c=>c.Game===r.Game);if(!e)return r["Camp victorieux"]===s.selectedCamp;if(s.selectedCamp==="Autres"&&s._smallCamps)return s._smallCamps.some(C=>{switch(C){case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const i=r["Liste des joueurs"].split(",").map(n=>n.trim()).filter(n=>n),u=[...e.Loups?e.Loups.split(",").map(n=>n.trim()).filter(n=>n):[],...e.Traître?[e.Traître.trim()].filter(n=>n):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(n=>n):[],...e.Cannibale?[e.Cannibale.trim()].filter(n=>n):[],...e.Agent?[e.Agent.trim()].filter(n=>n):[],...e.Espion?[e.Espion.trim()].filter(n=>n):[],...e.Scientifique?[e.Scientifique.trim()].filter(n=>n):[],...e.Amoureux?e.Amoureux.split(",").map(n=>n.trim()).filter(n=>n):[],...e["La Bête"]?[e["La Bête"].trim()].filter(n=>n):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(n=>n):[],...e.Vaudou?[e.Vaudou.trim()].filter(n=>n):[]];return i.some(n=>!u.includes(n));default:return!1}});switch(s.selectedCamp){case"Loups":return!!(e.Loups&&e.Loups.trim());case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const c=r["Liste des joueurs"].split(",").map(i=>i.trim()).filter(i=>i),C=[...e.Loups?e.Loups.split(",").map(i=>i.trim()).filter(i=>i):[],...e.Traître?[e.Traître.trim()].filter(i=>i):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(i=>i):[],...e.Cannibale?[e.Cannibale.trim()].filter(i=>i):[],...e.Agent?[e.Agent.trim()].filter(i=>i):[],...e.Espion?[e.Espion.trim()].filter(i=>i):[],...e.Scientifique?[e.Scientifique.trim()].filter(i=>i):[],...e.Amoureux?e.Amoureux.split(",").map(i=>i.trim()).filter(i=>i):[],...e["La Bête"]?[e["La Bête"].trim()].filter(i=>i):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(i=>i):[],...e.Vaudou?[e.Vaudou.trim()].filter(i=>i):[]];return c.some(i=>!C.includes(i));default:return r["Camp victorieux"]===s.selectedCamp}}}})),s.selectedVictoryType&&(h=h.filter(r=>r["Type de victoire"]===s.selectedVictoryType)),s.selectedDate&&(h=h.filter(r=>{const t=r.Date;if(s.selectedDate.includes("/")&&s.selectedDate.split("/").length===2){const[e,c]=s.selectedDate.split("/"),C=t.split("/");if(C.length===3){const[,i,u]=C;return i===e&&u===c}}else return t===s.selectedDate;return!1})),s.selectedPlayerPair&&s.selectedPairRole&&(h=h.filter(r=>{const t=L.find(u=>u.Game===r.Game);if(!t)return!1;const[e,c]=s.selectedPlayerPair,C=e.toLowerCase(),i=c.toLowerCase();if(s.selectedPairRole==="wolves"){if(t.Loups){const u=t.Loups.toLowerCase();return u.includes(C)&&u.includes(i)}}else if(s.selectedPairRole==="lovers"&&t.Amoureux){const u=t.Amoureux.toLowerCase();return u.includes(C)&&u.includes(i)}return!1})),s.selectedHarvestRange&&(h=h.filter(r=>{const t=r["Pourcentage de récolte"];if(t==null)return!1;const e=t*100;switch(s.selectedHarvestRange){case"0-25%":return e>=0&&e<=25;case"26-50%":return e>25&&e<=50;case"51-75%":return e>50&&e<=75;case"76-99%":return e>75&&e<=99;case"100%":return e>=100;default:return!0}})),s.selectedGameDuration&&(h=h.filter(r=>r["Nombre de journées"]===s.selectedGameDuration)),s.selectedPlayers&&s.selectedPlayers.length===2&&(h=h.filter(r=>{const t=r["Liste des joueurs"].toLowerCase(),[e,c]=s.selectedPlayers;if(!(t.includes(e.toLowerCase())&&t.includes(c.toLowerCase())))return!1;if(s.playersFilterMode==="all-common-games"){if(s.winnerPlayer){const i=L.find(o=>o.Game===r.Game);if(!i)return!0;const n=(o=>{const p=o.toLowerCase();return i.Loups&&i.Loups.toLowerCase().includes(p)||i.Traître&&i.Traître.toLowerCase().includes(p)?"Loups":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(p)?"Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(p)?"Cannibale":i.Agent&&i.Agent.toLowerCase().includes(p)?"Agent":i.Espion&&i.Espion.toLowerCase().includes(p)?"Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(p)?"Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(p)?"Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(p)?"La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(p)?"Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(p)?"Vaudou":"Villageois"})(s.winnerPlayer);return r["Camp victorieux"]===n}return!0}if(s.playersFilterMode==="opposing-camps"){const i=L.find(d=>d.Game===r.Game);if(!i)return!1;const u=d=>{const m=d.toLowerCase();return i.Loups&&i.Loups.toLowerCase().includes(m)||i.Traître&&i.Traître.toLowerCase().includes(m)?"Loups":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(m)?"Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(m)?"Cannibale":i.Agent&&i.Agent.toLowerCase().includes(m)?"Agent":i.Espion&&i.Espion.toLowerCase().includes(m)?"Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(m)?"Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(m)?"Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(m)?"La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(m)?"Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(m)?"Vaudou":"Villageois"},n=u(e),o=u(c);if(!(n!==o))return!1;if(s.winnerPlayer){const d=u(s.winnerPlayer);return r["Camp victorieux"]===d}return!0}if(s.playersFilterMode==="same-camp"){const i=L.find(d=>d.Game===r.Game);if(!i)return!1;const u=d=>{const m=d.toLowerCase();return i.Loups&&i.Loups.toLowerCase().includes(m)||i.Traître&&i.Traître.toLowerCase().includes(m)?"Loups":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(m)?"Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(m)?"Cannibale":i.Agent&&i.Agent.toLowerCase().includes(m)?"Agent":i.Espion&&i.Espion.toLowerCase().includes(m)?"Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(m)?"Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(m)?"Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(m)?"La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(m)?"Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(m)?"Vaudou":"Villageois"},n=u(e),o=u(c);if(!(n===o))return!1;if(s.winnerPlayer){const d=u(s.winnerPlayer);return r["Camp victorieux"]===d}return!0}return!1}))),h.map(r=>{const t=L.find(o=>o.Game===r.Game),e=A.filter(o=>o.Game===r.Game),c={};t&&(t.Loups&&(c.wolves=t.Loups.split(", ").filter(Boolean)),t.Traître&&(c.traitor=t.Traître),t["Idiot du village"]&&(c.villageIdiot=t["Idiot du village"]),t.Cannibale&&(c.cannibal=t.Cannibale),t.Agent&&(c.agent=t.Agent),t.Espion&&(c.spy=t.Espion),t.Scientifique&&(c.scientist=t.Scientifique),t.Amoureux&&(c.lovers=t.Amoureux.split(", ").filter(Boolean)),t["La Bête"]&&(c.beast=t["La Bête"]),t["Chasseur de primes"]&&(c.bountyHunter=t["Chasseur de primes"]),t.Vaudou&&(c.voodoo=t.Vaudou));const C=e.map(o=>({player:"Ponce",camp:o.Camp||"Unknown",isTraitor:o.Traître||!1,secondaryRole:o["Rôle secondaire"]==="N/A"?null:o["Rôle secondaire"],wolfPower:o["Pouvoir de loup"]==="N/A"?null:o["Pouvoir de loup"],villagerJob:o["Métier villageois"]==="N/A"?null:o["Métier villageois"],playersKilled:o["Joueurs tués"],deathDay:o["Jour de mort"],deathType:o["Type de mort"],killers:o["Joueurs tueurs"]})),i=[];return r["Liste des joueurs"].split(", ").filter(Boolean).forEach(o=>{let p="Villageois",d="Villageois";t&&(t.Loups&&t.Loups.split(", ").includes(o)?(p="Loups",d="Loups"):t.Traître&&t.Traître===o?(p="Traître",d="Loups"):t["Idiot du village"]&&t["Idiot du village"]===o?(p="Idiot du Village",d="Idiot du Village"):t.Cannibale&&t.Cannibale===o?(p="Cannibale",d="Cannibale"):t.Agent&&t.Agent.split(", ").includes(o)?(p="Agent",d="Agent"):t.Espion&&t.Espion===o?(p="Espion",d="Espion"):t.Scientifique&&t.Scientifique===o?(p="Scientifique",d="Scientifique"):t["La Bête"]&&t["La Bête"]===o?(p="La Bête",d="La Bête"):t["Chasseur de primes"]&&t["Chasseur de primes"]===o?(p="Chasseur de primes",d="Chasseur de primes"):t.Vaudou&&t.Vaudou===o?(p="Vaudou",d="Vaudou"):t.Amoureux&&t.Amoureux.split(", ").includes(o)&&p==="Villageois"&&(p="Amoureux",d="Amoureux")),i.push({player:o,role:p,camp:d})}),{gameId:r.Game,date:r.Date,isModded:r["Game Moddée"],playerCount:r["Nombre de joueurs"],wolfCount:r["Nombre de loups"],hasTraitor:r["Rôle Traître"],hasLovers:r["Rôle Amoureux"],soloRoles:r["Rôles solo"],winningCamp:r["Camp victorieux"],victoryType:r["Type de victoire"],dayCount:r["Nombre de journées"],villagerSurvivors:r["Survivants villageois"],wolfSurvivors:r["Survivants loups (traître inclus)"],loverSurvivors:r["Survivants amoureux"],soloSurvivors:r["Survivants solo"],winners:r["Liste des gagnants"],harvest:r.Récolte,totalHarvest:r["Total récolte"],harvestPercentage:r["Pourcentage de récolte"],playersList:r["Liste des joueurs"],versions:r.Versions,map:r.Map,youtubeEmbedUrl:M(r.Début,r.Fin),gameDuration:R(r.Début,r.Fin),roles:c,playerRoles:i,playerDetails:C}})},[y,L,A,s]),isLoading:v||N||T,error:j||I||P}}function Y(){const{navigationFilters:s,navigateBack:y}=E(),{data:v,isLoading:j,error:L}=F(s),[N,I]=w.useState("date"),[A,T]=w.useState("desc"),[P,S]=w.useState(null),[x,V]=w.useState(1),[h,r]=w.useState(25),t=w.useRef(!1),e=w.useMemo(()=>v?[...v].sort((l,g)=>{let f,b;switch(N){case"date":f=new Date(l.date.split("/").reverse().join("-")).getTime(),b=new Date(g.date.split("/").reverse().join("-")).getTime();break;case"gameId":f=l.gameId,b=g.gameId;break;case"playerCount":f=l.playerCount,b=g.playerCount;break;case"dayCount":f=l.dayCount,b=g.dayCount;break;case"winningCamp":f=l.winningCamp,b=g.winningCamp;break;case"victoryType":f=l.victoryType,b=g.victoryType;break;default:return 0}return A==="asc"?f>b?1:-1:f<b?1:-1}):[],[v,N,A]),c=Math.ceil(e.length/h),C=(x-1)*h,i=C+h,u=e.slice(C,i);w.useEffect(()=>{if(t.current){t.current=!1;return}V(1),S(null)},[v]),w.useEffect(()=>{V(1),S(null)},[N,A]);const n=l=>{t.current=!0,V(l),S(null)},o=l=>{t.current=!0,r(l),V(1),S(null)},p=l=>{t.current=!0,S(P===l?null:l)},d=l=>{N===l?T(A==="asc"?"desc":"asc"):(I(l),T("desc"))},m=l=>N!==l?"↕️":A==="asc"?"↗️":"↘️",D=()=>{const l=[];if(s.selectedPlayer&&s.selectedCamp)l.push(`${s.selectedPlayer} jouant ${s.selectedCamp}`);else if(s.selectedPlayer&&l.push(`Joueur: ${s.selectedPlayer}`),s.selectedCamp){const g=`Camp: ${s.selectedCamp}`,f=s.campFilterMode==="wins-only"?" (victoires uniquement)":s.campFilterMode==="all-assignments"?" (toutes assignations)":"";l.push(g+f)}if(s.selectedPlayerPair&&s.selectedPairRole){const g=s.selectedPlayerPair.join(" & "),f=s.selectedPairRole==="wolves"?"loups":"amoureux";l.push(`Paire ${f}: ${g}`)}if(s.selectedPlayers&&s.playersFilterMode){const g=s.selectedPlayers.join(" & ");let f="";s.playersFilterMode==="all-common-games"?f="toutes les parties communes":s.playersFilterMode==="opposing-camps"?f="affrontements uniquement":s.playersFilterMode==="same-camp"&&(f="parties en équipe (même camp)");const b=s.winnerPlayer?` (victoires de ${s.winnerPlayer})`:"";l.push(`${g} (${f}${b})`)}return s.selectedVictoryType&&l.push(`Victoire: ${s.selectedVictoryType}`),s.selectedHarvestRange&&l.push(`Récolte: ${s.selectedHarvestRange}`),s.selectedGameDuration&&l.push(`Durée: ${s.selectedGameDuration} jour${s.selectedGameDuration>1?"s":""}`),s.selectedGame&&l.push(`Partie #${s.selectedGame}`),s.selectedDate&&(s.selectedDate.includes("/")&&s.selectedDate.split("/").length===2?l.push(`Mois: ${s.selectedDate}`):l.push(`Date: ${s.selectedDate}`)),l};return j?a.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):L?a.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",L]}):!v||v.length===0?a.jsxs("div",{className:"lycans-empty-section",children:[a.jsx("h2",{children:"Aucune partie trouvée"}),a.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),s.fromComponent&&a.jsxs("button",{onClick:y,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",s.fromComponent]})]}):a.jsxs("div",{className:"lycans-game-details",children:[a.jsxs("div",{className:"lycans-game-details-header",children:[a.jsxs("div",{className:"lycans-game-details-navigation",children:[s.fromComponent&&a.jsxs("button",{onClick:y,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",s.fromComponent]}),a.jsxs("h2",{children:["Détails des Parties (",v.length," partie",v.length>1?"s":"",")"]})]}),D().length>0&&a.jsxs("div",{className:"lycans-active-filters",children:[a.jsx("strong",{children:"Filtres actifs:"})," ",D().join(", ")]})]}),c>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",C+1," à ",Math.min(i,e.length)," sur ",e.length," parties"]}),a.jsxs("div",{className:"lycans-pagination-controls",children:[a.jsxs("select",{value:h,onChange:l=>o(Number(l.target.value)),className:"lycans-pagination-select",children:[a.jsx("option",{value:10,children:"10 par page"}),a.jsx("option",{value:25,children:"25 par page"}),a.jsx("option",{value:50,children:"50 par page"}),a.jsx("option",{value:100,children:"100 par page"})]}),a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>n(1),disabled:x===1,className:"lycans-pagination-btn",children:"««"}),a.jsx("button",{onClick:()=>n(x-1),disabled:x===1,className:"lycans-pagination-btn",children:"‹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",x," sur ",c]}),a.jsx("button",{onClick:()=>n(x+1),disabled:x===c,className:"lycans-pagination-btn",children:"›"}),a.jsx("button",{onClick:()=>n(c),disabled:x===c,className:"lycans-pagination-btn",children:"»»"})]})]})]}),a.jsx("div",{className:"lycans-games-table-container",children:a.jsxs("table",{className:"lycans-games-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsxs("th",{onClick:()=>d("gameId"),className:"sortable",children:["Partie ",m("gameId")]}),a.jsxs("th",{onClick:()=>d("date"),className:"sortable",children:["Date ",m("date")]}),a.jsxs("th",{onClick:()=>d("playerCount"),className:"sortable",children:["Joueurs ",m("playerCount")]}),a.jsxs("th",{onClick:()=>d("dayCount"),className:"sortable",children:["Jours ",m("dayCount")]}),a.jsxs("th",{onClick:()=>d("winningCamp"),className:"sortable",children:["Camp Vainqueur ",m("winningCamp")]}),a.jsxs("th",{onClick:()=>d("victoryType"),className:"sortable",children:["Type de Victoire ",m("victoryType")]}),a.jsx("th",{children:"Détails"})]})}),a.jsx("tbody",{children:u.map(l=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:P===l.gameId?"selected":"",children:[a.jsxs("td",{children:["#",l.gameId]}),a.jsx("td",{children:l.date}),a.jsx("td",{children:l.playerCount}),a.jsx("td",{children:l.dayCount}),a.jsx("td",{style:{color:G[l.winningCamp]||"#fff"},children:l.winningCamp}),a.jsx("td",{children:l.victoryType}),a.jsx("td",{children:a.jsx("button",{onClick:()=>p(l.gameId),className:"lycans-details-btn",children:P===l.gameId?"Masquer":"Voir"})})]},l.gameId),P===l.gameId&&a.jsx("tr",{className:"game-details-row",children:a.jsx("td",{colSpan:7,children:a.jsx(J,{game:l})})},`${l.gameId}-details`)]}))})]})}),c>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",C+1," à ",Math.min(i,e.length)," sur ",e.length," parties"]}),a.jsx("div",{className:"lycans-pagination-controls",children:a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>n(1),disabled:x===1,className:"lycans-pagination-btn",children:"««"}),a.jsx("button",{onClick:()=>n(x-1),disabled:x===1,className:"lycans-pagination-btn",children:"‹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",x," sur ",c]}),a.jsx("button",{onClick:()=>n(x+1),disabled:x===c,className:"lycans-pagination-btn",children:"›"}),a.jsx("button",{onClick:()=>n(c),disabled:x===c,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function $(s){if(s===null||s<=0)return"N/A";const y=Math.floor(s/60),v=s%60;return y===0?`${v}s`:v===0?`${y}m`:`${y}m ${v}s`}function J({game:s}){const[y,v]=w.useState(!1);return a.jsx("div",{className:"lycans-game-detail-view",children:a.jsxs("div",{className:"lycans-game-detail-grid",children:[a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations Générales"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de joueurs:"}),a.jsx("span",{className:"value",children:s.playerCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de loups:"}),a.jsx("span",{className:"value",children:s.wolfCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Traître:"}),a.jsx("span",{className:"value",children:s.hasTraitor?"Oui":"Non"})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Amoureux:"}),a.jsx("span",{className:"value",children:s.hasLovers?"Oui":"Non"})]}),s.soloRoles&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Rôles solo:"}),a.jsx("span",{className:"value",children:s.soloRoles})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations Supplémentaires"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[s.gameDuration!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Durée de la partie:"}),a.jsx("span",{className:"value",children:$(s.gameDuration)})]}),s.versions&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Version:"}),a.jsxs("span",{className:"value",children:[s.versions,s.isModded?" (moddée)":""]})]}),s.map&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Map:"}),a.jsx("span",{className:"value",children:s.map})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Résultats"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Camp vainqueur:"}),a.jsx("span",{className:"value",children:s.winningCamp})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Type de victoire:"}),a.jsx("span",{className:"value",children:s.victoryType})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants villageois:"}),a.jsx("span",{className:"value",children:s.villagerSurvivors})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants loups:"}),a.jsx("span",{className:"value",children:s.wolfSurvivors})]}),s.loverSurvivors!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants amoureux:"}),a.jsx("span",{className:"value",children:s.loverSurvivors})]}),s.soloSurvivors!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants solo:"}),a.jsx("span",{className:"value",children:s.soloSurvivors})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Gagnants:"}),a.jsx("span",{className:"value",children:s.winners})]})]})]}),s.harvest!==null&&a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Récolte"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Récolte:"}),a.jsx("span",{className:"value",children:s.harvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Total possible:"}),a.jsx("span",{className:"value",children:s.totalHarvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Pourcentage:"}),a.jsx("span",{className:"value",children:typeof s.harvestPercentage=="number"?(s.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"Rôles des Joueurs"}),a.jsx("div",{className:"lycans-player-roles-grid",children:s.playerRoles.map((j,L)=>{let N=j.role===j.camp?j.camp:`${j.camp} (${j.role})`;return a.jsxs("div",{className:"lycans-player-role-item",children:[a.jsx("div",{className:"lycans-player-name",style:{color:G[j.camp]||"#fff",textAlign:"left"},children:j.player}),a.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:N})]},L)})})]}),s.youtubeEmbedUrl&&a.jsx("div",{className:"lycans-game-detail-section full-width",children:a.jsx("button",{onClick:()=>v(!y),className:"lycans-video-toggle-btn",children:y?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),s.youtubeEmbedUrl&&y&&a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"Vidéo de la Partie"}),a.jsx("div",{className:"lycans-youtube-container",children:a.jsx("iframe",{src:s.youtubeEmbedUrl,title:`Partie Lycans #${s.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{Y as GameDetailsChart};
