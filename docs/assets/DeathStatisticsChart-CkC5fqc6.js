import{g as w,u as J,a as Z,r as H,j as e,d as de}from"./index-Lu2UdqJ3.js";import{g as I,a as Q,u as X,D as z}from"./datasyncExport-BNrnZ2du.js";import{i as le,D as T,g as he}from"./deathTypes-CGUOTngO.js";import{b as ae,m as ee,a as ne,u as oe}from"./api-Mccqhh8G.js";import{F as V,B as W,C as O,X as F,Y as U,a as G,b as Y}from"./FullscreenChart-DL0YjWia.js";import{R as _,T as q}from"./CategoricalChart-DMwvByxE.js";import{u as ce}from"./useJoueursData-DlUdDq6-.js";function te(s){return s===T.SURVIVALIST_NOT_SAVED?T.BY_WOLF:s}function ge(s){const y=new Set;s.filter(u=>!u.LegacyData||u.LegacyData.deathInformationFilled===!0).forEach(u=>{u.PlayerStats.forEach(S=>{const l=I(S.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});y.add(l)})});const g=Array.from(y);return[...ae.filter(u=>g.includes(u)),...g.filter(u=>!ae.includes(u)).sort()]}function ie(s){return he(s)}function re(s){switch(s){case T.VOTED:return"Mort aux votes";case T.BY_WOLF:case T.SURVIVALIST_NOT_SAVED:return"Kill en Loup";case T.BY_ZOMBIE:return"Kill en Zombie";case T.BY_BEAST:return"Kill en BÃªte";case T.BY_AVATAR_CHAIN:return"Mort d'Avatar";case T.BULLET:return"Tir de Chasseur";case T.BULLET_HUMAN:return"Kill de Chasseur (sur humain)";case T.BULLET_WOLF:return"Kill de Chasseur (sur loup)";case T.SHERIF_SUCCESS:return"Kill de ShÃ©rif";case T.OTHER_AGENT:return"Kill d'Agent";case T.AVENGER:return"Kill de Vengeur";case T.SEER:return"Kill de Devin";case T.HANTED:return"Kill avec Potion hantÃ©e";case T.ASSASSIN:return"Kill avec Potion (Assassin)";case T.LOVER_DEATH:return"Kill d'amoureux";case T.BOMB:return"Explosion";case T.CRUSHED:return"Ã‰crasement";case T.STARVATION:return"Famine";case T.STARVATION_AS_BEAST:return"Tuerie bestiale";case T.FALL:return"Chute mortelle";case T.UNKNOWN:return"Kill inconnu";default:return""}}function me(s){const y=new Set;s.forEach(o=>{o.PlayerStats.forEach(u=>{if(u.DeathType&&le(u.DeathType)){const S=te(u.DeathType);S&&y.add(S)}})});const c=Array.from(y),g=[T.BY_WOLF,T.VOTED,T.BULLET,T.BULLET_HUMAN,T.BULLET_WOLF,T.BY_ZOMBIE,T.ASSASSIN,T.AVENGER,T.LOVER_DEATH];return[...g.filter(o=>c.includes(o)),...c.filter(o=>!g.includes(o)).sort()]}function ue(s,y){return s.PlayerStats.filter(c=>c.DeathType&&le(c.DeathType)&&(c.DeathTiming||c.DeathType)).map(c=>{let g=null,o=null;if(c.KillerName){const u=s.PlayerStats.find(S=>S.Username===c.KillerName);if(u){o=w(u);const S=Q(u.MainRoleInitial,u.MainRoleChanges||[]);g=I(S,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1}),S&&S!==u.MainRoleInitial&&(S==="Loup"?g="Loup":S==="Zombie"&&(g="Vaudou"))}}return{playerId:w(c),playerName:c.Username,deathType:te(c.DeathType),killerId:o,killerName:c.KillerName,killerCamp:g}}).filter(c=>{if(!y||y==="Tous les camps")return!0;const g=s.PlayerStats.find(u=>u.Username===c.playerName);return g?I(g.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y:!1})}function ye(s,y,c){const g=[];s.PlayerStats.forEach(u=>{if(u.KillerName&&u.DeathType){if(u.DeathType===T.VOTED||u.DeathType===T.STARVATION||u.DeathType===T.FALL||u.DeathType===T.BY_AVATAR_CHAIN)return;const S=s.PlayerStats.find(k=>k.Username===u.KillerName);if(!S)return;let l=I(S.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});const v=Q(S.MainRoleInitial,S.MainRoleChanges||[]);v&&v!==S.MainRoleInitial&&(v==="Loup"?l="Loup":v==="Zombie"&&(l="Vaudou"));const x=I(u.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!0});g.push({killerId:w(S),killerName:S.Username,victimId:w(u),victimName:u.Username,deathType:te(u.DeathType),killerCamp:l,victimCamp:x})}});let o=g;return y&&y!=="Tous les camps"&&(o=o.filter(u=>u.killerCamp===y)),c&&c!=="Tous les camps"&&(o=o.filter(u=>c==="Roles solo"?u.victimCamp!=="Villageois"&&u.victimCamp!=="Loup":u.victimCamp===c)),o}function pe(s,y,c){if(s.length===0)return null;const g=s.filter(r=>!r.LegacyData||r.LegacyData.deathInformationFilled===!0);if(g.length===0)return null;const o=[],u={},S={};g.forEach(r=>{ue(r,y).forEach(i=>{o.push({...i,gameId:r.Id})}),r.PlayerStats.forEach(i=>{const t=w(i),a=i.Username;S[t]=a,(!y||y==="Tous les camps"||I(i.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===y)&&(u[t]=(u[t]||0)+1)})});const l=o.length,v=g.length,x=v>0?l/v:0,k={};o.forEach(r=>{k[r.deathType]=(k[r.deathType]||0)+1});const f=Object.entries(k).map(([r,D])=>({type:r,count:D||0,percentage:l>0?(D||0)/l*100:0})).sort((r,D)=>D.count-r.count),L={};g.forEach(r=>{ye(r,y,c).forEach(i=>{S[i.killerId]=i.killerName,S[i.victimId]=i.victimName,L[i.killerId]||(L[i.killerId]={kills:0,victims:new Set,killsByDeathType:{}}),L[i.killerId].kills++,L[i.killerId].victims.add(i.victimId),L[i.killerId].killsByDeathType[i.deathType]=(L[i.killerId].killsByDeathType[i.deathType]||0)+1})});const B=Object.entries(L).map(([r,D])=>{const i=u[r]||0,t=i>0?D.kills/i:0;return{killerName:S[r]||r,kills:D.kills,victims:Array.from(D.victims).map(a=>S[a]||a),percentage:l>0?D.kills/l*100:0,gamesPlayed:i,averageKillsPerGame:t,killsByDeathType:D.killsByDeathType}}).sort((r,D)=>D.kills-r.kills),p={};o.forEach(r=>{p[r.playerId]||(p[r.playerId]={totalDeaths:0,deathsByType:{},killedById:{},deathDays:[]});const D=p[r.playerId];D.totalDeaths++,D.deathsByType[r.deathType]=(D.deathsByType[r.deathType]||0)+1,r.killerId&&(D.killedById[r.killerId]=(D.killedById[r.killerId]||0)+1)});const m=[];Object.entries(p).forEach(([r,D])=>{const i=S[r]||r,t={};Object.entries(D.killedById).forEach(([a,d])=>{const b=S[a]||a;t[b]=(t[b]||0)+d}),m.push({playerName:i,totalDeaths:D.totalDeaths,deathsByType:D.deathsByType,killedBy:t,deathRate:u[r]>0?D.totalDeaths/u[r]:0,gamesPlayed:u[r]||0})}),Object.entries(u).forEach(([r,D])=>{p[r]||m.push({playerName:S[r]||r,totalDeaths:0,deathsByType:{},killedBy:{},deathRate:0,gamesPlayed:D})});const h=m.sort((r,D)=>D.totalDeaths-r.totalDeaths),P=f.length>0?f[0].type:null,N=B.length>0?B[0].killerName:null;return{totalDeaths:l,totalGames:v,averageDeathsPerGame:x,deathsByType:f,killerStats:B,playerDeathStats:h,mostCommonDeathType:P,mostDeadlyKiller:N}}function ve(s,y){const c=s.filter(k=>!k.LegacyData||k.LegacyData.deathInformationFilled===!0),g={},o={},u=c.length,S=[T.BULLET,T.BULLET_HUMAN,T.BULLET_WOLF];c.forEach(k=>{const f=new Set;k.PlayerStats.forEach(L=>{const B=L.MainRoleInitial,p=Q(L.MainRoleInitial,L.MainRoleChanges||[]);if(B==="Chasseur"||p==="Chasseur"){const m=w(L);o[m]=L.Username,f.add(m),g[m]||(g[m]={kills:[],gamesPlayed:0,victimsCamps:[]}),g[m].gamesPlayed++}}),k.PlayerStats.forEach(L=>{const B=L.DeathType,p=L.KillerName,m=p?k.PlayerStats.find(P=>P.Username===p):null,h=m?w(m):null;if(h&&m&&(o[h]=m.Username),B&&S.includes(B)&&h&&f.has(h)){const P=I(L.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});g[h].kills.push(B),g[h].victimsCamps.push(P)}})});const l=Object.entries(g).map(([k,f])=>{const L=f.kills.length,B={};f.kills.forEach(r=>{B[r]=(B[r]||0)+1});const p={};f.victimsCamps.forEach(r=>{p[r]=(p[r]||0)+1});const m=f.victimsCamps.filter(r=>r!=="Villageois").length,h=f.victimsCamps.filter(r=>r==="Villageois").length,P=f.gamesPlayed>0?L/f.gamesPlayed:0,N=f.gamesPlayed>0?m/f.gamesPlayed:0;return{hunterName:o[k]||k,totalKills:L,nonVillageoisKills:m,villageoisKills:h,gamesPlayedAsHunter:f.gamesPlayed,averageKillsPerGame:P,averageNonVillageoisKillsPerGame:N,killsByDeathType:B,victimsByCamp:p}}).sort((k,f)=>f.totalKills-k.totalKills),v=l.length>0?l[0].hunterName:null,x=l.length>0?l.sort((k,f)=>f.averageNonVillageoisKillsPerGame-k.averageNonVillageoisKillsPerGame)[0].hunterName:null;return{totalHunters:l.length,totalGames:u,hunterStats:l,bestHunter:v,bestAverageHunter:x}}function xe(s,y){return X(c=>pe(c,s,y))}function fe(){return X(s=>ge(s))}function je(s){return X(y=>ve(y))}function se(s){if(!s||s.trim()==="")return null;const c=s.trim().slice(1),g=parseInt(c,10);return isNaN(g)||g<1?null:g}function Se(s,y){if(s.length===0)return null;const c=s.filter(l=>!l.LegacyData||l.LegacyData.deathInformationFilled===!0);if(c.length===0)return null;const g={},o={};c.forEach(l=>{let v=1;if(l.EndTiming){const x=se(l.EndTiming);x&&(v=x)}l.PlayerStats.forEach(x=>{if(y&&y!=="Tous les camps"&&I(x.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})!==y)return;const k=x.Username;g[k]||(g[k]={playerName:k,totalGames:0,survivalsByDay:{},survivalRatesByDay:{},gamesPlayedByDay:{}});const f=g[k];f.totalGames++;let L=null;x.DeathTiming&&(L=se(x.DeathTiming));for(let B=1;B<=v;B++)f.gamesPlayedByDay[B]||(f.gamesPlayedByDay[B]=0,f.survivalsByDay[B]=0),o[B]||(o[B]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),f.gamesPlayedByDay[B]++,o[B].playersOnDay++,(!L||L>B)&&(f.survivalsByDay[B]++,o[B].survivorsOnDay++)});for(let x=1;x<=v;x++)o[x]||(o[x]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),o[x].gamesReachingDay++}),Object.values(g).forEach(l=>{Object.keys(l.gamesPlayedByDay).forEach(v=>{const x=parseInt(v),k=l.gamesPlayedByDay[x],f=l.survivalsByDay[x];k>0?l.survivalRatesByDay[x]=f/k*100:l.survivalRatesByDay[x]=0})});const u=Object.values(g).filter(l=>l.totalGames>0).sort((l,v)=>v.totalGames-l.totalGames),S=Object.entries(o).map(([l,v])=>({dayNumber:parseInt(l),totalGamesReachingDay:v.gamesReachingDay,totalPlayersOnDay:v.playersOnDay,averageSurvivalRate:v.playersOnDay>0?v.survivorsOnDay/v.playersOnDay*100:0})).sort((l,v)=>l.dayNumber-v.dayNumber);return{totalGames:c.length,totalPlayersAnalyzed:u.length,playerSurvivalStats:u,dayStats:S}}function Pe(s,y,c=10){return s.playerSurvivalStats.filter(g=>(g.gamesPlayedByDay[y]||0)>=c).map(g=>({playerName:g.playerName,survivalRate:g.survivalRatesByDay[y]||0,gamesPlayed:g.totalGames,timesReachedDay:g.gamesPlayedByDay[y]||0,timesSurvivedDay:g.survivalsByDay[y]||0})).sort((g,o)=>o.survivalRate-g.survivalRate).slice(0,15)}function De(s,y,c=10){return s.playerSurvivalStats.filter(g=>(g.gamesPlayedByDay[y]||0)>=c).map(g=>({playerName:g.playerName,survivalRate:g.survivalRatesByDay[y]||0,gamesPlayed:g.totalGames,timesReachedDay:g.gamesPlayedByDay[y]||0,timesSurvivedDay:g.survivalsByDay[y]||0})).sort((g,o)=>g.survivalRate-o.survivalRate).slice(0,15)}function Te(s){return X(y=>Se(y,s))}function be({deathStats:s,selectedCamp:y,victimCampFilter:c,minGamesForAverage:g,onMinGamesChange:o,availableDeathTypes:u,deathTypeColors:S,totalEligibleForAverage:l}){const{navigateToGameDetails:v}=J(),{settings:x}=Z(),k=i=>{if(c==="Tous les camps"){const t=i.filter(a=>a!==T.BULLET_HUMAN&&a!==T.BULLET_WOLF);return(i.includes(T.BULLET_HUMAN)||i.includes(T.BULLET_WOLF))&&!t.includes(T.BULLET)&&t.push(T.BULLET),t}return i},f=H.useMemo(()=>k(u),[u,c]),L=H.useMemo(()=>{const i={...S};if(c==="Tous les camps"&&!i[T.BULLET]){const t=S[T.BULLET_HUMAN]||S[T.BULLET_WOLF];t&&(i[T.BULLET]=t)}return i},[S,c]),B=i=>{if(c==="Tous les camps"){const t=i.killsByDeathType[T.BULLET_HUMAN]||0,a=i.killsByDeathType[T.BULLET_WOLF]||0,d=i.killsByDeathType[T.BULLET]||0,b={...i.killsByDeathType};return b[T.BULLET]=t+a+d,delete b[T.BULLET_HUMAN],delete b[T.BULLET_WOLF],{...i,killsByDeathType:b}}return i},p=i=>{let t="Top Tueurs";return y!=="Tous les camps"&&(t+=` en ${y}`),c!=="Tous les camps"&&(c==="Roles solo"?t+=" (victimes: Roles solo)":t+=` (victimes: ${c})`),i==="total"?t+=" (Total)":t+=" (Moyenne par Partie)",t},{totalKillsData:m,averageKillsData:h,highlightedPlayerAddedToTotal:P,highlightedPlayerAddedToAverage:N}=H.useMemo(()=>{if(!s)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1};const i=s.killerStats.sort((j,A)=>A.kills-j.kills).slice(0,15),t=x.highlightedPlayer&&i.some(j=>j.killerName===x.highlightedPlayer),a=i.map(j=>{const A=B(j),E={name:A.killerName,value:A.kills,victims:A.victims.length,percentage:A.percentage,gamesPlayed:A.gamesPlayed,averageKillsPerGame:A.averageKillsPerGame,isHighlightedAddition:!1};return f.forEach(R=>{E[R]=A.killsByDeathType[R]||0}),E});let d=!1;if(x.highlightedPlayer&&!t){const j=s.killerStats.find(A=>A.killerName===x.highlightedPlayer);if(j){const A=B(j),E={name:A.killerName,value:A.kills,victims:A.victims.length,percentage:A.percentage,gamesPlayed:A.gamesPlayed,averageKillsPerGame:A.averageKillsPerGame,isHighlightedAddition:!0};f.forEach(R=>{E[R]=A.killsByDeathType[R]||0}),a.push(E),d=!0}}const n=s.killerStats.filter(j=>j.gamesPlayed>=g).sort((j,A)=>A.averageKillsPerGame-j.averageKillsPerGame).slice(0,15),K=x.highlightedPlayer&&n.some(j=>j.killerName===x.highlightedPlayer),C=n.map(j=>{const A=B(j),E={name:A.killerName,value:A.averageKillsPerGame,victims:A.victims.length,percentage:A.percentage,gamesPlayed:A.gamesPlayed,averageKillsPerGame:A.averageKillsPerGame,isHighlightedAddition:!1};return f.forEach(R=>{const $=A.killsByDeathType[R]||0;E[R]=A.gamesPlayed>0?$/A.gamesPlayed:0}),E});let M=!1;if(x.highlightedPlayer&&!K){const j=s.killerStats.find(A=>A.killerName===x.highlightedPlayer);if(j){const A=B(j),E={name:A.killerName,value:A.averageKillsPerGame,victims:A.victims.length,percentage:A.percentage,gamesPlayed:A.gamesPlayed,averageKillsPerGame:A.averageKillsPerGame,isHighlightedAddition:!0};f.forEach(R=>{const $=A.killsByDeathType[R]||0;E[R]=A.gamesPlayed>0?$/A.gamesPlayed:0}),C.push(E),M=!0}}return{totalKillsData:a,averageKillsData:C,highlightedPlayerAddedToTotal:d,highlightedPlayerAddedToAverage:M}},[s,x.highlightedPlayer,g,f,c]),r=({active:i,payload:t,label:a})=>{if(i&&t&&t.length){const d=t[0].payload,b=d.isHighlightedAddition,n=x.highlightedPlayer===d.name,K=f.reduce((C,M)=>C+(d[M]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:n?"var(--accent-primary)":"var(--text-primary)"},children:[a,b&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",K]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",d.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill:"}),f.map(C=>({deathType:C,count:d[C]||0})).filter(C=>C.count>0).sort((C,M)=>M.count-C.count).map(({deathType:C,count:M})=>e.jsxs("p",{style:{color:L[C],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[re(C),":"]})," ",M]},C))]}),b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),n&&!b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},D=({active:i,payload:t,label:a})=>{if(i&&t&&t.length){const d=t[0].payload,b=d.isHighlightedAddition,n=x.highlightedPlayer===d.name,K=d.gamesPlayed>=g,C=s?.killerStats.find(E=>E.killerName===d.name),M=C?B(C):null,j=f.reduce((E,R)=>E+(d[R]||0),0),A=M?M.kills:Math.round(j*d.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:n?"var(--accent-primary)":"var(--text-primary)"},children:[a,b&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",j.toFixed(2)," (",A," kills /",d.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",d.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill (moyenne):"}),f.map(E=>({deathType:E,avgCount:d[E]||0,totalKillsForDeathType:M?M.killsByDeathType[E]||0:Math.round((d[E]||0)*d.gamesPlayed)})).filter(E=>E.avgCount>0).sort((E,R)=>R.avgCount-E.avgCount).map(({deathType:E,avgCount:R,totalKillsForDeathType:$})=>e.jsxs("p",{style:{color:L[E],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[re(E),":"]})," ",R.toFixed(2)," (",$," kills /",d.gamesPlayed," games)"]},E))]}),b&&!K&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",g," parties)"]}),b&&K&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),n&&!b&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p("total")}),P&&x.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',x.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:p("total"),children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:m,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:i,y:t,payload:a})=>e.jsx("text",{x:i,y:t,dy:10,fill:x.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:x.highlightedPlayer===a.value?14:12,fontWeight:x.highlightedPlayer===a.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${i} ${t})`,children:a.value})}),e.jsx(U,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(r,{})}),f.map(i=>e.jsx(G,{dataKey:i,name:i,stackId:"kills",fill:L[i],onClick:t=>{const a={selectedPlayer:t?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(a.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),v(a)}},i))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,m.filter(i=>!i.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p("average")}),N&&x.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',x.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:g,onChange:i=>o(Number(i.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ee.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsx(V,{title:p("average"),children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:h,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:i,y:t,payload:a})=>e.jsx("text",{x:i,y:t,dy:10,fill:x.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:x.highlightedPlayer===a.value?14:12,fontWeight:x.highlightedPlayer===a.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${i} ${t})`,children:a.value})}),e.jsx(U,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(D,{})}),f.map(i=>e.jsx(G,{dataKey:i,name:i,stackId:"averageKills",fill:L[i],onClick:t=>{const a={selectedPlayer:t?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(a.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),v(a)}},i))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,h.filter(i=>!i.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",l," ayant au moins ",g," partie",g>1?"s":"",")"]})]})]})}function Ae({deathStats:s,selectedCamp:y,minGamesForAverage:c,onMinGamesChange:g,availableDeathTypes:o,deathTypeColors:u}){const{navigateToGameDetails:S}=J(),{settings:l}=Z(),{totalDeathsData:v,survivalRateData:x,highlightedPlayerAddedToDeaths:k,highlightedPlayerAddedToSurvival:f}=H.useMemo(()=>{if(!s)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const p=s.playerDeathStats.sort((a,d)=>d.totalDeaths-a.totalDeaths).slice(0,15),m=l.highlightedPlayer&&p.some(a=>a.playerName===l.highlightedPlayer),h=p.map(a=>{const d=a.gamesPlayed,b=d>0?(d-a.totalDeaths)/d*100:0,n={name:a.playerName,value:a.totalDeaths,totalDeaths:a.totalDeaths,gamesPlayed:d,deathRate:a.deathRate,survivalRate:b,isHighlightedAddition:!1};return o.forEach(K=>{n[K]=a.deathsByType[K]||0}),n});let P=!1;if(l.highlightedPlayer&&!m){const a=s.playerDeathStats.find(d=>d.playerName===l.highlightedPlayer);if(a){const d=a.gamesPlayed,b=d>0?(d-a.totalDeaths)/d*100:0,n={name:a.playerName,value:a.totalDeaths,totalDeaths:a.totalDeaths,gamesPlayed:d,deathRate:a.deathRate,survivalRate:b,isHighlightedAddition:!0};o.forEach(K=>{n[K]=a.deathsByType[K]||0}),h.push(n),P=!0}}const r=s.playerDeathStats.filter(a=>a.gamesPlayed>=c).map(a=>({...a,survivalRate:a.gamesPlayed>0?(a.gamesPlayed-a.totalDeaths)/a.gamesPlayed*100:0})).sort((a,d)=>d.survivalRate-a.survivalRate).slice(0,15),D=l.highlightedPlayer&&r.some(a=>a.playerName===l.highlightedPlayer),i=r.map(a=>{const d={name:a.playerName,value:a.survivalRate,totalDeaths:a.totalDeaths,gamesPlayed:a.gamesPlayed,deathRate:a.deathRate,survivalRate:a.survivalRate,isHighlightedAddition:!1};return o.forEach(b=>{const n=a.deathsByType[b]||0;d[b]=a.gamesPlayed>0?n/a.gamesPlayed*100:0}),d});let t=!1;if(l.highlightedPlayer&&!D){const a=s.playerDeathStats.find(d=>d.playerName===l.highlightedPlayer);if(a){const d=a.gamesPlayed>0?(a.gamesPlayed-a.totalDeaths)/a.gamesPlayed*100:0,b={name:a.playerName,value:d,totalDeaths:a.totalDeaths,gamesPlayed:a.gamesPlayed,deathRate:a.deathRate,survivalRate:d,isHighlightedAddition:!0};o.forEach(n=>{const K=a.deathsByType[n]||0;b[n]=a.gamesPlayed>0?K/a.gamesPlayed*100:0}),i.push(b),t=!0}}return{totalDeathsData:h,survivalRateData:i,highlightedPlayerAddedToDeaths:P,highlightedPlayerAddedToSurvival:t}},[s,l.highlightedPlayer,c,o]),L=({active:p,payload:m,label:h})=>{if(p&&m&&m.length){const P=m[0].payload,N=P.isHighlightedAddition,r=l.highlightedPlayer===P.name,D=o.reduce((i,t)=>i+(P[t]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:r?"var(--accent-primary)":"var(--text-primary)"},children:[h,N&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",D]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",P.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",P.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort:"}),o.map(i=>{const t=P[i]||0;return t===0?null:e.jsxs("p",{style:{color:u[i],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ie(i),":"]})," ",t]},i)})]}),N&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),r&&!N&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},B=({active:p,payload:m,label:h})=>{if(p&&m&&m.length){const P=m[0].payload,N=P.isHighlightedAddition,r=l.highlightedPlayer===P.name,D=P.gamesPlayed>=c;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:r?"var(--accent-primary)":"var(--text-primary)"},children:[h,N&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",P.survivalRate.toFixed(1),"% (",P.gamesPlayed-P.totalDeaths," survies / ",P.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",P.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",P.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort (taux %):"}),o.map(i=>{const t=P[i]||0;return t===0?null:e.jsxs("p",{style:{color:u[i],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[ie(i),":"]})," ",t.toFixed(1),"%"]},i)})]}),N&&!D&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",c," parties)"]}),N&&D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),r&&!N&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`}),k&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:y==="Tous les camps"?"Morts (Total)":`Morts en ${y} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:v,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:p,y:m,payload:h})=>e.jsx("text",{x:p,y:m,dy:10,fill:l.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===h.value?14:12,fontWeight:l.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${p} ${m})`,children:h.value})}),e.jsx(U,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(L,{})}),o.map(p=>e.jsx(G,{dataKey:p,name:p,stackId:"deaths",fill:u[p],onClick:m=>{const h={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(h.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),S(h)}},p))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,v.filter(p=>!p.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",y==="Tous les camps"?"(Total)":` en ${y}`]}),f&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:c,onChange:p=>g(Number(p.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:ee.map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsx(V,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:x,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:p,y:m,payload:h})=>e.jsx("text",{x:p,y:m,dy:10,fill:l.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===h.value?14:12,fontWeight:l.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${p} ${m})`,children:h.value})}),e.jsx(U,{label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(B,{})}),o.map(p=>e.jsx(G,{dataKey:p,name:p,stackId:"survivalRate",fill:u[p],onClick:m=>{const h={selectedPlayer:m?.name,fromComponent:"Statistiques de Mort"};y!=="Tous les camps"&&(h.campFilter={selectedCamp:y,campFilterMode:"all-assignments"}),S(h)}},p))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,x.filter(p=>!p.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",c," partie",c>1?"s":"",")"]})]})]})}function Be({hunterStats:s,isLoading:y,error:c}){const{navigateToGameDetails:g}=J(),{settings:o}=Z(),u=ne(),{joueursData:S}=ce(),l=oe(S),[v,x]=H.useState(null);if(y)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."});if(c)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",c]});if(!s||s.hunterStats.length===0)return e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]});const{finalBestHuntersData:k,highlightedPlayerAddedToBest:f,finalBadHuntersData:L,highlightedPlayerAddedToBad:B}=(()=>{const P=s.hunterStats.filter(n=>n.gamesPlayedAsHunter>=5).sort((n,K)=>K.averageNonVillageoisKillsPerGame-n.averageNonVillageoisKillsPerGame).slice(0,15),N=o.highlightedPlayer&&P.some(n=>n.hunterName===o.highlightedPlayer);let r=[...P],D=!1;if(o.highlightedPlayer&&!N){const n=s.hunterStats.find(K=>K.hunterName===o.highlightedPlayer);n&&(r.push({...n,isHighlightedAddition:!0}),D=!0)}const i=s.hunterStats.filter(n=>n.gamesPlayedAsHunter>=5).map(n=>({name:n.hunterName,averageVillageoisKills:Number((n.villageoisKills/n.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:n.villageoisKills,totalNonVillageoisKills:n.nonVillageoisKills,totalKills:n.totalKills,gamesPlayed:n.gamesPlayedAsHunter,victimsByCamp:n.victimsByCamp,hunterName:n.hunterName})),t=i.sort((n,K)=>K.averageVillageoisKills-n.averageVillageoisKills).slice(0,15),a=o.highlightedPlayer&&t.some(n=>n.hunterName===o.highlightedPlayer);let d=[...t],b=!1;if(o.highlightedPlayer&&!a){const n=i.find(K=>K.hunterName===o.highlightedPlayer);n&&(d.push({...n,isHighlightedAddition:!0}),b=!0)}return{finalBestHuntersData:r,highlightedPlayerAddedToBest:D,finalBadHuntersData:d,highlightedPlayerAddedToBad:b}})(),p=({active:h,payload:P,label:N})=>{if(h&&P&&P.length){const r=P[0].payload,D=r.isHighlightedAddition,i=o.highlightedPlayer===r.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:i?"var(--accent-primary)":"var(--text-primary)"},children:[N,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Kills non-Villageois/partie:"})," ",r.averageNonVillageoisKillsPerGame.toFixed(2)]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",r.nonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",r.gamesPlayedAsHunter]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",r.totalKills]}),r.victimsByCamp&&Object.keys(r.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(r.victimsByCamp).map(([t,a])=>e.jsxs("p",{style:{color:u[t]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[t,":"]})," ",a]},t))]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),i&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},m=({active:h,payload:P,label:N})=>{if(h&&P&&P.length){const r=P[0].payload,D=r.isHighlightedAddition,i=o.highlightedPlayer===r.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:i?"var(--accent-primary)":"var(--text-primary)"},children:[N,D&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Villageois tuÃ©s/partie:"})," ",r.averageVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total Villageois tuÃ©s:"})," ",r.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",r.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",r.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",r.totalKills]}),r.victimsByCamp&&Object.keys(r.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(r.victimsByCamp).map(([t,a])=>e.jsxs("p",{style:{color:u[t]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[t,":"]})," ",a]},t))]}),D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),i&&!D&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Bons Chasseurs"}),f&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',o.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:"Bons Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:k,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:P,payload:N})=>e.jsx("text",{x:h,y:P,dy:10,fill:o.highlightedPlayer===N.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===N.value?14:12,fontWeight:o.highlightedPlayer===N.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${P})`,children:N.value})}),e.jsx(U,{label:{value:"Moyenne kills non-Villageois/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(p,{})}),e.jsx(G,{dataKey:"averageNonVillageoisKillsPerGame",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&g({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Bons Chasseurs"})},onMouseEnter:h=>x(h?.hunterName||null),onMouseLeave:()=>x(null),style:{cursor:"pointer"},children:k.map((h,P)=>{const N=o.highlightedPlayer===h.hunterName,r=h.isHighlightedAddition;return e.jsx(Y,{fill:l[h.hunterName]||u.Chasseur||"#8884d8",stroke:N?"var(--accent-primary)":v===h.hunterName?"var(--text-primary)":"none",strokeWidth:N?3:v===h.hunterName?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1},`cell-${P}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,k.filter(h=>!h.isHighlightedAddition).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs"}),B&&o.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',o.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:L,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:P,payload:N})=>e.jsx("text",{x:h,y:P,dy:10,fill:o.highlightedPlayer===N.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:o.highlightedPlayer===N.value?14:12,fontWeight:o.highlightedPlayer===N.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${P})`,children:N.value})}),e.jsx(U,{label:{value:"Moyenne Villageois tuÃ©s/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(m,{})}),e.jsx(G,{dataKey:"averageVillageoisKills",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&g({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Mauvais Chasseurs"})},onMouseEnter:h=>x(h?.hunterName||null),onMouseLeave:()=>x(null),style:{cursor:"pointer"},children:L.map((h,P)=>{const N=o.highlightedPlayer===h.hunterName,r=h.isHighlightedAddition;return e.jsx(Y,{fill:l[h.hunterName]||u.Chasseur||"#8884d8",stroke:N?"var(--accent-primary)":v===h.hunterName?"var(--text-primary)":"none",strokeWidth:N?3:v===h.hunterName?2:0,strokeDasharray:r?"5,5":"none",opacity:r?.8:1},`cell-${P}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,L.filter(h=>!h.isHighlightedAddition).length)," des chasseurs ayant le plus tuÃ© de Villageois (minimum 5 parties en Chasseur)"]})]})]})}function Ne({survivalStats:s,selectedCamp:y,minGamesForAverage:c,onMinGamesChange:g,isLoading:o,error:u}){const{navigateToGameDetails:S}=J(),{settings:l}=Z(),{joueursData:v}=ce(),x=oe(v),[k,f]=H.useState(1),[L,B]=H.useState(null),p=H.useMemo(()=>s?s.dayStats.filter(a=>a.totalGamesReachingDay>0).map(a=>a.dayNumber).sort((a,d)=>a-d):[],[s]),m=H.useMemo(()=>p.includes(k)?k:p.length>0?p[0]:1,[k,p]),{highestSurvivalData:h,highlightedPlayerAddedToHighest:P}=H.useMemo(()=>{if(!s)return{highestSurvivalData:[],highlightedPlayerAddedToHighest:!1};const t=Pe(s,m,c),a=l.highlightedPlayer&&t.some(n=>n.playerName===l.highlightedPlayer),d=t.map(n=>({name:n.playerName,value:n.survivalRate,gamesPlayed:n.gamesPlayed,timesReachedDay:n.timesReachedDay,timesSurvivedDay:n.timesSurvivedDay,isHighlightedAddition:!1}));let b=!1;if(l.highlightedPlayer&&!a){const n=s.playerSurvivalStats.find(K=>K.playerName===l.highlightedPlayer);if(n&&(n.gamesPlayedByDay[m]||0)>=1){const K=n.survivalRatesByDay[m]||0;d.push({name:l.highlightedPlayer,value:K,gamesPlayed:n.totalGames,timesReachedDay:n.gamesPlayedByDay[m]||0,timesSurvivedDay:n.survivalsByDay[m]||0,isHighlightedAddition:!0}),b=!0}}return{highestSurvivalData:d,highlightedPlayerAddedToHighest:b}},[s,m,c,l.highlightedPlayer]),{lowestSurvivalData:N,highlightedPlayerAddedToLowest:r}=H.useMemo(()=>{if(!s)return{lowestSurvivalData:[],highlightedPlayerAddedToLowest:!1};const t=De(s,m,c),a=l.highlightedPlayer&&t.some(n=>n.playerName===l.highlightedPlayer),d=t.map(n=>({name:n.playerName,value:n.survivalRate,gamesPlayed:n.gamesPlayed,timesReachedDay:n.timesReachedDay,timesSurvivedDay:n.timesSurvivedDay,isHighlightedAddition:!1}));let b=!1;if(l.highlightedPlayer&&!a){const n=s.playerSurvivalStats.find(K=>K.playerName===l.highlightedPlayer);if(n&&(n.gamesPlayedByDay[m]||0)>=1){const K=n.survivalRatesByDay[m]||0;d.push({name:l.highlightedPlayer,value:K,gamesPlayed:n.totalGames,timesReachedDay:n.gamesPlayedByDay[m]||0,timesSurvivedDay:n.survivalsByDay[m]||0,isHighlightedAddition:!0}),b=!0}}return{lowestSurvivalData:d,highlightedPlayerAddedToLowest:b}},[s,m,c,l.highlightedPlayer]),D=t=>{S({selectedPlayer:t,fromComponent:"Statistiques de Survie"})},i=({active:t,payload:a,label:d})=>{if(t&&a&&a.length>0){const b=a[0].payload,n=b.isHighlightedAddition,K=l.highlightedPlayer===b.name,C=b.timesReachedDay>=c;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:d})}),e.jsx("div",{children:e.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Taux de survie Jour ",m,": ",b.value.toFixed(1),"%"]})}),e.jsxs("div",{children:["Parties atteignant le Jour ",m,": ",b.timesReachedDay]}),e.jsxs("div",{children:["A survÃ©cu au Jour ",m,": ",b.timesSurvivedDay]}),e.jsxs("div",{children:["Total de parties: ",b.gamesPlayed]}),n&&!C&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",c," parties ce jour)"]}),n&&C&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),K&&!n&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return o?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de survie..."}):u?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",u]}):s?e.jsxs("div",{className:"lycans-survival-stats",children:[e.jsx("div",{className:"lycans-graphique-controles",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"day-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Jour :"}),e.jsx("select",{id:"day-select",value:m,onChange:t=>f(parseInt(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Min. parties :"}),e.jsx("select",{id:"min-games-select",value:c,onChange:t=>g(parseInt(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:ee.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),m&&s.dayStats.find(t=>t.dayNumber===m)&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Parties atteignant le Jour ",m]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:s.dayStats.find(t=>t.dayNumber===m)?.totalGamesReachingDay||0})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Taux de survie moyen Jour ",m]}),e.jsxs("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:[(s.dayStats.find(t=>t.dayNumber===m)?.averageSurvivalRate||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Joueurs Ã©ligibles (min. ",c," parties)"]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:s.playerSurvivalStats.filter(t=>(t.gamesPlayedByDay[m]||0)>=c).length})]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ",m]}),P&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:`ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:h,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:t,y:a,payload:d})=>e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",transform:`rotate(-45, ${t}, ${a})`,fill:l.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===d.value?14:12,fontWeight:l.highlightedPlayer===d.value?"bold":"normal",children:d.value})}),e.jsx(U,{tickFormatter:t=>`${t.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(i,{})}),e.jsx(G,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:h.map((t,a)=>{const d=l.highlightedPlayer===t.name,b=L===t.name,n=t.isHighlightedAddition;return e.jsx(Y,{fill:x[t.name]||"var(--chart-primary)",stroke:d?"var(--accent-primary)":b?"var(--text-primary)":"none",strokeWidth:d?3:b?2:0,strokeDasharray:n?"5,5":"none",opacity:n?.8:1,onClick:()=>D(t.name),onMouseEnter:()=>B(t.name),onMouseLeave:()=>B(null),style:{cursor:"pointer"}},`cell-highest-${a}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["âš°ï¸ Plus Faibles Taux de Survie - Jour ",m]}),r&&l.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',l.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(V,{title:`âš°ï¸ Plus Faibles Taux de Survie - Jour ${m}`,children:e.jsx("div",{style:{height:400},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(W,{data:N,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:t,y:a,payload:d})=>e.jsx("text",{x:t,y:a,dy:16,textAnchor:"end",transform:`rotate(-45, ${t}, ${a})`,fill:l.highlightedPlayer===d.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:l.highlightedPlayer===d.value?14:12,fontWeight:l.highlightedPlayer===d.value?"bold":"normal",children:d.value})}),e.jsx(U,{tickFormatter:t=>`${t.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(q,{content:e.jsx(i,{})}),e.jsx(G,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:N.map((t,a)=>{const d=l.highlightedPlayer===t.name,b=L===t.name,n=t.isHighlightedAddition;return e.jsx(Y,{fill:x[t.name]||"var(--chart-color-4)",stroke:d?"var(--accent-primary)":b?"var(--text-primary)":"none",strokeWidth:d?3:b?2:0,strokeDasharray:n?"5,5":"none",opacity:n?.8:1,onClick:()=>D(t.name),onMouseEnter:()=>B(t.name),onMouseLeave:()=>B(null),style:{cursor:"pointer"}},`cell-lowest-${a}`)})})]})})})})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note :"})," Les statistiques de survie montrent le pourcentage de fois qu'un joueur survit au Jour ",m," parmi toutes les parties qu'il a jouÃ©es et qui ont atteint ce jour. ",P||r?"Les joueurs mis en Ã©vidence apparaissent mÃªme s'ils ne sont pas dans le top 15.":""]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de survie disponible"})}function Me(){const{navigationState:s,updateNavigationState:y}=J(),[c,g]=H.useState(s.deathStatisticsState?.selectedCamp||s.deathStatsSelectedCamp||"Tous les camps"),[o,u]=H.useState(s.deathStatisticsState?.victimCampFilter||"Tous les camps"),[S,l]=H.useState(s.deathStatisticsState?.minGamesForAverage||25),[v,x]=H.useState(s.deathStatisticsState?.selectedView||"killers"),{data:k}=fe(),{data:f,isLoading:L,error:B}=xe(c,o),{data:p,isLoading:m,error:h}=je(),{data:P,isLoading:N,error:r}=Te(c),{data:D}=de(),i=ne();H.useEffect(()=>{(!s.deathStatisticsState||s.deathStatisticsState.selectedCamp!==c||s.deathStatisticsState.victimCampFilter!==o||s.deathStatisticsState.minGamesForAverage!==S||s.deathStatisticsState.selectedView!==v)&&y({deathStatisticsState:{selectedCamp:c,victimCampFilter:o,minGamesForAverage:S,selectedView:v,focusChart:s.deathStatisticsState?.focusChart}})},[c,o,S,v,s.deathStatisticsState,y]);const t=H.useMemo(()=>D?me(D):[],[D]),a=H.useMemo(()=>{const j={};t.forEach(R=>{R===z.BY_WOLF?j[R]=i.Loup:R===z.VOTED?j[R]="var(--chart-color-1)":R===z.BULLET||R===z.BULLET_HUMAN||R===z.BULLET_WOLF?j[R]=i.Chasseur:R===z.BY_ZOMBIE?j[R]=i.Vaudou:R===z.ASSASSIN?j[R]=i.Alchimiste:R===z.AVENGER?j[R]="var(--chart-color-2)":R===z.LOVER_DEATH?j[R]=i.Amoureux:R===z.BY_BEAST?j[R]="var(--chart-color-3)":R===z.SHERIF_SUCCESS&&(j[R]="var(--chart-color-4)")});const A=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let E=0;return t.forEach(R=>{j[R]||(j[R]=A[E%A.length],E++)}),j},[t,i]),d=j=>{g(j),y({deathStatsSelectedCamp:j,deathStatisticsState:{selectedCamp:j,victimCampFilter:o,minGamesForAverage:S,selectedView:v,focusChart:s.deathStatisticsState?.focusChart}})},b=j=>{u(j),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:j,minGamesForAverage:S,selectedView:v,focusChart:s.deathStatisticsState?.focusChart}})},n=j=>{l(j),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:o,minGamesForAverage:j,selectedView:v,focusChart:s.deathStatisticsState?.focusChart}})},K=j=>{x(j),y({deathStatisticsState:{selectedCamp:c,victimCampFilter:o,minGamesForAverage:S,selectedView:j,focusChart:s.deathStatisticsState?.focusChart}})},{gamesWithKillers:C,totalEligibleForAverage:M}=H.useMemo(()=>{if(!f)return{gamesWithKillers:0,totalEligibleForAverage:0};const j=f.killerStats.filter(A=>A.gamesPlayed>=S);return{gamesWithKillers:f.totalGames,totalEligibleForAverage:j.length}},[f,S]);return L?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."}):B?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",B]}):f?e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"ðŸ’€ Statistiques de Morts & Kills"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${v==="killers"?"active":""}`,onClick:()=>K("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${v==="deaths"?"active":""}`,onClick:()=>K("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${v==="survival"?"active":""}`,onClick:()=>K("survival"),children:"Survie"}),e.jsx("button",{className:`lycans-categorie-btn ${v==="hunter"?"active":""}`,onClick:()=>K("hunter"),children:"Chasseur"})]}),(v==="killers"||v==="deaths"||v==="survival")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:c,onChange:j=>d(j.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),k?.map(j=>e.jsx("option",{value:j,children:j},j))]})]}),v==="killers"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"victim-camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp de la victime :"}),e.jsxs("select",{id:"victim-camp-select",value:o,onChange:j=>b(j.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),e.jsx("option",{value:"Villageois",children:"Villageois"}),e.jsx("option",{value:"Loup",children:"Loup"}),e.jsx("option",{value:"Roles solo",children:"Roles solo"})]})]})]}),(v==="killers"||v==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:f.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:f.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrÃ©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:C})]})]}),v==="killers"&&e.jsx(be,{deathStats:f,selectedCamp:c,victimCampFilter:o,minGamesForAverage:S,onMinGamesChange:n,availableDeathTypes:t,deathTypeColors:a,totalEligibleForAverage:M}),v==="deaths"&&e.jsx(Ae,{deathStats:f,selectedCamp:c,minGamesForAverage:S,onMinGamesChange:n,availableDeathTypes:t,deathTypeColors:a}),v==="hunter"&&e.jsx(Be,{hunterStats:p,isLoading:m,error:h}),v==="survival"&&e.jsx(Ne,{survivalStats:P,selectedCamp:c,minGamesForAverage:S,onMinGamesChange:n,isLoading:N,error:r}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"DonnÃ©es en cours de rÃ©cupÃ©ration (donnÃ©es partielles)."]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de mort disponible"})}export{Me as DeathStatisticsChart};
