import{a as g,p as m,r as c,l as p,D as b,m as F}from"./index-DrxYw4Ls.js";function R(){const{settings:n}=g(),[i,s]=c.useState(null),[d,l]=c.useState(null),[r,a]=c.useState(!0),[t,e]=c.useState(null);return c.useEffect(()=>{(async()=>{try{a(!0),e(null);const f=n.dataSource,u=await p(f,b.RAW_BR_DATA);u?(s(u.BRParties?.data||[]),l(u.BRRefParties?.data||[])):(s([]),l([]))}catch(f){const u=F(f,"useRawBRData");e(u),s([]),l([])}finally{a(!1)}})()},[n.dataSource]),{brPartiesData:i,brRefPartiesData:d,isLoading:r,error:t}}function w(){const{settings:n}=g(),{brPartiesData:i,brRefPartiesData:s,isLoading:d,error:l}=R();return{data:i?.filter(a=>{if(!a.Game||!a.Participants)return!1;const t=s?.find(e=>e.Game===a.Game);if(!t)return D(a,n);if(t["Nombre de participants"]<6)return!1;if(n.independentFilters){const e=n.independentFilters;if(e.gameTypeEnabled&&e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!t["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&t["Game Moddée"])return!1}if(e.dateRangeEnabled&&(e.dateRange.start||e.dateRange.end)){const o=m(t.Date);if(!o)return!1;if(e.dateRange.start){const f=new Date(e.dateRange.start);if(o<f)return!1}if(e.dateRange.end){const f=new Date(e.dateRange.end);if(o>f)return!1}}}return D(a,n)})||null,isLoading:d,error:l}}function y(){const{settings:n}=g(),{brRefPartiesData:i,isLoading:s,error:d}=R();return{data:i?.filter(r=>{if(!r.Game||!r.Date||r["Nombre de participants"]<6)return!1;if(n.independentFilters){const a=n.independentFilters;if(a.gameTypeEnabled&&a.gameFilter!=="all"){if(a.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(a.gameFilter==="non-modded"&&r["Game Moddée"])return!1}if(a.dateRangeEnabled&&(a.dateRange.start||a.dateRange.end)){const t=m(r.Date);if(!t)return!1;if(a.dateRange.start){const e=new Date(a.dateRange.start);if(t<e)return!1}if(a.dateRange.end){const e=new Date(a.dateRange.end);if(t>e)return!1}}}return!0})||null,isLoading:s,error:d}}function P(){const{settings:n}=g(),{brPartiesData:i,brRefPartiesData:s,isLoading:d,error:l}=R();return{data:i?.filter(a=>{if(!a.Game||!a.Participants)return!1;const t=s?.find(e=>e.Game===a.Game);if(!t||t["Nombre de participants"]>=6)return!1;if(n.independentFilters){const e=n.independentFilters;if(e.gameTypeEnabled&&e.gameFilter!=="all"){if(e.gameFilter==="modded"){if(!t["Game Moddée"])return!1}else if(e.gameFilter==="non-modded"&&t["Game Moddée"])return!1}if(e.dateRangeEnabled&&(e.dateRange.start||e.dateRange.end)){const o=m(t.Date);if(!o)return!1;if(e.dateRange.start){const f=new Date(e.dateRange.start);if(o<f)return!1}if(e.dateRange.end){const f=new Date(e.dateRange.end);if(o>f)return!1}}}return D(a,n)})||null,isLoading:d,error:l}}function E(){const{settings:n}=g(),{brRefPartiesData:i,isLoading:s,error:d}=R();return{data:i?.filter(r=>{if(!r.Game||!r.Date||r["Nombre de participants"]>=6)return!1;if(n.independentFilters){const a=n.independentFilters;if(a.gameTypeEnabled&&a.gameFilter!=="all"){if(a.gameFilter==="modded"){if(!r["Game Moddée"])return!1}else if(a.gameFilter==="non-modded"&&r["Game Moddée"])return!1}if(a.dateRangeEnabled&&(a.dateRange.start||a.dateRange.end)){const t=m(r.Date);if(!t)return!1;if(a.dateRange.start){const e=new Date(a.dateRange.start);if(t<e)return!1}if(a.dateRange.end){const e=new Date(a.dateRange.end);if(t>e)return!1}}}return!0})||null,isLoading:s,error:d}}function D(n,i){if(i.playerFilter.mode!=="none"&&i.playerFilter.players.length>0){const s=n.Participants.toLowerCase();if(i.playerFilter.mode==="include"){if(!i.playerFilter.players.some(l=>l.toLowerCase()===s))return!1}else if(i.playerFilter.mode==="exclude"&&i.playerFilter.players.some(l=>l.toLowerCase()===s))return!1}return!0}export{y as a,P as b,E as c,w as u};
