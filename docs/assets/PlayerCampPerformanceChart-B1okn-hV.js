import{r as u,u as we,a as je,j as l}from"./index-DUmdx9OX.js";import{g as H,a as k,b as me,u as Re}from"./datasyncExport-BWxpn9Jg.js";import{u as Te}from"./useJoueursData-BswPmrDD.js";import{a as Ee,u as Ie,m as Se}from"./api-CsUoav2N.js";import{S as Q,u as Fe,f as Le,b as pe,G as Oe,d as Me,e as Ne,g as _e,h as De,i as We,F as ee,B as ze,C as ae,X as re,Y as se,a as ke}from"./FullscreenChart-D7T8aNUE.js";import{m as _,u as Ke,n as Ve,o as Ge,S as $e,p as ue,q as Be,t as de,v as fe,w as Je,x as He,y as he,b as ye,z as qe,A as Ze,B as Ue,G as Xe,D as ve,d as ge,E as Ye,i as Qe,L as K,F as W,H as $,I as te,J as ea,K as aa,M as G,N as ra,g as sa,O as ta,P as ia,Q as xe,U as na,V as oa,W as la,X as ca,Y as ma,Z as pa,_ as ua,R as ie,T as ne}from"./CategoricalChart-Xuc12jJI.js";function Pe(e,a,r){return(a=da(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function da(e){var a=fa(e,"string");return typeof a=="symbol"?a:a+""}function fa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function ha(e){var a=Ke();return u.useEffect(()=>(a(Ve(e)),()=>{a(Ge(e))}),[e,a]),null}class Z extends u.Component{render(){return u.createElement(ha,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:_.allowDuplicatedCategory,allowDataOverflow:_.allowDataOverflow,reversed:_.reversed,includeHidden:_.includeHidden})}}Pe(Z,"displayName","ZAxis");Pe(Z,"defaultProps",{zAxisId:0,range:_.range,scale:_.scale,type:_.type});var ya=["option","isActive"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z.apply(null,arguments)}function va(e,a){if(e==null)return{};var r,s,n=ga(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ga(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function xa(e){var{option:a,isActive:r}=e,s=va(e,ya);return typeof a=="string"?u.createElement(Q,z({option:u.createElement($e,z({type:a},s)),isActive:r,shapeType:"symbols"},s)):u.createElement(Q,z({option:a,isActive:r,shapeType:"symbols"},s))}var Pa=(e,a,r,s,n,o,c)=>de(e,"xAxis",a,c),Ca=(e,a,r,s,n,o,c)=>fe(e,"xAxis",a,c),ba=(e,a,r,s,n,o,c)=>de(e,"yAxis",r,c),Aa=(e,a,r,s,n,o,c)=>fe(e,"yAxis",r,c),wa=(e,a,r,s)=>Je(e,"zAxis",s,!1),ja=(e,a,r,s,n)=>n,Ra=(e,a,r,s,n,o)=>o,Ta=(e,a,r,s,n,o,c)=>Be(e,a,r,c),Ea=ue([He,ja],(e,a)=>e.filter(r=>r.type==="scatter").find(r=>r.id===a)),Ia=ue([Ta,Pa,Ca,ba,Aa,wa,Ea,Ra],(e,a,r,s,n,o,c,t)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:P}=e;if(c!=null){var y;if(c?.data!=null&&c.data.length>0?y=c.data:y=d?.slice(f,P+1),!(y==null||a==null||s==null||r==null||n==null||r?.length===0||n?.length===0))return Ga({displayedData:y,xAxis:a,yAxis:s,zAxis:o,scatterSettings:c,xAxisTicks:r,yAxisTicks:n,cells:t})}}),Sa=["onMouseEnter","onClick","onMouseLeave"],Fa=["id"],La=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function q(e,a){if(e==null)return{};var r,s,n=Oa(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Oa(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},D.apply(null,arguments)}function oe(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function j(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?oe(Object(r),!0).forEach(function(s){Ma(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ma(e,a,r){return(a=Na(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Na(e){var a=_a(e,"string");return typeof a=="symbol"?a:a+""}function _a(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Da=e=>{var{dataKey:a,name:r,fill:s,legendType:n,hide:o}=e;return[{inactive:o,dataKey:a,type:n,color:s,value:ve(r,a),payload:e}]};function Wa(e){var{points:a,props:r}=e,{line:s,lineType:n,lineJointType:o}=r;if(!s)return null;var c=xe(r),t=ca(s),d,f;if(n==="joint")d=a.map(g=>({x:g.cx,y:g.cy}));else if(n==="fitting"){var{xmin:P,xmax:y,a:h,b:T}=ma(a),S=g=>h*g+T;d=[{x:P,y:S(P)},{x:y,y:S(y)}]}var C=j(j(j({},c),{},{fill:"none",stroke:c&&c.fill},t),{},{points:d});return u.isValidElement(s)?f=u.cloneElement(s,C):typeof s=="function"?f=s(C):f=u.createElement(pa,D({},C,{type:o})),u.createElement(K,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}function za(e){var{showLabels:a,points:r,children:s}=e,n=sa(),o=u.useMemo(()=>r?.map(c=>{var t={x:c.x,y:c.y,width:c.width,height:c.height};return j(j({},t),{},{value:void 0,payload:c.payload,viewBox:t,parentViewBox:n,fill:void 0})}),[n,r]);return u.createElement(ta,{value:a?o:null},s)}function ka(e){var{points:a,allOtherScatterProps:r}=e,{shape:s,activeShape:n,dataKey:o}=r,c=ge(ia),{onMouseEnter:t,onClick:d,onMouseLeave:f}=r,P=q(r,Sa),y=Ne(t,r.dataKey),h=_e(f),T=De(d,r.dataKey);if(a==null)return null;var{id:S}=r,C=q(r,Fa),g=xe(C);return u.createElement(u.Fragment,null,u.createElement(Wa,{points:a,props:C}),a.map((v,i)=>{var m=n&&c===String(i),p=m?n:s,b=j(j(j({key:"symbol-".concat(i)},g),v),{},{[oa]:i,[na]:String(o)});return u.createElement(K,D({key:"symbol-".concat(v?.cx,"-").concat(v?.cy,"-").concat(v?.size,"-").concat(i),className:"recharts-scatter-symbol"},la(P,v,i),{onMouseEnter:y(v,i),onMouseLeave:h(v,i),onClick:T(v,i)}),u.createElement(xa,D({option:p,isActive:m},b)))}))}function Ka(e){var{previousPointsRef:a,props:r}=e,{points:s,isAnimationActive:n,animationBegin:o,animationDuration:c,animationEasing:t}=r,d=a.current,f=ea(r,"recharts-scatter-"),[P,y]=u.useState(!1),h=u.useCallback(()=>{y(!1)},[]),T=u.useCallback(()=>{y(!0)},[]),S=!P;return u.createElement(za,{showLabels:S,points:s},r.children,u.createElement(aa,{animationId:f,begin:o,duration:c,isActive:n,easing:t,onAnimationEnd:h,onAnimationStart:T,key:f},C=>{var g=C===1?s:s?.map((v,i)=>{var m=d&&d[i];if(m){var p=G(m.cx,v.cx),b=G(m.cy,v.cy),R=G(m.size,v.size);return j(j({},v),{},{cx:p(C),cy:b(C),size:R(C)})}var F=G(0,v.size);return j(j({},v),{},{size:F(C)})});return C>0&&(a.current=g),u.createElement(K,null,u.createElement(ka,{points:g,allOtherScatterProps:r,showLabels:S}))}),u.createElement(ra,{label:r.label}))}function Va(e){var{dataKey:a,points:r,stroke:s,strokeWidth:n,fill:o,name:c,hide:t,tooltipType:d}=e;return{dataDefinedOnItem:r?.map(f=>f.tooltipPayload),positions:r?.map(f=>f.tooltipPosition),settings:{stroke:s,strokeWidth:n,fill:o,nameKey:void 0,dataKey:a,name:ve(c,a),hide:t,type:d,color:o,unit:""}}}function Ga(e){var{displayedData:a,xAxis:r,yAxis:s,zAxis:n,scatterSettings:o,xAxisTicks:c,yAxisTicks:t,cells:d}=e,f=W(r.dataKey)?o.dataKey:r.dataKey,P=W(s.dataKey)?o.dataKey:s.dataKey,y=n&&n.dataKey,h=n?n.range:Z.defaultProps.range,T=h&&h[0],S=r.scale.bandwidth?r.scale.bandwidth():0,C=s.scale.bandwidth?s.scale.bandwidth():0;return a.map((g,v)=>{var i=$(g,f),m=$(g,P),p=!W(y)&&$(g,y)||"-",b=[{name:W(r.dataKey)?o.name:r.name||r.dataKey,unit:r.unit||"",value:i,payload:g,dataKey:f,type:o.tooltipType},{name:W(s.dataKey)?o.name:s.name||s.dataKey,unit:s.unit||"",value:m,payload:g,dataKey:P,type:o.tooltipType}];p!=="-"&&b.push({name:n.name||n.dataKey,unit:n.unit||"",value:p,payload:g,dataKey:y,type:o.tooltipType});var R=te({axis:r,ticks:c,bandSize:S,entry:g,index:v,dataKey:f}),F=te({axis:s,ticks:t,bandSize:C,entry:g,index:v,dataKey:P}),O=p!=="-"?n.scale(p):T,M=Math.sqrt(Math.max(O,0)/Math.PI);return j(j({},g),{},{cx:R,cy:F,x:R-M,y:F-M,width:2*M,height:2*M,size:O,node:{x:i,y:m,z:p},tooltipPayload:b,tooltipPosition:{x:R,y:F},payload:g},d&&d[v]&&d[v].props)})}var $a=(e,a,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:$(e,a)});function Ba(e){var{hide:a,points:r,className:s,needClip:n,xAxisId:o,yAxisId:c,id:t}=e,d=u.useRef(null);if(a)return null;var f=Qe("recharts-scatter",s),P=t;return u.createElement(K,{className:f,clipPath:n?"url(#clipPath-".concat(P,")"):null,id:t},n&&u.createElement("defs",null,u.createElement(Oe,{clipPathId:P,xAxisId:o,yAxisId:c})),u.createElement(Me,{xAxisId:o,yAxisId:c,data:r,dataPointFormatter:$a,errorBarOffset:0},u.createElement(K,{key:"recharts-scatter-symbols"},u.createElement(Ka,{props:e,previousPointsRef:d}))))}var Ce={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Xe.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function Ja(e){var a=he(e,Ce),{animationBegin:r,animationDuration:s,animationEasing:n,hide:o,isAnimationActive:c,legendType:t,lineJointType:d,lineType:f,shape:P,xAxisId:y,yAxisId:h,zAxisId:T}=a,S=q(a,La),{needClip:C}=Fe(y,h),g=u.useMemo(()=>Le(e.children,pe),[e.children]),v=ye(),i=ge(m=>Ia(m,y,h,T,e.id,g,v));return C==null||i==null?null:u.createElement(u.Fragment,null,u.createElement(Ye,{fn:Va,args:j(j({},e),{},{points:i})}),u.createElement(Ba,D({},S,{xAxisId:y,yAxisId:h,zAxisId:T,lineType:f,lineJointType:d,legendType:t,shape:P,hide:o,isAnimationActive:c,animationBegin:r,animationDuration:s,animationEasing:n,points:i,needClip:C})))}function Ha(e){var a=he(e,Ce),r=ye();return u.createElement(qe,{id:a.id,type:"scatter"},s=>u.createElement(u.Fragment,null,u.createElement(Ze,{legendPayload:Da(a)}),u.createElement(Ue,{type:"scatter",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:a.zAxisId,dataKey:a.dataKey,hide:a.hide,name:a.name,tooltipType:a.tooltipType,isPanorama:r}),u.createElement(Ja,D({},a,{id:s}))))}var be=u.memo(Ha);be.displayName="Scatter";var qa=["item"],Za=u.forwardRef((e,a)=>u.createElement(We,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:qa,tooltipPayloadSearcher:ua,categoricalChartProps:e,ref:a}));function le(e,a=!1,r=!1){const s={};return e.forEach(n=>{const o=new Set;n.PlayerStats.forEach(t=>{const d=H(k(t.MainRoleInitial,t.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});o.add(d)}),o.forEach(t=>{s[t]||(s[t]={totalGames:0,wins:0,winRate:0,players:{}}),s[t].totalGames++});const c=new Set;n.PlayerStats.forEach(t=>{if(t.Victorious){const d=H(k(t.MainRoleInitial,t.MainRoleChanges||[]),{regroupWolfSubRoles:a,regroupVillagers:r});c.add(d)}}),c.forEach(t=>{s[t]&&s[t].wins++})}),s}function ce(e,a,r=!1,s=!1){const n={};return e.forEach(o=>{o.PlayerStats.forEach(c=>{const t=c.Username.trim();if(!t)return;const d=H(k(c.MainRoleInitial,c.MainRoleChanges||[]),{regroupWolfSubRoles:r,regroupVillagers:s}),f=d==="Autres"?"Rôles spéciaux":d;a[f].players[t]||(a[f].players[t]={games:0,wins:0,winRate:0}),a[f].players[t].games++,c.Victorious&&a[f].players[t].wins++,n[t]||(n[t]={totalGames:0,camps:{}}),n[t].camps[f]||(n[t].camps[f]={games:0,wins:0,winRate:0,performance:0}),n[t].totalGames++,n[t].camps[f].games++,c.Victorious&&n[t].camps[f].wins++})}),n}function Ua(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(s=>{me(k(s.MainRoleInitial,s.MainRoleChanges||[]))==="Autres"&&(a["Rôles spéciaux"].totalGames++,s.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function Xa(e,a){const r={};return e.forEach(s=>{s.PlayerStats.forEach(n=>{const o=n.Username.trim();if(!o)return;if(me(k(n.MainRoleInitial,n.MainRoleChanges||[]))==="Autres"){const t="Rôles spéciaux";a[t].players[o]||(a[t].players[o]={games:0,wins:0,winRate:0}),a[t].players[o].games++,n.Victorious&&a[t].players[o].wins++,r[o]||(r[o]={totalGames:0,camps:{}}),r[o].camps[t]||(r[o].camps[t]={games:0,wins:0,winRate:0,performance:0}),r[o].totalGames++,r[o].camps[t].games++,n.Victorious&&r[o].camps[t].wins++}})}),r}function B(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(r=>{const s=e[a].players[r];s.games>0&&(s.winRate=parseFloat((s.wins/s.games*100).toFixed(2)))})})}function J(e,a){Object.keys(e).forEach(r=>{Object.keys(e[r].camps).forEach(s=>{const n=e[r].camps[s];n.games>0&&(n.winRate=parseFloat((n.wins/n.games*100).toFixed(2)),a[s]&&a[s].winRate!==void 0?n.performance=parseFloat((n.winRate-a[s].winRate).toFixed(2)):n.performance=0)})})}function Ya(e,a,r){const s=[];return Object.keys(e).forEach(o=>{const c=e[o],t=[];Object.keys(c.camps).forEach(d=>{const f=c.camps[d];if(f.games>=r){const P=a[d]&&a[d].winRate!==void 0?a[d].winRate.toFixed(2):"0.00";t.push({camp:d,games:f.games,wins:f.wins,winRate:f.winRate.toFixed(2),campAvgWinRate:P,performance:f.performance.toFixed(2)})}}),t.sort((d,f)=>parseFloat(f.performance)-parseFloat(d.performance)),t.length>0&&s.push({player:o,totalGames:c.totalGames,campPerformance:t})}),s.sort((o,c)=>c.totalGames-o.totalGames),{campAverages:Object.keys(a).map(o=>({camp:o,totalGames:a[o].totalGames,wins:a[o].wins,winRate:a[o].winRate.toFixed(2)})),playerPerformanceArray:s}}function Qa(e){if(e.length===0)return null;const a=le(e,!1,!1),r=le(e,!0,!0),s=Ua(e),n=ce(e,a,!1,!1),o=ce(e,r,!0,!0),c=Xa(e,s);B(a),B(r),B(s),J(n,a),J(o,r),J(c,s);const t={...a},d={...n};r.Loup&&(t["Camp Loup"]=r.Loup,Object.keys(o).forEach(h=>{d[h]||(d[h]=o[h]),o[h].camps.Loup&&(d[h].camps["Camp Loup"]=o[h].camps.Loup)})),r.Villageois&&(t["Camp Villageois"]=r.Villageois,Object.keys(o).forEach(h=>{d[h]||(d[h]=o[h]),o[h].camps.Villageois&&(d[h].camps["Camp Villageois"]=o[h].camps.Villageois)})),s["Rôles spéciaux"]&&(t["Rôles spéciaux"]=s["Rôles spéciaux"],Object.keys(c).forEach(h=>{d[h]||(d[h]=c[h]),c[h].camps["Rôles spéciaux"]&&(d[h].camps["Rôles spéciaux"]=c[h].camps["Rôles spéciaux"])}));const f=3,{campAverages:P,playerPerformanceArray:y}=Ya(d,t,f);return{campAverages:P,playerPerformance:y,minGamesRequired:f}}function er(){const{data:e,isLoading:a,error:r}=Re(Qa);return{playerCampPerformance:e,isLoading:a,error:r}}function or(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:r}=we(),{settings:s}=je(),n=Ee(),{joueursData:o}=Te(),c=Ie(o),[t,d]=u.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[f,P]=u.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:y,isLoading:h,error:T}=er();u.useEffect(()=>{a.campPerformanceState||r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:f}})},[t,f,a.campPerformanceState,r]);const S=u.useMemo(()=>{if(!y?.campAverages)return["Tous les camps"];const i=y.campAverages.map(O=>O.camp),m=["Tous les camps"];i.includes("Camp Villageois")&&m.push("Camp Villageois"),i.includes("Chasseur")&&m.push("Chasseur"),i.includes("Alchimiste")&&m.push("Alchimiste"),i.includes("Villageois")&&m.push("Villageois"),i.includes("Camp Loup")&&m.push("Camp Loup"),i.includes("Loup")&&m.push("Loup"),i.includes("Traître")&&m.push("Traître"),i.includes("Louveteau")&&m.push("Louveteau"),i.includes("Rôles spéciaux")&&m.push("Rôles spéciaux");const p=["Camp Villageois","Camp Loup","Rôles spéciaux"],R=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Traître","Louveteau"],...p],F=i.filter(O=>!R.includes(O)).sort();return[...m,...F]},[y]),{campPlayerData:C,topPerformersData:g}=u.useMemo(()=>{if(!y?.playerPerformance)return{campPlayerData:[],topPerformersData:[]};const{playerPerformance:i}=y,m=[],p=[],b=new Map;for(const w of i)for(const x of w.campPerformance)if(x.games>=f){const L=`${w.player}-${x.camp}`,V={player:w.player,camp:x.camp,games:x.games,wins:x.wins,winRate:x.winRate,performance:x.performance,winRateNum:parseFloat(x.winRate),performanceNum:parseFloat(x.performance),campAvgWinRateNum:parseFloat(x.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:L,playerCamp:L},E=b.get(w.player);(!E||V.performanceNum>E.performanceNum)&&b.set(w.player,V),t!=="Tous les camps"&&x.camp===t&&m.push({player:w.player,...x,winRateNum:parseFloat(x.winRate),performanceNum:parseFloat(x.performance),campAvgWinRateNum:parseFloat(x.campAvgWinRate),isHighlightedAddition:!1,uniqueKey:L,playerCamp:L})}p.push(...b.values());const R=(w,x,L=!1)=>{if(!s.highlightedPlayer||w.some(A=>A.player===s.highlightedPlayer&&(!x||A.camp===x)))return w;const E=i.find(A=>A.player===s.highlightedPlayer);if(!E)return w;if(L){let A=null;for(const I of E.campPerformance)if(I.games>=1){const X=`${E.player}-${I.camp}`,Y={player:E.player,camp:I.camp,games:I.games,wins:I.wins,winRate:I.winRate,performance:I.performance,winRateNum:parseFloat(I.winRate),performanceNum:parseFloat(I.performance),campAvgWinRateNum:parseFloat(I.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:X,playerCamp:X};(!A||Y.performanceNum>A.performanceNum)&&(A=Y)}return A?[...w,A]:w}const N=[];for(const A of E.campPerformance)if((!x||A.camp===x)&&A.games>=1){const I=`${E.player}-${A.camp}`;N.push({player:E.player,camp:A.camp,games:A.games,wins:A.wins,winRate:A.winRate,performance:A.performance,winRateNum:parseFloat(A.winRate),performanceNum:parseFloat(A.performance),campAvgWinRateNum:parseFloat(A.campAvgWinRate),isHighlightedAddition:!0,uniqueKey:I,playerCamp:I})}return[...w,...N]},F=t!=="Tous les camps"?R(m,t,!1):[],O=R(p,void 0,!0),M=F.sort((w,x)=>x.performanceNum-w.performanceNum),Ae=O.sort((w,x)=>x.performanceNum-w.performanceNum),U=(w,x)=>{const L=w.slice(0,x);if(L.some(N=>N.player===s.highlightedPlayer)||!s.highlightedPlayer)return L;const E=w.find(N=>N.player===s.highlightedPlayer);if(E){const N={...E,isHighlightedAddition:!0};return[...L,N]}return L};return{campPlayerData:U(M,15),topPerformersData:U(Ae,15)}},[y,t,f,s.highlightedPlayer]),v=i=>{i&&i.player&&(t!=="Tous les camps"?e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Camp Villageois"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Performance des Joueurs - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau",excludeVillagers:t==="Chasseur"||t==="Alchimiste"},fromComponent:`Performance des Joueurs - ${t}`}):i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Camp Villageois"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau",excludeVillagers:i.camp==="Chasseur"||i.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return h?l.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):T?l.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",T]}):y?l.jsxs("div",{className:"lycans-player-camp-performance",children:[l.jsx("h2",{children:"Meilleurs Performances par Camp"}),l.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),l.jsx("select",{id:"camp-select",value:t,onChange:i=>{const m=i.target.value;d(m),r({campPerformanceState:{selectedCampPerformanceCamp:m,selectedCampPerformanceMinGames:f}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:S.map(i=>{let m=i,p=!1,b=!1,R=!1;return i==="Tous les camps"?(m="📊 Hall of Fame",R=!0):i==="Camp Villageois"?(m="   🏘️ Camp Villageois",p=!0,b=!0):i==="Villageois"?(m="   Villageois",p=!0):i==="Chasseur"?(m="     Chasseur",p=!0):i==="Alchimiste"?(m="     Alchimiste",p=!0):i==="Camp Loup"?(m="   🐺 Camp Loup",p=!0,b=!0):i==="Loup"?(m="     Loup",p=!0):i==="Traître"?(m="     Traître",p=!0):i==="Louveteau"?(m="     Louveteau",p=!0):i==="Rôles spéciaux"?(m="   ⭐ Rôles spéciaux",p=!0,b=!0):(m=`     ${i}`,p=!0),l.jsx("option",{value:i,style:{fontFamily:"monospace",fontSize:p?"0.85rem":"0.9rem",fontWeight:b?"bold":"normal",color:b?"var(--accent-primary)":R?"var(--accent-secondary)":"inherit"},children:m},i)})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),l.jsx("select",{id:"min-games-select",value:f,onChange:i=>{const m=Number(i.target.value);P(m),r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:m}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:Se.map(i=>l.jsx("option",{value:i,children:i},i))})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:l.jsx("span",{children:"📊 = Tous les camps • 🏘️ = Villageois groupés • 🐺 = Loups groupés • ⭐ = Rôles spéciaux groupés"})}),l.jsxs("div",{className:"lycans-resume-conteneur",children:[l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Camps Analysés"}),l.jsx("div",{className:"lycans-valeur-principale",children:y.campAverages.length}),l.jsx("p",{children:"camps différents"})]}),l.jsxs("div",{className:"lycans-stat-carte",children:[l.jsx("h3",{children:"Joueurs Évalués"}),l.jsx("div",{className:"lycans-valeur-principale",children:y.playerPerformance.length}),l.jsx("p",{children:"joueurs analysés"})]})]}),l.jsxs("div",{className:"lycans-graphiques-groupe",children:[l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:t==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${t}`}),l.jsx(ee,{title:t==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${t}`,children:l.jsx("div",{style:{height:t==="Tous les camps"?600:500},children:l.jsx(ie,{width:"100%",height:"100%",children:l.jsxs(ze,{data:t==="Tous les camps"?g:C,margin:{top:20,right:30,left:20,bottom:t==="Tous les camps"?20:0},children:[l.jsx(ae,{strokeDasharray:"3 3"}),l.jsx(re,{dataKey:t==="Tous les camps"?"uniqueKey":"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:i,y:m,payload:p,index:b})=>{const F=(t==="Tous les camps"?g:C)[b],O=F?.player||p.value,M=s.highlightedPlayer===(F?.player||p.value);return l.jsx("text",{x:i,y:m,dy:16,textAnchor:"end",fill:M?"var(--accent-primary)":"var(--text-secondary)",fontSize:M?14:13,fontWeight:M?"bold":"italic",transform:`rotate(-45 ${i} ${m})`,children:O})}}),l.jsx(se,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(ne,{content:({active:i,payload:m})=>{if(i&&m&&m.length>0){const p=m[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:t==="Tous les camps"?`${p.player} - ${p.camp}`:p.player})}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Victoires: ",p.wins]}),l.jsxs("div",{children:["Taux personnel: ",p.winRate,"%"]}),t!=="Tous les camps"&&l.jsxs("div",{children:["Moyenne camp: ",p.campAvgWinRate,"%"]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(ke,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:v,children:(t==="Tous les camps"?g:C).map((i,m)=>{const p=s.highlightedPlayer===i.player,b=i.isHighlightedAddition;return l.jsx(pe,{fill:t==="Tous les camps"?n[i.camp]||`var(--chart-color-${m%6+1})`:c[i.player]||(i.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:p?"var(--accent-primary)":"transparent",strokeWidth:p?3:0,strokeDasharray:b?"5,5":"none",opacity:b?.8:1},`cell-${m}`)})})]})})})})]}),l.jsxs("div",{className:"lycans-graphique-section",children:[l.jsx("h3",{children:t==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${t} sur nombre de parties jouées`}),l.jsx(ee,{title:t==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${t}`,children:l.jsx("div",{style:{height:400},children:l.jsx(ie,{width:"100%",height:"100%",children:l.jsxs(Za,{data:t==="Tous les camps"?g:C,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(ae,{strokeDasharray:"3 3"}),l.jsx(re,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),l.jsx(se,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),l.jsx(ne,{content:({active:i,payload:m})=>{if(i&&m&&m.length>0){const p=m[0].payload;return l.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[l.jsx("div",{children:l.jsx("strong",{children:p.player})}),t==="Tous les camps"&&l.jsxs("div",{children:["Camp: ",p.camp]}),l.jsxs("div",{children:["Parties: ",p.games]}),l.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),l.jsx(be,{dataKey:"performanceNum",name:"Performance",onClick:i=>{i&&i.player&&(t==="Tous les camps"?i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}))},shape:i=>{const m=s.highlightedPlayer===i.payload?.player,p=i.payload?.isHighlightedAddition;return l.jsxs("g",{style:{cursor:"pointer"},children:[l.jsx("circle",{cx:i.cx,cy:i.cy,r:m?15:12,fill:t==="Tous les camps"?n[i.payload?.camp]||"var(--accent-primary)":c[i.payload?.player]||"var(--accent-primary)",stroke:m?"var(--accent-primary)":"#222",strokeWidth:m?3:1,strokeDasharray:p?"5,5":"none",opacity:p?.8:1}),l.jsx("text",{x:i.cx,y:i.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:m?"12":"10",fontWeight:"bold",pointerEvents:"none",children:i.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):l.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{or as PlayerCampPerformanceChart};
