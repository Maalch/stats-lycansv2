import{r as N,u as E,j as a}from"./index-CJo-oQ4f.js";import{u as q,a as R,b as k}from"./useRawGameData-CjhB8obR.js";import{c as B,a as $}from"./gameUtils-eJjgb3Fr.js";import{a as G}from"./api-beq3FXpM.js";function M(s){const{data:g,isLoading:x,error:j}=q(),{data:w,isLoading:C,error:P}=R(),{data:y,isLoading:I,error:S}=k();return{data:N.useMemo(()=>{if(!g||!w||!y)return[];let h=[...g];return s&&(s.selectedPlayer&&(h=h.filter(r=>r["Liste des joueurs"].toLowerCase().includes(s.selectedPlayer.toLowerCase()))),s.selectedGame&&(h=h.filter(r=>r.Game===s.selectedGame)),s.selectedCamp&&(h=h.filter(r=>{if(s.selectedPlayer){const i=w.find(f=>f.Game===r.Game);if(!i)return!1;const e=s.selectedPlayer.toLowerCase();if(s.selectedCamp==="Autres"&&s._smallCamps){const f=s._smallCamps;for(const t of f){let u=!1;switch(t){case"Traître":u=!!(i.Traître&&i.Traître.toLowerCase().includes(e));break;case"Idiot du Village":u=!!(i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(e));break;case"Cannibale":u=!!(i.Cannibale&&i.Cannibale.toLowerCase().includes(e));break;case"Agent":u=!!(i.Agent&&i.Agent.toLowerCase().includes(e));break;case"Espion":u=!!(i.Espion&&i.Espion.toLowerCase().includes(e));break;case"Scientifique":u=!!(i.Scientifique&&i.Scientifique.toLowerCase().includes(e));break;case"Amoureux":u=!!(i.Amoureux&&i.Amoureux.toLowerCase().includes(e));break;case"La Bête":u=!!(i["La Bête"]&&i["La Bête"].toLowerCase().includes(e));break;case"Chasseur de primes":u=!!(i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(e));break;case"Vaudou":u=!!(i.Vaudou&&i.Vaudou.toLowerCase().includes(e));break;case"Villageois":const n=r["Liste des joueurs"].toLowerCase().includes(e),o=i.Loups&&i.Loups.toLowerCase().includes(e)||i.Traître&&i.Traître.toLowerCase().includes(e)||i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(e)||i.Cannibale&&i.Cannibale.toLowerCase().includes(e)||i.Agent&&i.Agent.toLowerCase().includes(e)||i.Espion&&i.Espion.toLowerCase().includes(e)||i.Scientifique&&i.Scientifique.toLowerCase().includes(e)||i.Amoureux&&i.Amoureux.toLowerCase().includes(e)||i["La Bête"]&&i["La Bête"].toLowerCase().includes(e)||i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(e)||i.Vaudou&&i.Vaudou.toLowerCase().includes(e);u=n&&!o;break}if(u)return!0}return!1}return i.Loups&&i.Loups.toLowerCase().includes(e)?s.selectedCamp==="Loups":i.Traître&&i.Traître.toLowerCase().includes(e)?s.selectedCamp==="Traître":i["Idiot du village"]&&i["Idiot du village"].toLowerCase().includes(e)?s.selectedCamp==="Idiot du Village":i.Cannibale&&i.Cannibale.toLowerCase().includes(e)?s.selectedCamp==="Cannibale":i.Agent&&i.Agent.toLowerCase().includes(e)?s.selectedCamp==="Agent":i.Espion&&i.Espion.toLowerCase().includes(e)?s.selectedCamp==="Espion":i.Scientifique&&i.Scientifique.toLowerCase().includes(e)?s.selectedCamp==="Scientifique":i.Amoureux&&i.Amoureux.toLowerCase().includes(e)?s.selectedCamp==="Amoureux":i["La Bête"]&&i["La Bête"].toLowerCase().includes(e)?s.selectedCamp==="La Bête":i["Chasseur de primes"]&&i["Chasseur de primes"].toLowerCase().includes(e)?s.selectedCamp==="Chasseur de primes":i.Vaudou&&i.Vaudou.toLowerCase().includes(e)?s.selectedCamp==="Vaudou":r["Liste des joueurs"].toLowerCase().includes(e)?s.selectedCamp==="Villageois":!1}else{if((s.campFilterMode||"wins-only")==="wins-only")return s.selectedCamp==="Autres"&&s._smallCamps?s._smallCamps.includes(r["Camp victorieux"]):r["Camp victorieux"]===s.selectedCamp;{const e=w.find(c=>c.Game===r.Game);if(!e)return r["Camp victorieux"]===s.selectedCamp;if(s.selectedCamp==="Autres"&&s._smallCamps)return s._smallCamps.some(f=>{switch(f){case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const t=r["Liste des joueurs"].split(",").map(n=>n.trim()).filter(n=>n),u=[...e.Loups?e.Loups.split(",").map(n=>n.trim()).filter(n=>n):[],...e.Traître?[e.Traître.trim()].filter(n=>n):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(n=>n):[],...e.Cannibale?[e.Cannibale.trim()].filter(n=>n):[],...e.Agent?[e.Agent.trim()].filter(n=>n):[],...e.Espion?[e.Espion.trim()].filter(n=>n):[],...e.Scientifique?[e.Scientifique.trim()].filter(n=>n):[],...e.Amoureux?e.Amoureux.split(",").map(n=>n.trim()).filter(n=>n):[],...e["La Bête"]?[e["La Bête"].trim()].filter(n=>n):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(n=>n):[],...e.Vaudou?[e.Vaudou.trim()].filter(n=>n):[]];return t.some(n=>!u.includes(n));default:return!1}});switch(s.selectedCamp){case"Loups":return!!(e.Loups&&e.Loups.trim());case"Traître":return!!(e.Traître&&e.Traître.trim());case"Idiot du Village":return!!(e["Idiot du village"]&&e["Idiot du village"].trim());case"Cannibale":return!!(e.Cannibale&&e.Cannibale.trim());case"Agent":return!!(e.Agent&&e.Agent.trim());case"Espion":return!!(e.Espion&&e.Espion.trim());case"Scientifique":return!!(e.Scientifique&&e.Scientifique.trim());case"Amoureux":return!!(e.Amoureux&&e.Amoureux.trim());case"La Bête":return!!(e["La Bête"]&&e["La Bête"].trim());case"Chasseur de primes":return!!(e["Chasseur de primes"]&&e["Chasseur de primes"].trim());case"Vaudou":return!!(e.Vaudou&&e.Vaudou.trim());case"Villageois":const c=r["Liste des joueurs"].split(",").map(t=>t.trim()).filter(t=>t),f=[...e.Loups?e.Loups.split(",").map(t=>t.trim()).filter(t=>t):[],...e.Traître?[e.Traître.trim()].filter(t=>t):[],...e["Idiot du village"]?[e["Idiot du village"].trim()].filter(t=>t):[],...e.Cannibale?[e.Cannibale.trim()].filter(t=>t):[],...e.Agent?[e.Agent.trim()].filter(t=>t):[],...e.Espion?[e.Espion.trim()].filter(t=>t):[],...e.Scientifique?[e.Scientifique.trim()].filter(t=>t):[],...e.Amoureux?e.Amoureux.split(",").map(t=>t.trim()).filter(t=>t):[],...e["La Bête"]?[e["La Bête"].trim()].filter(t=>t):[],...e["Chasseur de primes"]?[e["Chasseur de primes"].trim()].filter(t=>t):[],...e.Vaudou?[e.Vaudou.trim()].filter(t=>t):[]];return c.some(t=>!f.includes(t));default:return r["Camp victorieux"]===s.selectedCamp}}}})),s.selectedVictoryType&&(h=h.filter(r=>r["Type de victoire"]===s.selectedVictoryType)),s.selectedDate&&(h=h.filter(r=>{const i=r.Date;if(s.selectedDate.includes("/")&&s.selectedDate.split("/").length===2){const[e,c]=s.selectedDate.split("/"),f=i.split("/");if(f.length===3){const[,t,u]=f;return t===e&&u===c}}else return i===s.selectedDate;return!1})),s.selectedPlayerPair&&s.selectedPairRole&&(h=h.filter(r=>{const i=w.find(u=>u.Game===r.Game);if(!i)return!1;const[e,c]=s.selectedPlayerPair,f=e.toLowerCase(),t=c.toLowerCase();if(s.selectedPairRole==="wolves"){if(i.Loups){const u=i.Loups.toLowerCase();return u.includes(f)&&u.includes(t)}}else if(s.selectedPairRole==="lovers"&&i.Amoureux){const u=i.Amoureux.toLowerCase();return u.includes(f)&&u.includes(t)}return!1})),s.selectedHarvestRange&&(h=h.filter(r=>{const i=r["Pourcentage de récolte"];if(i==null)return!1;const e=i*100;switch(s.selectedHarvestRange){case"0-25%":return e>=0&&e<=25;case"26-50%":return e>25&&e<=50;case"51-75%":return e>50&&e<=75;case"76-99%":return e>75&&e<=99;case"100%":return e>=100;default:return!0}})),s.selectedGameDuration&&(h=h.filter(r=>r["Nombre de journées"]===s.selectedGameDuration)),s.selectedPlayers&&s.selectedPlayers.length===2&&(h=h.filter(r=>{const i=r["Liste des joueurs"].toLowerCase(),[e,c]=s.selectedPlayers;if(!(i.includes(e.toLowerCase())&&i.includes(c.toLowerCase())))return!1;if(s.playersFilterMode==="all-common-games"){if(s.winnerPlayer){const t=w.find(o=>o.Game===r.Game);if(!t)return!0;const n=(o=>{const p=o.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(p)||t.Traître&&t.Traître.toLowerCase().includes(p)?"Loups":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(p)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(p)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(p)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(p)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(p)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(p)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(p)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(p)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(p)?"Vaudou":"Villageois"})(s.winnerPlayer);return r["Camp victorieux"]===n}return!0}if(s.playersFilterMode==="opposing-camps"){const t=w.find(d=>d.Game===r.Game);if(!t)return!1;const u=d=>{const m=d.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(m)||t.Traître&&t.Traître.toLowerCase().includes(m)?"Loups":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(m)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(m)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(m)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(m)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(m)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(m)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(m)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(m)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(m)?"Vaudou":"Villageois"},n=u(e),o=u(c);if(!(n!==o))return!1;if(s.winnerPlayer){const d=u(s.winnerPlayer);return r["Camp victorieux"]===d}return!0}if(s.playersFilterMode==="same-camp"){const t=w.find(d=>d.Game===r.Game);if(!t)return!1;const u=d=>{const m=d.toLowerCase();return t.Loups&&t.Loups.toLowerCase().includes(m)||t.Traître&&t.Traître.toLowerCase().includes(m)?"Loups":t["Idiot du village"]&&t["Idiot du village"].toLowerCase().includes(m)?"Idiot du Village":t.Cannibale&&t.Cannibale.toLowerCase().includes(m)?"Cannibale":t.Agent&&t.Agent.toLowerCase().includes(m)?"Agent":t.Espion&&t.Espion.toLowerCase().includes(m)?"Espion":t.Scientifique&&t.Scientifique.toLowerCase().includes(m)?"Scientifique":t.Amoureux&&t.Amoureux.toLowerCase().includes(m)?"Amoureux":t["La Bête"]&&t["La Bête"].toLowerCase().includes(m)?"La Bête":t["Chasseur de primes"]&&t["Chasseur de primes"].toLowerCase().includes(m)?"Chasseur de primes":t.Vaudou&&t.Vaudou.toLowerCase().includes(m)?"Vaudou":"Villageois"},n=u(e),o=u(c);if(!(n===o))return!1;if(s.winnerPlayer){const d=u(s.winnerPlayer);return r["Camp victorieux"]===d}return!0}return!1}))),h.map(r=>{const i=w.find(o=>o.Game===r.Game),e=y.filter(o=>o.Game===r.Game),c={};i&&(i.Loups&&(c.wolves=i.Loups.split(", ").filter(Boolean)),i.Traître&&(c.traitor=i.Traître),i["Idiot du village"]&&(c.villageIdiot=i["Idiot du village"]),i.Cannibale&&(c.cannibal=i.Cannibale),i.Agent&&(c.agent=i.Agent),i.Espion&&(c.spy=i.Espion),i.Scientifique&&(c.scientist=i.Scientifique),i.Amoureux&&(c.lovers=i.Amoureux.split(", ").filter(Boolean)),i["La Bête"]&&(c.beast=i["La Bête"]),i["Chasseur de primes"]&&(c.bountyHunter=i["Chasseur de primes"]),i.Vaudou&&(c.voodoo=i.Vaudou));const f=e.map(o=>({player:"Ponce",camp:o.Camp||"Unknown",isTraitor:o.Traître||!1,secondaryRole:o["Rôle secondaire"]==="N/A"?null:o["Rôle secondaire"],wolfPower:o["Pouvoir de loup"]==="N/A"?null:o["Pouvoir de loup"],villagerJob:o["Métier villageois"]==="N/A"?null:o["Métier villageois"],playersKilled:o["Joueurs tués"],deathDay:o["Jour de mort"],deathType:o["Type de mort"],killers:o["Joueurs tueurs"]})),t=[];return r["Liste des joueurs"].split(", ").filter(Boolean).forEach(o=>{let p="Villageois",d="Villageois";i&&(i.Loups&&i.Loups.split(", ").includes(o)?(p="Loups",d="Loups"):i.Traître&&i.Traître===o?(p="Traître",d="Loups"):i["Idiot du village"]&&i["Idiot du village"]===o?(p="Idiot du Village",d="Idiot du Village"):i.Cannibale&&i.Cannibale===o?(p="Cannibale",d="Cannibale"):i.Agent&&i.Agent.split(", ").includes(o)?(p="Agent",d="Agent"):i.Espion&&i.Espion===o?(p="Espion",d="Espion"):i.Scientifique&&i.Scientifique===o?(p="Scientifique",d="Scientifique"):i["La Bête"]&&i["La Bête"]===o?(p="La Bête",d="La Bête"):i["Chasseur de primes"]&&i["Chasseur de primes"]===o?(p="Chasseur de primes",d="Chasseur de primes"):i.Vaudou&&i.Vaudou===o?(p="Vaudou",d="Vaudou"):i.Amoureux&&i.Amoureux.split(", ").includes(o)&&p==="Villageois"&&(p="Amoureux",d="Amoureux")),t.push({player:o,role:p,camp:d})}),{gameId:r.Game,date:r.Date,isModded:r["Game Moddée"],playerCount:r["Nombre de joueurs"],wolfCount:r["Nombre de loups"],hasTraitor:r["Rôle Traître"],hasLovers:r["Rôle Amoureux"],soloRoles:r["Rôles solo"],winningCamp:r["Camp victorieux"],victoryType:r["Type de victoire"],dayCount:r["Nombre de journées"],villagerSurvivors:r["Survivants villageois"],wolfSurvivors:r["Survivants loups (traître inclus)"],loverSurvivors:r["Survivants amoureux"],soloSurvivors:r["Survivants solo"],winners:r["Liste des gagnants"],harvest:r.Récolte,totalHarvest:r["Total récolte"],harvestPercentage:r["Pourcentage de récolte"],playersList:r["Liste des joueurs"],versions:r.Versions,map:r.Map,youtubeEmbedUrl:$(r.Début,r.Fin),gameDuration:B(r.Début,r.Fin),roles:c,playerRoles:t,playerDetails:f}})},[g,w,y,s]),isLoading:x||C||I,error:j||P||S}}function Y(){const{navigationFilters:s,navigateBack:g}=E(),{data:x,isLoading:j,error:w}=M(s),[C,P]=N.useState("date"),[y,I]=N.useState("desc"),[S,V]=N.useState(null),[L,T]=N.useState(1),[h,r]=N.useState(25),i=N.useRef(!1),e=N.useMemo(()=>x?[...x].sort((l,b)=>{let v,A;switch(C){case"date":v=new Date(l.date.split("/").reverse().join("-")).getTime(),A=new Date(b.date.split("/").reverse().join("-")).getTime();break;case"gameId":v=l.gameId,A=b.gameId;break;case"playerCount":v=l.playerCount,A=b.playerCount;break;case"dayCount":v=l.dayCount,A=b.dayCount;break;case"winningCamp":v=l.winningCamp,A=b.winningCamp;break;case"victoryType":v=l.victoryType,A=b.victoryType;break;default:return 0}return y==="asc"?v>A?1:-1:v<A?1:-1}):[],[x,C,y]),c=Math.ceil(e.length/h),f=(L-1)*h,t=f+h,u=e.slice(f,t);N.useEffect(()=>{if(i.current){i.current=!1;return}T(1),V(null)},[x]),N.useEffect(()=>{T(1),V(null)},[C,y]);const n=l=>{i.current=!0,T(l),V(null)},o=l=>{i.current=!0,r(l),T(1),V(null)},p=l=>{i.current=!0,V(S===l?null:l)},d=l=>{C===l?I(y==="asc"?"desc":"asc"):(P(l),I("desc"))},m=l=>C!==l?"↕️":y==="asc"?"↗️":"↘️",D=()=>{const l=[];if(s.selectedPlayer&&s.selectedCamp)l.push(`${s.selectedPlayer} jouant ${s.selectedCamp}`);else if(s.selectedPlayer&&l.push(`Joueur: ${s.selectedPlayer}`),s.selectedCamp){const b=`Camp: ${s.selectedCamp}`,v=s.campFilterMode==="wins-only"?" (victoires uniquement)":s.campFilterMode==="all-assignments"?" (toutes assignations)":"";l.push(b+v)}if(s.selectedPlayerPair&&s.selectedPairRole){const b=s.selectedPlayerPair.join(" & "),v=s.selectedPairRole==="wolves"?"loups":"amoureux";l.push(`Paire ${v}: ${b}`)}if(s.selectedPlayers&&s.playersFilterMode){const b=s.selectedPlayers.join(" & ");let v="";s.playersFilterMode==="all-common-games"?v="toutes les parties communes":s.playersFilterMode==="opposing-camps"?v="affrontements uniquement":s.playersFilterMode==="same-camp"&&(v="parties en équipe (même camp)");const A=s.winnerPlayer?` (victoires de ${s.winnerPlayer})`:"";l.push(`${b} (${v}${A})`)}return s.selectedVictoryType&&l.push(`Victoire: ${s.selectedVictoryType}`),s.selectedHarvestRange&&l.push(`Récolte: ${s.selectedHarvestRange}`),s.selectedGameDuration&&l.push(`Durée: ${s.selectedGameDuration} jour${s.selectedGameDuration>1?"s":""}`),s.selectedGame&&l.push(`Partie #${s.selectedGame}`),s.selectedDate&&(s.selectedDate.includes("/")&&s.selectedDate.split("/").length===2?l.push(`Mois: ${s.selectedDate}`):l.push(`Date: ${s.selectedDate}`)),l};return j?a.jsx("div",{className:"statistiques-chargement",children:"Chargement des détails des parties..."}):w?a.jsxs("div",{className:"statistiques-erreur",children:["Erreur: ",w]}):!x||x.length===0?a.jsxs("div",{className:"lycans-empty-section",children:[a.jsx("h2",{children:"Aucune partie trouvée"}),a.jsx("p",{children:"Aucune partie ne correspond aux critères sélectionnés."}),s.fromComponent&&a.jsxs("button",{onClick:g,className:"lycans-submenu-btn",style:{marginTop:"1rem"},children:["← Retour à ",s.fromComponent]})]}):a.jsxs("div",{className:"lycans-game-details",children:[a.jsxs("div",{className:"lycans-game-details-header",children:[a.jsxs("div",{className:"lycans-game-details-navigation",children:[s.fromComponent&&a.jsxs("button",{onClick:g,className:"lycans-submenu-btn",style:{marginRight:"1rem"},children:["← Retour à ",s.fromComponent]}),a.jsxs("h2",{children:["Détails des Parties (",x.length," partie",x.length>1?"s":"",")"]})]}),D().length>0&&a.jsxs("div",{className:"lycans-active-filters",children:[a.jsx("strong",{children:"Filtres actifs:"})," ",D().join(", ")]})]}),c>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",f+1," à ",Math.min(t,e.length)," sur ",e.length," parties"]}),a.jsxs("div",{className:"lycans-pagination-controls",children:[a.jsxs("select",{value:h,onChange:l=>o(Number(l.target.value)),className:"lycans-pagination-select",children:[a.jsx("option",{value:10,children:"10 par page"}),a.jsx("option",{value:25,children:"25 par page"}),a.jsx("option",{value:50,children:"50 par page"}),a.jsx("option",{value:100,children:"100 par page"})]}),a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>n(1),disabled:L===1,className:"lycans-pagination-btn",children:"««"}),a.jsx("button",{onClick:()=>n(L-1),disabled:L===1,className:"lycans-pagination-btn",children:"‹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",L," sur ",c]}),a.jsx("button",{onClick:()=>n(L+1),disabled:L===c,className:"lycans-pagination-btn",children:"›"}),a.jsx("button",{onClick:()=>n(c),disabled:L===c,className:"lycans-pagination-btn",children:"»»"})]})]})]}),a.jsx("div",{className:"lycans-games-table-container",children:a.jsxs("table",{className:"lycans-games-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsxs("th",{onClick:()=>d("gameId"),className:"sortable",children:["Partie ",m("gameId")]}),a.jsxs("th",{onClick:()=>d("date"),className:"sortable",children:["Date ",m("date")]}),a.jsxs("th",{onClick:()=>d("playerCount"),className:"sortable",children:["Joueurs ",m("playerCount")]}),a.jsxs("th",{onClick:()=>d("dayCount"),className:"sortable",children:["Jours ",m("dayCount")]}),a.jsxs("th",{onClick:()=>d("winningCamp"),className:"sortable",children:["Camp Vainqueur ",m("winningCamp")]}),a.jsxs("th",{onClick:()=>d("victoryType"),className:"sortable",children:["Type de Victoire ",m("victoryType")]}),a.jsx("th",{children:"Détails"})]})}),a.jsx("tbody",{children:u.map(l=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:S===l.gameId?"selected":"",children:[a.jsxs("td",{children:["#",l.gameId]}),a.jsx("td",{children:l.date}),a.jsx("td",{children:l.playerCount}),a.jsx("td",{children:l.dayCount}),a.jsx("td",{style:{color:G[l.winningCamp]||"#fff"},children:l.winningCamp}),a.jsx("td",{children:l.victoryType}),a.jsx("td",{children:a.jsx("button",{onClick:()=>p(l.gameId),className:"lycans-details-btn",children:S===l.gameId?"Masquer":"Voir"})})]},l.gameId),S===l.gameId&&a.jsx("tr",{className:"game-details-row",children:a.jsx("td",{colSpan:7,children:a.jsx(J,{game:l})})},`${l.gameId}-details`)]}))})]})}),c>1&&a.jsxs("div",{className:"lycans-pagination-container",children:[a.jsxs("div",{className:"lycans-pagination-info",children:["Affichage de ",f+1," à ",Math.min(t,e.length)," sur ",e.length," parties"]}),a.jsx("div",{className:"lycans-pagination-controls",children:a.jsxs("div",{className:"lycans-pagination-buttons",children:[a.jsx("button",{onClick:()=>n(1),disabled:L===1,className:"lycans-pagination-btn",children:"««"}),a.jsx("button",{onClick:()=>n(L-1),disabled:L===1,className:"lycans-pagination-btn",children:"‹"}),a.jsxs("span",{className:"lycans-pagination-current",children:["Page ",L," sur ",c]}),a.jsx("button",{onClick:()=>n(L+1),disabled:L===c,className:"lycans-pagination-btn",children:"›"}),a.jsx("button",{onClick:()=>n(c),disabled:L===c,className:"lycans-pagination-btn",children:"»»"})]})})]})]})}function F(s){if(s===null||s<=0)return"N/A";const g=Math.floor(s/60),x=s%60;return g===0?`${x}s`:x===0?`${g}m`:`${g}m ${x}s`}function J({game:s}){const[g,x]=N.useState(!1);return a.jsx("div",{className:"lycans-game-detail-view",children:a.jsxs("div",{className:"lycans-game-detail-grid",children:[a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations Générales"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de joueurs:"}),a.jsx("span",{className:"value",children:s.playerCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Nombre de loups:"}),a.jsx("span",{className:"value",children:s.wolfCount})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Traître:"}),a.jsx("span",{className:"value",children:s.hasTraitor?"Oui":"Non"})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Amoureux:"}),a.jsx("span",{className:"value",children:s.hasLovers?"Oui":"Non"})]}),s.soloRoles&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Rôles solo:"}),a.jsx("span",{className:"value",children:s.soloRoles})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Informations Supplémentaires"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[s.gameDuration!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Durée de la partie:"}),a.jsx("span",{className:"value",children:F(s.gameDuration)})]}),s.versions&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Version:"}),a.jsxs("span",{className:"value",children:[s.versions,s.isModded?" (moddée)":""]})]}),s.map&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Map:"}),a.jsx("span",{className:"value",children:s.map})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Résultats"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Camp vainqueur:"}),a.jsx("span",{className:"value",children:s.winningCamp})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Type de victoire:"}),a.jsx("span",{className:"value",children:s.victoryType})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants villageois:"}),a.jsx("span",{className:"value",children:s.villagerSurvivors})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants loups:"}),a.jsx("span",{className:"value",children:s.wolfSurvivors})]}),s.loverSurvivors!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants amoureux:"}),a.jsx("span",{className:"value",children:s.loverSurvivors})]}),s.soloSurvivors!==null&&a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Survivants solo:"}),a.jsx("span",{className:"value",children:s.soloSurvivors})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Gagnants:"}),a.jsx("span",{className:"value",children:s.winners})]})]})]}),s.harvest!==null&&a.jsxs("div",{className:"lycans-game-detail-section",children:[a.jsx("h4",{children:"Récolte"}),a.jsxs("div",{className:"lycans-game-detail-stats",children:[a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Récolte:"}),a.jsx("span",{className:"value",children:s.harvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Total possible:"}),a.jsx("span",{className:"value",children:s.totalHarvest})]}),a.jsxs("div",{className:"lycans-stat-item",children:[a.jsx("span",{className:"label",children:"Pourcentage:"}),a.jsx("span",{className:"value",children:typeof s.harvestPercentage=="number"?(s.harvestPercentage*100).toFixed(1)+"%":"N/A"})]})]})]}),a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"Rôles des Joueurs"}),a.jsx("div",{className:"lycans-player-roles-grid",children:s.playerRoles.map((j,w)=>{const C=s.playerDetails.find(y=>y.player===j.player);let P=j.role===j.camp?j.camp:`${j.camp} (${j.role})`;if(C){const y=[];C.wolfPower&&C.wolfPower.trim()?y.push(C.wolfPower):C.villagerJob&&C.villagerJob.trim()&&y.push(C.villagerJob),y.length>0?(P=`${j.camp} - ${y[0]}`,C.secondaryRole&&C.secondaryRole.trim()&&(P+=` (${C.secondaryRole})`)):C.secondaryRole&&C.secondaryRole.trim()&&(P=`${j.camp} (${C.secondaryRole})`)}return a.jsxs("div",{className:"lycans-player-role-item",children:[a.jsx("div",{className:"lycans-player-name",style:{color:G[j.camp]||"#fff",textAlign:"left"},children:j.player}),a.jsx("div",{className:"lycans-player-camp",style:{textAlign:"left"},children:P})]},w)})})]}),s.youtubeEmbedUrl&&a.jsx("div",{className:"lycans-game-detail-section full-width",children:a.jsx("button",{onClick:()=>x(!g),className:"lycans-video-toggle-btn",children:g?"📹 Masquer la vidéo":"🎥 Voir la vidéo"})}),s.youtubeEmbedUrl&&g&&a.jsxs("div",{className:"lycans-game-detail-section full-width",children:[a.jsx("h4",{children:"Vidéo de la Partie"}),a.jsx("div",{className:"lycans-youtube-container",children:a.jsx("iframe",{src:s.youtubeEmbedUrl,title:`Partie Lycans #${s.gameId}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"lycans-youtube-iframe"})})]})]})})}export{Y as GameDetailsChart};
