import{u as I,a as G,r as k,j as e,c as ae}from"./index-BxJNZSbk.js";import{D as g,g as F,a as w,u as U}from"./datasyncExport-BTewFrkW.js";import{b as Y,m as q,a as Q,u as ee}from"./api-DOiJOIM5.js";import{F as L,B as H,C as K,X as M,Y as C,a as z,b as _}from"./FullscreenChart-Byijf29x.js";import{R as O,T as V}from"./CategoricalChart-DYU7aF1u.js";import{u as te}from"./useJoueursData-CssADCMS.js";function re(o){const p=new Set;o.filter(f=>!f.LegacyData||f.LegacyData.deathInformationFilled===!0).forEach(f=>{f.PlayerStats.forEach(T=>{const d=F(T.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});p.add(d)})});const m=Array.from(p);return[...Y.filter(f=>m.includes(f)),...m.filter(f=>!Y.includes(f)).sort()]}function J(o){switch(o){case g.VOTED:return"Mort aux votes";case g.BY_WOLF:return"TuÃ© par un loup";case g.BY_WOLF_REZ:return"TuÃ© par un loup ressuscitÃ©";case g.BY_WOLF_LOVER:return"TuÃ© par un loup amoureux";case g.BY_ZOMBIE:return"TuÃ© par un zombie";case g.BY_BEAST:return"DÃ©vorÃ© par la BÃªte";case g.BY_AVATAR_CHAIN:return"Mort liÃ©e Ã  l'Avatar";case g.BULLET:return"Abattu par un chasseur";case g.BULLET_HUMAN:return"TuÃ© par un chasseur en humain";case g.BULLET_WOLF:return"TuÃ© par un chasseur en loup";case g.BULLET_BOUNTYHUNTER:return"TuÃ© par un chasseur de primes";case g.SHERIF:return"Abattu par le ShÃ©rif";case g.OTHER_AGENT:return"Ã‰liminÃ© par l'Agent";case g.AVENGER:return"TuÃ© par un vengeur";case g.SEER:return"RÃ´le devinÃ© par un loup";case g.HANTED:return"TuÃ© par une potion hantÃ©e";case g.ASSASSIN:return"TuÃ© par une potion (Assassin)";case g.LOVER_DEATH:return"Mort par amoureux";case g.LOVER_DEATH_OWN:return"TuÃ© par son amoureux";case g.BOMB:return"Mort dans une explosion";case g.CRUSHED:return"Ã‰crasÃ©";case g.STARVATION:return"Mort de faim";case g.STARVATION_AS_BEAST:return"Mort bestiale";case g.FALL:return"Mort de chute";case g.UNKNOWN:return"Mort inconnue";default:return""}}function Z(o){switch(o){case g.VOTED:return"Mort aux votes";case g.BY_WOLF:return"Kill en Loup";case g.BY_WOLF_REZ:return"Kill en Loup ressuscitÃ©";case g.BY_WOLF_LOVER:return"Kill en Loup amoureux";case g.BY_ZOMBIE:return"Kill en Zombie";case g.BY_BEAST:return"Kill en BÃªte";case g.BY_AVATAR_CHAIN:return"Mort d'Avatar";case g.BULLET:return"Tir de Chasseur";case g.BULLET_HUMAN:return"Kill en Chasseur (sur humain)";case g.BULLET_WOLF:return"Kill en Chasseur (sur loup)";case g.BULLET_BOUNTYHUNTER:return"Kill en Chasseur de primes";case g.SHERIF:return"Kill en ShÃ©rif";case g.OTHER_AGENT:return"Kill en Agent";case g.AVENGER:return"Kill en Vengeur";case g.SEER:return"Kill en Devin";case g.HANTED:return"Kill avec Potion hantÃ©e";case g.ASSASSIN:return"Kill avec Potion (Assassin)";case g.LOVER_DEATH:return"Kill de son amoureux";case g.LOVER_DEATH_OWN:return"Kill de son propre amoureux";case g.BOMB:return"Explosion";case g.CRUSHED:return"Ã‰crasement";case g.STARVATION:return"Famine";case g.STARVATION_AS_BEAST:return"Tuerie bestiale";case g.FALL:return"Chute mortelle";case g.UNKNOWN:return"Kill inconnu";default:return""}}function ie(o){const p=new Set;o.forEach(r=>{r.PlayerStats.forEach(f=>{f.DeathType&&f.DeathType!==""&&p.add(f.DeathType)})});const u=Array.from(p),m=[g.BY_WOLF,g.VOTED,g.BULLET,g.BULLET_HUMAN,g.BULLET_WOLF,g.BY_ZOMBIE,g.ASSASSIN,g.AVENGER,g.LOVER_DEATH];return[...m.filter(r=>u.includes(r)),...u.filter(r=>!m.includes(r)).sort()]}function se(o,p){return o.PlayerStats.filter(u=>u.DeathType&&u.DeathType!==""&&(u.DeathTiming||u.DeathType)).map(u=>{let m=null;if(u.KillerName){const r=o.PlayerStats.find(f=>f.Username===u.KillerName);if(r){const f=w(r.MainRoleInitial,r.MainRoleChanges||[]);m=F(f,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1}),f&&f!==r.MainRoleInitial&&(f==="Loup"?m="Loup":f==="Zombie"&&(m="Vaudou"))}}return{playerName:u.Username,deathType:u.DeathType,killerName:u.KillerName,killerCamp:m}}).filter(u=>{if(!p||p==="Tous les camps")return!0;const m=o.PlayerStats.find(f=>f.Username===u.playerName);return m?F(m.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===p:!1})}function le(o,p){const u=[];return o.PlayerStats.forEach(m=>{if(m.KillerName&&m.DeathType){if(m.DeathType===g.VOTED||m.DeathType===g.STARVATION||m.DeathType===g.FALL||m.DeathType===g.BY_AVATAR_CHAIN||m.DeathType==="")return;const r=o.PlayerStats.find(d=>d.Username===m.KillerName);if(!r)return;let f=F(r.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});const T=w(r.MainRoleInitial,r.MainRoleChanges||[]);T&&T!==r.MainRoleInitial&&(T==="Loup"?f="Loup":T==="Zombie"&&(f="Vaudou")),u.push({killerName:m.KillerName,victimName:m.Username,deathType:m.DeathType,killerCamp:f})}}),p&&p!=="Tous les camps"?u.filter(m=>m.killerCamp===p):u}function ne(o,p){if(o.length===0)return null;const u=o.filter(t=>!t.LegacyData||t.LegacyData.deathInformationFilled===!0);if(u.length===0)return null;const m=[],r={};u.forEach(t=>{se(t,p).forEach(y=>{m.push({...y,gameId:t.Id})}),t.PlayerStats.forEach(y=>{const A=y.Username;(!p||p==="Tous les camps"||F(y.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})===p)&&(r[A]=(r[A]||0)+1)})});const f=m.length,T=u.length,d=T>0?f/T:0,S={};m.forEach(t=>{S[t.deathType]=(S[t.deathType]||0)+1});const j=Object.entries(S).map(([t,s])=>({type:t,count:s||0,percentage:f>0?(s||0)/f*100:0})).sort((t,s)=>s.count-t.count),D={};u.forEach(t=>{le(t,p).forEach(y=>{D[y.killerName]||(D[y.killerName]={kills:0,victims:new Set,killsByDeathType:{}}),D[y.killerName].kills++,D[y.killerName].victims.add(y.victimName),D[y.killerName].killsByDeathType[y.deathType]=(D[y.killerName].killsByDeathType[y.deathType]||0)+1})});const N=Object.entries(D).map(([t,s])=>{const y=r[t]||0,A=y>0?s.kills/y:0;return{killerName:t,kills:s.kills,victims:Array.from(s.victims),percentage:f>0?s.kills/f*100:0,gamesPlayed:y,averageKillsPerGame:A,killsByDeathType:s.killsByDeathType}}).sort((t,s)=>s.kills-t.kills),R={};m.forEach(t=>{R[t.playerName]||(R[t.playerName]={totalDeaths:0,deathsByType:{},killedBy:{},deathDays:[]});const s=R[t.playerName];s.totalDeaths++,s.deathsByType[t.deathType]=(s.deathsByType[t.deathType]||0)+1,t.killerName&&(s.killedBy[t.killerName]=(s.killedBy[t.killerName]||0)+1)});const b=[];Object.entries(R).forEach(([t,s])=>{b.push({playerName:t,totalDeaths:s.totalDeaths,deathsByType:s.deathsByType,killedBy:s.killedBy,deathRate:r[t]>0?s.totalDeaths/r[t]:0,gamesPlayed:r[t]||0})}),Object.entries(r).forEach(([t,s])=>{R[t]||b.push({playerName:t,totalDeaths:0,deathsByType:{},killedBy:{},deathRate:0,gamesPlayed:s})});const P=b.sort((t,s)=>s.totalDeaths-t.totalDeaths),c=j.length>0?j[0].type:null,h=N.length>0?N[0].killerName:null;return{totalDeaths:f,totalGames:T,averageDeathsPerGame:d,deathsByType:j,killerStats:N,playerDeathStats:P,mostCommonDeathType:c,mostDeadlyKiller:h}}function oe(o,p){const u=o.filter(j=>!j.LegacyData||j.LegacyData.deathInformationFilled===!0),m={},r=u.length,f=[g.BULLET,g.BULLET_HUMAN,g.BULLET_WOLF,g.BULLET_BOUNTYHUNTER];u.forEach(j=>{const D=new Set;j.PlayerStats.forEach(N=>{const R=N.MainRoleInitial,b=w(N.MainRoleInitial,N.MainRoleChanges||[]);(R==="Chasseur"||b==="Chasseur")&&(D.add(N.Username),m[N.Username]||(m[N.Username]={kills:[],gamesPlayed:0,victimsCamps:[]}),m[N.Username].gamesPlayed++)}),j.PlayerStats.forEach(N=>{const R=N.DeathType,b=N.KillerName;if(R&&f.includes(R)&&b&&D.has(b)){const P=F(N.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1});m[b].kills.push(R),m[b].victimsCamps.push(P)}})});const T=Object.entries(m).map(([j,D])=>{const N=D.kills.length,R={};D.kills.forEach(s=>{R[s]=(R[s]||0)+1});const b={};D.victimsCamps.forEach(s=>{b[s]=(b[s]||0)+1});const P=D.victimsCamps.filter(s=>s!=="Villageois").length,c=D.victimsCamps.filter(s=>s==="Villageois").length,h=D.gamesPlayed>0?N/D.gamesPlayed:0,t=D.gamesPlayed>0?P/D.gamesPlayed:0;return{hunterName:j,totalKills:N,nonVillageoisKills:P,villageoisKills:c,gamesPlayedAsHunter:D.gamesPlayed,averageKillsPerGame:h,averageNonVillageoisKillsPerGame:t,killsByDeathType:R,victimsByCamp:b}}).sort((j,D)=>D.totalKills-j.totalKills),d=T.length>0?T[0].hunterName:null,S=T.length>0?T.sort((j,D)=>D.averageNonVillageoisKillsPerGame-j.averageNonVillageoisKillsPerGame)[0].hunterName:null;return{totalHunters:T.length,totalGames:r,hunterStats:T,bestHunter:d,bestAverageHunter:S}}function ce(o){return U(p=>ne(p,o))}function he(){return U(o=>re(o))}function de(o){return U(p=>oe(p))}function X(o){if(!o||o.trim()==="")return null;const u=o.trim().slice(1),m=parseInt(u,10);return isNaN(m)||m<1?null:m}function ge(o,p){if(o.length===0)return null;const u=o.filter(d=>!d.LegacyData||d.LegacyData.deathInformationFilled===!0);if(u.length===0)return null;const m={},r={};u.forEach(d=>{let S=1;if(d.EndTiming){const j=X(d.EndTiming);j&&(S=j)}d.PlayerStats.forEach(j=>{if(p&&p!=="Tous les camps"&&F(j.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupWolfSubRoles:!1})!==p)return;const D=j.Username;m[D]||(m[D]={playerName:D,totalGames:0,survivalsByDay:{},survivalRatesByDay:{},gamesPlayedByDay:{}});const N=m[D];N.totalGames++;let R=null;j.DeathTiming&&(R=X(j.DeathTiming));for(let b=1;b<=S;b++)N.gamesPlayedByDay[b]||(N.gamesPlayedByDay[b]=0,N.survivalsByDay[b]=0),r[b]||(r[b]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),N.gamesPlayedByDay[b]++,r[b].playersOnDay++,(!R||R>b)&&(N.survivalsByDay[b]++,r[b].survivorsOnDay++)});for(let j=1;j<=S;j++)r[j]||(r[j]={gamesReachingDay:0,playersOnDay:0,survivorsOnDay:0}),r[j].gamesReachingDay++}),Object.values(m).forEach(d=>{Object.keys(d.gamesPlayedByDay).forEach(S=>{const j=parseInt(S),D=d.gamesPlayedByDay[j],N=d.survivalsByDay[j];D>0?d.survivalRatesByDay[j]=N/D*100:d.survivalRatesByDay[j]=0})});const f=Object.values(m).filter(d=>d.totalGames>0).sort((d,S)=>S.totalGames-d.totalGames),T=Object.entries(r).map(([d,S])=>({dayNumber:parseInt(d),totalGamesReachingDay:S.gamesReachingDay,totalPlayersOnDay:S.playersOnDay,averageSurvivalRate:S.playersOnDay>0?S.survivorsOnDay/S.playersOnDay*100:0})).sort((d,S)=>d.dayNumber-S.dayNumber);return{totalGames:u.length,totalPlayersAnalyzed:f.length,playerSurvivalStats:f,dayStats:T}}function me(o,p,u=10){return o.playerSurvivalStats.filter(m=>(m.gamesPlayedByDay[p]||0)>=u).map(m=>({playerName:m.playerName,survivalRate:m.survivalRatesByDay[p]||0,gamesPlayed:m.totalGames,timesReachedDay:m.gamesPlayedByDay[p]||0,timesSurvivedDay:m.survivalsByDay[p]||0})).sort((m,r)=>r.survivalRate-m.survivalRate).slice(0,15)}function ue(o,p,u=10){return o.playerSurvivalStats.filter(m=>(m.gamesPlayedByDay[p]||0)>=u).map(m=>({playerName:m.playerName,survivalRate:m.survivalRatesByDay[p]||0,gamesPlayed:m.totalGames,timesReachedDay:m.gamesPlayedByDay[p]||0,timesSurvivedDay:m.survivalsByDay[p]||0})).sort((m,r)=>m.survivalRate-r.survivalRate).slice(0,15)}function ye(o){return U(p=>ge(p,o))}function pe({deathStats:o,selectedCamp:p,minGamesForAverage:u,onMinGamesChange:m,availableDeathTypes:r,deathTypeColors:f,totalEligibleForAverage:T}){const{navigateToGameDetails:d}=I(),{settings:S}=G(),{totalKillsData:j,averageKillsData:D,highlightedPlayerAddedToTotal:N,highlightedPlayerAddedToAverage:R}=k.useMemo(()=>{if(!o)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1};const c=o.killerStats.sort((a,v)=>v.kills-a.kills).slice(0,15),h=S.highlightedPlayer&&c.some(a=>a.killerName===S.highlightedPlayer),t=c.map(a=>{const v={name:a.killerName,value:a.kills,victims:a.victims.length,percentage:a.percentage,gamesPlayed:a.gamesPlayed,averageKillsPerGame:a.averageKillsPerGame,isHighlightedAddition:!1};return r.forEach(l=>{v[l]=a.killsByDeathType[l]||0}),v});let s=!1;if(S.highlightedPlayer&&!h){const a=o.killerStats.find(v=>v.killerName===S.highlightedPlayer);if(a){const v={name:a.killerName,value:a.kills,victims:a.victims.length,percentage:a.percentage,gamesPlayed:a.gamesPlayed,averageKillsPerGame:a.averageKillsPerGame,isHighlightedAddition:!0};r.forEach(l=>{v[l]=a.killsByDeathType[l]||0}),t.push(v),s=!0}}const A=o.killerStats.filter(a=>a.gamesPlayed>=u).sort((a,v)=>v.averageKillsPerGame-a.averageKillsPerGame).slice(0,15),B=S.highlightedPlayer&&A.some(a=>a.killerName===S.highlightedPlayer),n=A.map(a=>{const v={name:a.killerName,value:a.averageKillsPerGame,victims:a.victims.length,percentage:a.percentage,gamesPlayed:a.gamesPlayed,averageKillsPerGame:a.averageKillsPerGame,isHighlightedAddition:!1};return r.forEach(l=>{const x=a.killsByDeathType[l]||0;v[l]=a.gamesPlayed>0?x/a.gamesPlayed:0}),v});let i=!1;if(S.highlightedPlayer&&!B){const a=o.killerStats.find(v=>v.killerName===S.highlightedPlayer);if(a){const v={name:a.killerName,value:a.averageKillsPerGame,victims:a.victims.length,percentage:a.percentage,gamesPlayed:a.gamesPlayed,averageKillsPerGame:a.averageKillsPerGame,isHighlightedAddition:!0};r.forEach(l=>{const x=a.killsByDeathType[l]||0;v[l]=a.gamesPlayed>0?x/a.gamesPlayed:0}),n.push(v),i=!0}}return{totalKillsData:t,averageKillsData:n,highlightedPlayerAddedToTotal:s,highlightedPlayerAddedToAverage:i}},[o,S.highlightedPlayer,u,r]),b=({active:c,payload:h,label:t})=>{if(c&&h&&h.length){const s=h[0].payload,y=s.isHighlightedAddition,A=S.highlightedPlayer===s.name,B=r.reduce((n,i)=>n+(s[i]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:A?"var(--accent-primary)":"var(--text-primary)"},children:[t,y&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",B]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",s.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill:"}),r.map(n=>{const i=s[n]||0;return i===0?null:e.jsxs("p",{style:{color:f[n],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Z(n),":"]})," ",i]},n)})]}),y&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),A&&!y&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},P=({active:c,payload:h,label:t})=>{if(c&&h&&h.length){const s=h[0].payload,y=s.isHighlightedAddition,A=S.highlightedPlayer===s.name,B=s.gamesPlayed>=u,n=o?.killerStats.find(v=>v.killerName===s.name),i=r.reduce((v,l)=>v+(s[l]||0),0),a=n?n.kills:Math.round(i*s.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:A?"var(--accent-primary)":"var(--text-primary)"},children:[t,y&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",i.toFixed(2)," (",a," kills /",s.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",s.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de kill (moyenne):"}),r.map(v=>{const l=s[v]||0;if(l===0)return null;const x=n?n.killsByDeathType[v]||0:Math.round(l*s.gamesPlayed);return e.jsxs("p",{style:{color:f[v],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[Z(v),":"]})," ",l.toFixed(2)," (",x," kills /",s.gamesPlayed," games)"]},v)})]}),y&&!B&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",u," parties)"]}),y&&B&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),A&&!y&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${p} (Total)`}),N&&S.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',S.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:p==="Tous les camps"?"Top Tueurs (Total)":`Top Tueurs en ${p} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:j,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:c,y:h,payload:t})=>e.jsx("text",{x:c,y:h,dy:10,fill:S.highlightedPlayer===t.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:S.highlightedPlayer===t.value?14:12,fontWeight:S.highlightedPlayer===t.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${c} ${h})`,children:t.value})}),e.jsx(C,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(b,{})}),r.map(c=>e.jsx(z,{dataKey:c,name:c,stackId:"kills",fill:f[c],onClick:h=>{const t={selectedPlayer:h?.name,fromComponent:"Statistiques de Mort"};p!=="Tous les camps"&&(t.campFilter={selectedCamp:p,campFilterMode:"all-assignments"}),d(t)}},c))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(c=>!c.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${p} (Moyenne par partie)`}),R&&S.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',S.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:u,onChange:c=>m(Number(c.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:q.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsx(L,{title:p==="Tous les camps"?"Top Tueurs (Moyenne par Partie)":`Top Tueurs en ${p} (Moyenne par partie)`,children:e.jsx("div",{style:{height:400},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:D,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:c,y:h,payload:t})=>e.jsx("text",{x:c,y:h,dy:10,fill:S.highlightedPlayer===t.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:S.highlightedPlayer===t.value?14:12,fontWeight:S.highlightedPlayer===t.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${c} ${h})`,children:t.value})}),e.jsx(C,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(P,{})}),r.map(c=>e.jsx(z,{dataKey:c,name:c,stackId:"averageKills",fill:f[c],onClick:h=>{const t={selectedPlayer:h?.name,fromComponent:"Statistiques de Mort"};p!=="Tous les camps"&&(t.campFilter={selectedCamp:p,campFilterMode:"all-assignments"}),d(t)}},c))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,D.filter(c=>!c.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",T," ayant au moins ",u," partie",u>1?"s":"",")"]})]})]})}function ve({deathStats:o,selectedCamp:p,minGamesForAverage:u,onMinGamesChange:m,availableDeathTypes:r,deathTypeColors:f}){const{navigateToGameDetails:T}=I(),{settings:d}=G(),{totalDeathsData:S,survivalRateData:j,highlightedPlayerAddedToDeaths:D,highlightedPlayerAddedToSurvival:N}=k.useMemo(()=>{if(!o)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const P=o.playerDeathStats.sort((i,a)=>a.totalDeaths-i.totalDeaths).slice(0,15),c=d.highlightedPlayer&&P.some(i=>i.playerName===d.highlightedPlayer),h=P.map(i=>{const a=i.gamesPlayed,v=a>0?(a-i.totalDeaths)/a*100:0,l={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:a,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!1};return r.forEach(x=>{l[x]=i.deathsByType[x]||0}),l});let t=!1;if(d.highlightedPlayer&&!c){const i=o.playerDeathStats.find(a=>a.playerName===d.highlightedPlayer);if(i){const a=i.gamesPlayed,v=a>0?(a-i.totalDeaths)/a*100:0,l={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:a,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!0};r.forEach(x=>{l[x]=i.deathsByType[x]||0}),h.push(l),t=!0}}const y=o.playerDeathStats.filter(i=>i.gamesPlayed>=u).map(i=>({...i,survivalRate:i.gamesPlayed>0?(i.gamesPlayed-i.totalDeaths)/i.gamesPlayed*100:0})).sort((i,a)=>a.survivalRate-i.survivalRate).slice(0,15),A=d.highlightedPlayer&&y.some(i=>i.playerName===d.highlightedPlayer),B=y.map(i=>{const a={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!1};return r.forEach(v=>{const l=i.deathsByType[v]||0;a[v]=i.gamesPlayed>0?l/i.gamesPlayed*100:0}),a});let n=!1;if(d.highlightedPlayer&&!A){const i=o.playerDeathStats.find(a=>a.playerName===d.highlightedPlayer);if(i){const a=i.gamesPlayed>0?(i.gamesPlayed-i.totalDeaths)/i.gamesPlayed*100:0,v={name:i.playerName,value:a,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:a,isHighlightedAddition:!0};r.forEach(l=>{const x=i.deathsByType[l]||0;v[l]=i.gamesPlayed>0?x/i.gamesPlayed*100:0}),B.push(v),n=!0}}return{totalDeathsData:h,survivalRateData:B,highlightedPlayerAddedToDeaths:t,highlightedPlayerAddedToSurvival:n}},[o,d.highlightedPlayer,u,r]),R=({active:P,payload:c,label:h})=>{if(P&&c&&c.length){const t=c[0].payload,s=t.isHighlightedAddition,y=d.highlightedPlayer===t.name,A=r.reduce((B,n)=>B+(t[n]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:y?"var(--accent-primary)":"var(--text-primary)"},children:[h,s&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",A]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",t.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",t.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort:"}),r.map(B=>{const n=t[B]||0;return n===0?null:e.jsxs("p",{style:{color:f[B],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[J(B),":"]})," ",n]},B)})]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),y&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},b=({active:P,payload:c,label:h})=>{if(P&&c&&c.length){const t=c[0].payload,s=t.isHighlightedAddition,y=d.highlightedPlayer===t.name,A=t.gamesPlayed>=u;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:y?"var(--accent-primary)":"var(--text-primary)"},children:[h,s&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",t.survivalRate.toFixed(1),"% (",t.gamesPlayed-t.totalDeaths," survies / ",t.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",t.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouÃ©es:"})," ",t.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"RÃ©partition par type de mort (taux %):"}),r.map(B=>{const n=t[B]||0;return n===0?null:e.jsxs("p",{style:{color:f[B],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[J(B),":"]})," ",n.toFixed(1),"%"]},B)})]}),s&&!A&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",u," parties)"]}),s&&A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),y&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:p==="Tous les camps"?"Morts (Total)":`Morts en ${p} (Total)`}),D&&d.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',d.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:p==="Tous les camps"?"Morts (Total)":`Morts en ${p} (Total)`,children:e.jsx("div",{style:{height:440},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:S,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:P,y:c,payload:h})=>e.jsx("text",{x:P,y:c,dy:10,fill:d.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:d.highlightedPlayer===h.value?14:12,fontWeight:d.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${P} ${c})`,children:h.value})}),e.jsx(C,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(R,{})}),r.map(P=>e.jsx(z,{dataKey:P,name:P,stackId:"deaths",fill:f[P],onClick:c=>{const h={selectedPlayer:c?.name,fromComponent:"Statistiques de Mort"};p!=="Tous les camps"&&(h.campFilter={selectedCamp:p,campFilterMode:"all-assignments"}),T(h)}},P))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,S.filter(P=>!P.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["Meilleurs Survivants ",p==="Tous les camps"?"(Total)":` en ${p}`]}),N&&d.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',d.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:u,onChange:P=>m(Number(P.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:q.map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsx(L,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:j,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:P,y:c,payload:h})=>e.jsx("text",{x:P,y:c,dy:10,fill:d.highlightedPlayer===h.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:d.highlightedPlayer===h.value?14:12,fontWeight:d.highlightedPlayer===h.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${P} ${c})`,children:h.value})}),e.jsx(C,{label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(b,{})}),r.map(P=>e.jsx(z,{dataKey:P,name:P,stackId:"survivalRate",fill:f[P],onClick:c=>{const h={selectedPlayer:c?.name,fromComponent:"Statistiques de Mort"};p!=="Tous les camps"&&(h.campFilter={selectedCamp:p,campFilterMode:"all-assignments"}),T(h)}},P))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,j.filter(P=>!P.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",u," partie",u>1?"s":"",")"]})]})]})}function xe({hunterStats:o,isLoading:p,error:u}){const{navigateToGameDetails:m}=I(),{settings:r}=G(),f=Q(),{joueursData:T}=te(),d=ee(T),[S,j]=k.useState(null);if(p)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques chasseurs..."});if(u)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",u]});if(!o||o.hunterStats.length===0)return e.jsxs("div",{className:"lycans-empty-section",children:[e.jsx("h3",{children:"Aucune donnÃ©e Chasseur"}),e.jsx("p",{children:"Aucune statistique de chasseur disponible avec les filtres actuels."})]});const{finalBestHuntersData:D,highlightedPlayerAddedToBest:N,finalBadHuntersData:R,highlightedPlayerAddedToBad:b}=(()=>{const t=o.hunterStats.filter(l=>l.gamesPlayedAsHunter>=5).sort((l,x)=>x.averageNonVillageoisKillsPerGame-l.averageNonVillageoisKillsPerGame).slice(0,15),s=r.highlightedPlayer&&t.some(l=>l.hunterName===r.highlightedPlayer);let y=[...t],A=!1;if(r.highlightedPlayer&&!s){const l=o.hunterStats.find(x=>x.hunterName===r.highlightedPlayer);l&&(y.push({...l,isHighlightedAddition:!0}),A=!0)}const B=o.hunterStats.filter(l=>l.gamesPlayedAsHunter>=5).map(l=>({name:l.hunterName,averageVillageoisKills:Number((l.villageoisKills/l.gamesPlayedAsHunter).toFixed(2)),totalVillageoisKills:l.villageoisKills,totalNonVillageoisKills:l.nonVillageoisKills,totalKills:l.totalKills,gamesPlayed:l.gamesPlayedAsHunter,victimsByCamp:l.victimsByCamp,hunterName:l.hunterName})),n=B.sort((l,x)=>x.averageVillageoisKills-l.averageVillageoisKills).slice(0,15),i=r.highlightedPlayer&&n.some(l=>l.hunterName===r.highlightedPlayer);let a=[...n],v=!1;if(r.highlightedPlayer&&!i){const l=B.find(x=>x.hunterName===r.highlightedPlayer);l&&(a.push({...l,isHighlightedAddition:!0}),v=!0)}return{finalBestHuntersData:y,highlightedPlayerAddedToBest:A,finalBadHuntersData:a,highlightedPlayerAddedToBad:v}})(),P=({active:h,payload:t,label:s})=>{if(h&&t&&t.length){const y=t[0].payload,A=y.isHighlightedAddition,B=r.highlightedPlayer===y.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:B?"var(--accent-primary)":"var(--text-primary)"},children:[s,A&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Kills non-Villageois/partie:"})," ",y.averageNonVillageoisKillsPerGame.toFixed(2)]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",y.nonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",y.gamesPlayedAsHunter]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",y.totalKills]}),y.victimsByCamp&&Object.keys(y.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(y.victimsByCamp).map(([n,i])=>e.jsxs("p",{style:{color:f[n]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[n,":"]})," ",i]},n))]}),A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),B&&!A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null},c=({active:h,payload:t,label:s})=>{if(h&&t&&t.length){const y=t[0].payload,A=y.isHighlightedAddition,B=r.highlightedPlayer===y.hunterName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:B?"var(--accent-primary)":"var(--text-primary)"},children:[s,A&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (ðŸŽ¯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Villageois tuÃ©s/partie:"})," ",y.averageVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total Villageois tuÃ©s:"})," ",y.totalVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total non-Villageois tuÃ©s:"})," ",y.totalNonVillageoisKills]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties en Chasseur:"})," ",y.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Total kills:"})," ",y.totalKills]}),y.victimsByCamp&&Object.keys(y.victimsByCamp).length>0&&e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Victimes par camp:"}),Object.entries(y.victimsByCamp).map(([n,i])=>e.jsxs("p",{style:{color:f[n]||"var(--text-secondary)",margin:"2px 0",fontSize:"0.8rem"},children:[e.jsxs("strong",{children:[n,":"]})," ",i]},n))]}),A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection personnelle"}),B&&!A&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Meilleurs Chasseurs"}),N&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:"Meilleurs Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:D,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:t,payload:s})=>e.jsx("text",{x:h,y:t,dy:10,fill:r.highlightedPlayer===s.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===s.value?14:12,fontWeight:r.highlightedPlayer===s.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${t})`,children:s.value})}),e.jsx(C,{label:{value:"Moyenne kills non-Villageois/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(P,{})}),e.jsx(z,{dataKey:"averageNonVillageoisKillsPerGame",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&m({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Meilleurs Chasseurs"})},onMouseEnter:h=>j(h?.hunterName||null),onMouseLeave:()=>j(null),style:{cursor:"pointer"},children:D.map((h,t)=>{const s=r.highlightedPlayer===h.hunterName,y=h.isHighlightedAddition;return e.jsx(_,{fill:d[h.hunterName]||f.Chasseur||"#8884d8",stroke:s?"var(--accent-primary)":S===h.hunterName?"var(--text-primary)":"none",strokeWidth:s?3:S===h.hunterName?2:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1},`cell-${t}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,D.filter(h=>!h.isHighlightedAddition).length)," des chasseurs les plus efficaces contre les non-Villageois (minimum 5 parties en Chasseur)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Mauvais Chasseurs"}),b&&r.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',r.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:"Mauvais Chasseurs",children:e.jsx("div",{style:{height:440},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:R,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(M,{dataKey:"hunterName",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:h,y:t,payload:s})=>e.jsx("text",{x:h,y:t,dy:10,fill:r.highlightedPlayer===s.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:r.highlightedPlayer===s.value?14:12,fontWeight:r.highlightedPlayer===s.value?"bold":"normal",textAnchor:"end",transform:`rotate(-45 ${h} ${t})`,children:s.value})}),e.jsx(C,{label:{value:"Moyenne Villageois tuÃ©s/partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(c,{})}),e.jsx(z,{dataKey:"averageVillageoisKills",fill:"var(--chart-primary)",onClick:h=>{h?.hunterName&&m({selectedPlayer:h.hunterName,campFilter:{selectedCamp:"Chasseur",campFilterMode:"all-assignments"},fromComponent:"Statistiques de Mort - Mauvais Chasseurs"})},onMouseEnter:h=>j(h?.hunterName||null),onMouseLeave:()=>j(null),style:{cursor:"pointer"},children:R.map((h,t)=>{const s=r.highlightedPlayer===h.hunterName,y=h.isHighlightedAddition;return e.jsx(_,{fill:d[h.hunterName]||f.Chasseur||"#8884d8",stroke:s?"var(--accent-primary)":S===h.hunterName?"var(--text-primary)":"none",strokeWidth:s?3:S===h.hunterName?2:0,strokeDasharray:y?"5,5":"none",opacity:y?.8:1},`cell-${t}`)})})]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,R.filter(h=>!h.isHighlightedAddition).length)," des chasseurs ayant le plus tuÃ© de Villageois (minimum 5 parties en Chasseur)"]})]})]})}function fe({survivalStats:o,selectedCamp:p,minGamesForAverage:u,onMinGamesChange:m,isLoading:r,error:f}){const{navigateToGameDetails:T}=I(),{settings:d}=G(),{joueursData:S}=te(),j=ee(S),[D,N]=k.useState(1),[R,b]=k.useState(null),P=k.useMemo(()=>o?o.dayStats.filter(i=>i.totalGamesReachingDay>0).map(i=>i.dayNumber).sort((i,a)=>i-a):[],[o]),c=k.useMemo(()=>P.includes(D)?D:P.length>0?P[0]:1,[D,P]),{highestSurvivalData:h,highlightedPlayerAddedToHighest:t}=k.useMemo(()=>{if(!o)return{highestSurvivalData:[],highlightedPlayerAddedToHighest:!1};const n=me(o,c,u),i=d.highlightedPlayer&&n.some(l=>l.playerName===d.highlightedPlayer),a=n.map(l=>({name:l.playerName,value:l.survivalRate,gamesPlayed:l.gamesPlayed,timesReachedDay:l.timesReachedDay,timesSurvivedDay:l.timesSurvivedDay,isHighlightedAddition:!1}));let v=!1;if(d.highlightedPlayer&&!i){const l=o.playerSurvivalStats.find(x=>x.playerName===d.highlightedPlayer);if(l&&(l.gamesPlayedByDay[c]||0)>=1){const x=l.survivalRatesByDay[c]||0;a.push({name:d.highlightedPlayer,value:x,gamesPlayed:l.totalGames,timesReachedDay:l.gamesPlayedByDay[c]||0,timesSurvivedDay:l.survivalsByDay[c]||0,isHighlightedAddition:!0}),v=!0}}return{highestSurvivalData:a,highlightedPlayerAddedToHighest:v}},[o,c,u,d.highlightedPlayer]),{lowestSurvivalData:s,highlightedPlayerAddedToLowest:y}=k.useMemo(()=>{if(!o)return{lowestSurvivalData:[],highlightedPlayerAddedToLowest:!1};const n=ue(o,c,u),i=d.highlightedPlayer&&n.some(l=>l.playerName===d.highlightedPlayer),a=n.map(l=>({name:l.playerName,value:l.survivalRate,gamesPlayed:l.gamesPlayed,timesReachedDay:l.timesReachedDay,timesSurvivedDay:l.timesSurvivedDay,isHighlightedAddition:!1}));let v=!1;if(d.highlightedPlayer&&!i){const l=o.playerSurvivalStats.find(x=>x.playerName===d.highlightedPlayer);if(l&&(l.gamesPlayedByDay[c]||0)>=1){const x=l.survivalRatesByDay[c]||0;a.push({name:d.highlightedPlayer,value:x,gamesPlayed:l.totalGames,timesReachedDay:l.gamesPlayedByDay[c]||0,timesSurvivedDay:l.survivalsByDay[c]||0,isHighlightedAddition:!0}),v=!0}}return{lowestSurvivalData:a,highlightedPlayerAddedToLowest:v}},[o,c,u,d.highlightedPlayer]),A=n=>{T({selectedPlayer:n,fromComponent:"Statistiques de Survie"})},B=({active:n,payload:i,label:a})=>{if(n&&i&&i.length>0){const v=i[0].payload,l=v.isHighlightedAddition,x=d.highlightedPlayer===v.name,W=v.timesReachedDay>=u;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:8,borderRadius:6},children:[e.jsx("div",{children:e.jsx("strong",{children:a})}),e.jsx("div",{children:e.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Taux de survie Jour ",c,": ",v.value.toFixed(1),"%"]})}),e.jsxs("div",{children:["Parties atteignant le Jour ",c,": ",v.timesReachedDay]}),e.jsxs("div",{children:["Survies au Jour ",c,": ",v.timesSurvivedDay]}),e.jsxs("div",{children:["Total de parties: ",v.gamesPlayed]}),l&&!W&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["ðŸŽ¯ AffichÃ© via sÃ©lection (< ",u," parties ce jour)"]}),l&&W&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ AffichÃ© via sÃ©lection (hors top 15)"}),x&&!l&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"ðŸŽ¯ Joueur sÃ©lectionnÃ©"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"ðŸ–±ï¸ Cliquez pour voir les parties"})]})}return null};return r?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de survie..."}):f?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",f]}):o?e.jsxs("div",{className:"lycans-survival-stats",children:[e.jsx("div",{className:"lycans-graphique-controles",style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"day-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Jour :"}),e.jsx("select",{id:"day-select",value:c,onChange:n=>N(parseInt(n.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:P.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Min. parties :"}),e.jsx("select",{id:"min-games-select",value:u,onChange:n=>m(parseInt(n.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"80px"},children:q.map(n=>e.jsx("option",{value:n,children:n},n))})]})]})}),c&&o.dayStats.find(n=>n.dayNumber===c)&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Parties atteignant le Jour ",c]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:o.dayStats.find(n=>n.dayNumber===c)?.totalGamesReachingDay||0})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Taux de survie moyen Jour ",c]}),e.jsxs("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:[(o.dayStats.find(n=>n.dayNumber===c)?.averageSurvivalRate||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsxs("h3",{children:["Joueurs Ã©ligibles (min. ",u," parties)"]}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:o.playerSurvivalStats.filter(n=>(n.gamesPlayedByDay[c]||0)>=u).length})]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ",c]}),t&&d.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',d.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:`ðŸ›¡ï¸ Meilleurs Taux de Survie - Jour ${c}`,children:e.jsx("div",{style:{height:400},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:h,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:n,y:i,payload:a})=>e.jsx("text",{x:n,y:i,dy:16,textAnchor:"end",transform:`rotate(-45, ${n}, ${i})`,fill:d.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:d.highlightedPlayer===a.value?14:12,fontWeight:d.highlightedPlayer===a.value?"bold":"normal",children:a.value})}),e.jsx(C,{tickFormatter:n=>`${n.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(B,{})}),e.jsx(z,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:h.map((n,i)=>{const a=d.highlightedPlayer===n.name,v=R===n.name,l=n.isHighlightedAddition;return e.jsx(_,{fill:j[n.name]||"var(--chart-primary)",stroke:a?"var(--accent-primary)":v?"var(--text-primary)":"none",strokeWidth:a?3:v?2:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1,onClick:()=>A(n.name),onMouseEnter:()=>b(n.name),onMouseLeave:()=>b(null),style:{cursor:"pointer"}},`cell-highest-${i}`)})})]})})})})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["âš°ï¸ Plus Faibles Taux de Survie - Jour ",c]}),y&&d.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['ðŸŽ¯ "',d.highlightedPlayer,'" affichÃ© en plus du top 15']})]}),e.jsx(L,{title:`âš°ï¸ Plus Faibles Taux de Survie - Jour ${c}`,children:e.jsx("div",{style:{height:400},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:s,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),e.jsx(M,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:({x:n,y:i,payload:a})=>e.jsx("text",{x:n,y:i,dy:16,textAnchor:"end",transform:`rotate(-45, ${n}, ${i})`,fill:d.highlightedPlayer===a.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:d.highlightedPlayer===a.value?14:12,fontWeight:d.highlightedPlayer===a.value?"bold":"normal",children:a.value})}),e.jsx(C,{tickFormatter:n=>`${n.toFixed(0)}%`,tick:{fill:"var(--text-secondary)"},label:{value:"Taux de survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx(V,{content:e.jsx(B,{})}),e.jsx(z,{dataKey:"value",name:"Taux de survie",cursor:"pointer",children:s.map((n,i)=>{const a=d.highlightedPlayer===n.name,v=R===n.name,l=n.isHighlightedAddition;return e.jsx(_,{fill:j[n.name]||"var(--chart-color-4)",stroke:a?"var(--accent-primary)":v?"var(--text-primary)":"none",strokeWidth:a?3:v?2:0,strokeDasharray:l?"5,5":"none",opacity:l?.8:1,onClick:()=>A(n.name),onMouseEnter:()=>b(n.name),onMouseLeave:()=>b(null),style:{cursor:"pointer"}},`cell-lowest-${i}`)})})]})})})})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note :"})," Les statistiques de survie montrent le pourcentage de fois qu'un joueur survit au Jour ",c," parmi toutes les parties qu'il a jouÃ©es et qui ont atteint ce jour. ",t||y?"Les joueurs mis en Ã©vidence apparaissent mÃªme s'ils ne sont pas dans le top 15.":""]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de survie disponible"})}function be(){const{navigationState:o,updateNavigationState:p}=I(),[u,m]=k.useState(o.deathStatisticsState?.selectedCamp||o.deathStatsSelectedCamp||"Tous les camps"),[r,f]=k.useState(o.deathStatisticsState?.minGamesForAverage||10),[T,d]=k.useState(o.deathStatisticsState?.selectedView||"killers"),{data:S}=he(),{data:j,isLoading:D,error:N}=ce(u),{data:R,isLoading:b,error:P}=de(),{data:c,isLoading:h,error:t}=ye(u),{data:s}=ae(),y=Q();k.useEffect(()=>{(!o.deathStatisticsState||o.deathStatisticsState.selectedCamp!==u||o.deathStatisticsState.minGamesForAverage!==r||o.deathStatisticsState.selectedView!==T)&&p({deathStatisticsState:{selectedCamp:u,minGamesForAverage:r,selectedView:T,focusChart:o.deathStatisticsState?.focusChart}})},[u,r,T,o.deathStatisticsState,p]);const A=k.useMemo(()=>s?ie(s):[],[s]),B=k.useMemo(()=>{const x={};A.forEach(E=>{E===g.BY_WOLF||E===g.BY_WOLF_REZ||E===g.BY_WOLF_LOVER?x[E]=y.Loup:E===g.VOTED?x[E]="var(--chart-color-1)":E===g.BULLET||E===g.BULLET_BOUNTYHUNTER||E===g.BULLET_HUMAN||E===g.BULLET_WOLF?x[E]=y.Chasseur:E===g.BY_ZOMBIE?x[E]=y.Vaudou:E===g.ASSASSIN?x[E]=y.Alchimiste:E===g.AVENGER?x[E]="var(--chart-color-2)":E===g.LOVER_DEATH||E===g.LOVER_DEATH_OWN?x[E]=y.Amoureux:E===g.BY_BEAST?x[E]="var(--chart-color-3)":E===g.SHERIF&&(x[E]="var(--chart-color-4)")});const W=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let $=0;return A.forEach(E=>{x[E]||(x[E]=W[$%W.length],$++)}),x},[A,y]),n=x=>{m(x),p({deathStatsSelectedCamp:x,deathStatisticsState:{selectedCamp:x,minGamesForAverage:r,selectedView:T,focusChart:o.deathStatisticsState?.focusChart}})},i=x=>{f(x),p({deathStatisticsState:{selectedCamp:u,minGamesForAverage:x,selectedView:T,focusChart:o.deathStatisticsState?.focusChart}})},a=x=>{d(x),p({deathStatisticsState:{selectedCamp:u,minGamesForAverage:r,selectedView:x,focusChart:o.deathStatisticsState?.focusChart}})},{gamesWithKillers:v,totalEligibleForAverage:l}=k.useMemo(()=>{if(!j)return{gamesWithKillers:0,totalEligibleForAverage:0};const x=j.killerStats.filter(W=>W.gamesPlayed>=r);return{gamesWithKillers:j.totalGames,totalEligibleForAverage:x.length}},[j,r]);return D?e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."}):N?e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",N]}):j?e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"Statistiques de Tueurs"}),e.jsxs("div",{className:"lycans-categories-selection",children:[e.jsx("button",{className:`lycans-categorie-btn ${T==="killers"?"active":""}`,onClick:()=>a("killers"),children:"Tueurs"}),e.jsx("button",{className:`lycans-categorie-btn ${T==="deaths"?"active":""}`,onClick:()=>a("deaths"),children:"Morts"}),e.jsx("button",{className:`lycans-categorie-btn ${T==="survival"?"active":""}`,onClick:()=>a("survival"),children:"Survie"}),e.jsx("button",{className:`lycans-categorie-btn ${T==="hunter"?"active":""}`,onClick:()=>a("hunter"),children:"Chasseur"})]}),(T==="killers"||T==="deaths"||T==="survival")&&e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp :"}),e.jsxs("select",{id:"camp-select",value:u,onChange:x=>n(x.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),S?.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),(T==="killers"||T==="deaths")&&e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:j.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiÃ©s"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:j.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrÃ©es"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:v})]})]}),T==="killers"&&e.jsx(pe,{deathStats:j,selectedCamp:u,minGamesForAverage:r,onMinGamesChange:i,availableDeathTypes:A,deathTypeColors:B,totalEligibleForAverage:l}),T==="deaths"&&e.jsx(ve,{deathStats:j,selectedCamp:u,minGamesForAverage:r,onMinGamesChange:i,availableDeathTypes:A,deathTypeColors:B}),T==="hunter"&&e.jsx(xe,{hunterStats:R,isLoading:b,error:P}),T==="survival"&&e.jsx(fe,{survivalStats:c,selectedCamp:u,minGamesForAverage:r,onMinGamesChange:i,isLoading:h,error:t}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"DonnÃ©es en cours de rÃ©cupÃ©ration (donnÃ©es partielles)."]})})]}):e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnÃ©e de mort disponible"})}export{be as DeathStatisticsChart};
