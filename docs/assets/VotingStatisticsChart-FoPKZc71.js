import{r as C,a as X,u as Y,j as e}from"./index-DpbVBlJZ.js";import{F as D,B as H,C as z,X as w,Y as E,a as I,b as W}from"./FullscreenChart-BMmDDHrI.js";import{g as J,a as K,u as Q}from"./datasyncExport-DPJe7Iu6.js";import{u as Z}from"./useJoueursData-DTTLAkf2.js";import{u as _}from"./api-BfVvJ3I3.js";import{R as O,T as $}from"./CategoricalChart-7fJ6jKso.js";function ee(a,p){if(!a.DeathTiming)return!0;const y=a.DeathTiming.toUpperCase();if(y.startsWith("M")){const h=parseInt(y.substring(1));return p<h}if(y.startsWith("N")||y.startsWith("J")){const h=parseInt(y.substring(1));return p<=h}return!0}function te(a,p){return a.PlayerStats.filter(y=>ee(y,p))}function L(a,p,y){const h=a.PlayerStats.find(f=>f.Username===y);return h?h.DeathType==="VOTED"&&h.DeathTiming===`M${p}`:!1}function ie(a){const p=[],y=new Map,h=new Map,f=new Map;a.PlayerStats.forEach(l=>{y.set(l.Username,{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0}),h.set(l.Username,{totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0}),f.set(l.Username,{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0})});const S=Math.max(...a.PlayerStats.flatMap(l=>l.Votes.map(g=>g.MeetingNr)),0);for(let l=1;l<=S;l++){const g=te(a,l),P=a.PlayerStats.flatMap(m=>m.Votes.filter(j=>j.MeetingNr===l).map(j=>({voter:m.Username,vote:j,voterRole:m.MainRoleInitial}))),b=P.filter(m=>m.vote.Target!=="Passé").length,c=P.filter(m=>m.vote.Target==="Passé").length,v=g.length-P.length,r=new Map;P.filter(m=>m.vote.Target!=="Passé").forEach(m=>{const j=r.get(m.vote.Target)||0;r.set(m.vote.Target,j+1)});let d=null,T=0;for(const[m,j]of r.entries())j>T&&(d=m,T=j);let x=null;d&&T>0&&L(a,l,d)&&(x=d),p.push({meetingNumber:l,totalParticipants:g.length,totalVotes:b,totalSkips:c,totalAbstentions:v,participationRate:g.length>0?(b+c)/g.length*100:0,mostTargetedPlayer:d,mostTargetedCount:T,eliminatedPlayer:x}),g.forEach(m=>{const j=y.get(m.Username);j.totalMeetings++;const N=P.find(k=>k.voter===m.Username);if(N)if(N.vote.Target==="Passé")j.totalSkips++;else{j.totalVotes++;const k=h.get(m.Username);k.totalVotes++;const q=J(K(m.MainRoleInitial,m.MainRoleChanges||[])),B=a.PlayerStats.find(F=>F.Username===N.vote.Target);if(B){const F=J(K(B.MainRoleInitial,B.MainRoleChanges||[]));q===F?k.votesForOwnCamp++:k.votesForEnemyCamp++;const V=f.get(N.vote.Target);V.totalTimesTargeted++,q===F?V.timesTargetedByOwnCamp++:V.timesTargetedByEnemyCamp++;const U=K(B.MainRoleInitial,B.MainRoleChanges||[]),i=J(U);i==="Villageois"?V.timesTargetedAsVillager++:i==="Loup"?V.timesTargetedAsWolf++:V.timesTargetedAsSpecial++,L(a,l,N.vote.Target)&&V.eliminationsByVote++}}else j.totalAbstentions++})}const M=[],R=[],A=[];return a.PlayerStats.forEach(l=>{const g=y.get(l.Username),P=g.totalMeetings>0?g.totalVotes/g.totalMeetings*100:0,b=g.totalMeetings>0?g.totalSkips/g.totalMeetings*100:0,c=g.totalMeetings>0?g.totalAbstentions/g.totalMeetings*100:0,v=P-b*.5-c*.7;M.push({playerName:l.Username,totalMeetings:g.totalMeetings,totalVotes:g.totalVotes,totalSkips:g.totalSkips,totalAbstentions:g.totalAbstentions,votingRate:P,skippingRate:b,abstentionRate:c,aggressivenessScore:v});const r=h.get(l.Username),d=r.totalVotes>0?r.votesForEnemyCamp/r.totalVotes*100:0,T=r.totalVotes>0?r.votesForOwnCamp/r.totalVotes*100:0;R.push({playerName:l.Username,totalMeetings:g.totalMeetings,totalVotes:r.totalVotes,votesForEnemyCamp:r.votesForEnemyCamp,votesForOwnCamp:r.votesForOwnCamp,accuracyRate:d,friendlyFireRate:T});const x=f.get(l.Username),m=x.totalTimesTargeted>0?(x.totalTimesTargeted-x.eliminationsByVote)/x.totalTimesTargeted*100:100;A.push({playerName:l.Username,totalTimesTargeted:x.totalTimesTargeted,timesTargetedByEnemyCamp:x.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:x.timesTargetedByOwnCamp,timesTargetedAsVillager:x.timesTargetedAsVillager,timesTargetedAsWolf:x.timesTargetedAsWolf,timesTargetedAsSpecial:x.timesTargetedAsSpecial,eliminationsByVote:x.eliminationsByVote,survivalRate:m})}),{gameId:a.Id,totalMeetings:S,meetingAnalytics:p,playerBehaviors:M,playerAccuracies:R,playerTargetStats:A}}function ae(a){const p=a.map(ie),y=new Map,h=new Map,f=new Map;let S=0,M=0,R=0,A=0,l=0,g=0;p.forEach(v=>{S+=v.totalMeetings,v.meetingAnalytics.forEach(r=>{M+=r.participationRate,R++,A+=r.totalVotes,l+=r.totalSkips,g+=r.totalAbstentions}),v.playerBehaviors.forEach(r=>{const d=y.get(r.playerName)||{totalMeetings:0,totalVotes:0,totalSkips:0,totalAbstentions:0};y.set(r.playerName,{totalMeetings:d.totalMeetings+r.totalMeetings,totalVotes:d.totalVotes+r.totalVotes,totalSkips:d.totalSkips+r.totalSkips,totalAbstentions:d.totalAbstentions+r.totalAbstentions})}),v.playerAccuracies.forEach(r=>{const d=h.get(r.playerName)||{totalMeetings:0,totalVotes:0,votesForEnemyCamp:0,votesForOwnCamp:0};h.set(r.playerName,{totalMeetings:d.totalMeetings+r.totalMeetings,totalVotes:d.totalVotes+r.totalVotes,votesForEnemyCamp:d.votesForEnemyCamp+r.votesForEnemyCamp,votesForOwnCamp:d.votesForOwnCamp+r.votesForOwnCamp})}),v.playerTargetStats.forEach(r=>{const d=f.get(r.playerName)||{totalTimesTargeted:0,timesTargetedByEnemyCamp:0,timesTargetedByOwnCamp:0,timesTargetedAsVillager:0,timesTargetedAsWolf:0,timesTargetedAsSpecial:0,eliminationsByVote:0};f.set(r.playerName,{totalTimesTargeted:d.totalTimesTargeted+r.totalTimesTargeted,timesTargetedByEnemyCamp:d.timesTargetedByEnemyCamp+r.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:d.timesTargetedByOwnCamp+r.timesTargetedByOwnCamp,timesTargetedAsVillager:d.timesTargetedAsVillager+r.timesTargetedAsVillager,timesTargetedAsWolf:d.timesTargetedAsWolf+r.timesTargetedAsWolf,timesTargetedAsSpecial:d.timesTargetedAsSpecial+r.timesTargetedAsSpecial,eliminationsByVote:d.eliminationsByVote+r.eliminationsByVote})})});const P=Array.from(y.entries()).map(([v,r])=>{const d=r.totalMeetings>0?r.totalVotes/r.totalMeetings*100:0,T=r.totalMeetings>0?r.totalSkips/r.totalMeetings*100:0,x=r.totalMeetings>0?r.totalAbstentions/r.totalMeetings*100:0,m=d-T*.5-x*.7;return{playerName:v,totalMeetings:r.totalMeetings,totalVotes:r.totalVotes,totalSkips:r.totalSkips,totalAbstentions:r.totalAbstentions,votingRate:d,skippingRate:T,abstentionRate:x,aggressivenessScore:m}}),b=Array.from(h.entries()).map(([v,r])=>{const d=r.totalVotes>0?r.votesForEnemyCamp/r.totalVotes*100:0,T=r.totalVotes>0?r.votesForOwnCamp/r.totalVotes*100:0;return{playerName:v,totalMeetings:r.totalMeetings,totalVotes:r.totalVotes,votesForEnemyCamp:r.votesForEnemyCamp,votesForOwnCamp:r.votesForOwnCamp,accuracyRate:d,friendlyFireRate:T}}),c=Array.from(f.entries()).map(([v,r])=>{const d=r.totalTimesTargeted>0?(r.totalTimesTargeted-r.eliminationsByVote)/r.totalTimesTargeted*100:100;return{playerName:v,totalTimesTargeted:r.totalTimesTargeted,timesTargetedByEnemyCamp:r.timesTargetedByEnemyCamp,timesTargetedByOwnCamp:r.timesTargetedByOwnCamp,timesTargetedAsVillager:r.timesTargetedAsVillager,timesTargetedAsWolf:r.timesTargetedAsWolf,timesTargetedAsSpecial:r.timesTargetedAsSpecial,eliminationsByVote:r.eliminationsByVote,survivalRate:d}});return{playerBehaviorStats:P,playerAccuracyStats:b,playerTargetStats:c,overallMeetingStats:{totalMeetings:S,averageParticipationRate:R>0?M/R:0,totalVotes:A,totalSkips:l,totalAbstentions:g}}}function G(){return Q(a=>{if(!a||a.length===0)return null;const p=a.filter(y=>y.PlayerStats.some(h=>h.Votes&&h.Votes.length>0));return p.length===0?null:ae(p)})}function re(a=5){const{data:p,isLoading:y,error:h}=G();return{data:C.useMemo(()=>p?{...p,playerBehaviorStats:p.playerBehaviorStats.filter(S=>S.totalMeetings>=a),playerAccuracyStats:p.playerAccuracyStats.filter(S=>S.totalVotes>=Math.ceil(a*.6)),playerTargetStats:p.playerTargetStats.filter(S=>S.totalTimesTargeted>=Math.ceil(a*.3))}:null,[p,a]),isLoading:y,error:h}}function he(){const{settings:a}=X(),{navigateToGameDetails:p}=Y(),{joueursData:y}=Z(),h=_(y),[f,S]=C.useState("behavior"),[M,R]=C.useState(25),[A,l]=C.useState(null),{data:g,isLoading:P,error:b}=G(),{data:c}=re(M),v=i=>{i&&i.playerName&&p({selectedPlayer:i.playerName,fromComponent:"Statistiques de Vote"})},{behaviorChartData:r,highlightedPlayerInBehavior:d}=C.useMemo(()=>{if(!c)return{behaviorChartData:[],highlightedPlayerInBehavior:!1};const i=[...c.playerBehaviorStats].sort((o,u)=>u.aggressivenessScore-o.aggressivenessScore).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{behaviorChartData:t,highlightedPlayerInBehavior:s}},[c,a.highlightedPlayer]),{accuracyChartData:T,highlightedPlayerInAccuracy:x}=C.useMemo(()=>{if(!c)return{accuracyChartData:[],highlightedPlayerInAccuracy:!1};const i=[...c.playerAccuracyStats].sort((o,u)=>u.accuracyRate-o.accuracyRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerAccuracyStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{accuracyChartData:t,highlightedPlayerInAccuracy:s}},[c,a.highlightedPlayer]),{targetChartData:m,highlightedPlayerInTargets:j}=C.useMemo(()=>{if(!c)return{targetChartData:[],highlightedPlayerInTargets:!1};const i=[...c.playerTargetStats].sort((o,u)=>u.survivalRate-o.survivalRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerTargetStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{targetChartData:t,highlightedPlayerInTargets:s}},[c,a.highlightedPlayer]),{voteRateChartData:N,highlightedPlayerInVoteRate:k}=C.useMemo(()=>{if(!c)return{voteRateChartData:[],highlightedPlayerInVoteRate:!1};const i=[...c.playerBehaviorStats].sort((o,u)=>u.votingRate-o.votingRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{voteRateChartData:t,highlightedPlayerInVoteRate:s}},[c,a.highlightedPlayer]),{skipRateChartData:q,highlightedPlayerInSkipRate:B}=C.useMemo(()=>{if(!c)return{skipRateChartData:[],highlightedPlayerInSkipRate:!1};const i=[...c.playerBehaviorStats].sort((o,u)=>u.skippingRate-o.skippingRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{skipRateChartData:t,highlightedPlayerInSkipRate:s}},[c,a.highlightedPlayer]),{abstentionRateChartData:F,highlightedPlayerInAbstentionRate:V}=C.useMemo(()=>{if(!c)return{abstentionRateChartData:[],highlightedPlayerInAbstentionRate:!1};const i=[...c.playerBehaviorStats].sort((o,u)=>u.abstentionRate-o.abstentionRate).slice(0,15),n=a.highlightedPlayer&&i.some(o=>o.playerName===a.highlightedPlayer);let t=[...i],s=!1;if(a.highlightedPlayer&&!n){const o=c.playerBehaviorStats.find(u=>u.playerName===a.highlightedPlayer);o&&(t.push({...o,isHighlightedAddition:!0}),s=!0)}return{abstentionRateChartData:t,highlightedPlayerInAbstentionRate:s}},[c,a.highlightedPlayer]);if(P)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de vote..."});if(b)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",b]});if(!g||!c)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de vote disponible"});const U=[5,15,25,50,100,200,400];return e.jsxs("div",{className:"lycans-voting-statistics",children:[e.jsx("h2",{children:"📊 Statistiques de Vote"}),e.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"view-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Vue:"}),e.jsxs("select",{id:"view-select",value:f,onChange:i=>S(i.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"180px"},children:[e.jsx("option",{value:"behavior",children:"🗳️ Comportements de vote"}),e.jsx("option",{value:"accuracy",children:"🎯 Précision des votes"}),e.jsx("option",{value:"targets",children:"🔻 Joueurs ciblés"}),e.jsx("option",{value:"voteRate",children:"📊 Taux de vote"}),e.jsx("option",{value:"skipRate",children:'⏭️ Taux de "Passé"'}),e.jsx("option",{value:"abstentionRate",children:"🚫 Taux d'abstention"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"min-meetings-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. meetings:"}),e.jsx("select",{id:"min-meetings-select",value:M,onChange:i=>R(Number(i.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:U.map(i=>e.jsx("option",{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[f==="behavior"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🗳️ Comportements de Vote - Score d'Agressivité"}),d&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:`Score basé sur le taux de vote, les abstentions et les "passés". Plus c'est haut, plus le joueur vote activement.`}),e.jsx(D,{title:"Comportements de Vote - Score d'Agressivité",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:r,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:"Score d'Agressivité (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes," (",t.votingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Passés: ",t.totalSkips," (",t.skippingRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Absents: ",t.totalAbstentions," (",t.abstentionRate.toFixed(1),"%)"]}),e.jsx("div",{children:e.jsxs("strong",{children:["Score: ",t.aggressivenessScore.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"aggressivenessScore",style:{cursor:"pointer"},onClick:v,children:r.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||(i.aggressivenessScore>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-behavior-${n}`)})})]})})})})]}),f==="accuracy"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🎯 Précision des Votes - Taux de Votes Justes"}),x&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de votes dirigés contre le camp adverse (et non contre son propre camp)."}),e.jsx(D,{title:"Précision des Votes - Taux de Votes Justes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:T,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:"Taux de Précision (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Nombre de meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Total de votes: ",t.totalVotes]}),e.jsxs("div",{children:["Votes justes: ",t.votesForEnemyCamp," (",t.accuracyRate.toFixed(1),"%)"]}),e.jsxs("div",{children:["Feu ami: ",t.votesForOwnCamp," (",t.friendlyFireRate.toFixed(1),"%)"]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"accuracyRate",style:{cursor:"pointer"},onClick:v,children:T.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||(i.accuracyRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-accuracy-${n}`)})})]})})})})]}),f==="targets"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🔻 Joueurs Ciblés - Taux de Survie aux Votes"}),j&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de fois où le joueur a survécu après avoir été ciblé par au moins un vote."}),e.jsx(D,{title:"Joueurs Ciblés - Taux de Survie aux Votes",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:m,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:"Taux de Survie (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Fois ciblé: ",t.totalTimesTargeted]}),e.jsxs("div",{children:["Éliminé par vote: ",t.eliminationsByVote]}),e.jsxs("div",{children:["Taux de survie: ",t.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{children:["Par camp ennemi: ",t.timesTargetedByEnemyCamp]}),e.jsxs("div",{children:["Par propre camp: ",t.timesTargetedByOwnCamp]}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"survivalRate",style:{cursor:"pointer"},onClick:v,children:m.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||(i.survivalRate>=50?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-targets-${n}`)})})]})})})})]}),f==="voteRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"📊 Taux de Vote - Top 15"}),k&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings où le joueur a voté activement (hors "Passé").'}),e.jsx(D,{title:"Taux de Vote - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:N,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:"Taux de Vote (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Votes: ",t.totalVotes]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux de vote: ",t.votingRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"votingRate",style:{cursor:"pointer"},onClick:v,children:N.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||"var(--accent-tertiary)",stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-voterate-${n}`)})})]})})})})]}),f==="skipRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:'⏭️ Taux de "Passé" - Top 15'}),B&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:'Pourcentage de meetings où le joueur a voté "Passé".'}),e.jsx(D,{title:'Taux de "Passé" - Top 15',children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:q,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:'Taux de "Passé" (%)',angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:['Votes "Passé": ',t.totalSkips]}),e.jsx("div",{children:e.jsxs("strong",{children:['Taux de "Passé": ',t.skippingRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"skippingRate",style:{cursor:"pointer"},onClick:v,children:q.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||"var(--accent-warning)",stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-skiprate-${n}`)})})]})})})})]}),f==="abstentionRate"&&e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"🚫 Taux d'Abstention - Top 15"}),V&&a.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',a.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",textAlign:"center",marginBottom:"1rem"},children:"Pourcentage de meetings où le joueur n'a pas voté du tout."}),e.jsx(D,{title:"Taux d'Abstention - Top 15",children:e.jsx("div",{style:{height:500},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(H,{data:F,margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"playerName",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:13,tick:({x:i,y:n,payload:t})=>{const s=a.highlightedPlayer===t.value;return e.jsx("text",{x:i,y:n,dy:16,textAnchor:"end",fill:s?"var(--accent-primary)":"var(--text-secondary)",fontSize:s?14:13,fontWeight:s?"bold":"italic",transform:`rotate(-45 ${i} ${n})`,children:t.value})}}),e.jsx(E,{label:{value:"Taux d'Abstention (%)",angle:270,position:"left",style:{textAnchor:"middle"}},domain:[0,100]}),e.jsx($,{content:({active:i,payload:n})=>{if(i&&n&&n.length>0){const t=n[0].payload,s=t.isHighlightedAddition,o=a.highlightedPlayer===t.playerName;return e.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[e.jsx("div",{children:e.jsx("strong",{children:t.playerName})}),e.jsxs("div",{children:["Total meetings: ",t.totalMeetings]}),e.jsxs("div",{children:["Abstentions: ",t.totalAbstentions]}),e.jsx("div",{children:e.jsxs("strong",{children:["Taux d'abstention: ",t.abstentionRate.toFixed(1),"%"]})}),s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),o&&!s&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),e.jsx(I,{dataKey:"abstentionRate",style:{cursor:"pointer"},onClick:v,children:F.map((i,n)=>{const t=a.highlightedPlayer===i.playerName,s=A===i.playerName,o=i.isHighlightedAddition;return e.jsx(W,{fill:h[i.playerName]||"var(--accent-danger)",stroke:t?"var(--accent-primary)":s?"var(--text-primary)":"transparent",strokeWidth:t?3:s?2:0,strokeDasharray:o?"5,5":"none",opacity:o?.8:1,onMouseEnter:()=>l(i.playerName),onMouseLeave:()=>l(null),style:{cursor:"pointer"}},`cell-abstentionrate-${n}`)})})]})})})})]})]})]})}export{he as VotingStatisticsChart};
