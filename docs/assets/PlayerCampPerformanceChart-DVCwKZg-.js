import{r as u,u as ge,a as xe,j as c}from"./index-CEUF8n-u.js";import{u as Pe}from"./baseStatsHook-DatgvieI.js";import{g as W,a as te}from"./datasyncExport-CI9vnVLX.js";import{a as Ce,u as Ae,m as be}from"./api-DakXL4EH.js";import{S as Z,u as je,b as ie,G as we,d as Re,e as Ee,f as Te,g as Se,h as Ie,F as U,B as Fe,C as X,X as Y,Y as Q,a as Oe}from"./FullscreenChart-BwKMlE6D.js";import{m as O,u as Le,n as Me,o as Ve,S as _e,p as ne,q as Ne,t as oe,v as le,w as ze,x as We,y as ce,b as me,z as ke,A as De,B as Ge,C as pe,D as Ke,d as ue,E as Be,G as Je,i as $e,L as k,F as V,H as B,I as ee,J as He,K as qe,M as K,N as Ze,O as de,P as Ue,Q as Xe,U as Ye,V as Qe,h as ea,W as aa,X as ra,Y as sa,R as ae,T as re}from"./CategoricalChart-BBiqKU2V.js";function fe(e,a,r){return(a=ta(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ta(e){var a=ia(e,"string");return typeof a=="symbol"?a:a+""}function ia(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function na(e){var a=Le();return u.useEffect(()=>(a(Me(e)),()=>{a(Ve(e))}),[e,a]),null}class q extends u.Component{render(){return u.createElement(na,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:O.allowDuplicatedCategory,allowDataOverflow:O.allowDataOverflow,reversed:O.reversed,includeHidden:O.includeHidden})}}fe(q,"displayName","ZAxis");fe(q,"defaultProps",{zAxisId:0,range:O.range,scale:O.scale,type:O.type});var oa=["option","isActive"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z.apply(null,arguments)}function la(e,a){if(e==null)return{};var r,s,o=ca(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ca(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function ma(e){var{option:a,isActive:r}=e,s=la(e,oa);return typeof a=="string"?u.createElement(Z,z({option:u.createElement(_e,z({type:a},s)),isActive:r,shapeType:"symbols"},s)):u.createElement(Z,z({option:a,isActive:r,shapeType:"symbols"},s))}var pa=(e,a,r,s,o,n,t)=>oe(e,"xAxis",a,t),ua=(e,a,r,s,o,n,t)=>le(e,"xAxis",a,t),da=(e,a,r,s,o,n,t)=>oe(e,"yAxis",r,t),fa=(e,a,r,s,o,n,t)=>le(e,"yAxis",r,t),ha=(e,a,r,s)=>ze(e,"zAxis",s,!1),ya=(e,a,r,s,o)=>o,va=(e,a,r,s,o,n)=>n,ga=(e,a,r,s,o,n,t)=>Ne(e,a,r,t),xa=ne([We,ya],(e,a)=>e.filter(r=>r.type==="scatter").find(r=>r.id===a)),Pa=ne([ga,pa,ua,da,fa,ha,xa,va],(e,a,r,s,o,n,t,m)=>{var{chartData:d,dataStartIndex:y,dataEndIndex:h}=e;if(t!=null){var g;if(t?.data!=null&&t.data.length>0?g=t.data:g=d?.slice(y,h+1),!(g==null||a==null||s==null||r==null||o==null||r?.length===0||o?.length===0))return La({displayedData:g,xAxis:a,yAxis:s,zAxis:n,scatterSettings:t,xAxisTicks:r,yAxisTicks:o,cells:m})}}),Ca=["onMouseEnter","onClick","onMouseLeave"],Aa=["id"],ba=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function J(e,a){if(e==null)return{};var r,s,o=ja(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ja(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},L.apply(null,arguments)}function se(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,s)}return r}function R(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?se(Object(r),!0).forEach(function(s){wa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wa(e,a,r){return(a=Ra(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ra(e){var a=Ea(e,"string");return typeof a=="symbol"?a:a+""}function Ea(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Ta=e=>{var{dataKey:a,name:r,fill:s,legendType:o,hide:n}=e;return[{inactive:n,dataKey:a,type:o,color:s,value:pe(r,a),payload:e}]};function Sa(e){var{points:a,props:r}=e,{line:s,lineType:o,lineJointType:n}=r;if(!s)return null;var t=de(r),m=ea(s,!1),d,y;if(o==="joint")d=a.map(v=>({x:v.cx,y:v.cy}));else if(o==="fitting"){var{xmin:h,xmax:g,a:A,b:w}=aa(a),f=v=>A*v+w;d=[{x:h,y:f(h)},{x:g,y:f(g)}]}var b=R(R(R({},t),{},{fill:"none",stroke:t&&t.fill},m),{},{points:d});return u.isValidElement(s)?y=u.cloneElement(s,b):typeof s=="function"?y=s(b):y=u.createElement(ra,L({},b,{type:n})),u.createElement(k,{className:"recharts-scatter-line",key:"recharts-scatter-line"},y)}function he(e){var{points:a,showLabels:r,allOtherScatterProps:s}=e,{shape:o,activeShape:n,dataKey:t}=s,m=ue(Ze),{onMouseEnter:d,onClick:y,onMouseLeave:h}=s,g=J(s,Ca),A=Ee(d,s.dataKey),w=Te(h),f=Se(y,s.dataKey);if(a==null)return null;var{id:b}=s,v=J(s,Aa),i=de(v);return u.createElement(u.Fragment,null,u.createElement(Sa,{points:a,props:v}),a.map((l,p)=>{var P=n&&m===String(p),T=P?n:o,E=R(R(R({key:"symbol-".concat(p)},i),l),{},{[Xe]:p,[Ue]:String(t)});return u.createElement(k,L({className:"recharts-scatter-symbol"},Ye(g,l,p),{onMouseEnter:A(l,p),onMouseLeave:w(l,p),onClick:f(l,p),key:"symbol-".concat(l?.cx,"-").concat(l?.cy,"-").concat(l?.size,"-").concat(p)}),u.createElement(ma,L({option:T,isActive:P},E)))}),r&&Qe.renderCallByParent(v,a))}function Ia(e){var{previousPointsRef:a,props:r}=e,{points:s,isAnimationActive:o,animationBegin:n,animationDuration:t,animationEasing:m}=r,d=a.current,y=He(r,"recharts-scatter-"),[h,g]=u.useState(!1),A=u.useCallback(()=>{g(!1)},[]),w=u.useCallback(()=>{g(!0)},[]);return u.createElement(qe,{begin:n,duration:t,isActive:o,easing:m,onAnimationEnd:A,onAnimationStart:w,key:y},f=>{var b=f===1?s:s.map((v,i)=>{var l=d&&d[i];if(l){var p=K(l.cx,v.cx),P=K(l.cy,v.cy),T=K(l.size,v.size);return R(R({},v),{},{cx:p(f),cy:P(f),size:T(f)})}var E=K(0,v.size);return R(R({},v),{},{size:E(f)})});return f>0&&(a.current=b),u.createElement(k,null,u.createElement(he,{points:b,allOtherScatterProps:r,showLabels:!h}))})}function Fa(e){var{points:a,isAnimationActive:r}=e,s=u.useRef(null),o=s.current;return r&&a&&a.length&&(!o||o!==a)?u.createElement(Ia,{props:e,previousPointsRef:s}):u.createElement(he,{points:a,allOtherScatterProps:e,showLabels:!0})}function Oa(e){var{dataKey:a,points:r,stroke:s,strokeWidth:o,fill:n,name:t,hide:m,tooltipType:d}=e;return{dataDefinedOnItem:r?.map(y=>y.tooltipPayload),positions:r?.map(y=>y.tooltipPosition),settings:{stroke:s,strokeWidth:o,fill:n,nameKey:void 0,dataKey:a,name:pe(t,a),hide:m,type:d,color:n,unit:""}}}function La(e){var{displayedData:a,xAxis:r,yAxis:s,zAxis:o,scatterSettings:n,xAxisTicks:t,yAxisTicks:m,cells:d}=e,y=V(r.dataKey)?n.dataKey:r.dataKey,h=V(s.dataKey)?n.dataKey:s.dataKey,g=o&&o.dataKey,A=o?o.range:q.defaultProps.range,w=A&&A[0],f=r.scale.bandwidth?r.scale.bandwidth():0,b=s.scale.bandwidth?s.scale.bandwidth():0;return a.map((v,i)=>{var l=B(v,y),p=B(v,h),P=!V(g)&&B(v,g)||"-",T=[{name:V(r.dataKey)?n.name:r.name||r.dataKey,unit:r.unit||"",value:l,payload:v,dataKey:y,type:n.tooltipType},{name:V(s.dataKey)?n.name:s.name||s.dataKey,unit:s.unit||"",value:p,payload:v,dataKey:h,type:n.tooltipType}];P!=="-"&&T.push({name:o.name||o.dataKey,unit:o.unit||"",value:P,payload:v,dataKey:g,type:n.tooltipType});var E=ee({axis:r,ticks:t,bandSize:f,entry:v,index:i,dataKey:y}),S=ee({axis:s,ticks:m,bandSize:b,entry:v,index:i,dataKey:h}),D=P!=="-"?o.scale(P):w,I=Math.sqrt(Math.max(D,0)/Math.PI);return R(R({},v),{},{cx:E,cy:S,x:E-I,y:S-I,width:2*I,height:2*I,size:D,node:{x:l,y:p,z:P},tooltipPayload:T,tooltipPosition:{x:E,y:S},payload:v},d&&d[i]&&d[i].props)})}var Ma=(e,a,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:B(e,a)});function Va(e){var{hide:a,points:r,className:s,needClip:o,xAxisId:n,yAxisId:t,id:m,children:d}=e;if(a)return null;var y=$e("recharts-scatter",s),h=m;return u.createElement(k,{className:y,clipPath:o?"url(#clipPath-".concat(h,")"):null,id:m},o&&u.createElement("defs",null,u.createElement(we,{clipPathId:h,xAxisId:n,yAxisId:t})),u.createElement(Re,{xAxisId:n,yAxisId:t,data:r,dataPointFormatter:Ma,errorBarOffset:0},d),u.createElement(k,{key:"recharts-scatter-symbols"},u.createElement(Fa,e)))}var ye={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Je.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function _a(e){var a=ce(e,ye),{animationBegin:r,animationDuration:s,animationEasing:o,hide:n,isAnimationActive:t,legendType:m,lineJointType:d,lineType:y,shape:h,xAxisId:g,yAxisId:A,zAxisId:w}=a,f=J(a,ba),{needClip:b}=je(g,A),v=u.useMemo(()=>Ke(e.children,ie),[e.children]),i=me(),l=ue(p=>Pa(p,g,A,w,e.id,v,i));return b==null?null:u.createElement(u.Fragment,null,u.createElement(Be,{fn:Oa,args:R(R({},e),{},{points:l})}),u.createElement(Va,L({},f,{xAxisId:g,yAxisId:A,zAxisId:w,lineType:y,lineJointType:d,legendType:m,shape:h,hide:n,isAnimationActive:t,animationBegin:r,animationDuration:s,animationEasing:o,points:l,needClip:b})))}function ve(e){var a=ce(e,ye),r=me();return u.createElement(ke,{id:a.id,type:"scatter"},s=>u.createElement(u.Fragment,null,u.createElement(De,{legendPayload:Ta(a)}),u.createElement(Ge,{type:"scatter",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:a.zAxisId,dataKey:a.dataKey,hide:a.hide,name:a.name,tooltipType:a.tooltipType,isPanorama:r}),u.createElement(_a,L({},a,{id:s}))))}ve.displayName="Scatter";var Na=["item"],za=u.forwardRef((e,a)=>u.createElement(Ie,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Na,tooltipPayloadSearcher:sa,categoricalChartProps:e,ref:a}));function $(e,a=!1){const r={};return e.forEach(s=>{const o=new Set;s.PlayerStats.forEach(t=>{const m=W(t.MainRoleFinal,{regroupWolfSubRoles:a});o.add(m)}),o.forEach(t=>{r[t]||(r[t]={totalGames:0,wins:0,winRate:0,players:{}}),r[t].totalGames++});const n=new Set;s.PlayerStats.forEach(t=>{if(t.Victorious){const m=W(t.MainRoleFinal,{regroupWolfSubRoles:a});n.add(m)}}),n.forEach(t=>{r[t]&&r[t].wins++})}),r}function H(e,a,r=!1){const s={};return e.forEach(o=>{o.PlayerStats.forEach(n=>{const t=n.Username.trim();if(!t)return;const m=W(n.MainRoleFinal,{regroupWolfSubRoles:r});a[m].players[t]||(a[m].players[t]={games:0,wins:0,winRate:0}),a[m].players[t].games++,n.Victorious&&a[m].players[t].wins++,s[t]||(s[t]={totalGames:0,camps:{}}),s[t].camps[m]||(s[t].camps[m]={games:0,wins:0,winRate:0,performance:0}),s[t].totalGames++,s[t].camps[m].games++,n.Victorious&&s[t].camps[m].wins++})}),s}function Wa(e){const a={};return a["Camp Villageois"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(s=>{W(s.MainRoleFinal,{regroupVillagers:!0})==="Villageois"&&(a["Camp Villageois"].totalGames++,s.Victorious&&a["Camp Villageois"].wins++)})}),a}function ka(e,a){const r={};return e.forEach(s=>{s.PlayerStats.forEach(o=>{const n=o.Username.trim();if(!n)return;if(W(o.MainRoleFinal,{regroupVillagers:!0})==="Villageois"){const m="Camp Villageois";a[m].players[n]||(a[m].players[n]={games:0,wins:0,winRate:0}),a[m].players[n].games++,o.Victorious&&a[m].players[n].wins++,r[n]||(r[n]={totalGames:0,camps:{}}),r[n].camps[m]||(r[n].camps[m]={games:0,wins:0,winRate:0,performance:0}),r[n].totalGames++,r[n].camps[m].games++,o.Victorious&&r[n].camps[m].wins++}})}),r}function Da(e,a,r){const s=$(e,!1),o=H(e,s,!1);_(s),N(o,s),["Chasseur","Alchimiste"].forEach(n=>{s[n]&&(a[n]=s[n],Object.keys(o).forEach(t=>{o[t].camps[n]&&(r[t]||(r[t]={totalGames:o[t].totalGames,camps:{}}),r[t].camps[n]=o[t].camps[n])}))})}function Ga(e){const a={};return a["Rôles spéciaux"]={totalGames:0,wins:0,winRate:0,players:{}},e.forEach(r=>{r.PlayerStats.forEach(s=>{te(s.MainRoleFinal)==="Autres"&&(a["Rôles spéciaux"].totalGames++,s.Victorious&&a["Rôles spéciaux"].wins++)})}),a}function Ka(e,a){const r={};return e.forEach(s=>{s.PlayerStats.forEach(o=>{const n=o.Username.trim();if(!n)return;if(te(o.MainRoleFinal)==="Autres"){const m="Rôles spéciaux";a[m].players[n]||(a[m].players[n]={games:0,wins:0,winRate:0}),a[m].players[n].games++,o.Victorious&&a[m].players[n].wins++,r[n]||(r[n]={totalGames:0,camps:{}}),r[n].camps[m]||(r[n].camps[m]={games:0,wins:0,winRate:0,performance:0}),r[n].totalGames++,r[n].camps[m].games++,o.Victorious&&r[n].camps[m].wins++}})}),r}function _(e){Object.keys(e).forEach(a=>{e[a].totalGames>0&&(e[a].winRate=parseFloat((e[a].wins/e[a].totalGames*100).toFixed(2))),Object.keys(e[a].players).forEach(r=>{const s=e[a].players[r];s.games>0&&(s.winRate=parseFloat((s.wins/s.games*100).toFixed(2)))})})}function N(e,a){Object.keys(e).forEach(r=>{Object.keys(e[r].camps).forEach(s=>{const o=e[r].camps[s];o.games>0&&(o.winRate=parseFloat((o.wins/o.games*100).toFixed(2)),a[s]&&a[s].winRate&&(o.performance=parseFloat((o.winRate-a[s].winRate).toFixed(2))))})})}function Ba(e,a,r){const s=[];return Object.keys(e).forEach(n=>{const t=e[n],m=[];Object.keys(t.camps).forEach(d=>{const y=t.camps[d];y.games>=r&&m.push({camp:d,games:y.games,wins:y.wins,winRate:y.winRate.toFixed(2),campAvgWinRate:a[d].winRate.toFixed(2),performance:y.performance.toFixed(2)})}),m.sort((d,y)=>parseFloat(y.performance)-parseFloat(d.performance)),m.length>0&&s.push({player:n,totalGames:t.totalGames,campPerformance:m})}),s.sort((n,t)=>t.totalGames-n.totalGames),{campAverages:Object.keys(a).map(n=>({camp:n,totalGames:a[n].totalGames,wins:a[n].wins,winRate:a[n].winRate.toFixed(2)})),playerPerformanceArray:s}}function Ja(e){if(e.length===0)return null;const a=$(e,!1),r=$(e,!0),s=Ga(e),o=Wa(e),n=H(e,a,!1),t=H(e,r,!0),m=Ka(e,s),d=ka(e,o);_(a),_(r),_(s),_(o),N(n,a),N(t,r),N(m,s),N(d,o);const y={...a},h={...n};r.Loup&&(y["Camp Loup"]=r.Loup,Object.keys(t).forEach(f=>{h[f]||(h[f]=t[f]),t[f].camps.Loup&&(h[f].camps["Camp Loup"]=t[f].camps.Loup)})),o["Camp Villageois"]&&(y["Camp Villageois"]=o["Camp Villageois"],Object.keys(d).forEach(f=>{h[f]||(h[f]=d[f]),d[f].camps["Camp Villageois"]&&(h[f].camps["Camp Villageois"]=d[f].camps["Camp Villageois"])})),s["Rôles spéciaux"]&&(y["Rôles spéciaux"]=s["Rôles spéciaux"],Object.keys(m).forEach(f=>{h[f]||(h[f]=m[f]),m[f].camps["Rôles spéciaux"]&&(h[f].camps["Rôles spéciaux"]=m[f].camps["Rôles spéciaux"])})),Da(e,y,h);const g=3,{campAverages:A,playerPerformanceArray:w}=Ba(h,y,g);return{campAverages:A,playerPerformance:w,minGamesRequired:g}}function $a(){const{data:e,isLoading:a,error:r}=Pe(Ja);return{playerCampPerformance:e,isLoading:a,error:r}}function Qa(){const{navigateToGameDetails:e,navigationState:a,updateNavigationState:r}=ge(),{settings:s}=xe(),o=Ce(),n=Ae(),[t,m]=u.useState(a.campPerformanceState?.selectedCampPerformanceCamp||"Camp Villageois"),[d,y]=u.useState(a.campPerformanceState?.selectedCampPerformanceMinGames||3),{playerCampPerformance:h,isLoading:g,error:A}=$a();u.useEffect(()=>{a.campPerformanceState||r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:d}})},[t,d,a.campPerformanceState,r]);const w=u.useMemo(()=>{if(!h?.campAverages)return["Tous les camps"];const i=h.campAverages.map(S=>S.camp),l=["Tous les camps"];i.includes("Camp Villageois")&&l.push("Camp Villageois"),i.includes("Chasseur")&&l.push("Chasseur"),i.includes("Alchimiste")&&l.push("Alchimiste"),i.includes("Villageois")&&l.push("Villageois"),i.includes("Camp Loup")&&l.push("Camp Loup"),i.includes("Loup")&&l.push("Loup"),i.includes("Traître")&&l.push("Traître"),i.includes("Louveteau")&&l.push("Louveteau"),i.includes("Rôles spéciaux")&&l.push("Rôles spéciaux");const p=["Camp Villageois","Camp Loup","Rôles spéciaux"],T=[...["Camp Villageois","Villageois","Chasseur","Alchimiste","Camp Loup","Loup","Traître","Louveteau"],...p],E=i.filter(S=>!T.includes(S)).sort();return[...l,...E]},[h]),{campPlayerData:f,topPerformersData:b}=u.useMemo(()=>{if(!h?.playerPerformance)return{campPlayerData:[],topPerformersData:[]};const{playerPerformance:i}=h,l=[],p=[];for(const j of i)for(const x of j.campPerformance)if(x.games>=d){const F={player:j.player,camp:x.camp,games:x.games,wins:x.wins,winRate:x.winRate,performance:x.performance,winRateNum:parseFloat(x.winRate),performanceNum:parseFloat(x.performance),campAvgWinRateNum:parseFloat(x.campAvgWinRate),isHighlightedAddition:!1};p.push(F),t!=="Tous les camps"&&x.camp===t&&l.push({player:j.player,...x,winRateNum:parseFloat(x.winRate),performanceNum:parseFloat(x.performance),campAvgWinRateNum:parseFloat(x.campAvgWinRate),isHighlightedAddition:!1})}const P=(j,x)=>{if(!s.highlightedPlayer||j.some(C=>C.player===s.highlightedPlayer&&(!x||C.camp===x)))return j;const G=i.find(C=>C.player===s.highlightedPlayer);if(!G)return j;const M=[];for(const C of G.campPerformance)(!x||C.camp===x)&&C.games>=1&&M.push({player:G.player,camp:C.camp,games:C.games,wins:C.wins,winRate:C.winRate,performance:C.performance,winRateNum:parseFloat(C.winRate),performanceNum:parseFloat(C.performance),campAvgWinRateNum:parseFloat(C.campAvgWinRate),isHighlightedAddition:!0});return[...j,...M]},T=t!=="Tous les camps"?P(l,t):[],E=P(p),S=T.sort((j,x)=>x.performanceNum-j.performanceNum),D=E.sort((j,x)=>x.performanceNum-j.performanceNum),I=(j,x)=>{const F=j.slice(0,x);if(F.some(C=>C.player===s.highlightedPlayer)||!s.highlightedPlayer)return F;const M=j.find(C=>C.player===s.highlightedPlayer);if(M){const C={...M,isHighlightedAddition:!0};return[...F,C]}return F};return{campPlayerData:I(S,15),topPerformersData:I(D,15)}},[h,t,d,s.highlightedPlayer]),v=i=>{i&&i.player&&(t!=="Tous les camps"?e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Camp Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Camp Villageois"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeVillagers:!1},fromComponent:`Performance des Joueurs - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Performance des Joueurs - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau",excludeVillagers:t==="Chasseur"||t==="Alchimiste"},fromComponent:`Performance des Joueurs - ${t}`}):i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Camp Villageois"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Villageois",campFilterMode:"wins-only",excludeWolfSubRoles:!0},fromComponent:"Performance des Joueurs - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Performance des Joueurs - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau",excludeVillagers:i.camp==="Chasseur"||i.camp==="Alchimiste"},fromComponent:"Performance des Joueurs - Tous les camps"}))};return g?c.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de performance par camp..."}):A?c.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",A]}):h?c.jsxs("div",{className:"lycans-player-camp-performance",children:[c.jsx("h2",{children:"Meilleurs Performances par Camp"}),c.jsxs("div",{className:"lycans-controls-section",style:{display:"flex",gap:"2rem",marginBottom:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Camp:"}),c.jsx("select",{id:"camp-select",value:t,onChange:i=>{const l=i.target.value;m(l),r({campPerformanceState:{selectedCampPerformanceCamp:l,selectedCampPerformanceMinGames:d}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"200px"},children:w.map(i=>{let l=i,p=!1,P=!1;return i==="Tous les camps"?(l="📊 Tous les camps",P=!0):i==="Camp Villageois"?(l="   🏘️ Camp Villageois",p=!0,P=!0):i==="Villageois"?(l="   Villageois",p=!0):i==="Chasseur"?(l="     Chasseur",p=!0):i==="Alchimiste"?(l="     Alchimiste",p=!0):i==="Camp Loup"?(l="   🐺 Camp Loup",p=!0,P=!0):i==="Loup"?(l="     Loup",p=!0):i==="Traître"?(l="     Traître",p=!0):i==="Louveteau"?(l="     Louveteau",p=!0):i==="Rôles spéciaux"?(l="   ⭐ Rôles spéciaux",p=!0,P=!0):(l=`     ${i}`,p=!0),c.jsx("option",{value:i,style:{fontFamily:"monospace",fontSize:p?"0.85rem":"0.9rem",fontWeight:P?"bold":"normal",color:P?"var(--accent-primary)":"inherit"},children:l},i)})})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("label",{htmlFor:"min-games-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),c.jsx("select",{id:"min-games-select",value:d,onChange:i=>{const l=Number(i.target.value);y(l),r({campPerformanceState:{selectedCampPerformanceCamp:t,selectedCampPerformanceMinGames:l}})},style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",width:"90px"},children:be.map(i=>c.jsx("option",{value:i,children:i},i))})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:c.jsx("span",{children:"📊 = Tous les camps • 🏘️ = Villageois groupés • 🐺 = Loups groupés • ⭐ = Rôles spéciaux groupés"})}),c.jsxs("div",{className:"lycans-resume-conteneur",children:[c.jsxs("div",{className:"lycans-stat-carte",children:[c.jsx("h3",{children:"Camps Analysés"}),c.jsx("div",{className:"lycans-valeur-principale",children:h.campAverages.length}),c.jsx("p",{children:"camps différents"})]}),c.jsxs("div",{className:"lycans-stat-carte",children:[c.jsx("h3",{children:"Joueurs Évalués"}),c.jsx("div",{className:"lycans-valeur-principale",children:h.playerPerformance.length}),c.jsx("p",{children:"joueurs analysés"})]})]}),c.jsxs("div",{className:"lycans-graphiques-groupe",children:[c.jsxs("div",{className:"lycans-graphique-section",children:[c.jsx("h3",{children:t==="Tous les camps"?"Meilleurs performances - Tous les camps":`Meilleurs joueurs en ${t}`}),c.jsx(U,{title:t==="Tous les camps"?"Meilleurs Performances - Tous les camps":`Meilleurs Joueurs - ${t}`,children:c.jsx("div",{style:{height:t==="Tous les camps"?600:500},children:c.jsx(ae,{width:"100%",height:"100%",children:c.jsxs(Fe,{data:t==="Tous les camps"?b:f,margin:{top:20,right:30,left:20,bottom:t==="Tous les camps"?20:0},children:[c.jsx(X,{strokeDasharray:"3 3"}),c.jsx(Y,{dataKey:"player",angle:-45,textAnchor:"end",height:110,interval:0,fontSize:15,tick:({x:i,y:l,payload:p})=>c.jsx("text",{x:i,y:l,dy:16,textAnchor:"end",fill:s.highlightedPlayer===p.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===p.value?14:13,fontWeight:s.highlightedPlayer===p.value?"bold":"italic",transform:`rotate(-45 ${i} ${l})`,children:p.value})}),c.jsx(Q,{label:{value:"Performance vs moyenne (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),c.jsx(re,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const p=l[0].payload;return c.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[c.jsx("div",{children:c.jsx("strong",{children:p.player})}),t==="Tous les camps"&&c.jsxs("div",{children:["Camp: ",p.camp]}),c.jsxs("div",{children:["Parties: ",p.games]}),c.jsxs("div",{children:["Victoires: ",p.wins]}),c.jsxs("div",{children:["Taux personnel: ",p.winRate,"%"]}),t!=="Tous les camps"&&c.jsxs("div",{children:["Moyenne camp: ",p.campAvgWinRate,"%"]}),c.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),c.jsx(Oe,{dataKey:"performanceNum",style:{cursor:"pointer"},onClick:v,children:(t==="Tous les camps"?b:f).map((i,l)=>{const p=s.highlightedPlayer===i.player,P=i.isHighlightedAddition;return c.jsx(ie,{fill:t==="Tous les camps"?o[i.camp]||`var(--chart-color-${l%6+1})`:n[i.player]||(i.performanceNum>=0?"var(--accent-tertiary)":"var(--accent-danger)"),stroke:p?"var(--accent-primary)":"transparent",strokeWidth:p?3:0,strokeDasharray:P?"5,5":"none",opacity:P?.8:1},`cell-${l}`)})})]})})})})]}),c.jsxs("div",{className:"lycans-graphique-section",children:[c.jsx("h3",{children:t==="Tous les camps"?"Performances sur nombre de parties jouées - Tous les camps":`Performances en ${t} sur nombre de parties jouées`}),c.jsx(U,{title:t==="Tous les camps"?"Performances vs Parties Jouées - Tous les camps":`Performances vs Parties Jouées - ${t}`,children:c.jsx("div",{style:{height:400},children:c.jsx(ae,{width:"100%",height:"100%",children:c.jsxs(za,{data:t==="Tous les camps"?b:f,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(X,{strokeDasharray:"3 3"}),c.jsx(Y,{dataKey:"games",type:"number",label:{value:"Parties jouées",position:"insideBottom",offset:-10}}),c.jsx(Q,{dataKey:"performanceNum",type:"number",label:{value:"Performance (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),c.jsx(re,{content:({active:i,payload:l})=>{if(i&&l&&l.length>0){const p=l[0].payload;return c.jsxs("div",{style:{background:"var(--bg-secondary)",color:"var(--text-primary)",padding:12,borderRadius:8,border:"1px solid var(--border-color)"},children:[c.jsx("div",{children:c.jsx("strong",{children:p.player})}),t==="Tous les camps"&&c.jsxs("div",{children:["Camp: ",p.camp]}),c.jsxs("div",{children:["Parties: ",p.games]}),c.jsxs("div",{children:["Performance: ",p.performance>0?"+":"",p.performance]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null}}),c.jsx(ve,{dataKey:"performanceNum",name:"Performance",onClick:i=>{i&&i.player&&(t==="Tous les camps"?i.camp==="Camp Loup"?e({selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):i.camp==="Rôles spéciaux"?e({selectedPlayer:i.player,fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e({selectedPlayer:i.player,campFilter:{selectedCamp:i.camp,campFilterMode:"wins-only",excludeWolfSubRoles:i.camp==="Traître"||i.camp==="Louveteau"},fromComponent:"Relation Parties Jouées vs Performance - Tous les camps"}):e(t==="Camp Loup"?{selectedPlayer:i.player,campFilter:{selectedCamp:"Loup",campFilterMode:"wins-only",excludeWolfSubRoles:!1},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:t==="Rôles spéciaux"?{selectedPlayer:i.player,fromComponent:`Relation Parties Jouées vs Performance - ${t}`}:{selectedPlayer:i.player,campFilter:{selectedCamp:t,campFilterMode:"wins-only",excludeWolfSubRoles:t==="Traître"||t==="Louveteau"},fromComponent:`Relation Parties Jouées vs Performance - ${t}`}))},shape:i=>{const l=s.highlightedPlayer===i.payload?.player,p=i.payload?.isHighlightedAddition;return c.jsxs("g",{style:{cursor:"pointer"},children:[c.jsx("circle",{cx:i.cx,cy:i.cy,r:l?15:12,fill:t==="Tous les camps"?o[i.payload?.camp]||"var(--accent-primary)":n[i.payload?.player]||"var(--accent-primary)",stroke:l?"var(--accent-primary)":"#222",strokeWidth:l?3:1,strokeDasharray:p?"5,5":"none",opacity:p?.8:1}),c.jsx("text",{x:i.cx,y:i.cy,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:l?"12":"10",fontWeight:"bold",pointerEvents:"none",children:i.payload?.player?.charAt(0).toUpperCase()})]})}})]})})})})]})]})]}):c.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de performance par camp disponible"})}export{Qa as PlayerCampPerformanceChart};
