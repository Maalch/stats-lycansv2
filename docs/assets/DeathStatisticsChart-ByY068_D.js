import{u as ue,r as C,c as pe,a as ye,j as e}from"./index-B8jMWc6y.js";import{u as le}from"./baseStatsHook-D-YQ61rK.js";import{g as F}from"./gameUtils-C0qLdSzT.js";import{F as M,B as z,C as U,X as G,Y as w,a as q}from"./FullscreenChart-EmfXh2-o.js";import{a as ve,m as re}from"./api-zyox9Kf8.js";import{R as Z,T as $}from"./CategoricalChart-Fgrv-0el.js";const r={SURVIVOR:"SURVIVOR",VOTE:"VOTE",WEREWOLF_KILL:"WEREWOLF_KILL",HUNTER_SHOT:"HUNTER_SHOT",BOUNTY_HUNTER:"BOUNTY_HUNTER",LOVER_DEATH:"LOVER_DEATH",LOVER_WEREWOLF:"LOVER_WEREWOLF",BEAST_KILL:"BEAST_KILL",ASSASSIN_POTION:"ASSASSIN_POTION",HAUNTED_POTION:"HAUNTED_POTION",ZOMBIE_KILL:"ZOMBIE_KILL",RESURRECTED_WEREWOLF:"RESURRECTED_WEREWOLF",AVENGER_KILL:"AVENGER_KILL",AGENT_KILL:"AGENT_KILL",SHERIFF_KILL:"SHERIFF_KILL",EXPLOSION:"EXPLOSION",CRUSHED:"CRUSHED",STARVATION:"STARVATION",FALL_DEATH:"FALL_DEATH",BESTIAL_DEATH:"BESTIAL_DEATH",AVATAR_DEATH:"AVATAR_DEATH",DISCONNECT:"DISCONNECT",UNKNOWN:"UNKNOWN"};function xe(x){const o=new Set;x.filter(j=>!j.LegacyData||j.LegacyData.deathInformationFilled===!0).forEach(j=>{j.PlayerStats.forEach(V=>{const A=F(V.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1});o.add(A)})});const g=Array.from(o),E=["Villageois","Loup","Amoureux"];return[...E.filter(j=>g.includes(j)),...g.filter(j=>!E.includes(j)).sort()]}function X(x){if(!x||x==="N/A")return r.SURVIVOR;const o=x.trim().toLowerCase();if(o.includes("vote"))return r.VOTE;if(o.includes("tué par loup")||o.includes("tué par un loup")||o.includes("tué par loup ressuscité"))return o.includes("ressuscité")?r.RESURRECTED_WEREWOLF:r.WEREWOLF_KILL;if(o.includes("amoureux")||o.includes("son amoureux"))return o.includes("tué par loup amoureux")?r.LOVER_WEREWOLF:r.LOVER_DEATH;if(o.includes("chasseur")||o.includes("balle"))return o.includes("primes")?r.BOUNTY_HUNTER:r.HUNTER_SHOT;if(o.includes("potion")){if(o.includes("assassin"))return r.ASSASSIN_POTION;if(o.includes("hanté"))return r.HAUNTED_POTION}return o.includes("la bête")?r.BEAST_KILL:o.includes("zombie")?r.ZOMBIE_KILL:o.includes("vengeur")?r.AVENGER_KILL:o.includes("l'agent")?r.AGENT_KILL:o.includes("shérif")?r.SHERIFF_KILL:o.includes("explosé")?r.EXPLOSION:o.includes("écrasé")?r.CRUSHED:o.includes("faim")?r.STARVATION:o.includes("chute")?r.FALL_DEATH:o.includes("bestiale")?r.BESTIAL_DEATH:o.includes("avatar")?r.AVATAR_DEATH:o==="déco"?r.DISCONNECT:r.UNKNOWN}function ae(x){switch(x){case r.SURVIVOR:return"Survivant";case r.VOTE:return"Mort aux votes";case r.WEREWOLF_KILL:return"Tué par un loup";case r.HUNTER_SHOT:return"Abattu par un chasseur";case r.BOUNTY_HUNTER:return"Tué par un chasseur de primes";case r.LOVER_DEATH:return"Mort par amoureux";case r.LOVER_WEREWOLF:return"Tué par son amoureux loup";case r.BEAST_KILL:return"Dévoré par la Bête";case r.ASSASSIN_POTION:return"Tué par une potion (Assassin)";case r.HAUNTED_POTION:return"Tué par une potion (Hanté)";case r.ZOMBIE_KILL:return"Tué par un zombie";case r.RESURRECTED_WEREWOLF:return"Tué par un loup ressuscité";case r.AVENGER_KILL:return"Tué par un vengeur";case r.AGENT_KILL:return"Éliminé par l'Agent";case r.SHERIFF_KILL:return"Abattu par le Shérif";case r.EXPLOSION:return"Mort dans une explosion";case r.CRUSHED:return"Écrasé";case r.STARVATION:return"Mort de faim";case r.FALL_DEATH:return"Mort de chute";case r.BESTIAL_DEATH:return"Mort bestiale";case r.AVATAR_DEATH:return"Mort liée à l'Avatar";case r.DISCONNECT:return"Déconnexion";case r.UNKNOWN:default:return"Mort inconnue"}}function ie(x){switch(x){case r.SURVIVOR:return"Survivant";case r.VOTE:return"Mort aux votes";case r.WEREWOLF_KILL:return"Kill en Loup";case r.HUNTER_SHOT:return"Tir de Chasseur";case r.BOUNTY_HUNTER:return"Kill en Chasseur de primes";case r.LOVER_DEATH:return"Kill de son amoureux";case r.LOVER_WEREWOLF:return"Kill en Loup amoureux";case r.BEAST_KILL:return"Kill en Bête";case r.ASSASSIN_POTION:return"Kill avec Potion (Assassin)";case r.HAUNTED_POTION:return"Kill avec Potion (Hanté)";case r.ZOMBIE_KILL:return"Kill en Zombie";case r.RESURRECTED_WEREWOLF:return"Kill en Loup ressuscité";case r.AVENGER_KILL:return"Kill en Vengeur";case r.AGENT_KILL:return"Kill en Agent";case r.SHERIFF_KILL:return"Kill en Shérif";case r.EXPLOSION:return"Explosion";case r.CRUSHED:return"Écrasement";case r.STARVATION:return"Famine";case r.FALL_DEATH:return"Chute mortelle";case r.BESTIAL_DEATH:return"Tuerie bestiale";case r.AVATAR_DEATH:return"Mort d'Avatar";case r.DISCONNECT:return"Déconnexion";case r.UNKNOWN:default:return"Kill inconnu"}}function fe(x){const o=new Set;x.forEach(E=>{E.PlayerStats.forEach(y=>{if(y.DeathType){const j=X(y.DeathType);o.add(j)}})});const S=Array.from(o),g=[r.WEREWOLF_KILL,r.VOTE,r.HUNTER_SHOT,r.ZOMBIE_KILL,r.ASSASSIN_POTION,r.HAUNTED_POTION,r.AVENGER_KILL,r.LOVER_DEATH,r.SURVIVOR];return[...g.filter(E=>S.includes(E)),...S.filter(E=>!g.includes(E)).sort()]}function Te(x,o){return x.PlayerStats.filter(S=>X(S.DeathType)!=="SURVIVOR"&&(S.DeathTiming||S.DeathType)).map(S=>{let g=null;if(S.KillerName){const y=x.PlayerStats.find(j=>j.Username===S.KillerName);y&&(g=F(y.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1}))}const E=X(S.DeathType);return{playerName:S.Username,deathType:E,killerName:S.KillerName,killerCamp:g}}).filter(S=>{if(!o||o==="Tous les camps")return!0;const g=x.PlayerStats.find(y=>y.Username===S.playerName);return g?F(g.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===o:!1})}function Se(x,o){if(x.length===0)return null;const S=x.filter(c=>!c.LegacyData||c.LegacyData.deathInformationFilled===!0);if(S.length===0)return null;const g=[],E={};S.forEach(c=>{Te(c,o).forEach(I=>{g.push({...I,gameId:c.Id})}),c.PlayerStats.forEach(I=>{const B=I.Username;(!o||o==="Tous les camps"||F(I.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!1})===o)&&(E[B]=(E[B]||0)+1)})});const y=g.length,j=S.length,V=j>0?y/j:0,A={};g.forEach(c=>{A[c.deathType]=(A[c.deathType]||0)+1});const W=Object.entries(A).map(([c,u])=>({type:c,count:u,percentage:y>0?u/y*100:0})).sort((c,u)=>u.count-c.count),K={};g.forEach(c=>{if(c.killerName){K[c.killerName]||(K[c.killerName]={kills:0,victims:new Set,killsByDeathType:{}}),K[c.killerName].kills++,K[c.killerName].victims.add(c.playerName);const u=c.deathType;K[c.killerName].killsByDeathType[u]=(K[c.killerName].killsByDeathType[u]||0)+1}});const _=Object.entries(K).map(([c,u])=>{const I=E[c]||0,B=I>0?u.kills/I:0;return{killerName:c,kills:u.kills,victims:Array.from(u.victims),percentage:y>0?u.kills/y*100:0,gamesPlayed:I,averageKillsPerGame:B,killsByDeathType:u.killsByDeathType}}).sort((c,u)=>u.kills-c.kills),s={};g.forEach(c=>{s[c.playerName]||(s[c.playerName]={totalDeaths:0,deathsByType:{},killedBy:{},deathDays:[]});const u=s[c.playerName];u.totalDeaths++,u.deathsByType[c.deathType]=(u.deathsByType[c.deathType]||0)+1,c.killerName&&(u.killedBy[c.killerName]=(u.killedBy[c.killerName]||0)+1)});const H=Object.entries(s).map(([c,u])=>({playerName:c,totalDeaths:u.totalDeaths,deathsByType:u.deathsByType,killedBy:u.killedBy,averageDeathDay:u.deathDays.length>0?u.deathDays.reduce((I,B)=>I+B,0)/u.deathDays.length:null,deathRate:E[c]>0?u.totalDeaths/E[c]:0})).sort((c,u)=>u.totalDeaths-c.totalDeaths),f=W.length>0?W[0].type:null,O=_.length>0?_[0].killerName:null;return{totalDeaths:y,totalGames:j,averageDeathsPerGame:V,deathsByType:W,killerStats:_,playerDeathStats:H,mostCommonDeathType:f,mostDeadlyKiller:O}}function Ee(x){return le(o=>Se(o,x))}function Ae(){return le(x=>xe(x))}function Oe(){const{navigateToGameDetails:x,navigationState:o,updateNavigationState:S}=ue(),[g,E]=C.useState(o.deathStatsSelectedCamp||"Tous les camps"),[y,j]=C.useState(5),{data:V}=Ae(),{data:A,isLoading:W,error:K}=Ee(g),{data:_}=pe(),{settings:s}=ye(),H=ve(),f=C.useMemo(()=>_?fe(_.GameStats):[],[_]),O=C.useMemo(()=>{const t={};f.forEach(a=>{a==="WEREWOLF_KILL"?t[a]=H.Loup:a==="VOTE"?t[a]="var(--chart-color-1)":a==="HUNTER_SHOT"?t[a]=H.Chasseur:a==="ZOMBIE_KILL"?t[a]=H.Vaudou:a==="ASSASSIN_POTION"||a==="HAUNTED_POTION"?t[a]=H.Alchimiste:a==="AVENGER_KILL"?t[a]="var(--chart-color-2)":a==="LOVER_DEATH"||a==="LOVER_WEREWOLF"?t[a]=H.Amoureux:a==="DISCONNECT"?t[a]="var(--chart-color-3)":a==="SURVIVOR"&&(t[a]="var(--chart-color-4)")});const d=["var(--accent-primary)","var(--accent-secondary)","var(--accent-tertiary)","#8884d8","#82ca9d","#ffc658","#ff7300","#00c49f","#ffbb28"];let n=0;return f.forEach(a=>{t[a]||(t[a]=d[n%d.length],n++)}),t},[f,H]),c=t=>{E(t),S({deathStatsSelectedCamp:t})},{totalKillsData:u,averageKillsData:I,highlightedPlayerAddedToTotal:B,highlightedPlayerAddedToAverage:Q,gamesWithKillers:se,totalEligibleForAverage:ne}=C.useMemo(()=>{if(!A)return{totalKillsData:[],averageKillsData:[],highlightedPlayerAddedToTotal:!1,highlightedPlayerAddedToAverage:!1,gamesWithKillers:0,totalEligibleForAverage:0};const t=A.killerStats.sort((l,p)=>p.kills-l.kills).slice(0,15),d=s.highlightedPlayer&&t.some(l=>l.killerName===s.highlightedPlayer),n=t.map(l=>{const p={name:l.killerName,value:l.kills,victims:l.victims.length,percentage:l.percentage,gamesPlayed:l.gamesPlayed,averageKillsPerGame:l.averageKillsPerGame,isHighlightedAddition:!1};return f.forEach(D=>{p[D]=l.killsByDeathType[D]||0}),p});let a=!1;if(s.highlightedPlayer&&!d){const l=A.killerStats.find(p=>p.killerName===s.highlightedPlayer);if(l){const p={name:l.killerName,value:l.kills,victims:l.victims.length,percentage:l.percentage,gamesPlayed:l.gamesPlayed,averageKillsPerGame:l.averageKillsPerGame,isHighlightedAddition:!0};f.forEach(D=>{p[D]=l.killsByDeathType[D]||0}),n.push(p),a=!0}}const T=A.killerStats.filter(l=>l.gamesPlayed>=y),P=T.sort((l,p)=>p.averageKillsPerGame-l.averageKillsPerGame).slice(0,15),L=s.highlightedPlayer&&P.some(l=>l.killerName===s.highlightedPlayer),m=P.map(l=>{const p={name:l.killerName,value:l.averageKillsPerGame,victims:l.victims.length,percentage:l.percentage,gamesPlayed:l.gamesPlayed,averageKillsPerGame:l.averageKillsPerGame,isHighlightedAddition:!1};return f.forEach(D=>{const k=l.killsByDeathType[D]||0;p[D]=l.gamesPlayed>0?k/l.gamesPlayed:0}),p});let R=!1;if(s.highlightedPlayer&&!L){const l=A.killerStats.find(p=>p.killerName===s.highlightedPlayer);if(l){const p={name:l.killerName,value:l.averageKillsPerGame,victims:l.victims.length,percentage:l.percentage,gamesPlayed:l.gamesPlayed,averageKillsPerGame:l.averageKillsPerGame,isHighlightedAddition:!0};f.forEach(D=>{const k=l.killsByDeathType[D]||0;p[D]=l.gamesPlayed>0?k/l.gamesPlayed:0}),m.push(p),R=!0}}return{totalKillsData:n,averageKillsData:m,highlightedPlayerAddedToTotal:a,highlightedPlayerAddedToAverage:R,gamesWithKillers:A.totalGames,totalEligibleForAverage:T.length}},[A,s.highlightedPlayer,y,f]),{totalDeathsData:ee,survivalRateData:te,highlightedPlayerAddedToDeaths:oe,highlightedPlayerAddedToSurvival:ce}=C.useMemo(()=>{if(!A||!_)return{totalDeathsData:[],survivalRateData:[],highlightedPlayerAddedToDeaths:!1,highlightedPlayerAddedToSurvival:!1};const t={},d=_.GameStats.filter(i=>!i.LegacyData||i.LegacyData.deathInformationFilled===!0);d.forEach(i=>{i.PlayerStats.forEach(h=>{const v=h.Username;(!g||g==="Tous les camps"||F(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!0})===g)&&(t[v]=(t[v]||0)+1)})});const n=A.playerDeathStats.sort((i,h)=>h.totalDeaths-i.totalDeaths).slice(0,15),a=s.highlightedPlayer&&n.some(i=>i.playerName===s.highlightedPlayer),T=n.map(i=>{const h=t[i.playerName]||0,v=h>0?(h-i.totalDeaths)/h*100:0,N={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:h,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!1};return f.forEach(b=>{N[b]=i.deathsByType[b]||0}),N});let P=!1;if(s.highlightedPlayer&&!a){const i=A.playerDeathStats.find(h=>h.playerName===s.highlightedPlayer);if(i){const h=t[i.playerName]||0,v=h>0?(h-i.totalDeaths)/h*100:0,N={name:i.playerName,value:i.totalDeaths,totalDeaths:i.totalDeaths,gamesPlayed:h,deathRate:i.deathRate,survivalRate:v,isHighlightedAddition:!0};f.forEach(b=>{N[b]=i.deathsByType[b]||0}),T.push(N),P=!0}}const L={},m={};d.forEach(i=>{i.PlayerStats.forEach(h=>{const v=h.Username;if((!g||g==="Tous les camps"||F(h.MainRoleInitial,{regroupLovers:!0,regroupVillagers:!0,regroupTraitor:!0})===g)&&h.DeathType&&h.DeathType!=="N/A"){m[v]||(m[v]={totalDeaths:0,deathsByType:{}}),m[v].totalDeaths++;const b=X(h.DeathType);m[v].deathsByType[b]=(m[v].deathsByType[b]||0)+1}})}),Object.entries(t).forEach(([i,h])=>{if(h>=y){const v=m[i],N=v?v.totalDeaths:0,b=v?v.deathsByType:{},Y=h>0?(h-N)/h*100:0,J=h>0?N/h:0;L[i]={playerName:i,totalDeaths:N,deathsByType:b,gamesPlayed:h,survivalRate:Y,deathRate:J}}});const l=Object.values(L).sort((i,h)=>h.survivalRate-i.survivalRate).slice(0,15),p=s.highlightedPlayer&&l.some(i=>i.playerName===s.highlightedPlayer),D=l.map(i=>{const h={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!1};return f.forEach(v=>{const N=i.deathsByType[v]||0;h[v]=i.gamesPlayed>0?N/i.gamesPlayed*100:0}),h});let k=!1;if(s.highlightedPlayer&&!p){let i=L[s.highlightedPlayer];if(!i){const h=t[s.highlightedPlayer]||0,v=m[s.highlightedPlayer],N=v?v.totalDeaths:0,b=v?v.deathsByType:{},Y=h>0?(h-N)/h*100:0,J=h>0?N/h:0;i={playerName:s.highlightedPlayer,totalDeaths:N,deathsByType:b,gamesPlayed:h,survivalRate:Y,deathRate:J}}if(i){const h={name:i.playerName,value:i.survivalRate,totalDeaths:i.totalDeaths,gamesPlayed:i.gamesPlayed,deathRate:i.deathRate,survivalRate:i.survivalRate,isHighlightedAddition:!0};f.forEach(v=>{const N=i.deathsByType[v]||0;h[v]=i.gamesPlayed>0?N/i.gamesPlayed*100:0}),D.push(h),k=!0}}return{totalDeathsData:T,survivalRateData:D,highlightedPlayerAddedToDeaths:P,highlightedPlayerAddedToSurvival:k}},[A,_,s.highlightedPlayer,y,f,g]);if(W)return e.jsx("div",{className:"donnees-attente",children:"Chargement des statistiques de mort..."});if(K)return e.jsxs("div",{className:"donnees-probleme",children:["Erreur: ",K]});if(!A)return e.jsx("div",{className:"donnees-manquantes",children:"Aucune donnée de mort disponible"});const he=({active:t,payload:d,label:n})=>{if(t&&d&&d.length){const a=d[0].payload,T=a.isHighlightedAddition,P=s.highlightedPlayer===a.name,L=f.reduce((m,R)=>m+(a[R]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:P?"var(--accent-primary)":"var(--text-primary)"},children:[n,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Victimes totales:"})," ",L]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill:"}),f.map(m=>{const R=a[m]||0;return R===0?null:e.jsxs("p",{style:{color:O[m],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:O[m],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(m),":"]})," ",R]},m)})]}),T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),P&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},de=({active:t,payload:d,label:n})=>{if(t&&d&&d.length){const a=d[0].payload,T=a.isHighlightedAddition,P=s.highlightedPlayer===a.name,L=a.gamesPlayed>=y,m=A?.killerStats.find(p=>p.killerName===a.name),R=f.reduce((p,D)=>p+(a[D]||0),0),l=m?m.kills:Math.round(R*a.gamesPlayed);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:P?"var(--accent-primary)":"var(--text-primary)"},children:[n,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Moyenne par partie:"})," ",R.toFixed(2)," (",l," kills /",a.gamesPlayed," games)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de kill (moyenne):"}),f.map(p=>{const D=a[p]||0;if(D===0)return null;const k=m?m.killsByDeathType[p]||0:Math.round(D*a.gamesPlayed);return e.jsxs("p",{style:{color:O[p],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:O[p],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ie(p),":"]})," ",D.toFixed(2)," (",k," kills /",a.gamesPlayed," games)"]},p)})]}),T&&!L&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",y," parties)"]}),T&&L&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),P&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},me=({active:t,payload:d,label:n})=>{if(t&&d&&d.length){const a=d[0].payload,T=a.isHighlightedAddition,P=s.highlightedPlayer===a.name,L=f.reduce((m,R)=>m+(a[R]||0),0);return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:P?"var(--accent-primary)":"var(--text-primary)"},children:[n,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",L]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",a.survivalRate.toFixed(1),"%"]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort:"}),f.map(m=>{const R=a[m]||0;return R===0?null:e.jsxs("p",{style:{color:O[m],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:O[m],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ae(m),":"]})," ",R]},m)})]}),T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection personnelle"}),P&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null},ge=({active:t,payload:d,label:n})=>{if(t&&d&&d.length){const a=d[0].payload,T=a.isHighlightedAddition,P=s.highlightedPlayer===a.name,L=a.gamesPlayed>=y;return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",color:"var(--text-primary)",fontSize:"0.9rem"},children:[e.jsxs("p",{style:{fontWeight:"bold",marginBottom:"8px",color:P?"var(--accent-primary)":"var(--text-primary)"},children:[n,T&&e.jsx("span",{style:{color:"var(--accent-primary)",fontSize:"0.8rem",fontStyle:"italic",marginLeft:"4px"},children:" (🎯)"})]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Taux de survie:"})," ",a.survivalRate.toFixed(1),"% (",a.gamesPlayed-a.totalDeaths," survies / ",a.gamesPlayed," parties)"]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Morts totales:"})," ",a.totalDeaths]}),e.jsxs("p",{style:{color:"var(--text-primary)",margin:"4px 0"},children:[e.jsx("strong",{children:"Parties jouées:"})," ",a.gamesPlayed]}),e.jsxs("div",{style:{margin:"8px 0",borderTop:"1px solid var(--border-color)",paddingTop:"8px"},children:[e.jsx("p",{style:{fontWeight:"bold",fontSize:"0.85rem",marginBottom:"4px"},children:"Répartition par type de mort (taux %):"}),f.map(m=>{const R=a[m]||0;return R===0?null:e.jsxs("p",{style:{color:O[m],margin:"2px 0",fontSize:"0.8rem"},children:[e.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:O[m],marginRight:"6px",verticalAlign:"middle"}}),e.jsxs("strong",{children:[ae(m),":"]})," ",R.toFixed(1),"%"]},m)})]}),T&&!L&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:["🎯 Affiché via sélection (< ",y," parties)"]}),T&&L&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Affiché via sélection (hors top 15)"}),P&&!T&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--accent-primary)",marginTop:"0.25rem",fontStyle:"italic"},children:"🎯 Joueur sélectionné"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",marginTop:"0.5rem",fontWeight:"bold",textAlign:"center",animation:"pulse 1.5s infinite"},children:"🖱️ Cliquez pour voir les parties"})]})}return null};return e.jsxs("div",{className:"lycans-players-stats",children:[e.jsx("h2",{children:"Statistiques de Tueurs"}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"camp-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem",fontWeight:"bold"},children:"Camp du tueur :"}),e.jsxs("select",{id:"camp-select",value:g,onChange:t=>c(t.target.value),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.5rem",fontSize:"0.9rem",minWidth:"150px"},children:[e.jsx("option",{value:"Tous les camps",children:"Tous les camps"}),V?.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"lycans-resume-conteneur",style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Total des morts"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-secondary)"},children:A.totalDeaths})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Tueurs identifiés"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--chart-color-1)"},children:A.killerStats.length})]}),e.jsxs("div",{className:"lycans-stat-carte",children:[e.jsx("h3",{children:"Nombre de parties enregistrées"}),e.jsx("div",{className:"lycans-valeur-principale",style:{color:"var(--accent-primary)"},children:se})]})]}),e.jsxs("div",{className:"lycans-graphiques-groupe",children:[e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Top Tueurs (Total)"}),B&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',s.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(M,{title:"Top Tueurs (Total)",children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:u,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(G,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:n})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:s.highlightedPlayer===n.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===n.value?14:13,fontWeight:s.highlightedPlayer===n.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:n.value})}),e.jsx(w,{label:{value:"Nombre total de victimes",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:e.jsx(he,{})}),f.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"kills",fill:O[t],onClick:d=>{const n={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};g!=="Tous les camps"&&(n.campFilter={selectedCamp:g,campFilterMode:"all-assignments"}),x(n)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,u.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus actifs (total)"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Top Tueurs (Moyenne par Partie)"}),Q&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',s.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-average-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-average-select",value:y,onChange:t=>j(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(M,{title:"Top Tueurs (Moyenne par Partie)",children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:I,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(G,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:n})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:s.highlightedPlayer===n.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===n.value?14:13,fontWeight:s.highlightedPlayer===n.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:n.value})}),e.jsx(w,{label:{value:"Moyenne de victimes par partie",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:e.jsx(de,{})}),f.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"averageKills",fill:O[t],onClick:d=>{const n={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};g!=="Tous les camps"&&(n.campFilter={selectedCamp:g,campFilterMode:"all-assignments"}),x(n)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,I.filter(t=>!t.isHighlightedAddition).length)," des tueurs les plus efficaces (sur ",ne," ayant au moins ",y," partie",y>1?"s":"",")"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Top Victimes"}),oe&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',s.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsx(M,{title:"Top Victimes",children:e.jsx("div",{style:{height:440},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:ee,margin:{top:60,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(G,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:n})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:s.highlightedPlayer===n.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===n.value?14:13,fontWeight:s.highlightedPlayer===n.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:n.value})}),e.jsx(w,{label:{value:"Nombre total de morts",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:e.jsx(me,{})}),f.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"deaths",fill:O[t],onClick:d=>{const n={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};g!=="Tous les camps"&&(n.campFilter={selectedCamp:g,campFilterMode:"all-assignments"}),x(n)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,ee.filter(t=>!t.isHighlightedAddition).length)," des joueurs les plus souvent morts"]})]}),e.jsxs("div",{className:"lycans-graphique-section",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Meilleurs Survivants"}),ce&&s.highlightedPlayer&&e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--accent-primary)",fontStyle:"italic",marginTop:"0.25rem",marginBottom:"0.5rem"},children:['🎯 "',s.highlightedPlayer,'" affiché en plus du top 15']})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("label",{htmlFor:"min-games-survival-select",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Min. parties:"}),e.jsx("select",{id:"min-games-survival-select",value:y,onChange:t=>j(Number(t.target.value)),style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:re.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(M,{title:"Meilleurs Survivants",children:e.jsx("div",{style:{height:400},children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(z,{data:te,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(G,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,tick:({x:t,y:d,payload:n})=>e.jsx("text",{x:t,y:d,dy:16,textAnchor:"end",fill:s.highlightedPlayer===n.value?"var(--accent-primary)":"var(--text-secondary)",fontSize:s.highlightedPlayer===n.value?14:13,fontWeight:s.highlightedPlayer===n.value?"bold":"italic",transform:`rotate(-45 ${t} ${d})`,children:n.value})}),e.jsx(w,{label:{value:"Taux de mort (%)",angle:270,position:"left",style:{textAnchor:"middle"}}}),e.jsx($,{content:e.jsx(ge,{})}),f.map(t=>e.jsx(q,{dataKey:t,name:t,stackId:"survivalRate",fill:O[t],onClick:d=>{const n={selectedPlayer:d?.name,fromComponent:"Statistiques de Mort"};g!=="Tous les camps"&&(n.campFilter={selectedCamp:g,campFilterMode:"all-assignments"}),x(n)}},t))]})})})}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"0.5rem"},children:["Top ",Math.min(15,te.filter(t=>!t.isHighlightedAddition).length)," des joueurs avec le plus haut taux de survie (ayant au moins ",y," partie",y>1?"s":"",")"]})]})]}),e.jsx("div",{className:"lycans-section-description",style:{marginTop:"1.5rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note : "}),"Données en cours de récupération (données partielles)."]})})]})}export{Oe as DeathStatisticsChart};
